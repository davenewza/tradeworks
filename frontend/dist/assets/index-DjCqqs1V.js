(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Kn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const X={},zt=[],st=()=>{},cc=()=>!1,Pr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),zn=e=>e.startsWith("onUpdate:"),xe=Object.assign,Gn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},uc=Object.prototype.hasOwnProperty,W=(e,t)=>uc.call(e,t),B=Array.isArray,Gt=e=>Cr(e)==="[object Map]",ca=e=>Cr(e)==="[object Set]",j=e=>typeof e=="function",le=e=>typeof e=="string",St=e=>typeof e=="symbol",re=e=>e!==null&&typeof e=="object",ua=e=>(re(e)||j(e))&&j(e.then)&&j(e.catch),da=Object.prototype.toString,Cr=e=>da.call(e),dc=e=>Cr(e).slice(8,-1),fa=e=>Cr(e)==="[object Object]",Yn=e=>le(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,ys=Kn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ir=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},fc=/-(\w)/g,Be=Ir(e=>e.replace(fc,(t,s)=>s?s.toUpperCase():"")),hc=/\B([A-Z])/g,Et=Ir(e=>e.replace(hc,"-$1").toLowerCase()),Ar=Ir(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wr=Ir(e=>e?`on${Ar(e)}`:""),Ot=(e,t)=>!Object.is(e,t),sr=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},pn=(e,t,s,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:s})},mn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Oo;const Tr=()=>Oo||(Oo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Fs(e){if(B(e)){const t={};for(let s=0;s<e.length;s++){const r=e[s],n=le(r)?yc(r):Fs(r);if(n)for(const o in n)t[o]=n[o]}return t}else if(le(e)||re(e))return e}const pc=/;(?![^(]*\))/g,mc=/:([^]+)/,gc=/\/\*[^]*?\*\//g;function yc(e){const t={};return e.replace(gc,"").split(pc).forEach(s=>{if(s){const r=s.split(mc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ae(e){let t="";if(le(e))t=e;else if(B(e))for(let s=0;s<e.length;s++){const r=ae(e[s]);r&&(t+=r+" ")}else if(re(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const _c="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bc=Kn(_c);function ha(e){return!!e||e===""}const pa=e=>!!(e&&e.__v_isRef===!0),_=e=>le(e)?e:e==null?"":B(e)||re(e)&&(e.toString===da||!j(e.toString))?pa(e)?_(e.value):JSON.stringify(e,ma,2):String(e),ma=(e,t)=>pa(t)?ma(e,t.value):Gt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[r,n],o)=>(s[Qr(r,o)+" =>"]=n,s),{})}:ca(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Qr(s))}:St(t)?Qr(t):re(t)&&!B(t)&&!fa(t)?String(t):t,Qr=(e,t="")=>{var s;return St(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ke;class vc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ke,!t&&ke&&(this.index=(ke.scopes||(ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ke;try{return ke=this,t()}finally{ke=s}}}on(){++this._on===1&&(this.prevScope=ke,ke=this)}off(){this._on>0&&--this._on===0&&(ke=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function xc(){return ke}let te;const Kr=new WeakSet;class ga{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ke&&ke.active&&ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Kr.has(this)&&(Kr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_a(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Fo(this),ba(this);const t=te,s=Ve;te=this,Ve=!0;try{return this.fn()}finally{va(this),te=t,Ve=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Zn(t);this.deps=this.depsTail=void 0,Fo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Kr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gn(this)&&this.run()}get dirty(){return gn(this)}}let ya=0,_s,bs;function _a(e,t=!1){if(e.flags|=8,t){e.next=bs,bs=e;return}e.next=_s,_s=e}function Jn(){ya++}function Xn(){if(--ya>0)return;if(bs){let t=bs;for(bs=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;_s;){let t=_s;for(_s=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=s}}if(e)throw e}function ba(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function va(e){let t,s=e.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),Zn(r),wc(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=s}function gn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(xa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function xa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Cs)||(e.globalVersion=Cs,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!gn(e))))return;e.flags|=2;const t=e.dep,s=te,r=Ve;te=e,Ve=!0;try{ba(e);const n=e.fn(e._value);(t.version===0||Ot(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{te=s,Ve=r,va(e),e.flags&=-3}}function Zn(e,t=!1){const{dep:s,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),s.subs===e&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)Zn(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function wc(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Ve=!0;const wa=[];function ft(){wa.push(Ve),Ve=!1}function ht(){const e=wa.pop();Ve=e===void 0?!0:e}function Fo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=te;te=void 0;try{t()}finally{te=s}}}let Cs=0;class Sc{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Sa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!te||!Ve||te===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==te)s=this.activeLink=new Sc(te,this),te.deps?(s.prevDep=te.depsTail,te.depsTail.nextDep=s,te.depsTail=s):te.deps=te.depsTail=s,Ea(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=te.depsTail,s.nextDep=void 0,te.depsTail.nextDep=s,te.depsTail=s,te.deps===s&&(te.deps=r)}return s}trigger(t){this.version++,Cs++,this.notify(t)}notify(t){Jn();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Xn()}}}function Ea(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ea(r)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const yn=new WeakMap,Ft=Symbol(""),_n=Symbol(""),Is=Symbol("");function pe(e,t,s){if(Ve&&te){let r=yn.get(e);r||yn.set(e,r=new Map);let n=r.get(s);n||(r.set(s,n=new Sa),n.map=r,n.key=s),n.track()}}function ct(e,t,s,r,n,o){const i=yn.get(e);if(!i){Cs++;return}const a=l=>{l&&l.trigger()};if(Jn(),t==="clear")i.forEach(a);else{const l=B(e),d=l&&Yn(s);if(l&&s==="length"){const u=Number(r);i.forEach((h,b)=>{(b==="length"||b===Is||!St(b)&&b>=u)&&a(h)})}else switch((s!==void 0||i.has(void 0))&&a(i.get(s)),d&&a(i.get(Is)),t){case"add":l?d&&a(i.get("length")):(a(i.get(Ft)),Gt(e)&&a(i.get(_n)));break;case"delete":l||(a(i.get(Ft)),Gt(e)&&a(i.get(_n)));break;case"set":Gt(e)&&a(i.get(Ft));break}}Xn()}function Wt(e){const t=G(e);return t===e?t:(pe(t,"iterate",Is),$e(e)?t:t.map(ye))}function Dr(e){return pe(e=G(e),"iterate",Is),e}const Ec={__proto__:null,[Symbol.iterator](){return zr(this,Symbol.iterator,ye)},concat(...e){return Wt(this).concat(...e.map(t=>B(t)?Wt(t):t))},entries(){return zr(this,"entries",e=>(e[1]=ye(e[1]),e))},every(e,t){return it(this,"every",e,t,void 0,arguments)},filter(e,t){return it(this,"filter",e,t,s=>s.map(ye),arguments)},find(e,t){return it(this,"find",e,t,ye,arguments)},findIndex(e,t){return it(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return it(this,"findLast",e,t,ye,arguments)},findLastIndex(e,t){return it(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return it(this,"forEach",e,t,void 0,arguments)},includes(...e){return Gr(this,"includes",e)},indexOf(...e){return Gr(this,"indexOf",e)},join(e){return Wt(this).join(e)},lastIndexOf(...e){return Gr(this,"lastIndexOf",e)},map(e,t){return it(this,"map",e,t,void 0,arguments)},pop(){return fs(this,"pop")},push(...e){return fs(this,"push",e)},reduce(e,...t){return qo(this,"reduce",e,t)},reduceRight(e,...t){return qo(this,"reduceRight",e,t)},shift(){return fs(this,"shift")},some(e,t){return it(this,"some",e,t,void 0,arguments)},splice(...e){return fs(this,"splice",e)},toReversed(){return Wt(this).toReversed()},toSorted(e){return Wt(this).toSorted(e)},toSpliced(...e){return Wt(this).toSpliced(...e)},unshift(...e){return fs(this,"unshift",e)},values(){return zr(this,"values",ye)}};function zr(e,t,s){const r=Dr(e),n=r[t]();return r!==e&&!$e(e)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.value&&(o.value=s(o.value)),o}),n}const kc=Array.prototype;function it(e,t,s,r,n,o){const i=Dr(e),a=i!==e&&!$e(e),l=i[t];if(l!==kc[t]){const h=l.apply(e,o);return a?ye(h):h}let d=s;i!==e&&(a?d=function(h,b){return s.call(this,ye(h),b,e)}:s.length>2&&(d=function(h,b){return s.call(this,h,b,e)}));const u=l.call(i,d,r);return a&&n?n(u):u}function qo(e,t,s,r){const n=Dr(e);let o=s;return n!==e&&($e(e)?s.length>3&&(o=function(i,a,l){return s.call(this,i,a,l,e)}):o=function(i,a,l){return s.call(this,i,ye(a),l,e)}),n[t](o,...r)}function Gr(e,t,s){const r=G(e);pe(r,"iterate",Is);const n=r[t](...s);return(n===-1||n===!1)&&ro(s[0])?(s[0]=G(s[0]),r[t](...s)):n}function fs(e,t,s=[]){ft(),Jn();const r=G(e)[t].apply(e,s);return Xn(),ht(),r}const Pc=Kn("__proto__,__v_isRef,__isVue"),ka=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(St));function Cc(e){St(e)||(e=String(e));const t=G(this);return pe(t,"has",e),t.hasOwnProperty(e)}class Pa{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,r){if(s==="__v_skip")return t.__v_skip;const n=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return o;if(s==="__v_raw")return r===(n?o?qc:Ta:o?Aa:Ia).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const i=B(t);if(!n){let l;if(i&&(l=Ec[s]))return l;if(s==="hasOwnProperty")return Cc}const a=Reflect.get(t,s,ve(t)?t:r);return(St(s)?ka.has(s):Pc(s))||(n||pe(t,"get",s),o)?a:ve(a)?i&&Yn(s)?a:a.value:re(a)?n?Da(a):to(a):a}}class Ca extends Pa{constructor(t=!1){super(!1,t)}set(t,s,r,n){let o=t[s];if(!this._isShallow){const l=Mt(o);if(!$e(r)&&!Mt(r)&&(o=G(o),r=G(r)),!B(t)&&ve(o)&&!ve(r))return l?!1:(o.value=r,!0)}const i=B(t)&&Yn(s)?Number(s)<t.length:W(t,s),a=Reflect.set(t,s,r,ve(t)?t:n);return t===G(n)&&(i?Ot(r,o)&&ct(t,"set",s,r):ct(t,"add",s,r)),a}deleteProperty(t,s){const r=W(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&r&&ct(t,"delete",s,void 0),n}has(t,s){const r=Reflect.has(t,s);return(!St(s)||!ka.has(s))&&pe(t,"has",s),r}ownKeys(t){return pe(t,"iterate",B(t)?"length":Ft),Reflect.ownKeys(t)}}class Ic extends Pa{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Ac=new Ca,Tc=new Ic,Dc=new Ca(!0);const bn=e=>e,Ks=e=>Reflect.getPrototypeOf(e);function Rc(e,t,s){return function(...r){const n=this.__v_raw,o=G(n),i=Gt(o),a=e==="entries"||e===Symbol.iterator&&i,l=e==="keys"&&i,d=n[e](...r),u=s?bn:t?dr:ye;return!t&&pe(o,"iterate",l?_n:Ft),{next(){const{value:h,done:b}=d.next();return b?{value:h,done:b}:{value:a?[u(h[0]),u(h[1])]:u(h),done:b}},[Symbol.iterator](){return this}}}}function zs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Lc(e,t){const s={get(n){const o=this.__v_raw,i=G(o),a=G(n);e||(Ot(n,a)&&pe(i,"get",n),pe(i,"get",a));const{has:l}=Ks(i),d=t?bn:e?dr:ye;if(l.call(i,n))return d(o.get(n));if(l.call(i,a))return d(o.get(a));o!==i&&o.get(n)},get size(){const n=this.__v_raw;return!e&&pe(G(n),"iterate",Ft),Reflect.get(n,"size",n)},has(n){const o=this.__v_raw,i=G(o),a=G(n);return e||(Ot(n,a)&&pe(i,"has",n),pe(i,"has",a)),n===a?o.has(n):o.has(n)||o.has(a)},forEach(n,o){const i=this,a=i.__v_raw,l=G(a),d=t?bn:e?dr:ye;return!e&&pe(l,"iterate",Ft),a.forEach((u,h)=>n.call(o,d(u),d(h),i))}};return xe(s,e?{add:zs("add"),set:zs("set"),delete:zs("delete"),clear:zs("clear")}:{add(n){!t&&!$e(n)&&!Mt(n)&&(n=G(n));const o=G(this);return Ks(o).has.call(o,n)||(o.add(n),ct(o,"add",n,n)),this},set(n,o){!t&&!$e(o)&&!Mt(o)&&(o=G(o));const i=G(this),{has:a,get:l}=Ks(i);let d=a.call(i,n);d||(n=G(n),d=a.call(i,n));const u=l.call(i,n);return i.set(n,o),d?Ot(o,u)&&ct(i,"set",n,o):ct(i,"add",n,o),this},delete(n){const o=G(this),{has:i,get:a}=Ks(o);let l=i.call(o,n);l||(n=G(n),l=i.call(o,n)),a&&a.call(o,n);const d=o.delete(n);return l&&ct(o,"delete",n,void 0),d},clear(){const n=G(this),o=n.size!==0,i=n.clear();return o&&ct(n,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Rc(n,e,t)}),s}function eo(e,t){const s=Lc(e,t);return(r,n,o)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(W(s,n)&&n in r?s:r,n,o)}const Nc={get:eo(!1,!1)},Oc={get:eo(!1,!0)},Fc={get:eo(!0,!1)};const Ia=new WeakMap,Aa=new WeakMap,Ta=new WeakMap,qc=new WeakMap;function Mc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bc(e){return e.__v_skip||!Object.isExtensible(e)?0:Mc(dc(e))}function to(e){return Mt(e)?e:so(e,!1,Ac,Nc,Ia)}function jc(e){return so(e,!1,Dc,Oc,Aa)}function Da(e){return so(e,!0,Tc,Fc,Ta)}function so(e,t,s,r,n){if(!re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Bc(e);if(o===0)return e;const i=n.get(e);if(i)return i;const a=new Proxy(e,o===2?r:s);return n.set(e,a),a}function Yt(e){return Mt(e)?Yt(e.__v_raw):!!(e&&e.__v_isReactive)}function Mt(e){return!!(e&&e.__v_isReadonly)}function $e(e){return!!(e&&e.__v_isShallow)}function ro(e){return e?!!e.__v_raw:!1}function G(e){const t=e&&e.__v_raw;return t?G(t):e}function Uc(e){return!W(e,"__v_skip")&&Object.isExtensible(e)&&pn(e,"__v_skip",!0),e}const ye=e=>re(e)?to(e):e,dr=e=>re(e)?Da(e):e;function ve(e){return e?e.__v_isRef===!0:!1}function Hc(e){return ve(e)?e.value:e}const Vc={get:(e,t,s)=>t==="__v_raw"?e:Hc(Reflect.get(e,t,s)),set:(e,t,s,r)=>{const n=e[t];return ve(n)&&!ve(s)?(n.value=s,!0):Reflect.set(e,t,s,r)}};function Ra(e){return Yt(e)?e:new Proxy(e,Vc)}class $c{constructor(t,s,r){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Sa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Cs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&te!==this)return _a(this,!0),!0}get value(){const t=this.dep.track();return xa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Wc(e,t,s=!1){let r,n;return j(e)?r=e:(r=e.get,n=e.set),new $c(r,n,s)}const Gs={},fr=new WeakMap;let Rt;function Qc(e,t=!1,s=Rt){if(s){let r=fr.get(s);r||fr.set(s,r=[]),r.push(e)}}function Kc(e,t,s=X){const{immediate:r,deep:n,once:o,scheduler:i,augmentJob:a,call:l}=s,d=q=>n?q:$e(q)||n===!1||n===0?ut(q,1):ut(q);let u,h,b,y,D=!1,F=!1;if(ve(e)?(h=()=>e.value,D=$e(e)):Yt(e)?(h=()=>d(e),D=!0):B(e)?(F=!0,D=e.some(q=>Yt(q)||$e(q)),h=()=>e.map(q=>{if(ve(q))return q.value;if(Yt(q))return d(q);if(j(q))return l?l(q,2):q()})):j(e)?t?h=l?()=>l(e,2):e:h=()=>{if(b){ft();try{b()}finally{ht()}}const q=Rt;Rt=u;try{return l?l(e,3,[y]):e(y)}finally{Rt=q}}:h=st,t&&n){const q=h,ne=n===!0?1/0:n;h=()=>ut(q(),ne)}const V=xc(),U=()=>{u.stop(),V&&V.active&&Gn(V.effects,u)};if(o&&t){const q=t;t=(...ne)=>{q(...ne),U()}}let Q=F?new Array(e.length).fill(Gs):Gs;const z=q=>{if(!(!(u.flags&1)||!u.dirty&&!q))if(t){const ne=u.run();if(n||D||(F?ne.some((Ue,Ie)=>Ot(Ue,Q[Ie])):Ot(ne,Q))){b&&b();const Ue=Rt;Rt=u;try{const Ie=[ne,Q===Gs?void 0:F&&Q[0]===Gs?[]:Q,y];Q=ne,l?l(t,3,Ie):t(...Ie)}finally{Rt=Ue}}}else u.run()};return a&&a(z),u=new ga(h),u.scheduler=i?()=>i(z,!1):z,y=q=>Qc(q,!1,u),b=u.onStop=()=>{const q=fr.get(u);if(q){if(l)l(q,4);else for(const ne of q)ne();fr.delete(u)}},t?r?z(!0):Q=u.run():i?i(z.bind(null,!0),!0):u.run(),U.pause=u.pause.bind(u),U.resume=u.resume.bind(u),U.stop=U,U}function ut(e,t=1/0,s){if(t<=0||!re(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,ve(e))ut(e.value,t,s);else if(B(e))for(let r=0;r<e.length;r++)ut(e[r],t,s);else if(ca(e)||Gt(e))e.forEach(r=>{ut(r,t,s)});else if(fa(e)){for(const r in e)ut(e[r],t,s);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&ut(e[r],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qs(e,t,s,r){try{return r?e(...r):e()}catch(n){Rr(n,t,s)}}function rt(e,t,s,r){if(j(e)){const n=qs(e,t,s,r);return n&&ua(n)&&n.catch(o=>{Rr(o,t,s)}),n}if(B(e)){const n=[];for(let o=0;o<e.length;o++)n.push(rt(e[o],t,s,r));return n}}function Rr(e,t,s,r=!0){const n=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||X;if(t){let a=t.parent;const l=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,l,d)===!1)return}a=a.parent}if(o){ft(),qs(o,null,10,[e,l,d]),ht();return}}zc(e,s,n,r,i)}function zc(e,t,s,r=!0,n=!1){if(n)throw e;console.error(e)}const _e=[];let et=-1;const Jt=[];let gt=null,Qt=0;const La=Promise.resolve();let hr=null;function Gc(e){const t=hr||La;return e?t.then(this?e.bind(this):e):t}function Yc(e){let t=et+1,s=_e.length;for(;t<s;){const r=t+s>>>1,n=_e[r],o=As(n);o<e||o===e&&n.flags&2?t=r+1:s=r}return t}function no(e){if(!(e.flags&1)){const t=As(e),s=_e[_e.length-1];!s||!(e.flags&2)&&t>=As(s)?_e.push(e):_e.splice(Yc(t),0,e),e.flags|=1,Na()}}function Na(){hr||(hr=La.then(Fa))}function Jc(e){B(e)?Jt.push(...e):gt&&e.id===-1?gt.splice(Qt+1,0,e):e.flags&1||(Jt.push(e),e.flags|=1),Na()}function Mo(e,t,s=et+1){for(;s<_e.length;s++){const r=_e[s];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;_e.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Oa(e){if(Jt.length){const t=[...new Set(Jt)].sort((s,r)=>As(s)-As(r));if(Jt.length=0,gt){gt.push(...t);return}for(gt=t,Qt=0;Qt<gt.length;Qt++){const s=gt[Qt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}gt=null,Qt=0}}const As=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Fa(e){try{for(et=0;et<_e.length;et++){const t=_e[et];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),qs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;et<_e.length;et++){const t=_e[et];t&&(t.flags&=-2)}et=-1,_e.length=0,Oa(),hr=null,(_e.length||Jt.length)&&Fa()}}let Re=null,qa=null;function pr(e){const t=Re;return Re=e,qa=e&&e.type.__scopeId||null,t}function Xc(e,t=Re,s){if(!t||e._n)return e;const r=(...n)=>{r._d&&zo(-1);const o=pr(t);let i;try{i=e(...n)}finally{pr(o),r._d&&zo(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function ue(e,t){if(Re===null)return e;const s=Fr(Re),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[o,i,a,l=X]=t[n];o&&(j(o)&&(o={mounted:o,updated:o}),o.deep&&ut(i),r.push({dir:o,instance:s,value:i,oldValue:void 0,arg:a,modifiers:l}))}return e}function Tt(e,t,s,r){const n=e.dirs,o=t&&t.dirs;for(let i=0;i<n.length;i++){const a=n[i];o&&(a.oldValue=o[i].value);let l=a.dir[r];l&&(ft(),rt(l,s,8,[e.el,a,e,t]),ht())}}const Zc=Symbol("_vte"),eu=e=>e.__isTeleport;function oo(e,t){e.shapeFlag&6&&e.component?(e.transition=t,oo(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ma(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function vs(e,t,s,r,n=!1){if(B(e)){e.forEach((D,F)=>vs(D,t&&(B(t)?t[F]:t),s,r,n));return}if(xs(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&vs(e,t,s,r.component.subTree);return}const o=r.shapeFlag&4?Fr(r.component):r.el,i=n?null:o,{i:a,r:l}=e,d=t&&t.r,u=a.refs===X?a.refs={}:a.refs,h=a.setupState,b=G(h),y=h===X?()=>!1:D=>W(b,D);if(d!=null&&d!==l&&(le(d)?(u[d]=null,y(d)&&(h[d]=null)):ve(d)&&(d.value=null)),j(l))qs(l,a,12,[i,u]);else{const D=le(l),F=ve(l);if(D||F){const V=()=>{if(e.f){const U=D?y(l)?h[l]:u[l]:l.value;n?B(U)&&Gn(U,o):B(U)?U.includes(o)||U.push(o):D?(u[l]=[o],y(l)&&(h[l]=u[l])):(l.value=[o],e.k&&(u[e.k]=l.value))}else D?(u[l]=i,y(l)&&(h[l]=i)):F&&(l.value=i,e.k&&(u[e.k]=i))};i?(V.id=-1,Te(V,s)):V()}}}Tr().requestIdleCallback;Tr().cancelIdleCallback;const xs=e=>!!e.type.__asyncLoader,Ba=e=>e.type.__isKeepAlive;function tu(e,t){ja(e,"a",t)}function su(e,t){ja(e,"da",t)}function ja(e,t,s=me){const r=e.__wdc||(e.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Lr(t,r,s),s){let n=s.parent;for(;n&&n.parent;)Ba(n.parent.vnode)&&ru(r,t,s,n),n=n.parent}}function ru(e,t,s,r){const n=Lr(t,e,r,!0);Ua(()=>{Gn(r[t],n)},s)}function Lr(e,t,s=me,r=!1){if(s){const n=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...i)=>{ft();const a=Ms(s),l=rt(t,s,e,i);return a(),ht(),l});return r?n.unshift(o):n.push(o),o}}const pt=e=>(t,s=me)=>{(!Ds||e==="sp")&&Lr(e,(...r)=>t(...r),s)},nu=pt("bm"),ou=pt("m"),iu=pt("bu"),au=pt("u"),lu=pt("bum"),Ua=pt("um"),cu=pt("sp"),uu=pt("rtg"),du=pt("rtc");function fu(e,t=me){Lr("ec",e,t)}const hu="components";function Nt(e,t){return mu(hu,e,!0,t)||e}const pu=Symbol.for("v-ndc");function mu(e,t,s=!0,r=!1){const n=Re||me;if(n){const o=n.type;{const a=rd(o,!1);if(a&&(a===t||a===Be(t)||a===Ar(Be(t))))return o}const i=Bo(n[e]||o[e],t)||Bo(n.appContext[e],t);return!i&&r?o:i}}function Bo(e,t){return e&&(e[t]||e[Be(t)]||e[Ar(Be(t))])}function Fe(e,t,s,r){let n;const o=s,i=B(e);if(i||le(e)){const a=i&&Yt(e);let l=!1,d=!1;a&&(l=!$e(e),d=Mt(e),e=Dr(e)),n=new Array(e.length);for(let u=0,h=e.length;u<h;u++)n[u]=t(l?d?dr(ye(e[u])):ye(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,o)}else if(re(e))if(e[Symbol.iterator])n=Array.from(e,(a,l)=>t(a,l,void 0,o));else{const a=Object.keys(e);n=new Array(a.length);for(let l=0,d=a.length;l<d;l++){const u=a[l];n[l]=t(e[u],u,l,o)}}else n=[];return n}const vn=e=>e?ll(e)?Fr(e):vn(e.parent):null,ws=xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vn(e.parent),$root:e=>vn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Va(e),$forceUpdate:e=>e.f||(e.f=()=>{no(e.update)}),$nextTick:e=>e.n||(e.n=Gc.bind(e.proxy)),$watch:e=>qu.bind(e)}),Yr=(e,t)=>e!==X&&!e.__isScriptSetup&&W(e,t),gu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:o,accessCache:i,type:a,appContext:l}=e;let d;if(t[0]!=="$"){const y=i[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return n[t];case 4:return s[t];case 3:return o[t]}else{if(Yr(r,t))return i[t]=1,r[t];if(n!==X&&W(n,t))return i[t]=2,n[t];if((d=e.propsOptions[0])&&W(d,t))return i[t]=3,o[t];if(s!==X&&W(s,t))return i[t]=4,s[t];xn&&(i[t]=0)}}const u=ws[t];let h,b;if(u)return t==="$attrs"&&pe(e.attrs,"get",""),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(s!==X&&W(s,t))return i[t]=4,s[t];if(b=l.config.globalProperties,W(b,t))return b[t]},set({_:e},t,s){const{data:r,setupState:n,ctx:o}=e;return Yr(n,t)?(n[t]=s,!0):r!==X&&W(r,t)?(r[t]=s,!0):W(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:r,appContext:n,propsOptions:o}},i){let a;return!!s[i]||e!==X&&W(e,i)||Yr(t,i)||(a=o[0])&&W(a,i)||W(r,i)||W(ws,i)||W(n.config.globalProperties,i)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:W(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function jo(e){return B(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let xn=!0;function yu(e){const t=Va(e),s=e.proxy,r=e.ctx;xn=!1,t.beforeCreate&&Uo(t.beforeCreate,e,"bc");const{data:n,computed:o,methods:i,watch:a,provide:l,inject:d,created:u,beforeMount:h,mounted:b,beforeUpdate:y,updated:D,activated:F,deactivated:V,beforeDestroy:U,beforeUnmount:Q,destroyed:z,unmounted:q,render:ne,renderTracked:Ue,renderTriggered:Ie,errorCaptured:He,serverPrefetch:Ct,expose:Ke,inheritAttrs:x,components:we,directives:ze,filters:ot}=t;if(d&&_u(d,r,null),i)for(const $ in i){const Z=i[$];j(Z)&&(r[$]=Z.bind(s))}if(n){const $=n.call(s,s);re($)&&(e.data=to($))}if(xn=!0,o)for(const $ in o){const Z=o[$],It=j(Z)?Z.bind(s,s):j(Z.get)?Z.get.bind(s,s):st,Ws=!j(Z)&&j(Z.set)?Z.set.bind(s):st,At=od({get:It,set:Ws});Object.defineProperty(r,$,{enumerable:!0,configurable:!0,get:()=>At.value,set:Ge=>At.value=Ge})}if(a)for(const $ in a)Ha(a[$],r,s,$);if(l){const $=j(l)?l.call(s):l;Reflect.ownKeys($).forEach(Z=>{Eu(Z,$[Z])})}u&&Uo(u,e,"c");function se($,Z){B(Z)?Z.forEach(It=>$(It.bind(s))):Z&&$(Z.bind(s))}if(se(nu,h),se(ou,b),se(iu,y),se(au,D),se(tu,F),se(su,V),se(fu,He),se(du,Ue),se(uu,Ie),se(lu,Q),se(Ua,q),se(cu,Ct),B(Ke))if(Ke.length){const $=e.exposed||(e.exposed={});Ke.forEach(Z=>{Object.defineProperty($,Z,{get:()=>s[Z],set:It=>s[Z]=It,enumerable:!0})})}else e.exposed||(e.exposed={});ne&&e.render===st&&(e.render=ne),x!=null&&(e.inheritAttrs=x),we&&(e.components=we),ze&&(e.directives=ze),Ct&&Ma(e)}function _u(e,t,s=st){B(e)&&(e=wn(e));for(const r in e){const n=e[r];let o;re(n)?"default"in n?o=rr(n.from||r,n.default,!0):o=rr(n.from||r):o=rr(n),ve(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[r]=o}}function Uo(e,t,s){rt(B(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ha(e,t,s,r){let n=r.includes(".")?sl(s,r):()=>s[r];if(le(e)){const o=t[e];j(o)&&Xr(n,o)}else if(j(e))Xr(n,e.bind(s));else if(re(e))if(B(e))e.forEach(o=>Ha(o,t,s,r));else{const o=j(e.handler)?e.handler.bind(s):t[e.handler];j(o)&&Xr(n,o,e)}}function Va(e){const t=e.type,{mixins:s,extends:r}=t,{mixins:n,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,a=o.get(t);let l;return a?l=a:!n.length&&!s&&!r?l=t:(l={},n.length&&n.forEach(d=>mr(l,d,i,!0)),mr(l,t,i)),re(t)&&o.set(t,l),l}function mr(e,t,s,r=!1){const{mixins:n,extends:o}=t;o&&mr(e,o,s,!0),n&&n.forEach(i=>mr(e,i,s,!0));for(const i in t)if(!(r&&i==="expose")){const a=bu[i]||s&&s[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const bu={data:Ho,props:Vo,emits:Vo,methods:ps,computed:ps,beforeCreate:ge,created:ge,beforeMount:ge,mounted:ge,beforeUpdate:ge,updated:ge,beforeDestroy:ge,beforeUnmount:ge,destroyed:ge,unmounted:ge,activated:ge,deactivated:ge,errorCaptured:ge,serverPrefetch:ge,components:ps,directives:ps,watch:xu,provide:Ho,inject:vu};function Ho(e,t){return t?e?function(){return xe(j(e)?e.call(this,this):e,j(t)?t.call(this,this):t)}:t:e}function vu(e,t){return ps(wn(e),wn(t))}function wn(e){if(B(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ge(e,t){return e?[...new Set([].concat(e,t))]:t}function ps(e,t){return e?xe(Object.create(null),e,t):t}function Vo(e,t){return e?B(e)&&B(t)?[...new Set([...e,...t])]:xe(Object.create(null),jo(e),jo(t??{})):t}function xu(e,t){if(!e)return t;if(!t)return e;const s=xe(Object.create(null),e);for(const r in t)s[r]=ge(e[r],t[r]);return s}function $a(){return{app:null,config:{isNativeTag:cc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wu=0;function Su(e,t){return function(r,n=null){j(r)||(r=xe({},r)),n!=null&&!re(n)&&(n=null);const o=$a(),i=new WeakSet,a=[];let l=!1;const d=o.app={_uid:wu++,_component:r,_props:n,_container:null,_context:o,_instance:null,version:id,get config(){return o.config},set config(u){},use(u,...h){return i.has(u)||(u&&j(u.install)?(i.add(u),u.install(d,...h)):j(u)&&(i.add(u),u(d,...h))),d},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),d},component(u,h){return h?(o.components[u]=h,d):o.components[u]},directive(u,h){return h?(o.directives[u]=h,d):o.directives[u]},mount(u,h,b){if(!l){const y=d._ceVNode||Oe(r,n);return y.appContext=o,b===!0?b="svg":b===!1&&(b=void 0),e(y,u,b),l=!0,d._container=u,u.__vue_app__=d,Fr(y.component)}},onUnmount(u){a.push(u)},unmount(){l&&(rt(a,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,h){return o.provides[u]=h,d},runWithContext(u){const h=Xt;Xt=d;try{return u()}finally{Xt=h}}};return d}}let Xt=null;function Eu(e,t){if(me){let s=me.provides;const r=me.parent&&me.parent.provides;r===s&&(s=me.provides=Object.create(r)),s[e]=t}}function rr(e,t,s=!1){const r=Xu();if(r||Xt){let n=Xt?Xt._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return s&&j(t)?t.call(r&&r.proxy):t}}const Wa={},Qa=()=>Object.create(Wa),Ka=e=>Object.getPrototypeOf(e)===Wa;function ku(e,t,s,r=!1){const n={},o=Qa();e.propsDefaults=Object.create(null),za(e,t,n,o);for(const i in e.propsOptions[0])i in n||(n[i]=void 0);s?e.props=r?n:jc(n):e.type.props?e.props=n:e.props=o,e.attrs=o}function Pu(e,t,s,r){const{props:n,attrs:o,vnode:{patchFlag:i}}=e,a=G(n),[l]=e.propsOptions;let d=!1;if((r||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let b=u[h];if(Nr(e.emitsOptions,b))continue;const y=t[b];if(l)if(W(o,b))y!==o[b]&&(o[b]=y,d=!0);else{const D=Be(b);n[D]=Sn(l,a,D,y,e,!1)}else y!==o[b]&&(o[b]=y,d=!0)}}}else{za(e,t,n,o)&&(d=!0);let u;for(const h in a)(!t||!W(t,h)&&((u=Et(h))===h||!W(t,u)))&&(l?s&&(s[h]!==void 0||s[u]!==void 0)&&(n[h]=Sn(l,a,h,void 0,e,!0)):delete n[h]);if(o!==a)for(const h in o)(!t||!W(t,h))&&(delete o[h],d=!0)}d&&ct(e.attrs,"set","")}function za(e,t,s,r){const[n,o]=e.propsOptions;let i=!1,a;if(t)for(let l in t){if(ys(l))continue;const d=t[l];let u;n&&W(n,u=Be(l))?!o||!o.includes(u)?s[u]=d:(a||(a={}))[u]=d:Nr(e.emitsOptions,l)||(!(l in r)||d!==r[l])&&(r[l]=d,i=!0)}if(o){const l=G(s),d=a||X;for(let u=0;u<o.length;u++){const h=o[u];s[h]=Sn(n,l,h,d[h],e,!W(d,h))}}return i}function Sn(e,t,s,r,n,o){const i=e[s];if(i!=null){const a=W(i,"default");if(a&&r===void 0){const l=i.default;if(i.type!==Function&&!i.skipFactory&&j(l)){const{propsDefaults:d}=n;if(s in d)r=d[s];else{const u=Ms(n);r=d[s]=l.call(null,t),u()}}else r=l;n.ce&&n.ce._setProp(s,r)}i[0]&&(o&&!a?r=!1:i[1]&&(r===""||r===Et(s))&&(r=!0))}return r}const Cu=new WeakMap;function Ga(e,t,s=!1){const r=s?Cu:t.propsCache,n=r.get(e);if(n)return n;const o=e.props,i={},a=[];let l=!1;if(!j(e)){const u=h=>{l=!0;const[b,y]=Ga(h,t,!0);xe(i,b),y&&a.push(...y)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!l)return re(e)&&r.set(e,zt),zt;if(B(o))for(let u=0;u<o.length;u++){const h=Be(o[u]);$o(h)&&(i[h]=X)}else if(o)for(const u in o){const h=Be(u);if($o(h)){const b=o[u],y=i[h]=B(b)||j(b)?{type:b}:xe({},b),D=y.type;let F=!1,V=!0;if(B(D))for(let U=0;U<D.length;++U){const Q=D[U],z=j(Q)&&Q.name;if(z==="Boolean"){F=!0;break}else z==="String"&&(V=!1)}else F=j(D)&&D.name==="Boolean";y[0]=F,y[1]=V,(F||W(y,"default"))&&a.push(h)}}const d=[i,a];return re(e)&&r.set(e,d),d}function $o(e){return e[0]!=="$"&&!ys(e)}const io=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",ao=e=>B(e)?e.map(tt):[tt(e)],Iu=(e,t,s)=>{if(t._n)return t;const r=Xc((...n)=>ao(t(...n)),s);return r._c=!1,r},Ya=(e,t,s)=>{const r=e._ctx;for(const n in e){if(io(n))continue;const o=e[n];if(j(o))t[n]=Iu(n,o,r);else if(o!=null){const i=ao(o);t[n]=()=>i}}},Ja=(e,t)=>{const s=ao(t);e.slots.default=()=>s},Xa=(e,t,s)=>{for(const r in t)(s||!io(r))&&(e[r]=t[r])},Au=(e,t,s)=>{const r=e.slots=Qa();if(e.vnode.shapeFlag&32){const n=t.__;n&&pn(r,"__",n,!0);const o=t._;o?(Xa(r,t,s),s&&pn(r,"_",o,!0)):Ya(t,r)}else t&&Ja(e,t)},Tu=(e,t,s)=>{const{vnode:r,slots:n}=e;let o=!0,i=X;if(r.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:Xa(n,t,s):(o=!t.$stable,Ya(t,n)),i=t}else t&&(Ja(e,t),i={default:1});if(o)for(const a in n)!io(a)&&i[a]==null&&delete n[a]},Te=$u;function Du(e){return Ru(e)}function Ru(e,t){const s=Tr();s.__VUE__=!0;const{insert:r,remove:n,patchProp:o,createElement:i,createText:a,createComment:l,setText:d,setElementText:u,parentNode:h,nextSibling:b,setScopeId:y=st,insertStaticContent:D}=e,F=(f,p,v,E=null,w=null,S=null,A=void 0,I=null,C=!!p.dynamicChildren)=>{if(f===p)return;f&&!hs(f,p)&&(E=Qs(f),Ge(f,w,S,!0),f=null),p.patchFlag===-2&&(C=!1,p.dynamicChildren=null);const{type:k,ref:N,shapeFlag:T}=p;switch(k){case Or:V(f,p,v,E);break;case bt:U(f,p,v,E);break;case nr:f==null&&Q(p,v,E,A);break;case oe:we(f,p,v,E,w,S,A,I,C);break;default:T&1?ne(f,p,v,E,w,S,A,I,C):T&6?ze(f,p,v,E,w,S,A,I,C):(T&64||T&128)&&k.process(f,p,v,E,w,S,A,I,C,us)}N!=null&&w?vs(N,f&&f.ref,S,p||f,!p):N==null&&f&&f.ref!=null&&vs(f.ref,null,S,f,!0)},V=(f,p,v,E)=>{if(f==null)r(p.el=a(p.children),v,E);else{const w=p.el=f.el;p.children!==f.children&&d(w,p.children)}},U=(f,p,v,E)=>{f==null?r(p.el=l(p.children||""),v,E):p.el=f.el},Q=(f,p,v,E)=>{[f.el,f.anchor]=D(f.children,p,v,E,f.el,f.anchor)},z=({el:f,anchor:p},v,E)=>{let w;for(;f&&f!==p;)w=b(f),r(f,v,E),f=w;r(p,v,E)},q=({el:f,anchor:p})=>{let v;for(;f&&f!==p;)v=b(f),n(f),f=v;n(p)},ne=(f,p,v,E,w,S,A,I,C)=>{p.type==="svg"?A="svg":p.type==="math"&&(A="mathml"),f==null?Ue(p,v,E,w,S,A,I,C):Ct(f,p,w,S,A,I,C)},Ue=(f,p,v,E,w,S,A,I)=>{let C,k;const{props:N,shapeFlag:T,transition:L,dirs:M}=f;if(C=f.el=i(f.type,S,N&&N.is,N),T&8?u(C,f.children):T&16&&He(f.children,C,null,E,w,Jr(f,S),A,I),M&&Tt(f,null,E,"created"),Ie(C,f,f.scopeId,A,E),N){for(const ee in N)ee!=="value"&&!ys(ee)&&o(C,ee,null,N[ee],S,E);"value"in N&&o(C,"value",null,N.value,S),(k=N.onVnodeBeforeMount)&&Ze(k,E,f)}M&&Tt(f,null,E,"beforeMount");const H=Lu(w,L);H&&L.beforeEnter(C),r(C,p,v),((k=N&&N.onVnodeMounted)||H||M)&&Te(()=>{k&&Ze(k,E,f),H&&L.enter(C),M&&Tt(f,null,E,"mounted")},w)},Ie=(f,p,v,E,w)=>{if(v&&y(f,v),E)for(let S=0;S<E.length;S++)y(f,E[S]);if(w){let S=w.subTree;if(p===S||nl(S.type)&&(S.ssContent===p||S.ssFallback===p)){const A=w.vnode;Ie(f,A,A.scopeId,A.slotScopeIds,w.parent)}}},He=(f,p,v,E,w,S,A,I,C=0)=>{for(let k=C;k<f.length;k++){const N=f[k]=I?yt(f[k]):tt(f[k]);F(null,N,p,v,E,w,S,A,I)}},Ct=(f,p,v,E,w,S,A)=>{const I=p.el=f.el;let{patchFlag:C,dynamicChildren:k,dirs:N}=p;C|=f.patchFlag&16;const T=f.props||X,L=p.props||X;let M;if(v&&Dt(v,!1),(M=L.onVnodeBeforeUpdate)&&Ze(M,v,p,f),N&&Tt(p,f,v,"beforeUpdate"),v&&Dt(v,!0),(T.innerHTML&&L.innerHTML==null||T.textContent&&L.textContent==null)&&u(I,""),k?Ke(f.dynamicChildren,k,I,v,E,Jr(p,w),S):A||Z(f,p,I,null,v,E,Jr(p,w),S,!1),C>0){if(C&16)x(I,T,L,v,w);else if(C&2&&T.class!==L.class&&o(I,"class",null,L.class,w),C&4&&o(I,"style",T.style,L.style,w),C&8){const H=p.dynamicProps;for(let ee=0;ee<H.length;ee++){const K=H[ee],Se=T[K],Ee=L[K];(Ee!==Se||K==="value")&&o(I,K,Se,Ee,w,v)}}C&1&&f.children!==p.children&&u(I,p.children)}else!A&&k==null&&x(I,T,L,v,w);((M=L.onVnodeUpdated)||N)&&Te(()=>{M&&Ze(M,v,p,f),N&&Tt(p,f,v,"updated")},E)},Ke=(f,p,v,E,w,S,A)=>{for(let I=0;I<p.length;I++){const C=f[I],k=p[I],N=C.el&&(C.type===oe||!hs(C,k)||C.shapeFlag&198)?h(C.el):v;F(C,k,N,null,E,w,S,A,!0)}},x=(f,p,v,E,w)=>{if(p!==v){if(p!==X)for(const S in p)!ys(S)&&!(S in v)&&o(f,S,p[S],null,w,E);for(const S in v){if(ys(S))continue;const A=v[S],I=p[S];A!==I&&S!=="value"&&o(f,S,I,A,w,E)}"value"in v&&o(f,"value",p.value,v.value,w)}},we=(f,p,v,E,w,S,A,I,C)=>{const k=p.el=f?f.el:a(""),N=p.anchor=f?f.anchor:a("");let{patchFlag:T,dynamicChildren:L,slotScopeIds:M}=p;M&&(I=I?I.concat(M):M),f==null?(r(k,v,E),r(N,v,E),He(p.children||[],v,N,w,S,A,I,C)):T>0&&T&64&&L&&f.dynamicChildren?(Ke(f.dynamicChildren,L,v,w,S,A,I),(p.key!=null||w&&p===w.subTree)&&Za(f,p,!0)):Z(f,p,v,N,w,S,A,I,C)},ze=(f,p,v,E,w,S,A,I,C)=>{p.slotScopeIds=I,f==null?p.shapeFlag&512?w.ctx.activate(p,v,E,A,C):ot(p,v,E,w,S,A,C):mt(f,p,C)},ot=(f,p,v,E,w,S,A)=>{const I=f.component=Ju(f,E,w);if(Ba(f)&&(I.ctx.renderer=us),Zu(I,!1,A),I.asyncDep){if(w&&w.registerDep(I,se,A),!f.el){const C=I.subTree=Oe(bt);U(null,C,p,v),f.placeholder=C.el}}else se(I,f,p,v,w,S,A)},mt=(f,p,v)=>{const E=p.component=f.component;if(Hu(f,p,v))if(E.asyncDep&&!E.asyncResolved){$(E,p,v);return}else E.next=p,E.update();else p.el=f.el,E.vnode=p},se=(f,p,v,E,w,S,A)=>{const I=()=>{if(f.isMounted){let{next:T,bu:L,u:M,parent:H,vnode:ee}=f;{const Je=el(f);if(Je){T&&(T.el=ee.el,$(f,T,A)),Je.asyncDep.then(()=>{f.isUnmounted||I()});return}}let K=T,Se;Dt(f,!1),T?(T.el=ee.el,$(f,T,A)):T=ee,L&&sr(L),(Se=T.props&&T.props.onVnodeBeforeUpdate)&&Ze(Se,H,T,ee),Dt(f,!0);const Ee=Qo(f),Ye=f.subTree;f.subTree=Ee,F(Ye,Ee,h(Ye.el),Qs(Ye),f,w,S),T.el=Ee.el,K===null&&Vu(f,Ee.el),M&&Te(M,w),(Se=T.props&&T.props.onVnodeUpdated)&&Te(()=>Ze(Se,H,T,ee),w)}else{let T;const{el:L,props:M}=p,{bm:H,m:ee,parent:K,root:Se,type:Ee}=f,Ye=xs(p);Dt(f,!1),H&&sr(H),!Ye&&(T=M&&M.onVnodeBeforeMount)&&Ze(T,K,p),Dt(f,!0);{Se.ce&&Se.ce._def.shadowRoot!==!1&&Se.ce._injectChildStyle(Ee);const Je=f.subTree=Qo(f);F(null,Je,v,E,f,w,S),p.el=Je.el}if(ee&&Te(ee,w),!Ye&&(T=M&&M.onVnodeMounted)){const Je=p;Te(()=>Ze(T,K,Je),w)}(p.shapeFlag&256||K&&xs(K.vnode)&&K.vnode.shapeFlag&256)&&f.a&&Te(f.a,w),f.isMounted=!0,p=v=E=null}};f.scope.on();const C=f.effect=new ga(I);f.scope.off();const k=f.update=C.run.bind(C),N=f.job=C.runIfDirty.bind(C);N.i=f,N.id=f.uid,C.scheduler=()=>no(N),Dt(f,!0),k()},$=(f,p,v)=>{p.component=f;const E=f.vnode.props;f.vnode=p,f.next=null,Pu(f,p.props,E,v),Tu(f,p.children,v),ft(),Mo(f),ht()},Z=(f,p,v,E,w,S,A,I,C=!1)=>{const k=f&&f.children,N=f?f.shapeFlag:0,T=p.children,{patchFlag:L,shapeFlag:M}=p;if(L>0){if(L&128){Ws(k,T,v,E,w,S,A,I,C);return}else if(L&256){It(k,T,v,E,w,S,A,I,C);return}}M&8?(N&16&&cs(k,w,S),T!==k&&u(v,T)):N&16?M&16?Ws(k,T,v,E,w,S,A,I,C):cs(k,w,S,!0):(N&8&&u(v,""),M&16&&He(T,v,E,w,S,A,I,C))},It=(f,p,v,E,w,S,A,I,C)=>{f=f||zt,p=p||zt;const k=f.length,N=p.length,T=Math.min(k,N);let L;for(L=0;L<T;L++){const M=p[L]=C?yt(p[L]):tt(p[L]);F(f[L],M,v,null,w,S,A,I,C)}k>N?cs(f,w,S,!0,!1,T):He(p,v,E,w,S,A,I,C,T)},Ws=(f,p,v,E,w,S,A,I,C)=>{let k=0;const N=p.length;let T=f.length-1,L=N-1;for(;k<=T&&k<=L;){const M=f[k],H=p[k]=C?yt(p[k]):tt(p[k]);if(hs(M,H))F(M,H,v,null,w,S,A,I,C);else break;k++}for(;k<=T&&k<=L;){const M=f[T],H=p[L]=C?yt(p[L]):tt(p[L]);if(hs(M,H))F(M,H,v,null,w,S,A,I,C);else break;T--,L--}if(k>T){if(k<=L){const M=L+1,H=M<N?p[M].el:E;for(;k<=L;)F(null,p[k]=C?yt(p[k]):tt(p[k]),v,H,w,S,A,I,C),k++}}else if(k>L)for(;k<=T;)Ge(f[k],w,S,!0),k++;else{const M=k,H=k,ee=new Map;for(k=H;k<=L;k++){const Ae=p[k]=C?yt(p[k]):tt(p[k]);Ae.key!=null&&ee.set(Ae.key,k)}let K,Se=0;const Ee=L-H+1;let Ye=!1,Je=0;const ds=new Array(Ee);for(k=0;k<Ee;k++)ds[k]=0;for(k=M;k<=T;k++){const Ae=f[k];if(Se>=Ee){Ge(Ae,w,S,!0);continue}let Xe;if(Ae.key!=null)Xe=ee.get(Ae.key);else for(K=H;K<=L;K++)if(ds[K-H]===0&&hs(Ae,p[K])){Xe=K;break}Xe===void 0?Ge(Ae,w,S,!0):(ds[Xe-H]=k+1,Xe>=Je?Je=Xe:Ye=!0,F(Ae,p[Xe],v,null,w,S,A,I,C),Se++)}const Ro=Ye?Nu(ds):zt;for(K=Ro.length-1,k=Ee-1;k>=0;k--){const Ae=H+k,Xe=p[Ae],Lo=p[Ae+1],No=Ae+1<N?Lo.el||Lo.placeholder:E;ds[k]===0?F(null,Xe,v,No,w,S,A,I,C):Ye&&(K<0||k!==Ro[K]?At(Xe,v,No,2):K--)}}},At=(f,p,v,E,w=null)=>{const{el:S,type:A,transition:I,children:C,shapeFlag:k}=f;if(k&6){At(f.component.subTree,p,v,E);return}if(k&128){f.suspense.move(p,v,E);return}if(k&64){A.move(f,p,v,us);return}if(A===oe){r(S,p,v);for(let T=0;T<C.length;T++)At(C[T],p,v,E);r(f.anchor,p,v);return}if(A===nr){z(f,p,v);return}if(E!==2&&k&1&&I)if(E===0)I.beforeEnter(S),r(S,p,v),Te(()=>I.enter(S),w);else{const{leave:T,delayLeave:L,afterLeave:M}=I,H=()=>{f.ctx.isUnmounted?n(S):r(S,p,v)},ee=()=>{T(S,()=>{H(),M&&M()})};L?L(S,H,ee):ee()}else r(S,p,v)},Ge=(f,p,v,E=!1,w=!1)=>{const{type:S,props:A,ref:I,children:C,dynamicChildren:k,shapeFlag:N,patchFlag:T,dirs:L,cacheIndex:M}=f;if(T===-2&&(w=!1),I!=null&&(ft(),vs(I,null,v,f,!0),ht()),M!=null&&(p.renderCache[M]=void 0),N&256){p.ctx.deactivate(f);return}const H=N&1&&L,ee=!xs(f);let K;if(ee&&(K=A&&A.onVnodeBeforeUnmount)&&Ze(K,p,f),N&6)lc(f.component,v,E);else{if(N&128){f.suspense.unmount(v,E);return}H&&Tt(f,null,p,"beforeUnmount"),N&64?f.type.remove(f,p,v,us,E):k&&!k.hasOnce&&(S!==oe||T>0&&T&64)?cs(k,p,v,!1,!0):(S===oe&&T&384||!w&&N&16)&&cs(C,p,v),E&&To(f)}(ee&&(K=A&&A.onVnodeUnmounted)||H)&&Te(()=>{K&&Ze(K,p,f),H&&Tt(f,null,p,"unmounted")},v)},To=f=>{const{type:p,el:v,anchor:E,transition:w}=f;if(p===oe){ac(v,E);return}if(p===nr){q(f);return}const S=()=>{n(v),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(f.shapeFlag&1&&w&&!w.persisted){const{leave:A,delayLeave:I}=w,C=()=>A(v,S);I?I(f.el,S,C):C()}else S()},ac=(f,p)=>{let v;for(;f!==p;)v=b(f),n(f),f=v;n(p)},lc=(f,p,v)=>{const{bum:E,scope:w,job:S,subTree:A,um:I,m:C,a:k,parent:N,slots:{__:T}}=f;Wo(C),Wo(k),E&&sr(E),N&&B(T)&&T.forEach(L=>{N.renderCache[L]=void 0}),w.stop(),S&&(S.flags|=8,Ge(A,f,p,v)),I&&Te(I,p),Te(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},cs=(f,p,v,E=!1,w=!1,S=0)=>{for(let A=S;A<f.length;A++)Ge(f[A],p,v,E,w)},Qs=f=>{if(f.shapeFlag&6)return Qs(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const p=b(f.anchor||f.el),v=p&&p[Zc];return v?b(v):p};let $r=!1;const Do=(f,p,v)=>{f==null?p._vnode&&Ge(p._vnode,null,null,!0):F(p._vnode||null,f,p,null,null,null,v),p._vnode=f,$r||($r=!0,Mo(),Oa(),$r=!1)},us={p:F,um:Ge,m:At,r:To,mt:ot,mc:He,pc:Z,pbc:Ke,n:Qs,o:e};return{render:Do,hydrate:void 0,createApp:Su(Do)}}function Jr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Dt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Lu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Za(e,t,s=!1){const r=e.children,n=t.children;if(B(r)&&B(n))for(let o=0;o<r.length;o++){const i=r[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=yt(n[o]),a.el=i.el),!s&&a.patchFlag!==-2&&Za(i,a)),a.type===Or&&(a.el=i.el),a.type===bt&&!a.el&&(a.el=i.el)}}function Nu(e){const t=e.slice(),s=[0];let r,n,o,i,a;const l=e.length;for(r=0;r<l;r++){const d=e[r];if(d!==0){if(n=s[s.length-1],e[n]<d){t[r]=n,s.push(r);continue}for(o=0,i=s.length-1;o<i;)a=o+i>>1,e[s[a]]<d?o=a+1:i=a;d<e[s[o]]&&(o>0&&(t[r]=s[o-1]),s[o]=r)}}for(o=s.length,i=s[o-1];o-- >0;)s[o]=i,i=t[i];return s}function el(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:el(t)}function Wo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ou=Symbol.for("v-scx"),Fu=()=>rr(Ou);function Xr(e,t,s){return tl(e,t,s)}function tl(e,t,s=X){const{immediate:r,deep:n,flush:o,once:i}=s,a=xe({},s),l=t&&r||!t&&o!=="post";let d;if(Ds){if(o==="sync"){const y=Fu();d=y.__watcherHandles||(y.__watcherHandles=[])}else if(!l){const y=()=>{};return y.stop=st,y.resume=st,y.pause=st,y}}const u=me;a.call=(y,D,F)=>rt(y,u,D,F);let h=!1;o==="post"?a.scheduler=y=>{Te(y,u&&u.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(y,D)=>{D?y():no(y)}),a.augmentJob=y=>{t&&(y.flags|=4),h&&(y.flags|=2,u&&(y.id=u.uid,y.i=u))};const b=Kc(e,t,a);return Ds&&(d?d.push(b):l&&b()),b}function qu(e,t,s){const r=this.proxy,n=le(e)?e.includes(".")?sl(r,e):()=>r[e]:e.bind(r,r);let o;j(t)?o=t:(o=t.handler,s=t);const i=Ms(this),a=tl(n,o.bind(r),s);return i(),a}function sl(e,t){const s=t.split(".");return()=>{let r=e;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const Mu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Be(t)}Modifiers`]||e[`${Et(t)}Modifiers`];function Bu(e,t,...s){if(e.isUnmounted)return;const r=e.vnode.props||X;let n=s;const o=t.startsWith("update:"),i=o&&Mu(r,t.slice(7));i&&(i.trim&&(n=s.map(u=>le(u)?u.trim():u)),i.number&&(n=s.map(mn)));let a,l=r[a=Wr(t)]||r[a=Wr(Be(t))];!l&&o&&(l=r[a=Wr(Et(t))]),l&&rt(l,e,6,n);const d=r[a+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,rt(d,e,6,n)}}function rl(e,t,s=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const o=e.emits;let i={},a=!1;if(!j(e)){const l=d=>{const u=rl(d,t,!0);u&&(a=!0,xe(i,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!o&&!a?(re(e)&&r.set(e,null),null):(B(o)?o.forEach(l=>i[l]=null):xe(i,o),re(e)&&r.set(e,i),i)}function Nr(e,t){return!e||!Pr(t)?!1:(t=t.slice(2).replace(/Once$/,""),W(e,t[0].toLowerCase()+t.slice(1))||W(e,Et(t))||W(e,t))}function Qo(e){const{type:t,vnode:s,proxy:r,withProxy:n,propsOptions:[o],slots:i,attrs:a,emit:l,render:d,renderCache:u,props:h,data:b,setupState:y,ctx:D,inheritAttrs:F}=e,V=pr(e);let U,Q;try{if(s.shapeFlag&4){const q=n||r,ne=q;U=tt(d.call(ne,q,u,h,y,b,D)),Q=a}else{const q=t;U=tt(q.length>1?q(h,{attrs:a,slots:i,emit:l}):q(h,null)),Q=t.props?a:ju(a)}}catch(q){Ss.length=0,Rr(q,e,1),U=Oe(bt)}let z=U;if(Q&&F!==!1){const q=Object.keys(Q),{shapeFlag:ne}=z;q.length&&ne&7&&(o&&q.some(zn)&&(Q=Uu(Q,o)),z=es(z,Q,!1,!0))}return s.dirs&&(z=es(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(s.dirs):s.dirs),s.transition&&oo(z,s.transition),U=z,pr(V),U}const ju=e=>{let t;for(const s in e)(s==="class"||s==="style"||Pr(s))&&((t||(t={}))[s]=e[s]);return t},Uu=(e,t)=>{const s={};for(const r in e)(!zn(r)||!(r.slice(9)in t))&&(s[r]=e[r]);return s};function Hu(e,t,s){const{props:r,children:n,component:o}=e,{props:i,children:a,patchFlag:l}=t,d=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?Ko(r,i,d):!!i;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const b=u[h];if(i[b]!==r[b]&&!Nr(d,b))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===i?!1:r?i?Ko(r,i,d):!0:!!i;return!1}function Ko(e,t,s){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const o=r[n];if(t[o]!==e[o]&&!Nr(s,o))return!0}return!1}function Vu({vnode:e,parent:t},s){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=s,t=t.parent;else break}}const nl=e=>e.__isSuspense;function $u(e,t){t&&t.pendingBranch?B(e)?t.effects.push(...e):t.effects.push(e):Jc(e)}const oe=Symbol.for("v-fgt"),Or=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),nr=Symbol.for("v-stc"),Ss=[];let Le=null;function m(e=!1){Ss.push(Le=e?null:[])}function Wu(){Ss.pop(),Le=Ss[Ss.length-1]||null}let Ts=1;function zo(e,t=!1){Ts+=e,e<0&&Le&&t&&(Le.hasOnce=!0)}function ol(e){return e.dynamicChildren=Ts>0?Le||zt:null,Wu(),Ts>0&&Le&&Le.push(e),e}function g(e,t,s,r,n,o){return ol(c(e,t,s,r,n,o,!0))}function Es(e,t,s,r,n){return ol(Oe(e,t,s,r,n,!0))}function il(e){return e?e.__v_isVNode===!0:!1}function hs(e,t){return e.type===t.type&&e.key===t.key}const al=({key:e})=>e??null,or=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?le(e)||ve(e)||j(e)?{i:Re,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,r=0,n=null,o=e===oe?0:1,i=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&al(t),ref:t&&or(t),scopeId:qa,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Re};return a?(lo(l,s),o&128&&e.normalize(l)):s&&(l.shapeFlag|=le(s)?8:16),Ts>0&&!i&&Le&&(l.patchFlag>0||o&6)&&l.patchFlag!==32&&Le.push(l),l}const Oe=Qu;function Qu(e,t=null,s=null,r=0,n=null,o=!1){if((!e||e===pu)&&(e=bt),il(e)){const a=es(e,t,!0);return s&&lo(a,s),Ts>0&&!o&&Le&&(a.shapeFlag&6?Le[Le.indexOf(e)]=a:Le.push(a)),a.patchFlag=-2,a}if(nd(e)&&(e=e.__vccOpts),t){t=Ku(t);let{class:a,style:l}=t;a&&!le(a)&&(t.class=ae(a)),re(l)&&(ro(l)&&!B(l)&&(l=xe({},l)),t.style=Fs(l))}const i=le(e)?1:nl(e)?128:eu(e)?64:re(e)?4:j(e)?2:0;return c(e,t,s,r,n,i,o,!0)}function Ku(e){return e?ro(e)||Ka(e)?xe({},e):e:null}function es(e,t,s=!1,r=!1){const{props:n,ref:o,patchFlag:i,children:a,transition:l}=e,d=t?zu(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&al(d),ref:t&&t.ref?s&&o?B(o)?o.concat(or(t)):[o,or(t)]:or(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==oe?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&es(e.ssContent),ssFallback:e.ssFallback&&es(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&oo(u,l.clone(u)),u}function he(e=" ",t=0){return Oe(Or,null,e,t)}function Pe(e,t){const s=Oe(nr,null,e);return s.staticCount=t,s}function P(e="",t=!1){return t?(m(),Es(bt,null,e)):Oe(bt,null,e)}function tt(e){return e==null||typeof e=="boolean"?Oe(bt):B(e)?Oe(oe,null,e.slice()):il(e)?yt(e):Oe(Or,null,String(e))}function yt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:es(e)}function lo(e,t){let s=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(B(t))s=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),lo(e,n()),n._c&&(n._d=!0));return}else{s=32;const n=t._;!n&&!Ka(t)?t._ctx=Re:n===3&&Re&&(Re.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else j(t)?(t={default:t,_ctx:Re},s=32):(t=String(t),r&64?(s=16,t=[he(t)]):s=8);e.children=t,e.shapeFlag|=s}function zu(...e){const t={};for(let s=0;s<e.length;s++){const r=e[s];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=ae([t.class,r.class]));else if(n==="style")t.style=Fs([t.style,r.style]);else if(Pr(n)){const o=t[n],i=r[n];i&&o!==i&&!(B(o)&&o.includes(i))&&(t[n]=o?[].concat(o,i):i)}else n!==""&&(t[n]=r[n])}return t}function Ze(e,t,s,r=null){rt(e,t,7,[s,r])}const Gu=$a();let Yu=0;function Ju(e,t,s){const r=e.type,n=(t?t.appContext:e.appContext)||Gu,o={uid:Yu++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ga(r,n),emitsOptions:rl(r,n),emit:null,emitted:null,propsDefaults:X,inheritAttrs:r.inheritAttrs,ctx:X,data:X,props:X,attrs:X,slots:X,refs:X,setupState:X,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Bu.bind(null,o),e.ce&&e.ce(o),o}let me=null;const Xu=()=>me||Re;let gr,En;{const e=Tr(),t=(s,r)=>{let n;return(n=e[s])||(n=e[s]=[]),n.push(r),o=>{n.length>1?n.forEach(i=>i(o)):n[0](o)}};gr=t("__VUE_INSTANCE_SETTERS__",s=>me=s),En=t("__VUE_SSR_SETTERS__",s=>Ds=s)}const Ms=e=>{const t=me;return gr(e),e.scope.on(),()=>{e.scope.off(),gr(t)}},Go=()=>{me&&me.scope.off(),gr(null)};function ll(e){return e.vnode.shapeFlag&4}let Ds=!1;function Zu(e,t=!1,s=!1){t&&En(t);const{props:r,children:n}=e.vnode,o=ll(e);ku(e,r,o,t),Au(e,n,s||t);const i=o?ed(e,t):void 0;return t&&En(!1),i}function ed(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,gu);const{setup:r}=s;if(r){ft();const n=e.setupContext=r.length>1?sd(e):null,o=Ms(e),i=qs(r,e,0,[e.props,n]),a=ua(i);if(ht(),o(),(a||e.sp)&&!xs(e)&&Ma(e),a){if(i.then(Go,Go),t)return i.then(l=>{Yo(e,l)}).catch(l=>{Rr(l,e,0)});e.asyncDep=i}else Yo(e,i)}else cl(e)}function Yo(e,t,s){j(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:re(t)&&(e.setupState=Ra(t)),cl(e)}function cl(e,t,s){const r=e.type;e.render||(e.render=r.render||st);{const n=Ms(e);ft();try{yu(e)}finally{ht(),n()}}}const td={get(e,t){return pe(e,"get",""),e[t]}};function sd(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,td),slots:e.slots,emit:e.emit,expose:t}}function Fr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ra(Uc(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in ws)return ws[s](e)},has(t,s){return s in t||s in ws}})):e.proxy}function rd(e,t=!0){return j(e)?e.displayName||e.name:e.name||t&&e.__name}function nd(e){return j(e)&&"__vccOpts"in e}const od=(e,t)=>Wc(e,t,Ds),id="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kn;const Jo=typeof window<"u"&&window.trustedTypes;if(Jo)try{kn=Jo.createPolicy("vue",{createHTML:e=>e})}catch{}const ul=kn?e=>kn.createHTML(e):e=>e,ad="http://www.w3.org/2000/svg",ld="http://www.w3.org/1998/Math/MathML",at=typeof document<"u"?document:null,Xo=at&&at.createElement("template"),cd={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,r)=>{const n=t==="svg"?at.createElementNS(ad,e):t==="mathml"?at.createElementNS(ld,e):s?at.createElement(e,{is:s}):at.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>at.createTextNode(e),createComment:e=>at.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>at.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,r,n,o){const i=s?s.previousSibling:t.lastChild;if(n&&(n===o||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),s),!(n===o||!(n=n.nextSibling)););else{Xo.innerHTML=ul(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=Xo.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[i?i.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ud=Symbol("_vtc");function dd(e,t,s){const r=e[ud];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Zo=Symbol("_vod"),fd=Symbol("_vsh"),hd=Symbol(""),pd=/(^|;)\s*display\s*:/;function md(e,t,s){const r=e.style,n=le(s);let o=!1;if(s&&!n){if(t)if(le(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();s[a]==null&&ir(r,a,"")}else for(const i in t)s[i]==null&&ir(r,i,"");for(const i in s)i==="display"&&(o=!0),ir(r,i,s[i])}else if(n){if(t!==s){const i=r[hd];i&&(s+=";"+i),r.cssText=s,o=pd.test(s)}}else t&&e.removeAttribute("style");Zo in e&&(e[Zo]=o?r.display:"",e[fd]&&(r.display="none"))}const ei=/\s*!important$/;function ir(e,t,s){if(B(s))s.forEach(r=>ir(e,t,r));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const r=gd(e,t);ei.test(s)?e.setProperty(Et(r),s.replace(ei,""),"important"):e[r]=s}}const ti=["Webkit","Moz","ms"],Zr={};function gd(e,t){const s=Zr[t];if(s)return s;let r=Be(t);if(r!=="filter"&&r in e)return Zr[t]=r;r=Ar(r);for(let n=0;n<ti.length;n++){const o=ti[n]+r;if(o in e)return Zr[t]=o}return t}const si="http://www.w3.org/1999/xlink";function ri(e,t,s,r,n,o=bc(t)){r&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(si,t.slice(6,t.length)):e.setAttributeNS(si,t,s):s==null||o&&!ha(s)?e.removeAttribute(t):e.setAttribute(t,o?"":St(s)?String(s):s)}function ni(e,t,s,r,n){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?ul(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let i=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=ha(s):s==null&&a==="string"?(s="",i=!0):a==="number"&&(s=0,i=!0)}try{e[t]=s}catch{}i&&e.removeAttribute(n||t)}function Kt(e,t,s,r){e.addEventListener(t,s,r)}function yd(e,t,s,r){e.removeEventListener(t,s,r)}const oi=Symbol("_vei");function _d(e,t,s,r,n=null){const o=e[oi]||(e[oi]={}),i=o[t];if(r&&i)i.value=r;else{const[a,l]=bd(t);if(r){const d=o[t]=wd(r,n);Kt(e,a,d,l)}else i&&(yd(e,a,i,l),o[t]=void 0)}}const ii=/(?:Once|Passive|Capture)$/;function bd(e){let t;if(ii.test(e)){t={};let r;for(;r=e.match(ii);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Et(e.slice(2)),t]}let en=0;const vd=Promise.resolve(),xd=()=>en||(vd.then(()=>en=0),en=Date.now());function wd(e,t){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;rt(Sd(r,s.value),t,5,[r])};return s.value=e,s.attached=xd(),s}function Sd(e,t){if(B(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const ai=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ed=(e,t,s,r,n,o)=>{const i=n==="svg";t==="class"?dd(e,r,i):t==="style"?md(e,s,r):Pr(t)?zn(t)||_d(e,t,s,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):kd(e,t,r,i))?(ni(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ri(e,t,r,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!le(r))?ni(e,Be(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ri(e,t,r,i))};function kd(e,t,s,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&ai(t)&&j(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return ai(t)&&le(s)?!1:t in e}const li=e=>{const t=e.props["onUpdate:modelValue"]||!1;return B(t)?s=>sr(t,s):t};function Pd(e){e.target.composing=!0}function ci(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const tn=Symbol("_assign"),de={created(e,{modifiers:{lazy:t,trim:s,number:r}},n){e[tn]=li(n);const o=r||n.props&&n.props.type==="number";Kt(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=mn(a)),e[tn](a)}),s&&Kt(e,"change",()=>{e.value=e.value.trim()}),t||(Kt(e,"compositionstart",Pd),Kt(e,"compositionend",ci),Kt(e,"change",ci))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:r,trim:n,number:o}},i){if(e[tn]=li(i),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?mn(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===s||n&&e.value.trim()===l)||(e.value=l))}},Cd=["ctrl","shift","alt","meta"],Id={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Cd.some(s=>e[`${s}Key`]&&!t.includes(s))},Pn=(e,t)=>{const s=e._withMods||(e._withMods={}),r=t.join(".");return s[r]||(s[r]=(n,...o)=>{for(let i=0;i<t.length;i++){const a=Id[t[i]];if(a&&a(n,t))return}return e(n,...o)})},Ad={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},ui=(e,t)=>{const s=e._withKeys||(e._withKeys={}),r=t.join(".");return s[r]||(s[r]=n=>{if(!("key"in n))return;const o=Et(n.key);if(t.some(i=>i===o||Ad[i]===o))return e(n)})},Td=xe({patchProp:Ed},cd);let di;function Dd(){return di||(di=Du(Td))}const Rd=(...e)=>{const t=Dd().createApp(...e),{mount:s}=t;return t.mount=r=>{const n=Nd(r);if(!n)return;const o=t._component;!j(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const i=s(n,!1,Ld(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),i},t};function Ld(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Nd(e){return le(e)?document.querySelector(e):e}const Od="modulepreload",Fd=function(e){return"/"+e},fi={},De=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(s.map(l=>{if(l=Fd(l),l in fi)return;fi[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Od,d||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((b,y)=>{h.addEventListener("load",b),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return n.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},qd="https://production-tradeworks-n0Lpcg.keelapps.xyz",Ht=`${qd}/api/json`;class Md{constructor(){this.baseUrl=Ht,this.tokenKey="auth_token",this.userKey="auth_user"}getToken(){return localStorage.getItem(this.tokenKey)}setToken(t){localStorage.setItem(this.tokenKey,t)}removeToken(){localStorage.removeItem(this.tokenKey),localStorage.removeItem("refresh_token")}getUser(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setUser(t){localStorage.setItem(this.userKey,JSON.stringify(t))}removeUser(){localStorage.removeItem(this.userKey)}isAuthenticated(){return!!this.getToken()}async login(t,s){try{if(!t||!s)throw new Error("Email and password are required");const r=new URLSearchParams;r.append("grant_type","password"),r.append("username",t),r.append("password",s);const n=await fetch(`${this.baseUrl.replace("/api/json","")}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.message||i.error_description||"Login failed")}const o=await n.json();return this.setToken(o.access_token),o.refresh_token&&localStorage.setItem("refresh_token",o.refresh_token),o}catch(r){throw console.error("Login error:",r),r}}async exchangeAuthorizationCode(t){const s=new URLSearchParams;s.append("grant_type","authorization_code"),s.append("code",t);const r=this.baseUrl.replace("/api/json",""),n=await fetch(`${r}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.message||i.error_description||"SSO token exchange failed")}const o=await n.json();return this.setToken(o.access_token),o.refresh_token&&localStorage.setItem("refresh_token",o.refresh_token),o}async getAuthProviders(){const t=this.baseUrl.replace("/api/json",""),s=await fetch(`${t}/auth/providers`,{method:"GET"});if(!s.ok)throw new Error("Failed to load auth providers");return s.json()}async getCurrentUser(){try{const t=await fetch(`${this.baseUrl}/getMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`}});if(t.ok){const s=await t.json();return s?(this.setUser(s),s):(console.log("getMe returned null, creating user..."),await this.createUser())}else throw new Error("Failed to get user")}catch(t){throw console.error("Error getting user:",t),t}}async createUser(){try{const t=await fetch(`${this.baseUrl}/createMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`}});if(t.ok){const s=await t.json();return this.setUser(s),s}else throw new Error("Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}}async createUserWithProfile(t,s){try{const r=await fetch(`${this.baseUrl}/createMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`},body:JSON.stringify({firstName:t,lastName:s})});if(r.ok){const n=await r.json();return this.setUser(n),n}else throw new Error("Failed to create user with profile")}catch(r){throw console.error("Error creating user with profile:",r),r}}getCustomerId(t){return(t==null?void 0:t.customerId)||null}logout(){this.removeToken(),this.removeUser()}async requestPasswordReset(t,s){try{const r=await fetch(`${this.baseUrl}/requestPasswordReset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,redirectUrl:s})});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.message||"Password reset request failed")}return await r.json()}catch(r){throw console.error("Password reset request error:",r),r}}async resetPassword(t,s){try{const r=await fetch(`${this.baseUrl}/resetPassword`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,password:s})});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.message||"Password reset failed")}return await r.json()}catch(r){throw console.error("Password reset error:",r),r}}async refreshToken(){try{const t=localStorage.getItem("refresh_token");if(!t)throw new Error("No refresh token available");const s=new URLSearchParams;s.append("grant_type","refresh_token"),s.append("refresh_token",t);const r=await fetch(`${this.baseUrl.replace("/api/json","")}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!r.ok){const o=await r.json().catch(()=>({}));throw new Error(o.message||o.error_description||"Token refresh failed")}const n=await r.json();return this.setToken(n.access_token),n.refresh_token&&localStorage.setItem("refresh_token",n.refresh_token),n}catch(t){throw console.error("Token refresh error:",t),this.logout(),t}}async getCurrentUserCached(){if(!this.isAuthenticated())return null;try{const t=this.getUser();return t||await this.getCurrentUser()}catch(t){return console.error("Error getting current user:",t),null}}}const Y=new Md;class Bd{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=Y.getToken();n&&(r.Authorization=`Bearer ${n}`);const o=await fetch(`${Ht}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!o.ok){const a=(await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(a)}return o.json()}async getPriceLists(){return(await this.makeRequest("/listPriceLists")).results||[]}async getPriceList(t){return await this.makeRequest("/getPriceList",{id:t})}async createPriceList(t){return await this.makeRequest("/createPriceList",{name:t})}async updatePriceList(t,s){return await this.makeRequest("/updatePriceList",{where:{id:t},values:{name:s}})}async deletePriceList(t){return await this.makeRequest("/deletePriceList",{id:t})}async getCustomerPriceLists(t){return(await this.makeRequest("/listCustomerPriceLists",{where:{customer:{id:{equals:t}}}})).results||[]}async getCustomerPriceList(t){var r;return((r=(await this.makeRequest("/listCustomerPriceLists",{where:{id:{equals:t}}})).results)==null?void 0:r[0])||null}async createCustomerPriceList(t,s){return await this.makeRequest("/createCustomerPriceList",{customer:{id:t},priceList:{id:s}})}async deleteCustomerPriceList(t){return await this.makeRequest("/deleteCustomerPriceList",{id:t})}async listPriceListChangeLog(t){return((await this.makeRequest("/listPriceListChangeLog",{where:{priceList:{id:{equals:t}}},orderBy:[{createdAt:"Desc"}],include:{createdBy:!0}})).results||[]).map(n=>{const o=n.createdBy?[n.createdBy.firstName,n.createdBy.lastName].filter(Boolean).join(" ")||n.createdBy.email||n.createdBy.id:n.createdByName;return{...n,createdByName:o}})}}const dl=new Bd,co=Object.freeze(Object.defineProperty({__proto__:null,priceListService:dl},Symbol.toStringTag,{value:"Module"}));class jd{constructor(){this.productCache=new Map}async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=Y.getToken();n&&(r.Authorization=`Bearer ${n}`);const o=await fetch(`${Ht}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!o.ok){const a=(await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(a)}return o.json()}async getProducts(){return(await this.makeRequest("/listProducts",{limit:500})).results||[]}async getProduct(t,s=!0){if(s&&this.productCache.has(t))return this.productCache.get(t);const r=await this.makeRequest("/getProduct",{id:t});return this.productCache.set(t,r),r}clearProductCache(t=null){t?this.productCache.delete(t):this.productCache.clear()}async getProductPricesByPriceList(t){return(await this.makeRequest("/listProductPrices",{where:{priceList:{id:{equals:t}}},limit:500})).results||[]}async listBrands(){return(await this.makeRequest("/listBrands",{})).results||[]}}const yr=new jd;class Ud{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=Y.getToken();n&&(r.Authorization=`Bearer ${n}`);const o=await fetch(`${Ht}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!o.ok){const a=(await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(a)}return o.json()}async getQuotesByCustomer(t){return(await this.makeRequest("/listQuotes",{where:{customerPriceList:{customer:{id:{equals:t}}}},limit:500})).results||[]}async getQuotesByCustomerPriceList(t){return(await this.makeRequest("/listQuotes",{where:{customerPriceList:{id:{equals:t}}},limit:500})).results||[]}async getQuote(t){return await this.makeRequest("/getQuote",{id:t})}async createQuote(t){return await this.makeRequest("/createQuote",{customerPriceList:{id:t}})}async deleteQuote(t){return await this.makeRequest("/deleteQuote",{id:t})}async getQuoteProducts(t){return(await this.makeRequest("/listQuoteProducts",{where:{quote:{id:{equals:t}}}})).results||[]}async addProductToQuote(t,s,r){return await this.makeRequest("/createQuoteProduct",{quote:{id:t},productPrice:{id:s},quantity:r})}async updateQuoteProduct(t,s){return await this.makeRequest("/updateQuoteProduct",{where:{id:t},values:{quantity:s}})}async updateQuoteDelivery(t,s,r){return await this.makeRequest("/updateQuoteDelivery",{where:{id:t},values:{deliveryService:s,totalDeliveryFees:r}})}async updateQuoteDeliveryAddress(t,s){return await this.makeRequest("/updateQuoteDeliveryAddress",{where:{id:t},values:{deliveryAddress:s?{id:s}:null}})}async submitQuote(t){return await this.makeRequest("/submitQuote",{where:{id:t}})}async updateQuoteName(t,s){return await this.makeRequest("/updateQuoteName",{where:{id:t},values:{name:s}})}async deleteQuoteProduct(t){return await this.makeRequest("/deleteQuoteProduct",{id:t})}}const fe=new Ud,hi=Object.freeze(Object.defineProperty({__proto__:null,quoteService:fe},Symbol.toStringTag,{value:"Module"})),kt=(e,t)=>{const s=e.__vccOpts||e;for(const[r,n]of t)s[r]=n;return s},Hd={name:"AddProductModal",props:{quoteId:{type:String,required:!0},priceListId:{type:String,required:!1,default:""},existingQuoteProducts:{type:Array,default:()=>[]}},data(){return{productPrices:[],filteredProductPrices:[],searchQuery:"",loading:!1}},async mounted(){await this.loadProductPrices()},methods:{async loadProductPrices(){var e,t,s;this.loading=!0;try{let r=this.priceListId;if(!r){const n=await fe.getQuote(this.quoteId),{priceListService:o}=await De(async()=>{const{priceListService:l}=await Promise.resolve().then(()=>co);return{priceListService:l}},void 0),a=(await o.getCustomerPriceLists(((t=(e=n.customerPriceList)==null?void 0:e.customer)==null?void 0:t.id)||"")).find(l=>l.id===n.customerPriceListId);r=((s=a==null?void 0:a.priceList)==null?void 0:s.id)||""}this.productPrices=r?await yr.getProductPricesByPriceList(r):[],this.filteredProductPrices=this.filterAvailableProducts(this.productPrices)}catch(r){console.error("Failed to load product prices:",r)}finally{this.loading=!1}},filterAvailableProducts(e){const t=this.existingQuoteProducts.map(s=>s.productPriceId);return e.filter(s=>!t.includes(s.id))},searchProducts(){const e=this.filterAvailableProducts(this.productPrices);if(!this.searchQuery.trim()){this.filteredProductPrices=e;return}const t=this.searchQuery.toLowerCase();this.filteredProductPrices=e.filter(s=>s.productName.toLowerCase().includes(t)||s.productSku.toLowerCase().includes(t))},async selectProduct(e){try{await fe.addProductToQuote(this.quoteId,e.id,1),this.$emit("product-added")}catch(t){console.error("Failed to add product to quote:",t),alert("Failed to add product to quote")}},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}}},Vd={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$d={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden"},Wd={class:"flex justify-between items-center p-6 border-b border-gray-200"},Qd={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},Kd={class:"mb-6"},zd={key:0,class:"flex justify-center items-center py-8"},Gd={key:1,class:"text-center py-8"},Yd={key:2,class:"space-y-4"},Jd=["onClick"],Xd={class:"flex items-center space-x-4"},Zd={class:"flex-1"},ef={class:"font-medium text-gray-900"},tf={class:"text-sm text-gray-600"},sf={class:"flex items-center space-x-4 mt-2"},rf={class:"text-sm font-medium text-gray-900"},nf={class:"text-xs text-gray-500"},of={class:"flex justify-end space-x-3 p-6 border-t border-gray-200"};function af(e,t,s,r,n,o){return m(),g("div",Vd,[c("div",$d,[c("div",Wd,[t[5]||(t[5]=c("h3",{class:"text-lg font-medium text-gray-900"},"Add Product to Quote",-1)),c("button",{onClick:t[0]||(t[0]=i=>e.$emit("close")),class:"text-gray-400 hover:text-gray-600"},t[4]||(t[4]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",Qd,[c("div",Kd,[t[6]||(t[6]=c("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Products",-1)),ue(c("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.searchQuery=i),type:"text",placeholder:"Search by name or SKU...",class:"input",onInput:t[2]||(t[2]=(...i)=>o.searchProducts&&o.searchProducts(...i))},null,544),[[de,n.searchQuery]])]),n.loading?(m(),g("div",zd,t[7]||(t[7]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.filteredProductPrices.length===0?(m(),g("div",Gd,t[8]||(t[8]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products found</h4><p class="text-gray-600">Try adjusting your search terms.</p>',3)]))):(m(),g("div",Yd,[(m(!0),g(oe,null,Fe(n.filteredProductPrices,i=>(m(),g("div",{key:i.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer",onClick:a=>o.selectProduct(i)},[c("div",Xd,[c("div",Zd,[c("h4",ef,_(i.productName),1),c("p",tf,"SKU: "+_(i.productSku),1),c("div",sf,[c("div",null,[c("span",rf,"ZAR "+_(o.formatCurrency(i.price)),1)]),c("div",null,[c("span",nf," incl. VAT: ZAR "+_(o.formatCurrency(i.priceInclVat)),1)])])]),t[9]||(t[9]=c("div",{class:"text-right"},[c("button",{class:"btn btn-primary text-sm"}," Add to Quote ")],-1))])],8,Jd))),128))]))]),c("div",of,[c("button",{onClick:t[3]||(t[3]=i=>e.$emit("close")),class:"btn btn-secondary"},"Cancel")])])])}const lf=kt(Hd,[["render",af]]);class cf{constructor(){this.baseUrl=Ht}async makeRequest(t,s=null){const r=`${this.baseUrl}${t}`,n={"Content-Type":"application/json"},o=Y.getToken();o&&(n.Authorization=`Bearer ${o}`);const i={method:s?"POST":"GET",headers:n};s&&(i.body=JSON.stringify(s));const a=await fetch(r,i);if(!a.ok){const d=(await a.json().catch(()=>({}))).message||`HTTP error! status: ${a.status}`;throw typeof d=="string"&&d.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(d)}return a.json()}async calculateDelivery(t){return this.makeRequest("/calculateDelivery",{id:t})}}const uf=new cf;class df{constructor(){this.cache=new Map,this.urlMap=new Map}async get(t,s){if(!t||!s)return s;if(this.cache.has(t))return this.cache.get(t);try{const r=await fetch(s);if(!r.ok)return console.warn(`Failed to fetch image for caching: ${s}`),s;const n=await r.blob(),o=URL.createObjectURL(n);return this.cache.set(t,o),this.urlMap.set(t,s),o}catch(r){return console.warn(`Error caching image for ${t}:`,r),s}}clear(t=null){if(t){const s=this.cache.get(t);s&&URL.revokeObjectURL(s),this.cache.delete(t),this.urlMap.delete(t)}else{for(const s of this.cache.values())URL.revokeObjectURL(s);this.cache.clear(),this.urlMap.clear()}}getStats(){return{entryCount:this.cache.size,ids:Array.from(this.cache.keys())}}}const Cn=new df,ff={name:"QuoteDetail",components:{AddProductModal:lf},props:{quote:{type:Object,required:!0},customerId:{type:String,required:!1}},data(){return{productPrices:[],quoteProducts:[],productDetails:{},showAddProductModal:!1,loading:!1,customerPriceList:null,equipmentBoxes:[],equipmentBoxDetails:{},selectedBoxType:"",loadingEquipmentBoxes:!1,loadingProducts:!1,imagePreview:{show:!1,src:"",alt:"",x:0,y:0},deliveryRates:null,loadingDeliveryRates:!1,deliveryRatesError:null,submittingQuote:!1,productsReadOnly:!1,deliveryAddresses:[],loadingAddresses:!1,selectedAddressId:"",addressSubmitAttempted:!1,showAddressDialog:!1,showDeliveryInfoDialog:!1,showRawJson:!1,showNameDialog:!1,editName:"",savingName:!1}},async mounted(){var e,t;this.loadingProducts=!0,this.loadingEquipmentBoxes=!0,this.loadingAddresses=!0,await this.refreshQuoteData(),await this.loadCustomerPriceList(),await this.loadQuoteProducts(),await this.loadProductDetails(),this.initializeBoxType(),await this.loadEquipmentBoxes(),await this.loadDeliveryAddresses(),this.quote.deliveryAddressId&&(this.selectedAddressId=this.quote.deliveryAddressId),this.checkExistingDeliveryDetails(),this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0&&(this.productsReadOnly=!0),((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status)||(this.productsReadOnly=!0),this.hydrateActionUsers(),this.hydrateCreatedByUser()},computed:{priceListId(){var e,t,s;return((t=(e=this.customerPriceList)==null?void 0:e.priceList)==null?void 0:t.id)||((s=this.customerPriceList)==null?void 0:s.priceListId)},isSubmitted(){var e;return((e=this.quote)==null?void 0:e.status)==="Submitted"},isApproved(){var e;return((e=this.quote)==null?void 0:e.status)==="Approved"},isDraft(){var t;const e=(t=this.quote)==null?void 0:t.status;return!e||e==="Draft"},hasDeliveryInfo(){var e;return!!((e=this.quote)!=null&&e.deliveryRawJson)},formattedDeliveryInfo(){var e,t;try{return JSON.stringify(((e=this.quote)==null?void 0:e.deliveryRawJson)??{},null,2)}catch{return String(((t=this.quote)==null?void 0:t.deliveryRawJson)??"")}},parsedDelivery(){var i;const e=(i=this.quote)==null?void 0:i.deliveryRawJson;let t={};if(!e)return{selectedRate:null,otherRates:[]};if(typeof e=="string")try{t=JSON.parse(e)}catch{t={}}else t=e;const r=[...Array.isArray(t.rates)?t.rates:[]].sort((a,l)=>(a.rate??1/0)-(l.rate??1/0)),n=r[0]||null,o=r.slice(1).map((a,l)=>({...a,_key:l}));return{selectedRate:n,otherRates:o}},formatChargedKg(){var t,s;if((t=this.quote)!=null&&t.chargedWeightInGrams)return(this.quote.chargedWeightInGrams/1e3).toFixed(0);const e=(s=this.parsedDelivery.selectedRate)==null?void 0:s.charged_weight;return e!=null?Number(e).toFixed(0):"0"},selectedAddress(){return(this.deliveryAddresses||[]).find(t=>t.id===this.selectedAddressId)||{}},isDeliverySet(){return!!(this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0)},isSubmitDisabled(){return!this.isDeliverySet||!this.productsReadOnly||this.loading||this.loadingEquipmentBoxes||this.loadingDeliveryRates||this.submittingQuote},grandTotal(){return this.quote.total||0},vat(){return this.quote.vat||0},grandTotalInclVat(){return this.quote.totalInclVat||0},productsWeight(){return this.quoteProducts.reduce((e,t)=>{const s=this.productDetails[t.productId];return s&&s.weightInGrams?e+Number(s.weightInGrams)*t.quantity:e},0)},equipmentBoxesWeight(){return this.equipmentBoxes.reduce((e,t)=>{const s=this.equipmentBoxDetails[t.equipmentBoxId];return s&&s.weightInGrams?e+Number(s.weightInGrams)*t.quantity:e},0)},totalShipmentWeight(){return this.productsWeight+this.equipmentBoxesWeight}},watch:{"quote.products":{handler(){this.checkExistingDeliveryDetails()},deep:!0},quote:{handler(){this.$nextTick(()=>{var e,t;this.checkExistingDeliveryDetails(),this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0&&(this.productsReadOnly=!0),((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status)||(this.productsReadOnly=!0),this.hydrateActionUsers(),this.hydrateCreatedByUser()})},deep:!1},equipmentBoxes:{handler(){this.$nextTick(()=>{this.checkExistingDeliveryDetails()})},deep:!0},"quote.boxType":{handler(e){e&&e!==this.selectedBoxType&&(this.selectedBoxType=e,console.log("Box type updated from quote:",e))},immediate:!0}},methods:{async hydrateActionUsers(){var e,t,s,r,n,o;try{const i=((e=this.quote)==null?void 0:e.submittedById)||((t=this.quote)==null?void 0:t.submittedBy),a=((s=this.quote)==null?void 0:s.approvedById)||((r=this.quote)==null?void 0:r.approvedBy),l=i&&!((n=this.quote)!=null&&n.submittedByName),d=a&&!((o=this.quote)!=null&&o.approvedByName);if(!l&&!d)return;const{userService:u}=await De(async()=>{const{userService:y}=await import("./userService-2SYTYoeB.js");return{userService:y}},[]),h={},b=[];l&&b.push(u.getUser(i).then(y=>{h.submittedByName=[y.firstName,y.lastName].filter(Boolean).join(" ")||y.email||y.id}).catch(y=>console.warn("Failed to fetch submitted by user:",y))),d&&b.push(u.getUser(a).then(y=>{h.approvedByName=[y.firstName,y.lastName].filter(Boolean).join(" ")||y.email||y.id}).catch(y=>console.warn("Failed to fetch approved by user:",y))),await Promise.all(b),Object.keys(h).length&&this.$emit("quote-updated",{...this.quote,...h})}catch(i){console.warn("Failed to hydrate action user names",i)}},async hydrateCreatedByUser(){var e,t,s;try{const r=((e=this.quote)==null?void 0:e.createdById)||((t=this.quote)==null?void 0:t.createdBy);if(!r||(s=this.quote)!=null&&s.createdByName)return;const{userService:n}=await De(async()=>{const{userService:a}=await import("./userService-2SYTYoeB.js");return{userService:a}},[]),o=await n.getUser(r),i=[o.firstName,o.lastName].filter(Boolean).join(" ")||o.email||o.id;this.$emit("quote-updated",{...this.quote,createdByName:i})}catch(r){console.warn("Failed to hydrate createdBy user name",r)}},openNameDialog(){var e,t;(((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status))&&(this.editName=this.quote.name||"",this.showNameDialog=!0)},closeNameDialog(){this.showNameDialog=!1},async saveName(){try{if(!this.editName||!this.editName.trim())return;this.savingName=!0,await fe.updateQuoteName(this.quote.id,this.editName.trim());const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),this.showNameDialog=!1}catch(e){console.error("Failed to update quote name:",e),alert("Failed to update name: "+(e.message||"Unknown error"))}finally{this.savingName=!1}},openDeliveryInfoDialog(){this.showDeliveryInfoDialog=!0},closeDeliveryInfoDialog(){this.showDeliveryInfoDialog=!1},openAddressDialog(){this.productsReadOnly||(this.showAddressDialog=!0)},closeAddressDialog(){this.showAddressDialog=!1},selectAddress(e){this.productsReadOnly||(this.selectedAddressId=e,this.onAddressChange(),this.closeAddressDialog())},async loadDeliveryAddresses(){try{if(!this.customerId)return;this.loadingAddresses=!0;const{deliveryAddressService:e}=await De(async()=>{const{deliveryAddressService:r}=await Promise.resolve().then(()=>o0);return{deliveryAddressService:r}},void 0),t=await e.listDeliveryAddresses(this.customerId),s=Array.isArray(t)?t:t.results||[];if(this.quote.deliveryAddressId)try{const r=await e.getDeliveryAddress(this.quote.deliveryAddressId);!s.some(o=>o.id===r.id)&&r&&s.push(r)}catch(r){console.warn("Could not hydrate selected delivery address:",r)}this.deliveryAddresses=s}catch(e){console.error("Failed to load delivery addresses",e),this.deliveryAddresses=[]}finally{this.loadingAddresses=!1}},async onAddressChange(){try{await fe.updateQuoteDeliveryAddress(this.quote.id,this.selectedAddressId);const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e)}catch(e){console.error("Failed to update quote delivery address",e),alert("Failed to update delivery address: "+(e.message||"Unknown error"))}},selectBoxType(e){this.selectedBoxType!==e&&(this.selectedBoxType=e,this.onBoxTypeChange())},async toggleProductsReadOnly(){var e,t;(((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status))&&(!this.productsReadOnly&&(this.addressSubmitAttempted=!0,!this.selectedAddressId)||(this.productsReadOnly=!this.productsReadOnly,this.productsReadOnly&&this.selectedBoxType?(await this.calculateEquipmentBoxes(),this.equipmentBoxes.length>0&&await this.calculateDeliveryRates()):this.productsReadOnly||(this.addressSubmitAttempted=!1,await this.resetDeliveryInfo())))},async loadCustomerPriceList(){try{const{priceListService:e}=await De(async()=>{const{priceListService:t}=await Promise.resolve().then(()=>co);return{priceListService:t}},void 0);if(this.customerId){const s=(await e.getCustomerPriceLists(this.customerId)).find(r=>r.id===this.quote.customerPriceListId);s?this.customerPriceList=s:(console.warn("Customer price list not found for quote. Falling back to empty priceListId"),this.customerPriceList={priceListId:""})}else console.warn("No customerId provided to QuoteDetail; cannot resolve priceListId"),this.customerPriceList={priceListId:""}}catch(e){console.error("Failed to load customer price list:",e),this.customerPriceList={priceListId:""}}},async loadQuoteProducts(){try{this.loadingProducts=!0,this.quoteProducts=await fe.getQuoteProducts(this.quote.id)}catch(e){console.error("Failed to load quote products:",e)}finally{this.loadingProducts=!1}try{this.priceListId&&(this.productPrices=await yr.getProductPricesByPriceList(this.priceListId))}catch(e){console.error("Failed to load product prices:",e)}},async loadProductDetails(){var e;try{for(const t of this.quoteProducts)if(t.product&&!this.productDetails[t.productId]){const s=t.product;(e=s.image)!=null&&e.url&&(s.image.url=await Cn.get(t.productId,s.image.url)),this.productDetails[t.productId]=s}}catch(t){console.error("Failed to load product details:",t)}},async updateProductQuantity(e,t){try{await fe.updateQuoteProduct(e,parseFloat(t)),await this.loadQuoteProducts();const s=await fe.getQuote(this.quote.id);this.$emit("quote-updated",s)}catch(s){console.error("Failed to update product quantity:",s)}},async removeProduct(e){if(confirm("Are you sure you want to remove this product from the quote?"))try{await fe.deleteQuoteProduct(e),await this.loadQuoteProducts();const t=await fe.getQuote(this.quote.id);this.$emit("quote-updated",t)}catch(t){console.error("Failed to remove product:",t)}},async deleteQuote(){if(confirm("Are you sure you want to delete this quote? This action cannot be undone."))try{await fe.deleteQuote(this.quote.id),this.$emit("quote-deleted")}catch(e){console.error("Failed to delete quote:",e)}},async handleProductAdded(){this.showAddProductModal=!1,await this.loadQuoteProducts(),await this.loadProductDetails();const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e)},async loadEquipmentBoxes(){var e;try{this.loadingEquipmentBoxes=!0;const{equipmentBoxService:t}=await De(async()=>{const{equipmentBoxService:r}=await import("./equipmentBoxService-B4LjxDPr.js");return{equipmentBoxService:r}},[]),s=await t.listQuoteEquipmentBoxes(this.quote.id);this.equipmentBoxes=s.results||[];for(const r of this.equipmentBoxes)if(r.equipmentBox&&!this.equipmentBoxDetails[r.equipmentBoxId]){const n=r.equipmentBox;(e=n.image)!=null&&e.url&&(n.image.url=await Cn.get(r.equipmentBoxId,n.image.url)),this.equipmentBoxDetails[r.equipmentBoxId]=n}}catch(t){console.error("Failed to load equipment boxes:",t),this.equipmentBoxes=[]}finally{this.loadingEquipmentBoxes=!1}},async onBoxTypeChange(){this.selectedBoxType?(await this.calculateEquipmentBoxes(),this.equipmentBoxes.length>0&&await this.calculateDeliveryRates()):await this.resetDeliveryInfo()},async resetDeliveryInfo(){try{this.loading=!0;const{equipmentBoxService:e}=await De(async()=>{const{equipmentBoxService:t}=await import("./equipmentBoxService-B4LjxDPr.js");return{equipmentBoxService:t}},[]);await e.resetDeliveryInfo(this.quote.id),this.equipmentBoxes=[],this.deliveryRates=null,this.deliveryRatesError=null,await this.refreshQuoteData()}catch(e){console.error("Failed to reset delivery info:",e),alert("Failed to reset delivery info: "+e.message)}finally{this.loading=!1}},async calculateEquipmentBoxes(){if(this.selectedBoxType)try{this.loading=!0;const{equipmentBoxService:e}=await De(async()=>{const{equipmentBoxService:t}=await import("./equipmentBoxService-B4LjxDPr.js");return{equipmentBoxService:t}},[]);await e.calculateEquipmentBoxes(this.quote.id,this.selectedBoxType),await this.loadEquipmentBoxes(),await this.refreshQuoteData()}catch(e){console.error("Failed to calculate equipment boxes:",e),alert("Failed to calculate equipment boxes: "+e.message)}finally{this.loading=!1}},formatDate(e){if(!e)return"—";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear(),o=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${s} ${r} ${n} ${o}:${i}`},formatCurrency(e){return parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})},formatVolume(e){return e?`${parseFloat(e).toFixed(0)} cm³`:"N/A"},formatDimensions(e){if(!e)return"N/A";const{lengthInCm:t,widthInCm:s,heightInCm:r}=e;return!t||!s||!r?"N/A":`${parseFloat(t).toFixed(0)} × ${parseFloat(s).toFixed(0)} × ${parseFloat(r).toFixed(0)} cm`},formatWeight(e){if(!e||e===0)return"0 kg";const t=e/1e3;return t>=1?`${t.toFixed(2)} kg`:`${e.toFixed(0)} g`},showImagePreview(e,t){var r;const s=this.productDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let l=t.clientX+10,d=t.clientY+10;l+250>window.innerWidth&&(l=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Product",x:l,y:d}}},updateImagePreviewPosition(e){if(this.imagePreview.show){let o=e.clientX+10,i=e.clientY+10;o+250>window.innerWidth&&(o=e.clientX-250-10),i+250>window.innerHeight&&(i=e.clientY-250-10),this.imagePreview.x=o,this.imagePreview.y=i}},hideImagePreview(){this.imagePreview.show=!1},showBoxImagePreview(e,t){var r;const s=this.equipmentBoxDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let l=t.clientX+10,d=t.clientY+10;l+250>window.innerWidth&&(l=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Equipment Box",x:l,y:d}}},resetDeliveryRates(){this.deliveryRates=null,this.deliveryRatesError=null,this.loadingDeliveryRates=!1},async calculateDeliveryRates(){if(!this.selectedBoxType||this.equipmentBoxes.length===0){this.deliveryRatesError="Please calculate equipment boxes first before calculating delivery rates.";return}this.loadingDeliveryRates=!0,this.deliveryRatesError=null,this.deliveryRates=null;try{const e=await uf.calculateDelivery(this.quote.id),t=e.availableRates&&e.availableRates.length>0?e.availableRates[0].weights.chargedWeight:null;this.deliveryRates={...e,chargedWeight:t},await this.refreshQuoteData()}catch(e){console.error("Failed to calculate delivery rates:",e),this.deliveryRatesError=e.message||"Failed to calculate delivery rates"}finally{this.loadingDeliveryRates=!1}},formatDeliveryDate(e){if(!e)return"N/A";try{const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`}catch(t){return console.error("Error formatting delivery date:",t),"Invalid date"}},formatQuoteStatus(e){return e?e==="Submitted"?"Submitted":e==="Approved"?"Approved":"Draft":"Draft"},async refreshQuoteData(){try{const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),await this.$nextTick(),console.log("Quote data refreshed successfully")}catch(e){console.error("Failed to refresh quote data:",e)}},initializeBoxType(){this.quote.boxType&&(this.selectedBoxType=this.quote.boxType,console.log("Initialized box type from quote:",this.quote.boxType))},checkExistingDeliveryDetails(){this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0?(this.deliveryRates={selectedDeliveryService:this.quote.deliveryService,selectedDeliveryFees:this.quote.totalDeliveryFees,totalParcels:this.equipmentBoxes.length>0?this.equipmentBoxes.reduce((e,t)=>e+t.quantity,0):0,totalWeightKg:this.totalShipmentWeight/1e3,totalVolumeCm3:this.equipmentBoxes.length>0?this.equipmentBoxes.reduce((e,t)=>{const s=this.equipmentBoxDetails[t.equipmentBoxId];if(s){const r=s.lengthInCm*s.widthInCm*s.heightInCm*t.quantity;return e+r}return e},0):0},console.log("Hydrated existing delivery details:",this.deliveryRates)):console.log("No existing delivery details found")},async submitQuote(){try{this.submittingQuote=!0,await fe.submitQuote(this.quote.id);const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),this.productsReadOnly=!0,this.showAddProductModal=!1}catch(e){console.error("Failed to submit quote:",e),alert("Failed to submit quote: "+(e.message||"Unknown error"))}finally{this.submittingQuote=!1}}}},hf={class:"space-y-6"},pf={class:"flex justify-between items-center"},mf={class:"flex items-center space-x-4"},gf={class:"flex items-center gap-2"},yf={class:"text-2xl font-semibold text-gray-900"},_f={class:"flex space-x-2"},bf=["disabled"],vf={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},xf={class:"card"},wf={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Sf={class:"text-lg font-semibold text-gray-900"},Ef={class:"flex items-center"},kf={class:"text-gray-900"},Pf={class:"text-gray-900"},Cf={class:"text-gray-900"},If={class:"text-gray-900"},Af={class:"text-gray-900"},Tf={class:"text-gray-900"},Df={class:"card"},Rf={class:"flex items-center justify-between mb-2"},Lf={class:"block text-sm font-medium text-gray-700"},Nf={key:0,class:"text-red-600"},Of={key:0,class:"text-xs text-red-600"},Ff={class:"flex items-start gap-4"},qf={class:"w-full"},Mf={key:0,class:"rounded-lg border border-gray-200 p-4 text-sm text-gray-500 bg-gray-50"},Bf={class:"md:grid md:grid-cols-2 md:gap-6"},jf={class:"space-y-1"},Uf={class:"text-base font-semibold text-gray-900"},Hf={key:0,class:"text-sm text-gray-700"},Vf={key:1,class:"space-y-0.5"},$f={key:0,class:"text-sm text-gray-700"},Wf={key:1,class:"text-sm text-gray-700"},Qf={key:2,class:"text-sm text-gray-700"},Kf={class:"space-y-1 mt-3 md:mt-6"},zf={class:"text-sm text-gray-700"},Gf={key:0,class:"text-sm text-gray-700"},Yf={class:"text-sm text-gray-700"},Jf={key:1,class:"text-sm text-gray-700"},Xf={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Zf={class:"relative bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden"},eh={class:"flex items-center justify-between p-4 border-b border-gray-200"},th={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},sh={key:0,class:"text-center text-sm text-gray-600 py-8"},rh={key:1,class:"space-y-4"},nh=["onClick"],oh={class:"md:grid md:grid-cols-2 md:gap-6"},ih={class:"space-y-1"},ah={class:"text-base font-semibold text-gray-900"},lh={key:0,class:"text-sm text-gray-700"},ch={key:1,class:"space-y-0.5"},uh={key:0,class:"text-sm text-gray-700"},dh={key:1,class:"text-sm text-gray-700"},fh={key:2,class:"text-sm text-gray-700"},hh={class:"space-y-1 mt-3 md:mt-6"},ph={class:"text-sm text-gray-700"},mh={key:0,class:"text-sm text-gray-700"},gh={class:"text-sm text-gray-700"},yh={key:1,class:"text-sm text-gray-700"},_h={class:"p-4 border-t border-gray-200 flex justify-end"},bh={class:"card"},vh={key:0,class:"flex justify-center items-center py-8"},xh={key:1,class:"text-center py-8"},wh={key:2,class:"space-y-4"},Sh={class:"flex justify-between items-center"},Eh={class:"flex items-center space-x-4"},kh={class:"relative w-12 h-12"},Ph=["src","alt","onMouseenter"],Ch={key:1,class:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center"},Ih={class:"min-h-[2rem] flex flex-col justify-center"},Ah={class:"font-medium text-gray-900"},Th={class:"text-sm text-gray-600"},Dh={class:"flex items-center space-x-4"},Rh={class:"w-12 text-center"},Lh=["onClick"],Nh={class:"w-20 text-right"},Oh=["value","onChange"],Fh={key:1,class:"text-sm font-medium text-gray-900 text-center"},qh={class:"w-20 text-right"},Mh={class:"text-sm font-medium text-gray-900"},Bh={class:"w-20 text-right"},jh={class:"text-sm font-bold text-gray-900"},Uh={key:3,class:"flex justify-end items-center space-x-3 mt-6 pt-4 border-t border-gray-200"},Hh=["disabled"],Vh=["disabled"],$h={key:0,class:"card"},Wh={key:0,class:"mb-4"},Qh={class:"flex gap-3"},Kh=["disabled"],zh=["disabled"],Gh={key:1,class:"flex justify-center items-center py-8"},Yh={key:2,class:"text-center py-8"},Jh={key:3,class:"text-center py-8"},Xh={key:4,class:"space-y-3"},Zh={class:"flex justify-between items-center"},ep={class:"flex items-center space-x-4"},tp={class:"relative w-12 h-12"},sp=["src","alt","onMouseenter"],rp={key:1,class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},np={class:"min-h-[2rem] flex flex-col justify-center"},op={class:"font-medium text-gray-900"},ip={class:"text-xs text-gray-500"},ap={class:"flex items-center space-x-4"},lp={class:"w-20 text-right"},cp={class:"text-sm font-medium text-gray-900"},up={class:"w-20 text-right"},dp={class:"text-sm font-medium text-gray-900"},fp={class:"w-20 text-right"},hp={class:"text-sm font-bold text-gray-900"},pp={key:1,class:"card"},mp={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gp={class:"text-2xl font-bold text-gray-900"},yp={class:"space-y-2"},_p={class:"flex justify-between text-sm"},bp={class:"font-medium"},vp={key:0,class:"flex justify-between text-sm"},xp={class:"font-medium"},wp={class:"mt-6 border-t pt-6"},Sp={key:0},Ep={class:"bg-green-50 border border-green-200 rounded-lg p-4"},kp={class:"flex items-start justify-between"},Pp={class:"ml-3 flex-1"},Cp={class:"mt-2 text-sm text-green-700"},Ip={class:"mt-1 text-xs"},Ap={key:0},Tp={class:"ml-3"},Dp={key:0,class:"mt-6 border-t pt-6"},Rp={class:"bg-red-50 border border-red-200 rounded-lg p-4"},Lp={class:"flex"},Np={class:"ml-3 flex-1"},Op={class:"mt-2 text-sm text-red-700"},Fp={class:"mt-3"},qp=["disabled"],Mp={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-red-700",fill:"none",viewBox:"0 0 24 24"},Bp={class:"card"},jp={class:"flex justify-end"},Up={class:"w-80 space-y-2"},Hp={class:"flex justify-between"},Vp={class:"font-medium"},$p={class:"flex justify-between"},Wp={class:"font-medium"},Qp={class:"flex justify-between"},Kp={class:"font-medium"},zp={class:"border-t pt-2"},Gp={class:"flex justify-between"},Yp={class:"text-sm font-medium text-gray-900"},Jp={class:"flex justify-between"},Xp={class:"text-lg font-bold text-gray-900"},Zp={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},em={class:"relative bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden"},tm={class:"flex items-center justify-between p-4 border-b border-gray-200"},sm={class:"p-4 overflow-auto max-h-[calc(90vh-160px)] space-y-6"},rm={class:"border border-gray-200 rounded-lg p-4"},nm={class:"flex items-start justify-between"},om={class:"text-base font-semibold text-gray-900"},im={class:"text-sm text-gray-700 mt-1"},am={class:"text-sm text-gray-700 mt-1 flex flex-wrap gap-4"},lm={key:0},cm={key:1},um={key:2},dm={key:0,class:"text-xs text-gray-600 mt-1"},fm={key:0},hm={key:1},pm={class:"text-right text-sm text-gray-700"},mm={key:0},gm={key:1},ym={key:2},_m={key:0,class:"border border-gray-200 rounded-lg p-4"},bm={class:"overflow-x-auto"},vm={class:"min-w-full text-sm"},xm={class:"py-2 pr-4 text-gray-800"},wm={class:"py-2 pr-4 text-gray-800"},Sm={class:"py-2 pr-4 text-gray-800"},Em={class:"py-2 pr-4 text-gray-800"},km={class:"py-2 pr-4 text-gray-800"},Pm={key:0,class:"mt-2"},Cm={class:"text-xs text-gray-800 whitespace-pre-wrap break-words"},Im={class:"p-4 border-t border-gray-200 flex justify-end"},Am={key:3,class:"fixed inset-0 z-50 flex items-center justify-center"},Tm={class:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4"},Dm={class:"flex items-center justify-between p-4 border-b border-gray-200"},Rm={class:"p-4 space-y-3"},Lm={class:"p-4 border-t border-gray-200 flex justify-end gap-2"},Nm=["disabled"],Om=["src","alt"];function Fm(e,t,s,r,n,o){var a,l,d,u,h,b,y,D,F,V,U,Q,z,q,ne,Ue,Ie,He,Ct,Ke;const i=Nt("AddProductModal");return m(),g("div",hf,[c("div",pf,[c("div",mf,[c("button",{onClick:t[0]||(t[0]=x=>e.$emit("back")),class:"btn btn-secondary"}," Back to Quotes "),c("div",gf,[c("h2",yf,_(s.quote.name||"Quote #"+(s.quote.number||"")),1),o.isDraft?(m(),g("button",{key:0,onClick:t[1]||(t[1]=(...x)=>o.openNameDialog&&o.openNameDialog(...x)),class:"text-gray-500 hover:text-gray-700",title:"Edit quote name"},t[31]||(t[31]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5M18.5 2.5a2.121 2.121 0 113 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]))):P("",!0)])]),c("div",_f,[s.quote.status==="Draft"||!s.quote.status?(m(),g("button",{key:0,onClick:t[2]||(t[2]=(...x)=>o.submitQuote&&o.submitQuote(...x)),class:ae(["btn bg-green-600 hover:bg-green-700 text-white",{"opacity-50 cursor-not-allowed":o.isSubmitDisabled}]),disabled:o.isSubmitDisabled},[n.submittingQuote?(m(),g("span",vf)):P("",!0),he(" "+_(n.submittingQuote?"Submitting...":"Submit Quote"),1)],10,bf)):P("",!0),o.isDraft?(m(),g("button",{key:1,onClick:t[3]||(t[3]=(...x)=>o.deleteQuote&&o.deleteQuote(...x)),class:"btn btn-danger"}," Delete Quote ")):P("",!0)])]),c("div",xf,[c("div",wf,[c("div",null,[t[32]||(t[32]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quote Number",-1)),c("p",Sf,_(s.quote.number),1)]),c("div",null,[t[33]||(t[33]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),c("div",Ef,[c("span",{class:ae(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.quote.status==="Submitted"?"bg-green-100 text-green-800":s.quote.status==="Approved"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},_(o.formatQuoteStatus(s.quote.status)),3)])]),c("div",null,[t[34]||(t[34]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Created By",-1)),c("p",kf,_(s.quote.createdByName||"—"),1)]),c("div",null,[t[35]||(t[35]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Updated",-1)),c("p",Pf,_(o.formatDate(s.quote.updatedAt)),1)]),o.isSubmitted||o.isApproved?(m(),g(oe,{key:0},[c("div",null,[t[36]||(t[36]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Submitted By",-1)),c("p",Cf,_(s.quote.submittedByName||"—"),1)]),c("div",null,[t[37]||(t[37]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Submitted At",-1)),c("p",If,_(s.quote.submittedAt?o.formatDate(s.quote.submittedAt):"—"),1)]),c("div",null,[t[38]||(t[38]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),c("p",Af,_(s.quote.approvedByName||"—"),1)]),c("div",null,[t[39]||(t[39]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved At",-1)),c("p",Tf,_(s.quote.approvedAt?o.formatDate(s.quote.approvedAt):"—"),1)])],64)):P("",!0)])]),c("div",Df,[c("div",Rf,[c("label",Lf,[t[40]||(t[40]=he("Delivery Address ",-1)),n.productsReadOnly?P("",!0):(m(),g("span",Nf,"*"))]),!n.productsReadOnly&&n.addressSubmitAttempted&&!n.selectedAddressId?(m(),g("span",Of,"Address is required")):P("",!0)]),c("div",Ff,[c("div",qf,[n.loadingAddresses?(m(),g("div",Mf,"Loading addresses...")):n.selectedAddressId?(m(),g("div",{key:2,class:ae(["rounded-lg border border-gray-200 p-4 bg-white transition w-full",{"cursor-pointer hover:border-blue-400":!n.productsReadOnly&&!n.loadingAddresses,"cursor-not-allowed":n.productsReadOnly||n.loadingAddresses}]),role:"button",tabindex:"0",onClick:t[6]||(t[6]=(...x)=>o.openAddressDialog&&o.openAddressDialog(...x)),onKeydown:t[7]||(t[7]=ui((...x)=>o.openAddressDialog&&o.openAddressDialog(...x),["enter"]))},[c("div",Bf,[c("div",jf,[c("div",Uf,_(o.selectedAddress.name),1),o.selectedAddress.organisation?(m(),g("div",Hf,_(o.selectedAddress.organisation),1)):P("",!0),o.selectedAddress.contactPerson||o.selectedAddress.contactPhone||o.selectedAddress.contactEmail?(m(),g("div",Vf,[o.selectedAddress.contactPerson?(m(),g("p",$f,"Contact: "+_(o.selectedAddress.contactPerson),1)):P("",!0),o.selectedAddress.contactPhone?(m(),g("p",Wf,"Phone: "+_(o.selectedAddress.contactPhone),1)):P("",!0),o.selectedAddress.contactEmail?(m(),g("p",Qf,"Email: "+_(o.selectedAddress.contactEmail),1)):P("",!0)])):P("",!0)]),c("div",Kf,[c("div",zf,_(o.selectedAddress.addressLine1),1),o.selectedAddress.addressLine2?(m(),g("div",Gf,_(o.selectedAddress.addressLine2),1)):P("",!0),c("div",Yf,_(o.selectedAddress.suburb)+", "+_(o.selectedAddress.city)+", "+_(o.selectedAddress.province)+" "+_(o.selectedAddress.postalCode),1),o.selectedAddress.deliveryNotes?(m(),g("div",Jf,_(o.selectedAddress.deliveryNotes),1)):P("",!0)])])],34)):(m(),g("div",{key:1,class:ae(["rounded-lg border border-dashed border-gray-300 p-4 text-sm text-gray-600 transition",{"cursor-pointer hover:border-blue-400":!n.productsReadOnly&&!n.loadingAddresses,"cursor-not-allowed":n.productsReadOnly||n.loadingAddresses}]),role:"button",tabindex:"0",onClick:t[4]||(t[4]=(...x)=>o.openAddressDialog&&o.openAddressDialog(...x)),onKeydown:t[5]||(t[5]=ui((...x)=>o.openAddressDialog&&o.openAddressDialog(...x),["enter"]))}," No address selected ",34))])]),n.showAddressDialog?(m(),g("div",Xf,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[8]||(t[8]=(...x)=>o.closeAddressDialog&&o.closeAddressDialog(...x))}),c("div",Zf,[c("div",eh,[t[42]||(t[42]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Select Delivery Address",-1)),c("button",{onClick:t[9]||(t[9]=(...x)=>o.closeAddressDialog&&o.closeAddressDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[41]||(t[41]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",th,[n.deliveryAddresses.length===0?(m(),g("div",sh,"No delivery addresses found.")):(m(),g("div",rh,[(m(!0),g(oe,null,Fe(n.deliveryAddresses,x=>(m(),g("div",{key:x.id,class:"border rounded-lg p-4 hover:border-blue-500 hover:shadow cursor-pointer transition w-full",onClick:we=>o.selectAddress(x.id)},[c("div",oh,[c("div",ih,[c("div",ah,_(x.name),1),x.organisation?(m(),g("div",lh,_(x.organisation),1)):P("",!0),x.contactPerson||x.contactPhone||x.contactEmail?(m(),g("div",ch,[x.contactPerson?(m(),g("p",uh,"Contact: "+_(x.contactPerson),1)):P("",!0),x.contactPhone?(m(),g("p",dh,"Phone: "+_(x.contactPhone),1)):P("",!0),x.contactEmail?(m(),g("p",fh,"Email: "+_(x.contactEmail),1)):P("",!0)])):P("",!0)]),c("div",hh,[c("div",ph,_(x.addressLine1),1),x.addressLine2?(m(),g("div",mh,_(x.addressLine2),1)):P("",!0),c("div",gh,_(x.suburb)+", "+_(x.city)+", "+_(x.province)+" "+_(x.postalCode),1),x.deliveryNotes?(m(),g("div",yh,_(x.deliveryNotes),1)):P("",!0)])])],8,nh))),128))]))]),c("div",_h,[c("button",{onClick:t[10]||(t[10]=(...x)=>o.closeAddressDialog&&o.closeAddressDialog(...x)),class:"btn btn-secondary"},"Close")])])])):P("",!0)]),c("div",bh,[n.loadingProducts?(m(),g("div",vh,t[43]||(t[43]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.quoteProducts.length===0?(m(),g("div",xh,t[44]||(t[44]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21h18"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21v-4h6"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7l3 3-3 3-3-3 3-3z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 6l3 3"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10h3"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products added</h4><p class="text-gray-600">Add products to this quote to get started.</p>',3)]))):(m(),g("div",wh,[t[47]||(t[47]=Pe('<div class="flex justify-between items-center px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg"><div class="flex items-center space-x-4"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Product</h4></div></div><div class="flex items-center space-x-4"><div class="w-12 text-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide"></h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Quantity</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Total</h4></div></div></div>',1)),(m(!0),g(oe,null,Fe(n.quoteProducts,x=>{var we,ze,ot,mt,se;return m(),g("div",{key:x.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[c("div",Sh,[c("div",Eh,[c("div",kh,[(ze=(we=n.productDetails[x.productId])==null?void 0:we.image)!=null&&ze.url?(m(),g("img",{key:0,src:n.productDetails[x.productId].image.url,alt:(ot=n.productDetails[x.productId])==null?void 0:ot.name,class:"w-12 h-12 object-contain rounded-lg cursor-pointer bg-white",onMouseenter:$=>o.showImagePreview(x.productId,$),onMousemove:t[11]||(t[11]=$=>o.updateImagePreviewPosition($)),onMouseleave:t[12]||(t[12]=(...$)=>o.hideImagePreview&&o.hideImagePreview(...$))},null,40,Ph)):(m(),g("div",Ch,t[45]||(t[45]=[c("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),c("div",Ih,[c("h4",Ah,_(((mt=n.productDetails[x.productId])==null?void 0:mt.name)||"Product"),1),c("p",Th,"SKU: "+_(((se=n.productDetails[x.productId])==null?void 0:se.sku)||"N/A"),1)])]),c("div",Dh,[c("div",Rh,[n.productsReadOnly?P("",!0):(m(),g("button",{key:0,onClick:$=>o.removeProduct(x.id),class:"text-red-600 hover:text-red-800 p-2 rounded",title:"Remove product"},t[46]||(t[46]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Lh))]),c("div",Nh,[n.productsReadOnly?(m(),g("p",Fh,_(x.quantity),1)):(m(),g("input",{key:0,type:"number",value:x.quantity,onChange:$=>o.updateProductQuantity(x.id,$.target.value),class:"input w-16 text-sm text-center",min:"0",step:"1"},null,40,Oh))]),c("div",qh,[c("p",Mh,_(o.formatCurrency(x.price)),1)]),c("div",Bh,[c("p",jh,_(o.formatCurrency(x.total)),1)])])])])}),128))])),o.isDraft?(m(),g("div",Uh,[c("button",{onClick:t[13]||(t[13]=x=>n.showAddProductModal=!0),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.productsReadOnly}]),disabled:n.productsReadOnly}," Add Product ",10,Hh),c("button",{onClick:t[14]||(t[14]=(...x)=>o.toggleProductsReadOnly&&o.toggleProductsReadOnly(...x)),class:ae(["btn btn-secondary",{"opacity-50 cursor-not-allowed":!n.productsReadOnly&&(n.quoteProducts.length===0||!n.selectedAddressId)}]),disabled:!n.productsReadOnly&&(n.quoteProducts.length===0||!n.selectedAddressId)},_(n.productsReadOnly?"Edit Products":"Continue with Shipping"),11,Vh)])):P("",!0)]),n.productsReadOnly?(m(),g("div",$h,[o.isDraft?(m(),g("div",Wh,[c("div",Qh,[c("button",{type:"button",onClick:t[15]||(t[15]=x=>o.selectBoxType("PlasticEquipment")),disabled:n.loading,class:ae(["flex items-center gap-3 px-3 py-2 rounded-md border transition",n.selectedBoxType==="PlasticEquipment"?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"])},t[48]||(t[48]=[Pe('<svg class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="4" y="4" width="16" height="12" rx="2" ry="2" stroke-width="2"></rect><path d="M4 12h16" stroke-width="2"></path></svg><div class="text-left"><div class="text-sm font-medium text-gray-900">Plastic Equipment</div><div class="text-xs text-gray-500">Plastic tote box</div></div>',2)]),10,Kh),c("button",{type:"button",onClick:t[16]||(t[16]=x=>o.selectBoxType("Cardboard")),disabled:n.loading,class:ae(["flex items-center gap-3 px-3 py-2 rounded-md border transition",n.selectedBoxType==="Cardboard"?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"])},t[49]||(t[49]=[Pe('<svg class="w-5 h-5 text-yellow-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 7l9-4 9 4-9 4-9-4z" stroke-width="2"></path><path d="M3 7v10l9 4 9-4V7" stroke-width="2"></path></svg><div class="text-left"><div class="text-sm font-medium text-gray-900">Cardboard</div><div class="text-xs text-gray-500">Plain cardboard box</div></div>',2)]),10,zh)])])):P("",!0),n.loadingEquipmentBoxes?(m(),g("div",Gh,t[50]||(t[50]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.selectedBoxType?n.equipmentBoxes.length===0?(m(),g("div",Jh,t[52]||(t[52]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No equipment boxes needed</h4><p class="text-gray-600">The current products don&#39;t require any equipment boxes.</p>',3)]))):(m(),g("div",Xh,[t[54]||(t[54]=Pe('<div class="flex justify-between items-center px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg"><div class="flex items-center space-x-4"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Packaging</h4></div></div><div class="flex items-center space-x-4"><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Quantity</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Total</h4></div></div></div>',1)),(m(!0),g(oe,null,Fe(n.equipmentBoxes,x=>{var we,ze,ot,mt;return m(),g("div",{key:x.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[c("div",Zh,[c("div",ep,[c("div",tp,[(ze=(we=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:we.image)!=null&&ze.url?(m(),g("img",{key:0,src:n.equipmentBoxDetails[x.equipmentBoxId].image.url,alt:((ot=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:ot.name)||"Equipment Box",class:"w-12 h-12 object-contain rounded-lg cursor-pointer bg-white",onMouseenter:se=>o.showBoxImagePreview(x.equipmentBoxId,se),onMousemove:t[17]||(t[17]=se=>o.updateImagePreviewPosition(se)),onMouseleave:t[18]||(t[18]=(...se)=>o.hideImagePreview&&o.hideImagePreview(...se))},null,40,sp)):(m(),g("div",rp,t[53]||(t[53]=[c("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)])))]),c("div",np,[c("h4",op,_(((mt=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:mt.name)||`Equipment Box ${x.equipmentBoxId}`),1),c("p",ip," Dimensions: "+_(o.formatDimensions(n.equipmentBoxDetails[x.equipmentBoxId])),1)])]),c("div",ap,[c("div",lp,[c("p",cp,_(x.quantity),1)]),c("div",up,[c("p",dp,_(o.formatCurrency(x.price)),1)]),c("div",fp,[c("p",hp,_(o.formatCurrency(x.total)),1)])])])])}),128))])):(m(),g("div",Yh,t[51]||(t[51]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No equipment boxes selected</h4><p class="text-gray-600">Select a box type to automatically calculate packaging requirements.</p>',3)])))])):P("",!0),n.productsReadOnly?(m(),g("div",pp,[c("div",mp,[c("div",null,[t[55]||(t[55]=c("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Total Shipment Weight",-1)),c("div",gp,_(o.formatWeight(o.totalShipmentWeight)),1),t[56]||(t[56]=c("p",{class:"text-sm text-gray-600 mt-1"}," Combined weight of all products and equipment boxes ",-1))]),c("div",null,[t[59]||(t[59]=c("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Weight Breakdown",-1)),c("div",yp,[c("div",_p,[t[57]||(t[57]=c("span",{class:"text-gray-600"},"Products",-1)),c("span",bp,_(o.formatWeight(o.productsWeight)),1)]),n.selectedBoxType&&n.equipmentBoxes.length>0?(m(),g("div",vp,[t[58]||(t[58]=c("span",{class:"text-gray-600"},"Equipment Boxes",-1)),c("span",xp,_(o.formatWeight(o.equipmentBoxesWeight)),1)])):P("",!0)])])]),c("div",wp,[n.deliveryRates?(m(),g("div",Sp,[c("div",Ep,[c("div",kp,[t[61]||(t[61]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),c("div",Pp,[t[60]||(t[60]=c("h3",{class:"text-sm font-medium text-green-800"},"The Courier Guy delivery quote",-1)),c("div",Cp,[c("p",null,[c("strong",null,_(n.deliveryRates.selectedDeliveryService),1),he(" - ZAR "+_(o.formatCurrency(n.deliveryRates.selectedDeliveryFees)),1)]),c("p",Ip,[he(_(n.deliveryRates.totalParcels)+" parcels • Actual Weight "+_(((a=n.deliveryRates.totalWeightKg)==null?void 0:a.toFixed(2))||"0.00")+" kg ",1),n.deliveryRates.chargedWeight?(m(),g("span",Ap," • Charged Weight "+_(n.deliveryRates.chargedWeight.toFixed(0))+" kg ",1)):P("",!0)])])]),c("div",Tp,[o.hasDeliveryInfo?(m(),g("button",{key:0,class:"text-xs text-green-700 hover:text-green-900 underline",onClick:t[19]||(t[19]=(...x)=>o.openDeliveryInfoDialog&&o.openDeliveryInfoDialog(...x))}," View details ")):P("",!0)])])])])):P("",!0)]),n.deliveryRatesError?(m(),g("div",Dp,[c("div",Rp,[c("div",Lp,[t[64]||(t[64]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),c("div",Np,[t[63]||(t[63]=c("h3",{class:"text-sm font-medium text-red-800"},"Failed to calculate delivery rates",-1)),c("div",Op,[c("p",null,_(n.deliveryRatesError),1)]),c("div",Fp,[c("button",{onClick:t[20]||(t[20]=(...x)=>o.calculateDeliveryRates&&o.calculateDeliveryRates(...x)),disabled:n.loadingDeliveryRates,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[n.loadingDeliveryRates?(m(),g("svg",Mp,t[62]||(t[62]=[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):P("",!0),he(" "+_(n.loadingDeliveryRates?"Retrying...":"Retry"),1)],8,qp)])])])])])):P("",!0)])):P("",!0),c("div",Bp,[c("div",jp,[c("div",Up,[c("div",Hp,[t[65]||(t[65]=c("span",{class:"text-gray-600"},"Products",-1)),c("span",Vp,_(o.formatCurrency(s.quote.totalProductPrice||0)),1)]),c("div",$p,[t[66]||(t[66]=c("span",{class:"text-gray-600"},"Equipment Boxes",-1)),c("span",Wp,_(s.quote.totalEquipmentBoxPrice&&s.quote.totalEquipmentBoxPrice>0?o.formatCurrency(s.quote.totalEquipmentBoxPrice):"0.00"),1)]),c("div",Qp,[t[67]||(t[67]=c("span",{class:"text-gray-600"},"Delivery",-1)),c("span",Kp,_(s.quote.totalDeliveryFees&&s.quote.totalDeliveryFees>0?o.formatCurrency(s.quote.totalDeliveryFees):"0.00"),1)]),c("div",zp,[c("div",Gp,[t[68]||(t[68]=c("span",{class:"text-sm text-gray-600"},"Total excl. VAT",-1)),c("span",Yp,"ZAR "+_(o.formatCurrency(o.grandTotal)),1)]),c("div",Jp,[t[69]||(t[69]=c("span",{class:"text-lg font-semibold"},"Total incl. VAT",-1)),c("span",Xp,"ZAR "+_(o.formatCurrency(o.grandTotalInclVat)),1)])])])])]),n.showDeliveryInfoDialog?(m(),g("div",Zp,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[21]||(t[21]=(...x)=>o.closeDeliveryInfoDialog&&o.closeDeliveryInfoDialog(...x))}),c("div",em,[c("div",tm,[t[71]||(t[71]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Delivery details",-1)),c("button",{onClick:t[22]||(t[22]=(...x)=>o.closeDeliveryInfoDialog&&o.closeDeliveryInfoDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[70]||(t[70]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",sm,[c("div",rm,[c("div",nm,[c("div",null,[c("div",om,_(s.quote.deliveryService||((d=(l=o.parsedDelivery.selectedRate)==null?void 0:l.service_level)==null?void 0:d.name)||"Selected service"),1),c("div",im,"Price: ZAR "+_(o.formatCurrency(s.quote.totalDeliveryFees||((u=o.parsedDelivery.selectedRate)==null?void 0:u.rate)||0)),1),c("div",am,[s.quote.chargedWeightInGrams||(h=o.parsedDelivery.selectedRate)!=null&&h.charged_weight?(m(),g("span",lm,"Charged: "+_(o.formatChargedKg)+" kg",1)):P("",!0),(b=o.parsedDelivery.selectedRate)!=null&&b.actual_weight?(m(),g("span",cm,"Actual: "+_(o.parsedDelivery.selectedRate.actual_weight.toFixed(2))+" kg",1)):P("",!0),(y=o.parsedDelivery.selectedRate)!=null&&y.volumetric_weight?(m(),g("span",um,"Volumetric: "+_(o.parsedDelivery.selectedRate.volumetric_weight.toFixed(2))+" kg",1)):P("",!0)]),(F=(D=o.parsedDelivery.selectedRate)==null?void 0:D.service_level)!=null&&F.delivery_date_from||(U=(V=o.parsedDelivery.selectedRate)==null?void 0:V.service_level)!=null&&U.delivery_date_to?(m(),g("div",dm,[t[72]||(t[72]=he(" Delivery window: ",-1)),(z=(Q=o.parsedDelivery.selectedRate)==null?void 0:Q.service_level)!=null&&z.delivery_date_from?(m(),g("span",fm,_(o.formatDeliveryDate(o.parsedDelivery.selectedRate.service_level.delivery_date_from)),1)):P("",!0),(ne=(q=o.parsedDelivery.selectedRate)==null?void 0:q.service_level)!=null&&ne.delivery_date_to?(m(),g("span",hm," - "+_(o.formatDeliveryDate(o.parsedDelivery.selectedRate.service_level.delivery_date_to)),1)):P("",!0)])):P("",!0)]),c("div",pm,[(Ue=o.parsedDelivery.selectedRate)!=null&&Ue.rate_excluding_vat?(m(),g("div",mm,"Excl. VAT: ZAR "+_(o.formatCurrency(o.parsedDelivery.selectedRate.rate_excluding_vat)),1)):P("",!0),(He=(Ie=o.parsedDelivery.selectedRate)==null?void 0:Ie.base_rate)!=null&&He.vat?(m(),g("div",gm,"VAT: ZAR "+_(o.formatCurrency(o.parsedDelivery.selectedRate.base_rate.vat)),1)):P("",!0),(Ke=(Ct=o.parsedDelivery.selectedRate)==null?void 0:Ct.base_rate)!=null&&Ke.vat_percentage?(m(),g("div",ym,"VAT %: "+_(o.parsedDelivery.selectedRate.base_rate.vat_percentage)+"%",1)):P("",!0)])])]),o.parsedDelivery.otherRates.length?(m(),g("div",_m,[t[74]||(t[74]=c("div",{class:"text-sm font-medium text-gray-900 mb-3"},"Available services",-1)),c("div",bm,[c("table",vm,[t[73]||(t[73]=c("thead",null,[c("tr",{class:"text-left text-gray-600"},[c("th",{class:"py-2 pr-4"},"Service"),c("th",{class:"py-2 pr-4"},"Price (ZAR)"),c("th",{class:"py-2 pr-4"},"Charged (kg)"),c("th",{class:"py-2 pr-4"},"Actual (kg)"),c("th",{class:"py-2 pr-4"},"Volumetric (kg)")])],-1)),c("tbody",null,[(m(!0),g(oe,null,Fe(o.parsedDelivery.otherRates,x=>{var we;return m(),g("tr",{key:x._key,class:"border-t"},[c("td",xm,_(((we=x.service_level)==null?void 0:we.name)||"-"),1),c("td",wm,_(o.formatCurrency(x.rate||0)),1),c("td",Sm,_(x.charged_weight!=null?x.charged_weight.toFixed(0):"-"),1),c("td",Em,_(x.actual_weight!=null?x.actual_weight.toFixed(2):"-"),1),c("td",km,_(x.volumetric_weight!=null?x.volumetric_weight.toFixed(2):"-"),1)])}),128))])])])])):P("",!0),c("div",null,[c("button",{class:"text-xs text-gray-600 hover:text-gray-800 underline",onClick:t[23]||(t[23]=x=>n.showRawJson=!n.showRawJson)},_(n.showRawJson?"Hide raw JSON":"Show raw JSON"),1),n.showRawJson?(m(),g("div",Pm,[c("pre",Cm,_(o.formattedDeliveryInfo),1)])):P("",!0)])]),c("div",Im,[c("button",{onClick:t[24]||(t[24]=(...x)=>o.closeDeliveryInfoDialog&&o.closeDeliveryInfoDialog(...x)),class:"btn btn-secondary"},"Close")])])])):P("",!0),n.showNameDialog?(m(),g("div",Am,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[25]||(t[25]=(...x)=>o.closeNameDialog&&o.closeNameDialog(...x))}),c("div",Tm,[c("div",Dm,[t[76]||(t[76]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Edit quote name",-1)),c("button",{onClick:t[26]||(t[26]=(...x)=>o.closeNameDialog&&o.closeNameDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[75]||(t[75]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",Rm,[t[77]||(t[77]=c("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),ue(c("input",{"onUpdate:modelValue":t[27]||(t[27]=x=>n.editName=x),type:"text",class:"input",placeholder:"e.g. Term 3, 2025"},null,512),[[de,n.editName]])]),c("div",Lm,[c("button",{onClick:t[28]||(t[28]=(...x)=>o.closeNameDialog&&o.closeNameDialog(...x)),class:"btn btn-secondary"},"Cancel"),c("button",{onClick:t[29]||(t[29]=(...x)=>o.saveName&&o.saveName(...x)),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.savingName||!n.editName.trim()}]),disabled:n.savingName||!n.editName.trim()},_(n.savingName?"Saving...":"Save"),11,Nm)])])])):P("",!0),n.imagePreview.show?(m(),g("div",{key:4,style:Fs({position:"fixed",top:n.imagePreview.y+"px",left:n.imagePreview.x+"px",zIndex:1e3,pointerEvents:"none"}),class:"bg-white border border-gray-300 rounded-lg shadow-lg p-2"},[c("img",{src:n.imagePreview.src,alt:n.imagePreview.alt,class:"w-60 h-60 object-contain rounded bg-white"},null,8,Om)],4)):P("",!0),n.showAddProductModal?(m(),Es(i,{key:5,"quote-id":s.quote.id,"price-list-id":o.priceListId,"existing-quote-products":n.quoteProducts,onClose:t[30]||(t[30]=x=>n.showAddProductModal=!1),onProductAdded:o.handleProductAdded},null,8,["quote-id","price-list-id","existing-quote-products","onProductAdded"])):P("",!0)])}const qm=kt(ff,[["render",Fm]]),Mm={name:"PriceListView",props:{priceList:{type:Object,required:!0}},data(){return{productPrices:[],productDetails:{},loading:!0,error:null,brands:[],selectedBrandId:"ALL",showChangeLog:!1,changeLog:[],imagePreview:{show:!1,src:"",alt:"",x:0,y:0}}},async mounted(){await Promise.all([this.loadProductPrices(),this.loadBrands()]),await this.loadProductDetails()},methods:{async openChangeLog(){try{const e=this.priceList.priceListId||this.priceList.id,{priceListService:t}=await De(async()=>{const{priceListService:n}=await Promise.resolve().then(()=>co);return{priceListService:n}},void 0),s=await t.listPriceListChangeLog(e),r=s.filter(n=>!n.createdByName&&(n.createdById||n.createdBy));if(r.length)try{const{userService:n}=await De(async()=>{const{userService:a}=await import("./userService-2SYTYoeB.js");return{userService:a}},[]),o=[...new Set(r.map(a=>a.createdById||a.createdBy))],i=new Map;await Promise.all(o.map(async a=>{try{const l=await n.getUser(a);i.set(a,l)}catch(l){console.warn(`Failed to fetch user ${a}:`,l)}})),r.forEach(a=>{const l=a.createdById||a.createdBy,d=i.get(l);d&&(a.createdByName=[d.firstName,d.lastName].filter(Boolean).join(" ")||d.email||d.id)})}catch(n){console.warn("Failed to hydrate creator names",n)}this.changeLog=s,this.showChangeLog=!0}catch(e){alert("Failed to load change log: "+(e.message||"Unknown error"))}},closeChangeLog(){this.showChangeLog=!1},async loadBrands(){try{const e=await yr.listBrands();this.brands=e}catch(e){console.error("Failed to load brands",e),this.brands=[]}},async loadProductPrices(){try{this.loading=!0,this.error=null;const e=this.priceList.priceListId||this.priceList.id;this.productPrices=await yr.getProductPricesByPriceList(e),console.log("Product prices loaded:",this.productPrices)}catch(e){console.error("Failed to load product prices:",e),this.error=e.message||"Failed to load product prices"}finally{this.loading=!1}},async loadProductDetails(){var e;try{for(const t of this.productPrices)if(t.product&&!this.productDetails[t.productId]){const s=t.product;(e=s.image)!=null&&e.url&&(s.image.url=await Cn.get(t.productId,s.image.url)),this.productDetails[t.productId]=s}}catch(t){console.error("Failed to load product details:",t)}},formatDate(e){if(!e)return"—";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`},formatDateTime(e){if(!e)return"—";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear(),o=t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});return`${s} ${r} ${n} ${o}`},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},showImagePreview(e,t){var r;const s=this.productDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let l=t.clientX+10,d=t.clientY+10;l+250>window.innerWidth&&(l=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Product",x:l,y:d}}},updateImagePreviewPosition(e){if(this.imagePreview.show){let o=e.clientX+10,i=e.clientY+10;o+250>window.innerWidth&&(o=e.clientX-250-10),i+250>window.innerHeight&&(i=e.clientY-250-10),this.imagePreview.x=o,this.imagePreview.y=i}},hideImagePreview(){this.imagePreview.show=!1}},computed:{filteredProductPrices(){return this.selectedBrandId==="ALL"?this.productPrices:this.productPrices.filter(e=>{const t=this.productDetails[e.productId];return((t==null?void 0:t.brandId)||e.brandId||e.productBrandId)===this.selectedBrandId})}}},Bm={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},jm={class:"flex justify-between items-start mb-6"},Um={class:"text-xl font-semibold text-gray-900 mb-1"},Hm={class:"text-sm text-gray-600"},Vm={class:"text-sm text-gray-600"},$m={class:"flex items-center gap-2"},Wm={key:0,class:"flex justify-center items-center py-8"},Qm={key:1,class:"text-center py-8"},Km={class:"text-gray-600"},zm={key:2,class:"text-center py-8"},Gm={key:3},Ym={class:"mb-4 flex flex-wrap items-center gap-2"},Jm=["onClick"],Xm={class:"space-y-2"},Zm={class:"flex justify-between items-center"},eg={class:"flex items-center space-x-4"},tg={class:"relative w-12 h-12"},sg=["src","alt","onMouseenter"],rg={key:1,class:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center"},ng={class:"min-h-[2rem] flex flex-col justify-center"},og={class:"font-medium text-gray-900"},ig={class:"text-sm text-gray-600"},ag={class:"flex items-center space-x-8"},lg={class:"w-24 text-right"},cg={class:"text-sm font-medium text-gray-900"},ug={class:"w-24 text-right whitespace-nowrap"},dg={class:"text-sm font-bold text-gray-900"},fg=["src","alt"],hg={key:5,class:"fixed inset-0 z-50 flex items-center justify-center"},pg={class:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden"},mg={class:"flex items-center justify-between p-4 border-b border-gray-200"},gg={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},yg={key:0,class:"text-sm text-gray-600"},_g={key:1,class:"space-y-3"},bg={class:"flex justify-between text-sm"},vg={key:0,class:"font-medium text-gray-900"},xg={class:"text-gray-600"},wg={key:0,class:"text-sm text-gray-700 mt-1"},Sg={key:1,class:"text-xs text-gray-600 mt-1 whitespace-pre-wrap"},Eg={class:"p-4 border-t border-gray-200 flex justify-end"},kg={key:6,class:"fixed inset-0 z-50 flex items-center justify-center"},Pg={class:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden"},Cg={class:"flex items-center justify-between p-4 border-b border-gray-200"},Ig={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},Ag={key:0,class:"text-sm text-gray-600"},Tg={key:1,class:"space-y-3"},Dg={class:"flex justify-between text-sm"},Rg={class:"font-medium text-gray-900"},Lg={class:"text-gray-600"},Ng={key:0,class:"text-sm text-gray-700 mt-1"},Og={key:1,class:"text-xs text-gray-600 mt-1 whitespace-pre-wrap"},Fg={class:"p-4 border-t border-gray-200 flex justify-end"};function qg(e,t,s,r,n,o){return m(),g("div",Bm,[c("div",jm,[c("div",null,[c("h3",Um,_(s.priceList.name),1),c("p",Hm," Created: "+_(o.formatDate(s.priceList.createdAt)),1),c("p",Vm,_(n.productPrices.length)+" products ",1)]),c("div",$m,[c("button",{onClick:t[0]||(t[0]=(...i)=>o.openChangeLog&&o.openChangeLog(...i)),class:"btn btn-secondary text-sm",title:"View Change Log"}," Change Log "),c("button",{onClick:t[1]||(t[1]=i=>e.$emit("close")),class:"btn btn-secondary text-sm",title:"Close"},t[11]||(t[11]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),n.loading?(m(),g("div",Wm,t[12]||(t[12]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",Qm,[t[13]||(t[13]=c("div",{class:"text-red-500 mb-4"},[c("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[14]||(t[14]=c("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error loading products",-1)),c("p",Km,_(n.error),1)])):n.productPrices.length===0?(m(),g("div",zm,t[15]||(t[15]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products found</h4><p class="text-gray-600">This price list doesn&#39;t contain any products.</p>',3)]))):(m(),g("div",Gm,[c("div",Ym,[c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.selectedBrandId==="ALL"?"bg-gray-800 text-white border-gray-800":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:t[2]||(t[2]=i=>n.selectedBrandId="ALL")}," All ",2),(m(!0),g(oe,null,Fe(n.brands,i=>(m(),g("button",{key:i.id,class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.selectedBrandId===i.id?"bg-brand-navy text-white border-brand-navy":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:a=>n.selectedBrandId=i.id},_(i.name),11,Jm))),128))]),t[17]||(t[17]=Pe('<div class="flex justify-between items-center mb-4 px-4 py-2 bg-gray-50 rounded-lg"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Product</h4></div><div class="flex items-center space-x-8"><div class="w-24 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-24 text-right whitespace-nowrap"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price (incl. VAT)</h4></div></div></div>',1)),c("div",Xm,[(m(!0),g(oe,null,Fe(o.filteredProductPrices,i=>{var a,l,d,u,h;return m(),g("div",{key:i.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[c("div",Zm,[c("div",eg,[c("div",tg,[(l=(a=n.productDetails[i.productId])==null?void 0:a.image)!=null&&l.url?(m(),g("img",{key:0,src:n.productDetails[i.productId].image.url,alt:(d=n.productDetails[i.productId])==null?void 0:d.name,class:"w-12 h-12 object-cover rounded-lg cursor-pointer",onMouseenter:b=>o.showImagePreview(i.productId,b),onMousemove:t[3]||(t[3]=b=>o.updateImagePreviewPosition(b)),onMouseleave:t[4]||(t[4]=(...b)=>o.hideImagePreview&&o.hideImagePreview(...b))},null,40,sg)):(m(),g("div",rg,t[16]||(t[16]=[c("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),c("div",ng,[c("h4",og,_(((u=n.productDetails[i.productId])==null?void 0:u.name)||i.productName),1),c("p",ig,"SKU: "+_(((h=n.productDetails[i.productId])==null?void 0:h.sku)||i.productSku),1)])]),c("div",ag,[c("div",lg,[c("p",cg,"ZAR "+_(o.formatCurrency(i.price)),1)]),c("div",ug,[c("p",dg,"ZAR "+_(o.formatCurrency(i.priceInclVat)),1)])])])])}),128))])])),n.imagePreview.show?(m(),g("div",{key:4,style:Fs({position:"fixed",top:n.imagePreview.y+"px",left:n.imagePreview.x+"px",zIndex:1e3,pointerEvents:"none"}),class:"bg-white border border-gray-300 rounded-lg shadow-lg p-2"},[c("img",{src:n.imagePreview.src,alt:n.imagePreview.alt,class:"w-60 h-60 object-contain rounded bg-white"},null,8,fg)],4)):P("",!0),n.showChangeLog?(m(),g("div",hg,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[5]||(t[5]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i))}),c("div",pg,[c("div",mg,[t[19]||(t[19]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Price List Change Log",-1)),c("button",{onClick:t[6]||(t[6]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i)),class:"text-gray-400 hover:text-gray-600"},t[18]||(t[18]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",gg,[n.changeLog.length?(m(),g("ul",_g,[(m(!0),g(oe,null,Fe(n.changeLog,i=>(m(),g("li",{key:i.id,class:"border rounded p-3"},[c("div",bg,[i.changeType||i.type?(m(),g("span",vg,_(i.changeType||i.type),1)):P("",!0),c("span",xg,_(o.formatDateTime(i.createdAt))+" · "+_(i.createdByName||"—"),1)]),i.description?(m(),g("div",wg,_(i.description),1)):i.details?(m(),g("div",Sg,_(JSON.stringify(i.details,null,2)),1)):P("",!0)]))),128))])):(m(),g("div",yg,"No changes recorded."))]),c("div",Eg,[c("button",{onClick:t[7]||(t[7]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i)),class:"btn btn-secondary"},"Close")])])])):P("",!0),n.showChangeLog?(m(),g("div",kg,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[8]||(t[8]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i))}),c("div",Pg,[c("div",Cg,[t[21]||(t[21]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Price List Change Log",-1)),c("button",{onClick:t[9]||(t[9]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i)),class:"text-gray-400 hover:text-gray-600"},t[20]||(t[20]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",Ig,[n.changeLog.length?(m(),g("ul",Tg,[(m(!0),g(oe,null,Fe(n.changeLog,i=>(m(),g("li",{key:i.id,class:"border rounded p-3"},[c("div",Dg,[c("span",Rg,_(i.changeType||i.type||"Change"),1),c("span",Lg,_(o.formatDate(i.createdAt)),1)]),i.description?(m(),g("div",Ng,_(i.description),1)):i.details?(m(),g("div",Og,_(JSON.stringify(i.details,null,2)),1)):P("",!0)]))),128))])):(m(),g("div",Ag,"No changes recorded."))]),c("div",Fg,[c("button",{onClick:t[10]||(t[10]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i)),class:"btn btn-secondary"},"Close")])])])):P("",!0)])}const Mg=kt(Mm,[["render",qg]]),Bg={name:"PriceListManager",components:{QuoteDetail:qm,PriceListView:Mg},props:{customerId:{type:String,required:!0}},data(){return{priceLists:[],quotes:{},loading:!1,error:null,selectedQuote:null,selectedPriceList:null,lastHiddenTime:null,statusFilters:{},searchTerms:{}}},watch:{customerId:{immediate:!0,async handler(e,t){e&&e!==t&&(console.log("Customer ID changed, reloading data:",e),this.selectedQuote=null,this.selectedPriceList=null,this.loading=!0,this.error=null,this.priceLists=[],this.quotes={},await this.loadCustomerPriceLists())}}},async mounted(){this.selectedQuote=null,this.selectedPriceList=null,this.loading=!0,this.error=null,this.priceLists=[],this.quotes={};const e=setTimeout(()=>{this.loading&&(console.error("Loading timeout - forcing loading to false"),this.loading=!1,this.error="Loading timeout - please refresh the page")},1e4);try{console.log("PriceListManager mounted - loading fresh data for customer:",this.customerId),await this.loadCustomerPriceLists()}finally{clearTimeout(e)}document.addEventListener("visibilitychange",this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener("visibilitychange",this.handleVisibilityChange)},methods:{async hydrateCreatorsForList(e){try{const s=(this.quotes[e]||[]).filter(i=>(i.createdById||i.createdBy)&&!i.createdByName);if(s.length===0)return;const{userService:r}=await De(async()=>{const{userService:i}=await import("./userService-2SYTYoeB.js");return{userService:i}},[]),n=[...new Set(s.map(i=>i.createdById||i.createdBy))],o=new Map;await Promise.all(n.map(async i=>{try{const a=await r.getUser(i);o.set(i,a)}catch(a){console.warn(`Failed to fetch user ${i}:`,a)}})),s.forEach(i=>{const a=i.createdById||i.createdBy,l=o.get(a);l&&(i.createdByName=[l.firstName,l.lastName].filter(Boolean).join(" ")||l.email||l.id)}),o.size>0&&(this.quotes={...this.quotes})}catch(t){console.warn("Failed to hydrate creator names",t)}},getStatusCounts(e){const t=this.quotes[e]||[],s={Draft:0,Submitted:0,Approved:0};for(const r of t){const n=r.status||"Draft";n in s&&s[n]++}return{...s,all:t.length}},setStatusFilter(e,t){this.$set?this.$set(this.statusFilters,e,t):this.statusFilters={...this.statusFilters,[e]:t}},getFilteredQuotes(e){const t=this.quotes[e]||[],s=this.statusFilters[e]||"All",r=(this.searchTerms[e]||"").trim().toLowerCase();let n=s==="All"?t:t.filter(o=>(o.status||"Draft")===s);return r&&(n=n.filter(o=>{const i=(o.name||"").toLowerCase(),a=(o.number||"").toString().toLowerCase();return i.includes(r)||a.includes(r)})),n},setSearchTerm(e,t){this.$set?this.$set(this.searchTerms,e,t):this.searchTerms={...this.searchTerms,[e]:t}},handleVisibilityChange(){!document.hidden&&this.lastHiddenTime&&Date.now()-this.lastHiddenTime>3e4&&(console.log("User returned to tab after being away, refreshing data"),this.refreshData()),this.lastHiddenTime=document.hidden?Date.now():null},async refreshData(){console.log("Refreshing all data..."),this.loading=!0,this.error=null;try{await this.loadCustomerPriceLists()}catch(e){console.error("Error refreshing data:",e),this.error="Failed to refresh data"}finally{this.loading=!1}},async loadCustomerPriceLists(){this.loading=!0,this.error=null;try{console.log("Loading customer price lists for customer:",this.customerId);const e=await dl.getCustomerPriceLists(this.customerId);if(console.log("Customer price lists:",e),!e||e.length===0){console.log("No customer price lists found"),this.priceLists=[],this.loading=!1;return}this.priceLists=e.map(t=>{const s=t.priceList||{};return{...s,customerPriceListId:t.id,priceListId:s.id}}),console.log("Price lists loaded:",this.priceLists),await this.loadQuotesForPriceLists()}catch(e){console.error("Error loading customer price lists:",e),this.error=e.message||"Failed to load price lists",this.priceLists=[],this.quotes={}}finally{this.loading=!1}},async loadQuotesForPriceLists(){try{console.log("Loading quotes for price lists...");const{quoteService:e}=await De(async()=>{const{quoteService:t}=await Promise.resolve().then(()=>hi);return{quoteService:t}},void 0);for(const t of this.priceLists){console.log("Loading quotes for price list:",t.customerPriceListId);const s=await e.getQuotesByCustomerPriceList(t.customerPriceListId);this.quotes[t.customerPriceListId]=s,console.log("Quotes loaded for price list:",t.customerPriceListId,s),this.hydrateCreatorsForList(t.customerPriceListId)}console.log("All quotes loaded:",this.quotes)}catch(e){console.error("Failed to load quotes:",e),this.error="Failed to load some quotes, but price lists are available"}},viewPriceList(e){this.selectedPriceList=e},async createQuoteFromPriceList(e){try{const{quoteService:t}=await De(async()=>{const{quoteService:r}=await Promise.resolve().then(()=>hi);return{quoteService:r}},void 0),s=await t.createQuote(e.customerPriceListId);this.quotes[e.customerPriceListId]||(this.quotes[e.customerPriceListId]=[]),this.quotes[e.customerPriceListId].unshift(s),this.selectQuote(s)}catch(t){this.error=t.message||"Failed to create quote"}},selectQuote(e){this.selectedQuote=e},handleQuoteUpdated(e){const t=e.customerPriceListId;if(this.quotes[t]){const s=this.quotes[t].findIndex(r=>r.id===e.id);s!==-1&&(this.quotes[t][s]=e)}this.selectedQuote=e},handleQuoteDeleted(){const e=this.selectedQuote.customerPriceListId;this.quotes[e]&&(this.quotes[e]=this.quotes[e].filter(t=>t.id!==this.selectedQuote.id)),this.selectedQuote=null},formatDate(e){if(!e)return"—";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatQuoteStatus(e){const t=e||"Draft";return t==="Approved"?"Approved":t==="Submitted"?"Submitted":"Draft"}}},jg={key:0,class:"flex justify-center items-center py-12"},Ug={key:1,class:"card"},Hg={class:"text-center"},Vg={class:"text-gray-600 mb-4"},$g={key:2},Wg={key:3},Qg={key:4},Kg={key:0,class:"card text-center py-12"},zg={key:1,class:"space-y-8"},Gg={class:"flex justify-between items-start mb-6"},Yg={class:"text-xl font-semibold text-gray-900 mb-1"},Jg={key:0,class:"text-sm text-gray-700 mb-1"},Xg={class:"text-sm text-gray-600"},Zg={class:"flex items-center gap-2"},ey=["onClick"],ty=["onClick"],sy={class:"border-t pt-4"},ry={class:"flex justify-between items-center mb-4"},ny={class:"text-sm text-gray-600"},oy={class:"flex flex-wrap items-center gap-2 mb-4"},iy=["onClick"],ay=["onClick"],ly=["onClick"],cy=["onClick"],uy={class:"ml-auto w-full md:w-64"},dy=["value","onInput"],fy={key:0,class:"text-center py-6"},hy={key:1,class:"space-y-3"},py=["onClick"],my={class:"flex justify-between items-start"},gy={class:"flex items-center gap-2 mb-1"},yy={class:"font-medium text-gray-900"},_y={key:0,class:"text-sm text-gray-600"},by={class:"text-sm text-gray-600"},vy={class:"text-sm text-gray-600"},xy={class:"text-right"},wy={class:"text-lg font-bold text-gray-900"},Sy={class:"text-sm text-gray-600"};function Ey(e,t,s,r,n,o){const i=Nt("QuoteDetail"),a=Nt("PriceListView");return m(),g("div",null,[n.loading?(m(),g("div",jg,t[3]||(t[3]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",Ug,[c("div",Hg,[t[4]||(t[4]=c("div",{class:"text-red-600 text-lg font-medium mb-2"},"Error",-1)),c("p",Vg,_(n.error),1),c("button",{onClick:t[0]||(t[0]=(...l)=>o.loadCustomerPriceLists&&o.loadCustomerPriceLists(...l)),class:"btn btn-primary"},"Try Again")])])):n.selectedQuote?(m(),g("div",$g,[Oe(i,{quote:n.selectedQuote,"customer-id":s.customerId,onBack:t[1]||(t[1]=l=>n.selectedQuote=null),onQuoteUpdated:o.handleQuoteUpdated,onQuoteDeleted:o.handleQuoteDeleted},null,8,["quote","customer-id","onQuoteUpdated","onQuoteDeleted"])])):n.selectedPriceList?(m(),g("div",Wg,[Oe(a,{"price-list":n.selectedPriceList,onClose:t[2]||(t[2]=l=>n.selectedPriceList=null)},null,8,["price-list"])])):(m(),g("div",Qg,[t[8]||(t[8]=c("div",{class:"mb-6"},null,-1)),n.priceLists.length===0?(m(),g("div",Kg,t[5]||(t[5]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No price lists assigned</h3><p class="text-gray-600 mb-4">You don&#39;t have any price lists assigned to your account.</p>',3)]))):(m(),g("div",zg,[(m(!0),g(oe,null,Fe(n.priceLists,l=>{var d;return m(),g("div",{key:l.id,class:"card"},[c("div",Gg,[c("div",null,[c("h3",Yg,_(l.name),1),l.description?(m(),g("p",Jg,_(l.description),1)):P("",!0),c("p",Xg," Created: "+_(o.formatDate(l.createdAt)),1)]),c("div",Zg,[c("button",{onClick:u=>o.viewPriceList(l),class:"btn btn-secondary text-sm",title:"View Price List"}," View Price List ",8,ey),c("button",{onClick:u=>o.createQuoteFromPriceList(l),class:"btn btn-primary text-sm",title:"Start New Quote"}," Start New Quote ",8,ty)])]),c("div",sy,[c("div",ry,[t[6]||(t[6]=c("h4",{class:"text-lg font-medium text-gray-900"},"Quotes",-1)),c("span",ny,_(((d=n.quotes[l.customerPriceListId])==null?void 0:d.length)||0)+" quotes",1)]),c("div",oy,[c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[l.customerPriceListId]==="All"?"bg-gray-800 text-white border-gray-800":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:u=>o.setStatusFilter(l.customerPriceListId,"All")}," All ("+_(o.getStatusCounts(l.customerPriceListId).all)+") ",11,iy),c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[l.customerPriceListId]==="Draft"?"bg-yellow-500 text-white border-yellow-500":"text-yellow-800 border-yellow-300 hover:border-yellow-400"]),onClick:u=>o.setStatusFilter(l.customerPriceListId,"Draft")}," Draft ("+_(o.getStatusCounts(l.customerPriceListId).Draft)+") ",11,ay),c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[l.customerPriceListId]==="Submitted"?"bg-blue-600 text-white border-blue-600":"text-blue-800 border-blue-300 hover:border-blue-400"]),onClick:u=>o.setStatusFilter(l.customerPriceListId,"Submitted")}," Submitted ("+_(o.getStatusCounts(l.customerPriceListId).Submitted)+") ",11,ly),c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[l.customerPriceListId]==="Approved"?"bg-green-600 text-white border-green-600":"text-green-800 border-green-300 hover:border-green-400"]),onClick:u=>o.setStatusFilter(l.customerPriceListId,"Approved")}," Approved ("+_(o.getStatusCounts(l.customerPriceListId).Approved)+") ",11,cy),c("div",uy,[c("input",{value:n.searchTerms[l.customerPriceListId]||"",onInput:u=>o.setSearchTerm(l.customerPriceListId,u.target.value),type:"text",class:"input h-9 text-sm",placeholder:"Search quotes..."},null,40,dy)])]),o.getFilteredQuotes(l.customerPriceListId).length?(m(),g("div",hy,[(m(!0),g(oe,null,Fe(o.getFilteredQuotes(l.customerPriceListId),u=>(m(),g("div",{key:u.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:h=>o.selectQuote(u)},[c("div",my,[c("div",null,[c("div",gy,[c("h5",yy,[he(_(u.name||"Quote #"+(u.number||""))+" ",1),u.number?(m(),g("span",_y,"• #"+_(u.number),1)):P("",!0)]),c("span",{class:ae(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",u.status==="Approved"?"bg-green-100 text-green-800":u.status==="Submitted"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},_(o.formatQuoteStatus(u.status)),3)]),c("p",by," Created By: "+_(u.createdByName||"—"),1),c("p",vy," Last updated: "+_(o.formatDate(u.updatedAt)),1)]),c("div",xy,[c("div",wy," ZAR "+_(o.formatCurrency(u.total)),1),c("div",Sy," incl. VAT: ZAR "+_(o.formatCurrency(u.totalInclVat)),1)])])],8,py))),128))])):(m(),g("div",fy,t[7]||(t[7]=[c("div",{class:"text-gray-500 mb-2"},[c("svg",{class:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),c("p",{class:"text-sm text-gray-600"},"No quotes yet",-1)])))])])}),128))]))]))])}const ky=kt(Bg,[["render",Ey]]),Py="/createspace-logo.png",Cy={name:"LoginForm",data(){return{email:"",password:"",loading:!1,error:"",showForgotPassword:!1,resetEmail:"",resetLoading:!1,resetError:"",resetSuccess:""}},methods:{async handleLogin(){this.loading=!0,this.error="";try{const e=await Y.login(this.email,this.password);this.$emit("login-success",e)}catch(e){this.error=e.message||"Login failed. Please check your credentials."}finally{this.loading=!1}},async handleForgotPassword(){this.resetLoading=!0,this.resetError="",this.resetSuccess="";try{const e=`${window.location.origin}/reset-password`;await Y.requestPasswordReset(this.resetEmail,e),this.resetSuccess="Password reset link has been sent to your email.",this.resetEmail=""}catch(e){this.resetError=e.message||"Failed to send reset link. Please try again."}finally{this.resetLoading=!1}},async signInWithGoogle(){try{const t=(await Y.getAuthProviders()||[]).find(r=>(r.name||"").toLowerCase().includes("google")||(r.type||"").toLowerCase().includes("google")),s=(t==null?void 0:t.authorizeUrl)||`${Y.baseUrl.replace("/api/json","")}/auth/authorize/google`;window.location.href=s}catch(e){this.error=e.message||"Google sign-in not available"}}}},Iy={class:"min-h-screen flex items-center justify-center bg-gray-50 py-0 px-4 sm:px-6 lg:px-8 overflow-hidden"},Ay={class:"max-w-md w-full space-y-8"},Ty={class:"rounded-md shadow-sm -space-y-px"},Dy={key:0,class:"rounded-md bg-red-50 p-4"},Ry={class:"flex"},Ly={class:"ml-3"},Ny={class:"text-sm font-medium text-red-800"},Oy=["disabled"],Fy={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},qy={class:"text-center"},My={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},By={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},jy={class:"mt-3"},Uy={class:"mb-4"},Hy={key:0,class:"mb-4 text-sm text-red-600"},Vy={key:1,class:"mb-4 text-sm text-green-600"},$y={class:"flex justify-end space-x-3"},Wy=["disabled"];function Qy(e,t,s,r,n,o){return m(),g("div",Iy,[c("div",Ay,[t[13]||(t[13]=c("div",null,[c("div",{class:"flex justify-center mb-8"},[c("img",{src:Py,alt:"CREATESPACE",class:"h-10 w-auto"})]),c("h2",{class:"mt-4 text-center text-3xl font-extrabold text-gray-900"}," Sign in to your account "),c("p",{class:"mt-2 text-center text-sm text-gray-600"}," Enter your credentials to access the order management system ")],-1)),c("form",{class:"mt-8 space-y-6",onSubmit:t[3]||(t[3]=Pn((...i)=>o.handleLogin&&o.handleLogin(...i),["prevent"]))},[c("div",Ty,[c("div",null,[t[8]||(t[8]=c("label",{for:"email",class:"sr-only"},"Email address",-1)),ue(c("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=i=>n.email=i),name:"email",type:"email",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address"},null,512),[[de,n.email]])]),c("div",null,[t[9]||(t[9]=c("label",{for:"password",class:"sr-only"},"Password",-1)),ue(c("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=i=>n.password=i),name:"password",type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password"},null,512),[[de,n.password]])])]),n.error?(m(),g("div",Dy,[c("div",Ry,[t[10]||(t[10]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),c("div",Ly,[c("h3",Ny,_(n.error),1)])])])):P("",!0),c("div",null,[c("button",{type:"submit",disabled:n.loading,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[n.loading?(m(),g("span",Fy,t[11]||(t[11]=[c("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0),he(" "+_(n.loading?"Signing in...":"Sign in"),1)],8,Oy)]),c("div",qy,[c("button",{type:"button",onClick:t[2]||(t[2]=i=>n.showForgotPassword=!0),class:"text-sm text-indigo-600 hover:text-indigo-500"}," Forgot your password? ")])],32),t[14]||(t[14]=Pe('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-gray-50 text-gray-500">Or</span></div></div>',1)),c("button",{onClick:t[4]||(t[4]=(...i)=>o.signInWithGoogle&&o.signInWithGoogle(...i)),type:"button",class:"w-full inline-flex items-center justify-center gap-2 border border-gray-300 rounded-md px-4 py-2 hover:bg-gray-100"},t[12]||(t[12]=[Pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-5 h-5"><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12    s5.373-12,12-12c3.059,0,5.842,1.153,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24    s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,16.108,18.961,13,24,13c3.059,0,5.842,1.153,7.961,3.039l5.657-5.657    C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4CAF50" d="M24,44c4.983,0,9.514-1.917,12.961-5.039l-5.981-5.064C29.047,35.091,26.715,36,24,36    c-5.202,0-9.619-3.317-11.277-7.951l-6.534,5.036C9.582,39.556,16.227,44,24,44z"></path><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.103,5.597c0,0,0,0,0,0l6.581,5.561    c-0.465,0.427,7.219-5.289,7.219-15.238C44,22.659,43.862,21.35,43.611,20.083z"></path></svg><span>Continue with Google</span>',2)]))]),n.showForgotPassword?(m(),g("div",My,[c("div",By,[c("div",jy,[t[16]||(t[16]=c("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Reset Password",-1)),c("form",{onSubmit:t[7]||(t[7]=Pn((...i)=>o.handleForgotPassword&&o.handleForgotPassword(...i),["prevent"]))},[c("div",Uy,[t[15]||(t[15]=c("label",{for:"reset-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email address ",-1)),ue(c("input",{id:"reset-email","onUpdate:modelValue":t[5]||(t[5]=i=>n.resetEmail=i),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email"},null,512),[[de,n.resetEmail]])]),n.resetError?(m(),g("div",Hy,_(n.resetError),1)):P("",!0),n.resetSuccess?(m(),g("div",Vy,_(n.resetSuccess),1)):P("",!0),c("div",$y,[c("button",{type:"button",onClick:t[6]||(t[6]=i=>n.showForgotPassword=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Cancel "),c("button",{type:"submit",disabled:n.resetLoading,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50"},_(n.resetLoading?"Sending...":"Send Reset Link"),9,Wy)])],32)])])])):P("",!0)])}const Ky=kt(Cy,[["render",Qy]]),zy={name:"UserProfileDialog",props:{show:{type:Boolean,default:!1}},data(){return{firstName:"",lastName:"",loading:!1,error:""}},computed:{isValid(){return this.firstName.trim()&&this.lastName.trim()}},methods:{async handleSubmit(){if(!this.isValid){this.error="Please enter both first and last name.";return}this.loading=!0,this.error="";try{this.$emit("profile-saved",{firstName:this.firstName.trim(),lastName:this.lastName.trim()})}catch(e){this.error=e.message||"Failed to save profile. Please try again."}finally{this.loading=!1}},handleCancel(){this.$emit("cancel")}}},Gy={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Yy={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Jy={class:"mt-3"},Xy={class:"space-y-4"},Zy={key:0,class:"text-sm text-red-600"},e0={class:"flex justify-end space-x-3 mt-6"},t0=["disabled"];function s0(e,t,s,r,n,o){return s.show?(m(),g("div",Gy,[c("div",Yy,[c("div",Jy,[t[6]||(t[6]=Pe('<div class="flex items-center justify-center w-12 h-12 mx-auto bg-green-100 rounded-full"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center mt-4 mb-4"> Complete Your Profile </h3><p class="text-sm text-gray-600 text-center mb-6"> Please provide your first and last name to complete your account setup. </p>',3)),c("form",{onSubmit:t[3]||(t[3]=Pn((...i)=>o.handleSubmit&&o.handleSubmit(...i),["prevent"]))},[c("div",Xy,[c("div",null,[t[4]||(t[4]=c("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 mb-1"}," First Name * ",-1)),ue(c("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=i=>n.firstName=i),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your first name"},null,512),[[de,n.firstName]])]),c("div",null,[t[5]||(t[5]=c("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"}," Last Name * ",-1)),ue(c("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=i=>n.lastName=i),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your last name"},null,512),[[de,n.lastName]])]),n.error?(m(),g("div",Zy,_(n.error),1)):P("",!0)]),c("div",e0,[c("button",{type:"button",onClick:t[2]||(t[2]=(...i)=>o.handleCancel&&o.handleCancel(...i)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Cancel "),c("button",{type:"submit",disabled:n.loading||!o.isValid,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},_(n.loading?"Saving...":"Save Profile"),9,t0)])],32)])])])):P("",!0)}const r0=kt(zy,[["render",s0]]);class n0{constructor(){this.baseUrl=Ht}async makeRequest(t,s=null){const r=`${this.baseUrl}${t}`,n={"Content-Type":"application/json"},o=Y.getToken();o&&(n.Authorization=`Bearer ${o}`);const i={method:s?"POST":"GET",headers:n};s&&(i.body=JSON.stringify(s));const a=await fetch(r,i);if(!a.ok){let l=`HTTP error! status: ${a.status}`;try{const d=await a.json();d!=null&&d.message&&(l=d.message)}catch{}throw typeof l=="string"&&l.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(l)}return a.json()}async listDeliveryAddresses(t){return this.makeRequest("/listDeliveryAddresses",{where:{customer:{id:{equals:t}}},limit:500})}async getDeliveryAddress(t){return this.makeRequest("/getDeliveryAddress",{id:t})}async createDeliveryAddress(t,s){const r={customer:{id:s},name:t.name,addressLine1:t.addressLine1,suburb:t.suburb,city:t.city,province:t.province,postalCode:t.postalCode};return t.organisation&&(r.organisation=t.organisation),t.contactPerson&&(r.contactPerson=t.contactPerson),t.contactPhone&&(r.contactPhone=t.contactPhone),t.contactEmail&&(r.contactEmail=t.contactEmail),t.addressLine2&&(r.addressLine2=t.addressLine2),t.deliveryNotes&&(r.deliveryNotes=t.deliveryNotes),this.makeRequest("/createDeliveryAddress",r)}async updateDeliveryAddress(t,s){const r={};return typeof s.organisation=="string"&&(r.organisation=s.organisation),typeof s.contactPerson=="string"&&(r.contactPerson=s.contactPerson),typeof s.contactPhone=="string"&&(r.contactPhone=s.contactPhone),typeof s.contactEmail=="string"&&(r.contactEmail=s.contactEmail),typeof s.name=="string"&&(r.name=s.name),typeof s.addressLine1=="string"&&(r.addressLine1=s.addressLine1),typeof s.addressLine2=="string"&&(r.addressLine2=s.addressLine2),typeof s.suburb=="string"&&(r.suburb=s.suburb),typeof s.deliveryNotes=="string"&&(r.deliveryNotes=s.deliveryNotes),this.makeRequest("/updateDeliveryAddress",{where:{id:t},values:r})}async deactivateDeliveryAddress(t){return this.makeRequest("/deactivateDeliveryAddress",{where:{id:t}})}}const ms=new n0,o0=Object.freeze(Object.defineProperty({__proto__:null,deliveryAddressService:ms},Symbol.toStringTag,{value:"Module"})),i0={name:"DeliveryAddresses",emits:["close"],props:{customerId:{type:String,required:!0}},data(){return{loading:!1,saving:!1,submitAttempted:!1,error:null,addresses:[],editingAddress:null,deactivatingId:null,isFormOpen:!1,form:{name:"",organisation:"",contactPerson:"",contactPhone:"",contactEmail:"",addressLine1:"",addressLine2:"",deliveryNotes:"",suburb:"",city:"",province:"",postalCode:""}}},computed:{isFormValid(){return[this.form.name,this.form.addressLine1,this.form.suburb,this.editingAddress?"ok":this.form.city,this.editingAddress?"ok":this.form.province,this.editingAddress?"ok":this.form.postalCode].every(t=>typeof t=="string"&&t.trim().length>0)}},async mounted(){await this.loadAddresses()},methods:{async loadAddresses(){try{this.loading=!0,this.error=null;const e=await ms.listDeliveryAddresses(this.customerId);this.addresses=Array.isArray(e)?e:e.results||[]}catch(e){this.error=e.message||"Failed to load delivery addresses"}finally{this.loading=!1}},resetForm(){this.editingAddress=null,this.form={name:"",organisation:"",contactPerson:"",contactPhone:"",contactEmail:"",addressLine1:"",addressLine2:"",deliveryNotes:"",suburb:"",city:"",province:"",postalCode:""}},openCreateForm(){this.resetForm(),this.isFormOpen=!0,this.submitAttempted=!1},cancelForm(){this.isFormOpen=!1,this.editingAddress=null,this.submitAttempted=!1},startEdit(e){this.editingAddress=e,this.form={name:e.name||"",organisation:e.organisation||"",contactPerson:e.contactPerson||"",contactPhone:e.contactPhone||"",contactEmail:e.contactEmail||"",addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||"",deliveryNotes:e.deliveryNotes||"",suburb:e.suburb||"",city:e.city||"",province:e.province||"",postalCode:e.postalCode||""},window.scrollTo({top:0,behavior:"smooth"}),this.isFormOpen=!0},async saveAddress(){try{if(this.submitAttempted=!0,!this.isFormValid)return;if(this.saving=!0,this.error=null,this.editingAddress){const{name:e,organisation:t,contactPerson:s,contactPhone:r,contactEmail:n,addressLine1:o,addressLine2:i,suburb:a,deliveryNotes:l}=this.form;await ms.updateDeliveryAddress(this.editingAddress.id,{name:e,organisation:t,contactPerson:s,contactPhone:r,contactEmail:n,addressLine1:o,addressLine2:i,suburb:a,deliveryNotes:l})}else await ms.createDeliveryAddress({...this.form},this.customerId);await this.loadAddresses(),this.resetForm(),this.submitAttempted=!1,this.isFormOpen=!1}catch(e){this.error=e.message||"Failed to save address"}finally{this.saving=!1}},async deactivate(e){if(confirm("Deactivate this address?"))try{this.deactivatingId=e.id,await ms.deactivateDeliveryAddress(e.id),await this.loadAddresses()}catch(t){this.error=t.message||"Failed to deactivate address"}finally{this.deactivatingId=null}}}},a0={class:"card"},l0={class:"flex items-start justify-between mb-6"},c0={class:"mb-6"},u0={key:1,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},d0={class:"flex items-start justify-between mb-3"},f0={class:"text-lg font-medium text-gray-900"},h0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},p0={key:0,class:"mt-1 text-xs text-red-600"},m0={class:"md:col-span-2"},g0={class:"md:col-span-2"},y0={class:"md:col-span-2"},_0={key:0,class:"mt-1 text-xs text-red-600"},b0={class:"md:col-span-2"},v0={key:0,class:"mt-1 text-xs text-red-600"},x0={class:"block text-sm font-medium text-gray-700 mb-1"},w0={key:0,class:"text-red-600"},S0=["disabled"],E0={key:0,class:"mt-1 text-xs text-red-600"},k0={class:"block text-sm font-medium text-gray-700 mb-1"},P0={key:0,class:"text-red-600"},C0=["disabled"],I0={key:0,class:"mt-1 text-xs text-red-600"},A0={class:"block text-sm font-medium text-gray-700 mb-1"},T0={key:0,class:"text-red-600"},D0=["disabled"],R0={key:0,class:"mt-1 text-xs text-red-600"},L0={class:"md:col-span-2"},N0={class:"mt-4 flex items-center gap-3"},O0=["disabled"],F0={class:"flex items-center justify-between mb-3"},q0={class:"text-sm text-gray-600"},M0={key:0,class:"flex justify-center items-center py-8"},B0={key:1,class:"bg-red-50 border border-red-200 text-red-800 rounded p-3"},j0={key:2,class:"text-center text-gray-600 py-10"},U0={key:3,class:"space-y-3"},H0={class:"flex items-start justify-between mb-3"},V0={class:"flex items-center gap-2"},$0={class:"text-base font-semibold text-gray-900"},W0={key:0,class:"text-xs px-2 py-0.5 rounded-full bg-gray-200 text-gray-700"},Q0={class:"flex items-center gap-2"},K0=["onClick"],z0=["onClick","disabled"],G0={class:"md:grid md:grid-cols-2 md:gap-6"},Y0={class:"space-y-1"},J0={key:0,class:"text-sm text-gray-700"},X0={key:1,class:"space-y-0.5"},Z0={key:0,class:"text-sm text-gray-700"},e_={key:1,class:"text-sm text-gray-700"},t_={key:2,class:"text-sm text-gray-700"},s_={class:"space-y-1 mt-3 md:mt-6"},r_={class:"text-sm text-gray-700"},n_={key:0,class:"text-sm text-gray-700"},o_={class:"text-sm text-gray-700"},i_={key:1,class:"text-sm text-gray-700"};function a_(e,t,s,r,n,o){return m(),g("div",a0,[c("div",l0,[t[17]||(t[17]=c("div",null,[c("h2",{class:"text-2xl font-semibold text-gray-900"},"Delivery Addresses"),c("p",{class:"text-gray-600"},"Manage your saved delivery addresses")],-1)),c("button",{onClick:t[0]||(t[0]=i=>e.$emit("close")),class:"btn btn-secondary",title:"Close"}," Close ")]),c("div",c0,[n.isFormOpen?(m(),g("div",u0,[c("div",d0,[c("h3",f0,_(n.editingAddress?"Edit Address":"Add New Address"),1),c("button",{onClick:t[2]||(t[2]=(...i)=>o.cancelForm&&o.cancelForm(...i)),class:"btn btn-secondary btn-sm"},"Cancel")]),t[30]||(t[30]=c("p",{class:"text-xs text-gray-600 mb-3"},[he("Fields marked with "),c("span",{class:"text-red-600"},"*"),he(" are required.")],-1)),c("div",h0,[c("div",null,[t[18]||(t[18]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Name "),c("span",{class:"text-red-600"},"*")],-1)),ue(c("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>n.form.name=i),type:"text",class:"input w-full",placeholder:"e.g., Warehouse, Office",required:""},null,512),[[de,n.form.name]]),n.submitAttempted&&!n.form.name?(m(),g("p",p0,"Name is required")):P("",!0)]),c("div",m0,[t[19]||(t[19]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Organisation",-1)),ue(c("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>n.form.organisation=i),type:"text",class:"input w-full",placeholder:"e.g., Acme Ltd"},null,512),[[de,n.form.organisation]])]),c("div",null,[t[20]||(t[20]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Person",-1)),ue(c("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>n.form.contactPerson=i),type:"text",class:"input w-full",placeholder:"e.g., Jane Doe"},null,512),[[de,n.form.contactPerson]])]),c("div",null,[t[21]||(t[21]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Phone",-1)),ue(c("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>n.form.contactPhone=i),type:"tel",class:"input w-full",placeholder:"e.g., 082 123 4567"},null,512),[[de,n.form.contactPhone]])]),c("div",g0,[t[22]||(t[22]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Email",-1)),ue(c("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>n.form.contactEmail=i),type:"email",class:"input w-full",placeholder:"e.g., jane@example.com"},null,512),[[de,n.form.contactEmail]])]),c("div",y0,[t[23]||(t[23]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Address Line 1 "),c("span",{class:"text-red-600"},"*")],-1)),ue(c("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>n.form.addressLine1=i),type:"text",class:"input w-full",required:""},null,512),[[de,n.form.addressLine1]]),n.submitAttempted&&!n.form.addressLine1?(m(),g("p",_0,"Address Line 1 is required")):P("",!0)]),c("div",b0,[t[24]||(t[24]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address Line 2",-1)),ue(c("input",{"onUpdate:modelValue":t[9]||(t[9]=i=>n.form.addressLine2=i),type:"text",class:"input w-full"},null,512),[[de,n.form.addressLine2]])]),c("div",null,[t[25]||(t[25]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Suburb "),c("span",{class:"text-red-600"},"*")],-1)),ue(c("input",{"onUpdate:modelValue":t[10]||(t[10]=i=>n.form.suburb=i),type:"text",class:"input w-full",required:""},null,512),[[de,n.form.suburb]]),n.submitAttempted&&!n.form.suburb?(m(),g("p",v0,"Suburb is required")):P("",!0)]),c("div",null,[c("label",x0,[t[26]||(t[26]=he("City ",-1)),n.editingAddress?P("",!0):(m(),g("span",w0,"*"))]),ue(c("input",{"onUpdate:modelValue":t[11]||(t[11]=i=>n.form.city=i),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,S0),[[de,n.form.city]]),n.submitAttempted&&!n.form.city?(m(),g("p",E0,"City is required")):P("",!0)]),c("div",null,[c("label",k0,[t[27]||(t[27]=he("Province ",-1)),n.editingAddress?P("",!0):(m(),g("span",P0,"*"))]),ue(c("input",{"onUpdate:modelValue":t[12]||(t[12]=i=>n.form.province=i),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,C0),[[de,n.form.province]]),n.submitAttempted&&!n.form.province?(m(),g("p",I0,"Province is required")):P("",!0)]),c("div",null,[c("label",A0,[t[28]||(t[28]=he("Postal Code ",-1)),n.editingAddress?P("",!0):(m(),g("span",T0,"*"))]),ue(c("input",{"onUpdate:modelValue":t[13]||(t[13]=i=>n.form.postalCode=i),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,D0),[[de,n.form.postalCode]]),n.submitAttempted&&!n.form.postalCode?(m(),g("p",R0,"Postal Code is required")):P("",!0)]),c("div",L0,[t[29]||(t[29]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Delivery Notes",-1)),ue(c("input",{"onUpdate:modelValue":t[14]||(t[14]=i=>n.form.deliveryNotes=i),type:"text",class:"input w-full"},null,512),[[de,n.form.deliveryNotes]])])]),c("div",N0,[c("button",{onClick:t[15]||(t[15]=(...i)=>o.saveAddress&&o.saveAddress(...i)),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.saving||!o.isFormValid}]),disabled:n.saving||!o.isFormValid},_(n.saving?n.editingAddress?"Saving...":"Creating...":n.editingAddress?"Save Changes":"Create Address"),11,O0),c("button",{onClick:t[16]||(t[16]=(...i)=>o.cancelForm&&o.cancelForm(...i)),class:"btn btn-secondary"},"Cancel")])])):(m(),g("button",{key:0,onClick:t[1]||(t[1]=(...i)=>o.openCreateForm&&o.openCreateForm(...i)),class:"btn btn-primary"}," Add New Address "))]),c("div",null,[c("div",F0,[t[31]||(t[31]=c("h3",{class:"text-lg font-medium text-gray-900"},"Saved Addresses",-1)),c("span",q0,_(n.addresses.length)+" total",1)]),n.loading?(m(),g("div",M0,t[32]||(t[32]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",B0,_(n.error),1)):n.addresses.length===0?(m(),g("div",j0,"No active addresses.")):(m(),g("div",U0,[(m(!0),g(oe,null,Fe(n.addresses,i=>(m(),g("div",{key:i.id,class:"border border-gray-200 rounded-lg p-4"},[c("div",H0,[c("div",V0,[c("h4",$0,_(i.name||"Address"),1),i.isActive===!1?(m(),g("span",W0,"Inactive")):P("",!0)]),c("div",Q0,[c("button",{onClick:a=>o.startEdit(i),class:"btn btn-secondary btn-sm"},"Edit",8,K0),c("button",{onClick:a=>o.deactivate(i),class:"btn btn-danger btn-sm",disabled:n.deactivatingId===i.id},_(n.deactivatingId===i.id?"Deactivating...":"Deactivate"),9,z0)])]),c("div",G0,[c("div",Y0,[i.organisation?(m(),g("p",J0,_(i.organisation),1)):P("",!0),i.contactPerson||i.contactPhone||i.contactEmail?(m(),g("div",X0,[i.contactPerson?(m(),g("p",Z0,"Contact: "+_(i.contactPerson),1)):P("",!0),i.contactPhone?(m(),g("p",e_,"Phone: "+_(i.contactPhone),1)):P("",!0),i.contactEmail?(m(),g("p",t_,"Email: "+_(i.contactEmail),1)):P("",!0)])):P("",!0)]),c("div",s_,[c("p",r_,_(i.addressLine1),1),i.addressLine2?(m(),g("p",n_,_(i.addressLine2),1)):P("",!0),c("p",o_,_(i.suburb)+", "+_(i.city)+", "+_(i.province)+" "+_(i.postalCode),1),i.deliveryNotes?(m(),g("p",i_,_(i.deliveryNotes),1)):P("",!0)])])]))),128))]))])])}const l_=kt(i0,[["render",a_]]);class c_{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=Y.getToken();n&&(r.Authorization=`Bearer ${n}`);const o=await fetch(`${Ht}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!o.ok){const a=(await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(a)}return o.json()}async getCustomer(t){return await this.makeRequest("/getCustomer",{id:t})}}const u_=new c_,d_={name:"App",components:{PriceListManager:ky,LoginForm:Ky,UserProfileDialog:r0,DeliveryAddresses:l_},data(){return{isAuthenticated:!1,currentUser:null,showProfileDialog:!1,loginData:null,customerId:null,showAddresses:!1,logoOk:!0,logoSrc:"/createspace-logo.png",customerName:""}},computed:{hasCustomerId(){return!!this.customerId},welcomeText(){var t,s;const e=((t=this.currentUser)==null?void 0:t.firstName)||((s=this.currentUser)==null?void 0:s.id)||"User";return this.customerName?`${e} (${this.customerName})`:e}},async mounted(){try{const t=new URLSearchParams(window.location.search).get("code");if(t&&!Y.isAuthenticated()){await Y.exchangeAuthorizationCode(t);const s=new URL(window.location.href);s.searchParams.delete("code"),window.history.replaceState({},"",s.toString())}}catch(e){console.error("SSO exchange failed:",e)}if(this.isAuthenticated=Y.isAuthenticated(),this.isAuthenticated)try{this.currentUser=await Y.getCurrentUser(),this.customerId=Y.getCustomerId(this.currentUser),await this.loadCustomerName(),console.log("User data refreshed on page load:",this.currentUser),console.log("Customer ID refreshed on page load:",this.customerId)}catch(e){console.error("Failed to refresh user data on page load:",e),this.currentUser=await Y.getCurrentUserCached(),this.customerId=Y.getCustomerId(this.currentUser),await this.loadCustomerName()}},methods:{async handleLoginSuccess(e){console.log("Login successful:",e),this.isAuthenticated=!0,this.loginData=e,e.identity_created?(console.log("New user detected, showing profile dialog"),this.showProfileDialog=!0):(console.log("Existing user, retrieving profile"),this.currentUser=await Y.getCurrentUser(),this.customerId=Y.getCustomerId(this.currentUser),await this.loadCustomerName())},async handleProfileSaved(e){console.log("Profile data received:",e);try{this.currentUser=await Y.createUserWithProfile(e.firstName,e.lastName),console.log("User created with profile:",this.currentUser),this.customerId=Y.getCustomerId(this.currentUser),await this.loadCustomerName(),this.showProfileDialog=!1}catch(t){console.error("Failed to save profile:",t)}},handleProfileCancel(){this.handleLogout()},handleLogout(){Y.logout(),this.isAuthenticated=!1,this.currentUser=null,this.showProfileDialog=!1,this.loginData=null,this.customerId=null,this.customerName=""},async loadCustomerName(){try{if(!this.customerId)return;const e=await u_.getCustomer(this.customerId);this.customerName=(e==null?void 0:e.name)||(e==null?void 0:e.companyName)||""}catch(e){console.warn("Failed to load customer name",e),this.customerName=""}}}},f_={id:"app",class:"min-h-screen bg-gray-50"},h_={key:0,class:"min-h-screen"},p_={class:"max-w-6xl mx-auto px-4 py-0"},m_={key:2,class:"max-w-6xl mx-auto px-4 py-8"},g_={class:"mb-8"},y_={class:"flex justify-between items-center"},__={class:"flex items-center gap-3 mb-1"},b_=["src"],v_={key:1,class:"text-3xl font-bold text-gray-900"},x_={class:"flex items-center space-x-4"},w_={class:"text-sm text-gray-600"},S_={key:0,class:"card text-center py-12"};function E_(e,t,s,r,n,o){const i=Nt("LoginForm"),a=Nt("UserProfileDialog"),l=Nt("PriceListManager"),d=Nt("DeliveryAddresses");return m(),g("div",f_,[n.isAuthenticated?P("",!0):(m(),g("div",h_,[c("div",p_,[Oe(i,{onLoginSuccess:o.handleLoginSuccess},null,8,["onLoginSuccess"])])])),n.showProfileDialog?(m(),Es(a,{key:1,show:n.showProfileDialog,onProfileSaved:o.handleProfileSaved,onCancel:o.handleProfileCancel},null,8,["show","onProfileSaved","onCancel"])):n.isAuthenticated&&!n.showProfileDialog?(m(),g("div",m_,[c("header",g_,[c("div",y_,[c("div",null,[c("div",__,[n.logoOk?(m(),g("img",{key:0,src:n.logoSrc,alt:"CREATESPACE",class:"h-10 md:h-7 w-auto",onError:t[0]||(t[0]=u=>n.logoOk=!1)},null,40,b_)):(m(),g("h1",v_,"CREATESPACE"))])]),c("div",x_,[c("span",w_," Welcome, "+_(o.welcomeText),1),o.hasCustomerId?(m(),g("button",{key:0,onClick:t[1]||(t[1]=u=>n.showAddresses=!0),class:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 rounded-md hover:bg-blue-100 border border-blue-200"}," Manage Delivery Addresses ")):P("",!0),c("button",{onClick:t[2]||(t[2]=(...u)=>o.handleLogout&&o.handleLogout(...u)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Logout ")])])]),o.hasCustomerId?o.hasCustomerId&&!n.showAddresses?(m(),Es(l,{"customer-id":n.customerId,key:`price-list-manager-${n.customerId}`},null,8,["customer-id"])):o.hasCustomerId&&n.showAddresses?(m(),Es(d,{key:2,"customer-id":n.customerId,onClose:t[3]||(t[3]=u=>n.showAddresses=!1)},null,8,["customer-id"])):P("",!0):(m(),g("div",S_,t[4]||(t[4]=[c("div",{class:"text-yellow-600 text-lg font-medium mb-2"},"No Customer Assigned",-1),c("p",{class:"text-gray-600 mb-4"},"No customer has been assigned to you yet. Please contact your administrator.",-1)])))])):P("",!0)])}const k_=kt(d_,[["render",E_]]),O=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,J=globalThis,qt="10.3.0";function os(){return qr(J),J}function qr(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||qt,t[qt]=t[qt]||{}}function Bs(e,t,s=J){const r=s.__SENTRY__=s.__SENTRY__||{},n=r[qt]=r[qt]||{};return n[e]||(n[e]=t())}const P_=["debug","info","warn","error","log","assert","trace"],C_="Sentry Logger ",_r={};function Pt(e){if(!("console"in J))return e();const t=J.console,s={},r=Object.keys(_r);r.forEach(n=>{const o=_r[n];s[n]=t[n],t[n]=o});try{return e()}finally{r.forEach(n=>{t[n]=s[n]})}}function I_(){fo().enabled=!0}function A_(){fo().enabled=!1}function fl(){return fo().enabled}function T_(...e){uo("log",...e)}function D_(...e){uo("warn",...e)}function R_(...e){uo("error",...e)}function uo(e,...t){O&&fl()&&Pt(()=>{J.console[e](`${C_}[${e}]:`,...t)})}function fo(){return O?Bs("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const R={enable:I_,disable:A_,isEnabled:fl,log:T_,warn:D_,error:R_},hl=50,Bt="?",pi=/\(error: (.*)\)/,mi=/captureMessage|captureException/;function pl(...e){const t=e.sort((s,r)=>s[0]-r[0]).map(s=>s[1]);return(s,r=0,n=0)=>{const o=[],i=s.split(`
`);for(let a=r;a<i.length;a++){let l=i[a];l.length>1024&&(l=l.slice(0,1024));const d=pi.test(l)?l.replace(pi,"$1"):l;if(!d.match(/\S*Error: /)){for(const u of t){const h=u(d);if(h){o.push(h);break}}if(o.length>=hl+n)break}}return N_(o.slice(n))}}function L_(e){return Array.isArray(e)?pl(...e):e}function N_(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Ys(t).function||"")&&t.pop(),t.reverse(),mi.test(Ys(t).function||"")&&(t.pop(),mi.test(Ys(t).function||"")&&t.pop()),t.slice(0,hl).map(s=>({...s,filename:s.filename||Ys(t).filename,function:s.function||Bt}))}function Ys(e){return e[e.length-1]||{}}const sn="<anonymous>";function vt(e){try{return!e||typeof e!="function"?sn:e.name||sn}catch{return sn}}function gi(e){const t=e.exception;if(t){const s=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&s.push(...r.stacktrace.frames)}),s}catch{return}}}const ar={},yi={};function Vt(e,t){ar[e]=ar[e]||[],ar[e].push(t)}function $t(e,t){if(!yi[e]){yi[e]=!0;try{t()}catch(s){O&&R.error(`Error while instrumenting ${e}`,s)}}}function We(e,t){const s=e&&ar[e];if(s)for(const r of s)try{r(t)}catch(n){O&&R.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${vt(r)}
Error:`,n)}}let rn=null;function O_(e){const t="error";Vt(t,e),$t(t,F_)}function F_(){rn=J.onerror,J.onerror=function(e,t,s,r,n){return We("error",{column:r,error:n,line:s,msg:e,url:t}),rn?rn.apply(this,arguments):!1},J.onerror.__SENTRY_INSTRUMENTED__=!0}let nn=null;function q_(e){const t="unhandledrejection";Vt(t,e),$t(t,M_)}function M_(){nn=J.onunhandledrejection,J.onunhandledrejection=function(e){return We("unhandledrejection",e),nn?nn.apply(this,arguments):!0},J.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ml=Object.prototype.toString;function ho(e){switch(ml.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return xt(e,Error)}}function is(e,t){return ml.call(e)===`[object ${t}]`}function gl(e){return is(e,"ErrorEvent")}function _i(e){return is(e,"DOMError")}function B_(e){return is(e,"DOMException")}function dt(e){return is(e,"String")}function po(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function mo(e){return e===null||po(e)||typeof e!="object"&&typeof e!="function"}function Rs(e){return is(e,"Object")}function Mr(e){return typeof Event<"u"&&xt(e,Event)}function j_(e){return typeof Element<"u"&&xt(e,Element)}function U_(e){return is(e,"RegExp")}function Br(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function H_(e){return Rs(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function xt(e,t){try{return e instanceof t}catch{return!1}}function yl(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function V_(e){return typeof Request<"u"&&xt(e,Request)}const go=J,$_=80;function _l(e,t={}){if(!e)return"<unknown>";try{let s=e;const r=5,n=[];let o=0,i=0;const a=" > ",l=a.length;let d;const u=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||$_;for(;s&&o++<r&&(d=W_(s,u),!(d==="html"||o>1&&i+n.length*l+d.length>=h));)n.push(d),i+=d.length,s=s.parentNode;return n.reverse().join(a)}catch{return"<unknown>"}}function W_(e,t){const s=e,r=[];if(!(s!=null&&s.tagName))return"";if(go.HTMLElement&&s instanceof HTMLElement&&s.dataset){if(s.dataset.sentryComponent)return s.dataset.sentryComponent;if(s.dataset.sentryElement)return s.dataset.sentryElement}r.push(s.tagName.toLowerCase());const n=t!=null&&t.length?t.filter(i=>s.getAttribute(i)).map(i=>[i,s.getAttribute(i)]):null;if(n!=null&&n.length)n.forEach(i=>{r.push(`[${i[0]}="${i[1]}"]`)});else{s.id&&r.push(`#${s.id}`);const i=s.className;if(i&&dt(i)){const a=i.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const o=["aria-label","type","name","title","alt"];for(const i of o){const a=s.getAttribute(i);a&&r.push(`[${i}="${a}"]`)}return r.join("")}function yo(){try{return go.document.location.href}catch{return""}}function Q_(e){if(!go.HTMLElement)return null;let t=e;const s=5;for(let r=0;r<s;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function br(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function bi(e,t){if(!Array.isArray(e))return"";const s=[];for(let r=0;r<e.length;r++){const n=e[r];try{yl(n)?s.push("[VueViewModel]"):s.push(String(n))}catch{s.push("[value cannot be serialized]")}}return s.join(t)}function lr(e,t,s=!1){return dt(e)?U_(t)?t.test(e):dt(t)?s?e===t:e.includes(t):!1:!1}function jr(e,t=[],s=!1){return t.some(r=>lr(e,r,s))}function Ne(e,t,s){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const n=s(r);typeof n=="function"&&bl(n,r);try{e[t]=n}catch{O&&R.log(`Failed to replace method "${t}" in object`,e)}}function je(e,t,s){try{Object.defineProperty(e,t,{value:s,writable:!0,configurable:!0})}catch{O&&R.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function bl(e,t){try{const s=t.prototype||{};e.prototype=t.prototype=s,je(e,"__sentry_original__",t)}catch{}}function _o(e){return e.__sentry_original__}function vl(e){if(ho(e))return{message:e.message,name:e.name,stack:e.stack,...xi(e)};if(Mr(e)){const t={type:e.type,target:vi(e.target),currentTarget:vi(e.currentTarget),...xi(e)};return typeof CustomEvent<"u"&&xt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function vi(e){try{return j_(e)?_l(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function xi(e){if(typeof e=="object"&&e!==null){const t={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}else return{}}function K_(e,t=40){const s=Object.keys(vl(e));s.sort();const r=s[0];if(!r)return"[object has no keys]";if(r.length>=t)return br(r,t);for(let n=s.length;n>0;n--){const o=s.slice(0,n).join(", ");if(!(o.length>t))return n===s.length?o:br(o,t)}return""}function z_(){const e=J;return e.crypto||e.msCrypto}function qe(e=z_()){let t=()=>Math.random()*16;try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e!=null&&e.getRandomValues&&(t=()=>{const s=new Uint8Array(1);return e.getRandomValues(s),s[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,s=>(s^(t()&15)>>s/4).toString(16))}function xl(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)==null?void 0:s[0]}function Lt(e){const{message:t,event_id:s}=e;if(t)return t;const r=xl(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||s||"<unknown>":s||"<unknown>"}function In(e,t,s){const r=e.exception=e.exception||{},n=r.values=r.values||[],o=n[0]=n[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function ts(e,t){const s=xl(e);if(!s)return;const r={type:"generic",handled:!0},n=s.mechanism;if(s.mechanism={...r,...n,...t},t&&"data"in t){const o={...n==null?void 0:n.data,...t.data};s.mechanism.data=o}}function wi(e){if(G_(e))return!0;try{je(e,"__sentry_captured__",!0)}catch{}return!1}function G_(e){try{return e.__sentry_captured__}catch{}}const wl=1e3;function js(){return Date.now()/wl}function Y_(){const{performance:e}=J;if(!(e!=null&&e.now)||!e.timeOrigin)return js;const t=e.timeOrigin;return()=>(t+e.now())/wl}let Si;function Ce(){return(Si??(Si=Y_()))()}function J_(e){const t=Ce(),s={sid:qe(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Z_(s)};return e&&ss(s,e),s}function ss(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ce(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:qe()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const s=e.timestamp-e.started;e.duration=s>=0?s:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function X_(e,t){let s={};e.status==="ok"&&(s={status:"exited"}),ss(e,s)}function Z_(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Us(e,t,s=2){if(!t||typeof t!="object"||s<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Us(r[n],t[n],s-1));return r}function vr(){return qe()}function Ur(){return qe().substring(16)}const An="_sentrySpan";function Tn(e,t){t?je(e,An,t):delete e[An]}function xr(e){return e[An]}const eb=100;class nt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:vr(),sampleRand:Math.random()}}clone(){const t=new nt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Tn(t,xr(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&ss(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,s){return this._tags={...this._tags,[t]:s},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,s){return this._extra={...this._extra,[t]:s},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,s){return s===null?delete this._contexts[t]:this._contexts[t]=s,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const s=typeof t=="function"?t(this):t,r=s instanceof nt?s.getScopeData():Rs(s)?t:void 0,{tags:n,extra:o,user:i,contexts:a,level:l,fingerprint:d=[],propagationContext:u}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...o},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),l&&(this._level=l),d.length&&(this._fingerprint=d),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Tn(this,void 0),this._attachments=[],this.setPropagationContext({traceId:vr(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,s){var o;const r=typeof s=="number"?s:eb;if(r<=0)return this;const n={timestamp:js(),...t,message:t.message?br(t.message,2048):t.message};return this._breadcrumbs.push(n),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(o=this._client)==null||o.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:xr(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Us(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,s){const r=(s==null?void 0:s.event_id)||qe();if(!this._client)return O&&R.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:n,...s,event_id:r},this),r}captureMessage(t,s,r){const n=(r==null?void 0:r.event_id)||qe();if(!this._client)return O&&R.warn("No client configured on scope - will not capture message!"),n;const o=new Error(t);return this._client.captureMessage(t,s,{originalException:t,syntheticException:o,...r,event_id:n},this),n}captureEvent(t,s){const r=(s==null?void 0:s.event_id)||qe();return this._client?(this._client.captureEvent(t,{...s,event_id:r},this),r):(O&&R.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function tb(){return Bs("defaultCurrentScope",()=>new nt)}function sb(){return Bs("defaultIsolationScope",()=>new nt)}class rb{constructor(t,s){let r;t?r=t:r=new nt;let n;s?n=s:n=new nt,this._stack=[{scope:r}],this._isolationScope=n}withScope(t){const s=this._pushScope();let r;try{r=t(s)}catch(n){throw this._popScope(),n}return Br(r)?r.then(n=>(this._popScope(),n),n=>{throw this._popScope(),n}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function rs(){const e=os(),t=qr(e);return t.stack=t.stack||new rb(tb(),sb())}function nb(e){return rs().withScope(e)}function ob(e,t){const s=rs();return s.withScope(()=>(s.getStackTop().scope=e,t(e)))}function Ei(e){return rs().withScope(()=>e(rs().getIsolationScope()))}function ib(){return{withIsolationScope:Ei,withScope:nb,withSetScope:ob,withSetIsolationScope:(e,t)=>Ei(t),getCurrentScope:()=>rs().getScope(),getIsolationScope:()=>rs().getIsolationScope()}}function Hs(e){const t=qr(e);return t.acs?t.acs:ib()}function Qe(){const e=os();return Hs(e).getCurrentScope()}function as(){const e=os();return Hs(e).getIsolationScope()}function ab(){return Bs("globalScope",()=>new nt)}function bo(...e){const t=os(),s=Hs(t);if(e.length===2){const[r,n]=e;return r?s.withSetScope(r,n):s.withScope(n)}return s.withScope(e[0])}function ce(){return Qe().getClient()}function lb(e){const t=e.getPropagationContext(),{traceId:s,parentSpanId:r,propagationSpanId:n}=t,o={trace_id:s,span_id:n||Ur()};return r&&(o.parent_span_id=r),o}const wr="sentry.source",Sl="sentry.sample_rate",cb="sentry.previous_trace_sample_rate",Dn="sentry.op",Ls="sentry.origin",ub="sentry.measurement_unit",db="sentry.measurement_value",ki="sentry.custom_span_name",vo="sentry.profile_id",xo="sentry.exclusive_time",fb=0,hb=1,El="_sentryScope",kl="_sentryIsolationScope";function pb(e,t,s){e&&(je(e,kl,s),je(e,El,t))}function Sr(e){return{scope:e[El],isolationScope:e[kl]}}const mb="sentry-",gb=/^sentry-/;function yb(e){const t=_b(e);if(!t)return;const s=Object.entries(t).reduce((r,[n,o])=>{if(n.match(gb)){const i=n.slice(mb.length);r[i]=o}return r},{});if(Object.keys(s).length>0)return s}function _b(e){if(!(!e||!dt(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,s)=>{const r=Pi(s);return Object.entries(r).forEach(([n,o])=>{t[n]=o}),t},{}):Pi(e)}function Pi(e){return e.split(",").map(t=>t.split("=").map(s=>{try{return decodeURIComponent(s.trim())}catch{return}})).reduce((t,[s,r])=>(s&&r&&(t[s]=r),t),{})}const bb=/^o(\d+)\./,vb=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function xb(e){return e==="http"||e==="https"}function Vs(e,t=!1){const{host:s,path:r,pass:n,port:o,projectId:i,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&n?`:${n}`:""}@${s}${o?`:${o}`:""}/${r&&`${r}/`}${i}`}function wb(e){const t=vb.exec(e);if(!t){Pt(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[s,r,n="",o="",i="",a=""]=t.slice(1);let l="",d=a;const u=d.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),d=u.pop()),d){const h=d.match(/^\d+/);h&&(d=h[0])}return Pl({host:o,pass:n,path:l,projectId:d,port:i,protocol:s,publicKey:r})}function Pl(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Sb(e){if(!O)return!0;const{port:t,projectId:s,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(i=>e[i]?!1:(R.error(`Invalid Sentry Dsn: ${i} missing`),!0))?!1:s.match(/^\d+$/)?xb(r)?t&&isNaN(parseInt(t,10))?(R.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(R.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(R.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),!1)}function Eb(e){const t=e.match(bb);return t==null?void 0:t[1]}function kb(e){const t=e.getOptions(),{host:s}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):s&&(r=Eb(s)),r}function Pb(e){const t=typeof e=="string"?wb(e):Pl(e);if(!(!t||!Sb(t)))return t}function wo(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Cl=0,So=1;let Ci=!1;function Cb(e){const{spanId:t,traceId:s}=e.spanContext(),{data:r,op:n,parent_span_id:o,status:i,origin:a,links:l}=Me(e);return{parent_span_id:o,span_id:t,trace_id:s,data:r,op:n,status:i,origin:a,links:l}}function Ib(e){const{spanId:t,traceId:s,isRemote:r}=e.spanContext(),n=r?t:Me(e).parent_span_id,o=Sr(e).scope,i=r?(o==null?void 0:o.getPropagationContext().propagationSpanId)||Ur():t;return{parent_span_id:n,span_id:i,trace_id:s}}function Il(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:s,traceFlags:r,...n},attributes:o})=>({span_id:t,trace_id:s,sampled:r===So,attributes:o,...n}))}function Zt(e){return typeof e=="number"?Ii(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ii(e.getTime()):Ce()}function Ii(e){return e>9999999999?e/1e3:e}function Me(e){var r;if(Tb(e))return e.getSpanJSON();const{spanId:t,traceId:s}=e.spanContext();if(Ab(e)){const{attributes:n,startTime:o,name:i,endTime:a,status:l,links:d}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(r=e.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:t,trace_id:s,data:n,description:i,parent_span_id:u,start_timestamp:Zt(o),timestamp:Zt(a)||void 0,status:Al(l),op:n[Dn],origin:n[Ls],links:Il(d)}}return{span_id:t,trace_id:s,start_timestamp:0,data:{}}}function Ab(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Tb(e){return typeof e.getSpanJSON=="function"}function $s(e){const{traceFlags:t}=e.spanContext();return t===So}function Al(e){if(!(!e||e.code===fb))return e.code===hb?"ok":e.message||"unknown_error"}const ks="_sentryChildSpans",Rn="_sentryRootSpan";function Tl(e,t){const s=e[Rn]||e;je(t,Rn,s),e[ks]?e[ks].add(t):je(e,ks,new Set([t]))}function Db(e){const t=new Set;function s(r){if(!t.has(r)&&$s(r)){t.add(r);const n=r[ks]?Array.from(r[ks]):[];for(const o of n)s(o)}}return s(e),Array.from(t)}function _t(e){return e[Rn]||e}function Rb(){const e=os(),t=Hs(e);return t.getActiveSpan?t.getActiveSpan():xr(Qe())}function Ln(){Ci||(Pt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Ci=!0)}function Hr(e){var s;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((s=ce())==null?void 0:s.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const Eo="production",Dl="_frozenDsc";function on(e,t){je(e,Dl,t)}function Rl(e,t){const s=t.getOptions(),{publicKey:r}=t.getDsn()||{},n={environment:s.environment||Eo,release:s.release,public_key:r,trace_id:e,org_id:kb(t)};return t.emit("createDsc",n),n}function Lb(e,t){const s=t.getPropagationContext();return s.dsc||Rl(s.traceId,e)}function Ns(e){var D;const t=ce();if(!t)return{};const s=_t(e),r=Me(s),n=r.data,o=s.spanContext().traceState,i=(o==null?void 0:o.get("sentry.sample_rate"))??n[Sl]??n[cb];function a(F){return(typeof i=="number"||typeof i=="string")&&(F.sample_rate=`${i}`),F}const l=s[Dl];if(l)return a(l);const d=o==null?void 0:o.get("sentry.dsc"),u=d&&yb(d);if(u)return a(u);const h=Rl(e.spanContext().traceId,t),b=n[wr],y=r.description;return b!=="url"&&y&&(h.transaction=y),Hr()&&(h.sampled=String($s(s)),h.sample_rand=(o==null?void 0:o.get("sentry.sample_rand"))??((D=Sr(s).scope)==null?void 0:D.getPropagationContext().sampleRand.toString())),a(h),t.emit("createDsc",h,s),h}class ko{constructor(t={}){this._traceId=t.traceId||vr(),this._spanId=t.spanId||Ur()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Cl}}end(t){}setAttribute(t,s){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,s,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,s){}}function lt(e,t=100,s=1/0){try{return Nn("",e,t,s)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ll(e,t=3,s=100*1024){const r=lt(e,t);return qb(r)>s?Ll(e,t-1,s):r}function Nn(e,t,s=1/0,r=1/0,n=Mb()){const[o,i]=n;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Nb(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:s;if(l===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const d=t;if(d&&typeof d.toJSON=="function")try{const y=d.toJSON();return Nn("",y,l-1,r,n)}catch{}const u=Array.isArray(t)?[]:{};let h=0;const b=vl(t);for(const y in b){if(!Object.prototype.hasOwnProperty.call(b,y))continue;if(h>=r){u[y]="[MaxProperties ~]";break}const D=b[y];u[y]=Nn(y,D,l-1,r,n),h++}return i(t),u}function Nb(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(yl(t))return"[VueViewModel]";if(H_(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${vt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const s=Ob(t);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(s){return`**non-serializable** (${s})`}}function Ob(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function Fb(e){return~-encodeURI(e).split(/%..|./).length}function qb(e){return Fb(JSON.stringify(e))}function Mb(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function s(r){e.delete(r)}return[t,s]}function ls(e,t=[]){return[e,t]}function Bb(e,t){const[s,r]=e;return[s,[...r,t]]}function Ai(e,t){const s=e[1];for(const r of s){const n=r[0].type;if(t(r,n))return!0}return!1}function On(e){const t=qr(J);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function jb(e){const[t,s]=e;let r=JSON.stringify(t);function n(o){typeof r=="string"?r=typeof o=="string"?r+o:[On(r),o]:r.push(typeof o=="string"?On(o):o)}for(const o of s){const[i,a]=o;if(n(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)n(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(lt(a))}n(l)}}return typeof r=="string"?r:Ub(r)}function Ub(e){const t=e.reduce((n,o)=>n+o.length,0),s=new Uint8Array(t);let r=0;for(const n of e)s.set(n,r),r+=n.length;return s}function Hb(e){return[{type:"span"},e]}function Vb(e){const t=typeof e.data=="string"?On(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const $b={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function Ti(e){return $b[e]}function Nl(e){if(!(e!=null&&e.sdk))return;const{name:t,version:s}=e.sdk;return{name:t,version:s}}function Wb(e,t,s,r){var o;const n=(o=e.sdkProcessingMetadata)==null?void 0:o.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!s&&r&&{dsn:Vs(r)},...n&&{trace:n}}}function Fn(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const s of t){if(Kb(s)){if(lr(e.description,s))return!0;continue}if(!s.name&&!s.op)continue;const r=s.name?lr(e.description,s.name):!0,n=s.op?e.op&&lr(e.op,s.op):!0;if(r&&n)return!0}return!1}function Qb(e,t){const s=t.parent_span_id,r=t.span_id;if(s)for(const n of e)n.parent_span_id===r&&(n.parent_span_id=s)}function Kb(e){return typeof e=="string"||e instanceof RegExp}function zb(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Gb(e,t,s,r){const n=Nl(s),o={sent_at:new Date().toISOString(),...n&&{sdk:n},...!!r&&t&&{dsn:Vs(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return ls(o,[i])}function Yb(e,t,s,r){const n=Nl(s),o=e.type&&e.type!=="replay_event"?e.type:"event";zb(e,s==null?void 0:s.sdk);const i=Wb(e,n,r,t);return delete e.sdkProcessingMetadata,ls(i,[[{type:o},e]])}function Jb(e,t){function s(y){return!!y.trace_id&&!!y.public_key}const r=Ns(e[0]),n=t==null?void 0:t.getDsn(),o=t==null?void 0:t.getOptions().tunnel,i={sent_at:new Date().toISOString(),...s(r)&&{trace:r},...!!o&&n&&{dsn:Vs(n)}},{beforeSendSpan:a,ignoreSpans:l}=(t==null?void 0:t.getOptions())||{},d=l!=null&&l.length?e.filter(y=>!Fn(Me(y),l)):e,u=e.length-d.length;u&&(t==null||t.recordDroppedEvent("before_send","span",u));const h=a?y=>{const D=Me(y),F=a(D);return F||(Ln(),D)}:Me,b=[];for(const y of d){const D=h(y);D&&b.push(Hb(D))}return ls(i,b)}function Xb(e){if(!O)return;const{description:t="< unknown name >",op:s="< unknown op >",parent_span_id:r}=Me(e),{spanId:n}=e.spanContext(),o=$s(e),i=_t(e),a=i===e,l=`[Tracing] Starting ${o?"sampled":"unsampled"} ${a?"root ":""}span`,d=[`op: ${s}`,`name: ${t}`,`ID: ${n}`];if(r&&d.push(`parent ID: ${r}`),!a){const{op:u,description:h}=Me(i);d.push(`root ID: ${i.spanContext().spanId}`),u&&d.push(`root op: ${u}`),h&&d.push(`root description: ${h}`)}R.log(`${l}
  ${d.join(`
  `)}`)}function Zb(e){if(!O)return;const{description:t="< unknown name >",op:s="< unknown op >"}=Me(e),{spanId:r}=e.spanContext(),o=_t(e)===e,i=`[Tracing] Finishing "${s}" ${o?"root ":""}span "${t}" with ID ${r}`;R.log(i)}function Di(e){if(!e||e.length===0)return;const t={};return e.forEach(s=>{const r=s.attributes||{},n=r[ub],o=r[db];typeof n=="string"&&typeof o=="number"&&(t[s.name]={value:o,unit:n})}),t}const Ri=1e3;class Po{constructor(t={}){this._traceId=t.traceId||vr(),this._spanId=t.spanId||Ur(),this._startTime=t.startTimestamp||Ce(),this._links=t.links,this._attributes={},this.setAttributes({[Ls]:"manual",[Dn]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,s){}spanContext(){const{_spanId:t,_traceId:s,_sampled:r}=this;return{spanId:t,traceId:s,traceFlags:r?So:Cl}}setAttribute(t,s){return s===void 0?delete this._attributes[t]:this._attributes[t]=s,this}setAttributes(t){return Object.keys(t).forEach(s=>this.setAttribute(s,t[s])),this}updateStartTime(t){this._startTime=Zt(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(wr,"custom"),this}end(t){this._endTime||(this._endTime=Zt(t),Zb(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Dn],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Al(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ls],profile_id:this._attributes[vo],exclusive_time:this._attributes[xo],measurements:Di(this._events),is_segment:this._isStandaloneSpan&&_t(this)===this||void 0,segment_id:this._isStandaloneSpan?_t(this).spanContext().spanId:void 0,links:Il(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,s,r){O&&R.log("[Tracing] Adding an event to span:",t);const n=Li(s)?s:r||Ce(),o=Li(s)?{}:s||{},i={name:t,time:Zt(n),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=ce();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===_t(this)))return;if(this._isStandaloneSpan){this._sampled?tv(Jb([this],t)):(O&&R.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Sr(this).scope||Qe()).captureEvent(r)}_convertSpanToTransaction(){var u;if(!Ni(Me(this)))return;this._name||(O&&R.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:s}=Sr(this),r=(u=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:u.normalizedRequest;if(this._sampled!==!0)return;const o=Db(this).filter(h=>h!==this&&!ev(h)).map(h=>Me(h)).filter(Ni),i=this._attributes[wr];delete this._attributes[ki],o.forEach(h=>{delete h.data[ki]});const a={contexts:{trace:Cb(this)},spans:o.length>Ri?o.sort((h,b)=>h.start_timestamp-b.start_timestamp).slice(0,Ri):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:s,dynamicSamplingContext:Ns(this)},request:r,...i&&{transaction_info:{source:i}}},l=Di(this._events);return l&&Object.keys(l).length&&(O&&R.log("[Measurements] Adding measurements to transaction event",JSON.stringify(l,void 0,2)),a.measurements=l),a}}function Li(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Ni(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function ev(e){return e instanceof Po&&e.isStandaloneSpan()}function tv(e){const t=ce();if(!t)return;const s=e[1];if(!s||s.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function sv(e,t,s){if(!Hr(e))return[!1];let r,n;typeof e.tracesSampler=="function"?(n=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?n=t.parentSampled:typeof e.tracesSampleRate<"u"&&(n=e.tracesSampleRate,r=!0);const o=wo(n);if(o===void 0)return O&&R.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`),[!1];if(!o)return O&&R.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o,r];const i=s<o;return i||O&&R.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[i,o,r]}const Ol="__SENTRY_SUPPRESS_TRACING__";function Oi(e){const t=Fl();if(t.startInactiveSpan)return t.startInactiveSpan(e);const s=ov(e),{forceTransaction:r,parentSpan:n}=e;return(e.scope?i=>bo(e.scope,i):n!==void 0?i=>rv(n,i):i=>i())(()=>{const i=Qe(),a=av(i,n);return e.onlyIfParent&&!a?new ko:nv({parentSpan:a,spanArguments:s,forceTransaction:r,scope:i})})}function rv(e,t){const s=Fl();return s.withActiveSpan?s.withActiveSpan(e,t):bo(r=>(Tn(r,e||void 0),t(r)))}function nv({parentSpan:e,spanArguments:t,forceTransaction:s,scope:r}){if(!Hr()){const i=new ko;if(s||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...Ns(i)};on(i,a)}return i}const n=as();let o;if(e&&!s)o=iv(e,r,t),Tl(e,o);else if(e){const i=Ns(e),{traceId:a,spanId:l}=e.spanContext(),d=$s(e);o=Fi({traceId:a,parentSpanId:l,...t},r,d),on(o,i)}else{const{traceId:i,dsc:a,parentSpanId:l,sampled:d}={...n.getPropagationContext(),...r.getPropagationContext()};o=Fi({traceId:i,parentSpanId:l,...t},r,d),a&&on(o,a)}return Xb(o),pb(o,r,n),o}function ov(e){const s={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...s};return r.startTimestamp=Zt(e.startTime),delete r.startTime,r}return s}function Fl(){const e=os();return Hs(e)}function Fi(e,t,s){var D;const r=ce(),n=(r==null?void 0:r.getOptions())||{},{name:o=""}=e,i={spanAttributes:{...e.attributes},spanName:o,parentSampled:s};r==null||r.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??s,l=i.spanAttributes,d=t.getPropagationContext(),[u,h,b]=t.getScopeData().sdkProcessingMetadata[Ol]?[!1]:sv(n,{name:o,parentSampled:a,attributes:l,parentSampleRate:wo((D=d.dsc)==null?void 0:D.sample_rate)},d.sampleRand),y=new Po({...e,attributes:{[wr]:"custom",[Sl]:h!==void 0&&b?h:void 0,...l},sampled:u});return!u&&r&&(O&&R.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",y),y}function iv(e,t,s){const{spanId:r,traceId:n}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[Ol]?!1:$s(e),i=o?new Po({...s,parentSpanId:r,traceId:n,sampled:o}):new ko({traceId:n});Tl(e,i);const a=ce();return a&&(a.emit("spanStart",i),s.endTimestamp&&a.emit("spanEnd",i)),i}function av(e,t){if(t)return t;if(t===null)return;const s=xr(e);if(!s)return;const r=ce();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?_t(s):s}const an=0,qi=1,Mi=2;function jt(e){return new wt(t=>{t(e)})}function Er(e){return new wt((t,s)=>{s(e)})}class wt{constructor(t){this._state=an,this._handlers=[],this._runExecutor(t)}then(t,s){return new wt((r,n)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(i){n(i)}},o=>{if(!s)n(o);else try{r(s(o))}catch(i){n(i)}}]),this._executeHandlers()})}catch(t){return this.then(s=>s,t)}finally(t){return new wt((s,r)=>{let n,o;return this.then(i=>{o=!1,n=i,t&&t()},i=>{o=!0,n=i,t&&t()}).then(()=>{if(o){r(n);return}s(n)})})}_executeHandlers(){if(this._state===an)return;const t=this._handlers.slice();this._handlers=[],t.forEach(s=>{s[0]||(this._state===qi&&s[1](this._value),this._state===Mi&&s[2](this._value),s[0]=!0)})}_runExecutor(t){const s=(o,i)=>{if(this._state===an){if(Br(i)){i.then(r,n);return}this._state=o,this._value=i,this._executeHandlers()}},r=o=>{s(qi,o)},n=o=>{s(Mi,o)};try{t(r,n)}catch(o){n(o)}}}function qn(e,t,s,r=0){return new wt((n,o)=>{const i=e[r];if(t===null||typeof i!="function")n(t);else{const a=i({...t},s);O&&i.id&&a===null&&R.log(`Event processor "${i.id}" dropped event`),Br(a)?a.then(l=>qn(e,l,s,r+1).then(n)).then(null,o):qn(e,a,s,r+1).then(n).then(null,o)}})}function lv(e,t){const{fingerprint:s,span:r,breadcrumbs:n,sdkProcessingMetadata:o}=t;cv(e,t),r&&fv(e,r),hv(e,s),uv(e,n),dv(e,o)}function Bi(e,t){const{extra:s,tags:r,user:n,contexts:o,level:i,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:d,eventProcessors:u,attachments:h,propagationContext:b,transactionName:y,span:D}=t;Js(e,"extra",s),Js(e,"tags",r),Js(e,"user",n),Js(e,"contexts",o),e.sdkProcessingMetadata=Us(e.sdkProcessingMetadata,a,2),i&&(e.level=i),y&&(e.transactionName=y),D&&(e.span=D),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),h.length&&(e.attachments=[...e.attachments,...h]),e.propagationContext={...e.propagationContext,...b}}function Js(e,t,s){e[t]=Us(e[t],s,1)}function cv(e,t){const{extra:s,tags:r,user:n,contexts:o,level:i,transactionName:a}=t;Object.keys(s).length&&(e.extra={...s,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(n).length&&(e.user={...n,...e.user}),Object.keys(o).length&&(e.contexts={...o,...e.contexts}),i&&(e.level=i),a&&e.type!=="transaction"&&(e.transaction=a)}function uv(e,t){const s=[...e.breadcrumbs||[],...t];e.breadcrumbs=s.length?s:void 0}function dv(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function fv(e,t){e.contexts={trace:Ib(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Ns(t),...e.sdkProcessingMetadata};const s=_t(t),r=Me(s).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function hv(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let Xs,ji,Zs;function pv(e){const t=J._sentryDebugIds;if(!t)return{};const s=Object.keys(t);return Zs&&s.length===ji||(ji=s.length,Zs=s.reduce((r,n)=>{Xs||(Xs={});const o=Xs[n];if(o)r[o[0]]=o[1];else{const i=e(n);for(let a=i.length-1;a>=0;a--){const l=i[a],d=l==null?void 0:l.filename,u=t[n];if(d&&u){r[d]=u,Xs[n]=[d,u];break}}}return r},{})),Zs}function mv(e,t,s,r,n,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||s.event_id||qe(),timestamp:t.timestamp||js()},d=s.integrations||e.integrations.map(V=>V.name);gv(l,e),bv(l,d),n&&n.emit("applyFrameMetadata",t),t.type===void 0&&yv(l,e.stackParser);const u=xv(r,s.captureContext);s.mechanism&&ts(l,s.mechanism);const h=n?n.getEventProcessors():[],b=ab().getScopeData();if(o){const V=o.getScopeData();Bi(b,V)}if(u){const V=u.getScopeData();Bi(b,V)}const y=[...s.attachments||[],...b.attachments];y.length&&(s.attachments=y),lv(l,b);const D=[...h,...b.eventProcessors];return qn(D,l,s).then(V=>(V&&_v(V),typeof i=="number"&&i>0?vv(V,i,a):V))}function gv(e,t){const{environment:s,release:r,dist:n,maxValueLength:o=250}=t;e.environment=e.environment||s||Eo,!e.release&&r&&(e.release=r),!e.dist&&n&&(e.dist=n);const i=e.request;i!=null&&i.url&&(i.url=br(i.url,o))}function yv(e,t){var r,n;const s=pv(t);(n=(r=e.exception)==null?void 0:r.values)==null||n.forEach(o=>{var i,a;(a=(i=o.stacktrace)==null?void 0:i.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=s[l.filename])})})}function _v(e){var r,n;const t={};if((n=(r=e.exception)==null?void 0:r.values)==null||n.forEach(o=>{var i,a;(a=(i=o.stacktrace)==null?void 0:i.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const s=e.debug_meta.images;Object.entries(t).forEach(([o,i])=>{s.push({type:"sourcemap",code_file:o,debug_id:i})})}function bv(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function vv(e,t,s){var n,o;if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:lt(i.data,t,s)}}))},...e.user&&{user:lt(e.user,t,s)},...e.contexts&&{contexts:lt(e.contexts,t,s)},...e.extra&&{extra:lt(e.extra,t,s)}};return(n=e.contexts)!=null&&n.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=lt(e.contexts.trace.data,t,s))),e.spans&&(r.spans=e.spans.map(i=>({...i,...i.data&&{data:lt(i.data,t,s)}}))),(o=e.contexts)!=null&&o.flags&&r.contexts&&(r.contexts.flags=lt(e.contexts.flags,3,s)),r}function xv(e,t){if(!t)return e;const s=e?e.clone():new nt;return s.update(t),s}function wv(e){if(e)return Sv(e)?{captureContext:e}:kv(e)?{captureContext:e}:e}function Sv(e){return e instanceof nt||typeof e=="function"}const Ev=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function kv(e){return Object.keys(e).some(t=>Ev.includes(t))}function ql(e,t){return Qe().captureException(e,wv(t))}function Ml(e,t){return Qe().captureEvent(e,t)}function Ui(e){const t=as(),s=Qe(),{userAgent:r}=J.navigator||{},n=J_({user:s.getUser()||t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession();return(o==null?void 0:o.status)==="ok"&&ss(o,{status:"exited"}),Bl(),t.setSession(n),n}function Bl(){const e=as(),s=Qe().getSession()||e.getSession();s&&X_(s),jl(),e.setSession()}function jl(){const e=as(),t=ce(),s=e.getSession();s&&t&&t.captureSession(s)}function Hi(e=!1){if(e){Bl();return}jl()}const Pv="7";function Cv(e){const t=e.protocol?`${e.protocol}:`:"",s=e.port?`:${e.port}`:"";return`${t}//${e.host}${s}${e.path?`/${e.path}`:""}/api/`}function Iv(e){return`${Cv(e)}${e.projectId}/envelope/`}function Av(e,t){const s={sentry_version:Pv};return e.publicKey&&(s.sentry_key=e.publicKey),t&&(s.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(s).toString()}function Tv(e,t,s){return t||`${Iv(e)}?${Av(e,s)}`}const Vi=[];function Dv(e){const t={};return e.forEach(s=>{const{name:r}=s,n=t[r];n&&!n.isDefaultInstance&&s.isDefaultInstance||(t[r]=s)}),Object.values(t)}function Rv(e){const t=e.defaultIntegrations||[],s=e.integrations;t.forEach(n=>{n.isDefaultInstance=!0});let r;if(Array.isArray(s))r=[...t,...s];else if(typeof s=="function"){const n=s(t);r=Array.isArray(n)?n:[n]}else r=t;return Dv(r)}function Lv(e,t){const s={};return t.forEach(r=>{r&&Ul(e,r,s)}),s}function $i(e,t){for(const s of t)s!=null&&s.afterAllSetup&&s.afterAllSetup(e)}function Ul(e,t,s){if(s[t.name]){O&&R.log(`Integration skipped because it was already installed: ${t.name}`);return}if(s[t.name]=t,Vi.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Vi.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(n,o)=>r(n,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),n=Object.assign((o,i)=>r(o,i,e),{id:t.name});e.addEventProcessor(n)}O&&R.log(`Integration installed: ${t.name}`)}function Nv(e,t,s){const r=[{type:"client_report"},{timestamp:js(),discarded_events:e}];return ls(t?{dsn:t}:{},[r])}function Hl(e){const t=[];e.message&&t.push(e.message);try{const s=e.exception.values[e.exception.values.length-1];s!=null&&s.value&&(t.push(s.value),s.type&&t.push(`${s.type}: ${s.value}`))}catch{}return t}function Ov(e){var l;const{trace_id:t,parent_span_id:s,span_id:r,status:n,origin:o,data:i,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return{data:i??{},description:e.transaction,op:a,parent_span_id:s,span_id:r??"",start_timestamp:e.start_timestamp??0,status:n,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:i==null?void 0:i[vo],exclusive_time:i==null?void 0:i[xo],measurements:e.measurements,is_segment:!0}}function Fv(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[vo]:e.profile_id},...e.exclusive_time&&{[xo]:e.exclusive_time}}}},measurements:e.measurements}}const Wi="Not capturing exception because it's already been captured.",Qi="Discarded session because of missing or non-string release",Vl=Symbol.for("SentryInternalError"),$l=Symbol.for("SentryDoNotSendEventError");function cr(e){return{message:e,[Vl]:!0}}function ln(e){return{message:e,[$l]:!0}}function Ki(e){return!!e&&typeof e=="object"&&Vl in e}function zi(e){return!!e&&typeof e=="object"&&$l in e}class qv{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Pb(t.dsn):O&&R.warn("No DSN provided, client will not send events."),this._dsn){const s=Tv(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:s})}}captureException(t,s,r){const n=qe();if(wi(t))return O&&R.log(Wi),n;const o={event_id:n,...s};return this._process(this.eventFromException(t,o).then(i=>this._captureEvent(i,o,r))),o.event_id}captureMessage(t,s,r,n){const o={event_id:qe(),...r},i=po(t)?t:String(t),a=mo(t)?this.eventFromMessage(i,s,o):this.eventFromException(t,o);return this._process(a.then(l=>this._captureEvent(l,o,n))),o.event_id}captureEvent(t,s,r){const n=qe();if(s!=null&&s.originalException&&wi(s.originalException))return O&&R.log(Wi),n;const o={event_id:n,...s},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,l=i.capturedSpanIsolationScope;return this._process(this._captureEvent(t,o,a||r,l)),o.event_id}captureSession(t){this.sendSession(t),ss(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const s=this._transport;return s?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>s.flush(t).then(n=>r&&n))):jt(!0)}close(t){return this.flush(t).then(s=>(this.getOptions().enabled=!1,this.emit("close"),s))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const s=this._integrations[t.name];Ul(this,t,this._integrations),s||$i(this,[t])}sendEvent(t,s={}){this.emit("beforeSendEvent",t,s);let r=Yb(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of s.attachments||[])r=Bb(r,Vb(o));const n=this.sendEnvelope(r);n&&n.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const{release:s,environment:r=Eo}=this._options;if("aggregates"in t){const o=t.attrs||{};if(!o.release&&!s){O&&R.warn(Qi);return}o.release=o.release||s,o.environment=o.environment||r,t.attrs=o}else{if(!t.release&&!s){O&&R.warn(Qi);return}t.release=t.release||s,t.environment=t.environment||r}this.emit("beforeSendSession",t);const n=Gb(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,s,r=1){if(this._options.sendClientReports){const n=`${t}:${s}`;O&&R.log(`Recording outcome: "${n}"${r>1?` (${r} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(t,s){const r=this._hooks[t]=this._hooks[t]||[];return r.push(s),()=>{const n=r.indexOf(s);n>-1&&r.splice(n,1)}}emit(t,...s){const r=this._hooks[t];r&&r.forEach(n=>n(...s))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,s=>(O&&R.error("Error while sending envelope:",s),s)):(O&&R.error("Transport disabled"),jt({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Lv(this,t),$i(this,t)}_updateSessionFromEvent(t,s){var l;let r=s.level==="fatal",n=!1;const o=(l=s.exception)==null?void 0:l.values;if(o){n=!0;for(const d of o){const u=d.mechanism;if((u==null?void 0:u.handled)===!1){r=!0;break}}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(ss(t,{...r&&{status:"crashed"},errors:t.errors||Number(n||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new wt(s=>{let r=0;const n=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),s(!0)):(r+=n,t&&r>=t&&(clearInterval(o),s(!1)))},n)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,s,r,n){const o=this.getOptions(),i=Object.keys(this._integrations);return!s.integrations&&(i!=null&&i.length)&&(s.integrations=i),this.emit("preprocessEvent",t,s),t.type||n.setLastEventId(t.event_id||s.event_id),mv(o,t,s,r,this,n).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,s),a.contexts={trace:lb(r),...a.contexts};const l=Lb(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,s={},r=Qe(),n=as()){return O&&Mn(t)&&R.log(`Captured error event \`${Hl(t)[0]||"<unknown>"}\``),this._processEvent(t,s,r,n).then(o=>o.event_id,o=>{O&&(zi(o)?R.log(o.message):Ki(o)?R.warn(o.message):R.warn(o))})}_processEvent(t,s,r,n){const o=this.getOptions(),{sampleRate:i}=o,a=Wl(t),l=Mn(t),d=t.type||"error",u=`before send for type \`${d}\``,h=typeof i>"u"?void 0:wo(i);if(l&&typeof h=="number"&&Math.random()>h)return this.recordDroppedEvent("sample_rate","error"),Er(ln(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const b=d==="replay_event"?"replay":d;return this._prepareEvent(t,s,r,n).then(y=>{if(y===null)throw this.recordDroppedEvent("event_processor",b),ln("An event processor returned `null`, will not send event.");if(s.data&&s.data.__sentry__===!0)return y;const F=Bv(this,o,y,s);return Mv(F,u)}).then(y=>{var V;if(y===null){if(this.recordDroppedEvent("before_send",b),a){const Q=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",Q)}throw ln(`${u} returned \`null\`, will not send event.`)}const D=r.getSession()||n.getSession();if(l&&D&&this._updateSessionFromEvent(D,y),a){const U=((V=y.sdkProcessingMetadata)==null?void 0:V.spanCountBeforeProcessing)||0,Q=y.spans?y.spans.length:0,z=U-Q;z>0&&this.recordDroppedEvent("before_send","span",z)}const F=y.transaction_info;if(a&&F&&y.transaction!==t.transaction){const U="custom";y.transaction_info={...F,source:U}}return this.sendEvent(y,s),y}).then(null,y=>{throw zi(y)||Ki(y)?y:(this.captureException(y,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:y}),cr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${y}`))})}_process(t){this._numProcessing++,t.then(s=>(this._numProcessing--,s),s=>(this._numProcessing--,s))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([s,r])=>{const[n,o]=s.split(":");return{reason:n,category:o,quantity:r}})}_flushOutcomes(){O&&R.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){O&&R.log("No outcomes to send");return}if(!this._dsn){O&&R.log("No dsn provided, will not send outcomes");return}O&&R.log("Sending outcomes:",t);const s=Nv(t,this._options.tunnel&&Vs(this._dsn));this.sendEnvelope(s)}}function Mv(e,t){const s=`${t} must return \`null\` or a valid event.`;if(Br(e))return e.then(r=>{if(!Rs(r)&&r!==null)throw cr(s);return r},r=>{throw cr(`${t} rejected with ${r}`)});if(!Rs(e)&&e!==null)throw cr(s);return e}function Bv(e,t,s,r){const{beforeSend:n,beforeSendTransaction:o,beforeSendSpan:i,ignoreSpans:a}=t;let l=s;if(Mn(l)&&n)return n(l,r);if(Wl(l)){if(i||a){const d=Ov(l);if(a!=null&&a.length&&Fn(d,a))return null;if(i){const u=i(d);u?l=Us(s,Fv(u)):Ln()}if(l.spans){const u=[],h=l.spans;for(const y of h){if(a!=null&&a.length&&Fn(y,a)){Qb(h,y);continue}if(i){const D=i(y);D?u.push(D):(Ln(),u.push(y))}else u.push(y)}const b=l.spans.length-u.length;b&&e.recordDroppedEvent("before_send","span",b),l.spans=u}}if(o){if(l.spans){const d=l.spans.length;l.sdkProcessingMetadata={...s.sdkProcessingMetadata,spanCountBeforeProcessing:d}}return o(l,r)}}return l}function Mn(e){return e.type===void 0}function Wl(e){return e.type==="transaction"}function jv(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Uv(e,t,s,r){const n={};return t!=null&&t.sdk&&(n.sdk={name:t.sdk.name,version:t.sdk.version}),s&&r&&(n.dsn=Vs(r)),ls(n,[jv(e)])}function cn(e,t){const s=Hv(e)??[];if(s.length===0)return;const r=e.getOptions(),n=Uv(s,r._metadata,r.tunnel,e.getDsn());Ql().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(n)}function Hv(e){return Ql().get(e)}function Ql(){return Bs("clientToLogBufferMap",()=>new WeakMap)}function Vv(e,t){t.debug===!0&&(O?R.enable():Pt(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Qe().update(t.initialScope);const r=new e(t);return $v(r),r.init(),r}function $v(e){Qe().setClient(e)}const Kl=Symbol.for("SentryBufferFullError");function Wv(e){const t=[];function s(){return e===void 0||t.length<e}function r(i){return t.splice(t.indexOf(i),1)[0]||Promise.resolve(void 0)}function n(i){if(!s())return Er(Kl);const a=i();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(i){return new wt((a,l)=>{let d=t.length;if(!d)return a(!0);const u=setTimeout(()=>{i&&i>0&&a(!1)},i);t.forEach(h=>{jt(h).then(()=>{--d||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:n,drain:o}}const Qv=60*1e3;function Kv(e,t=Date.now()){const s=parseInt(`${e}`,10);if(!isNaN(s))return s*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Qv:r-t}function zv(e,t){return e[t]||e.all||0}function Gv(e,t,s=Date.now()){return zv(e,t)>s}function Yv(e,{statusCode:t,headers:s},r=Date.now()){const n={...e},o=s==null?void 0:s["x-sentry-rate-limits"],i=s==null?void 0:s["retry-after"];if(o)for(const a of o.trim().split(",")){const[l,d,,,u]=a.split(":",5),h=parseInt(l,10),b=(isNaN(h)?60:h)*1e3;if(!d)n.all=r+b;else for(const y of d.split(";"))y==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(n[y]=r+b):n[y]=r+b}else i?n.all=r+Kv(i,r):t===429&&(n.all=r+60*1e3);return n}const Jv=64;function Xv(e,t,s=Wv(e.bufferSize||Jv)){let r={};const n=i=>s.drain(i);function o(i){const a=[];if(Ai(i,(h,b)=>{const y=Ti(b);Gv(r,y)?e.recordDroppedEvent("ratelimit_backoff",y):a.push(h)}),a.length===0)return jt({});const l=ls(i[0],a),d=h=>{Ai(l,(b,y)=>{e.recordDroppedEvent(h,Ti(y))})},u=()=>t({body:jb(l)}).then(h=>(h.statusCode!==void 0&&(h.statusCode<200||h.statusCode>=300)&&O&&R.warn(`Sentry responded with status code ${h.statusCode} to sent event.`),r=Yv(r,h),h),h=>{throw d("network_error"),O&&R.error("Encountered error running transport request:",h),h});return s.add(u).then(h=>h,h=>{if(h===Kl)return O&&R.error("Skipped sending event because buffer is full."),d("queue_overflow"),jt({});throw h})}return{send:o,flush:n}}function Zv(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function ex(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function zl(e,t,s=[t],r="npm"){const n=e._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${t}`,packages:s.map(o=>({name:`${r}:@sentry/${o}`,version:qt})),version:qt}),e._metadata=n}const tx=100;function Ut(e,t){const s=ce(),r=as();if(!s)return;const{beforeBreadcrumb:n=null,maxBreadcrumbs:o=tx}=s.getOptions();if(o<=0)return;const a={timestamp:js(),...e},l=n?Pt(()=>n(a,t)):a;l!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",l,t),r.addBreadcrumb(l,o))}let Gi;const sx="FunctionToString",Yi=new WeakMap,rx=()=>({name:sx,setupOnce(){Gi=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=_o(this),s=Yi.has(ce())&&t!==void 0?t:this;return Gi.apply(s,e)}}catch{}},setup(e){Yi.set(e,!0)}}),nx=rx,ox=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],ix="EventFilters",ax=(e={})=>{let t;return{name:ix,setup(s){const r=s.getOptions();t=Ji(e,r)},processEvent(s,r,n){if(!t){const o=n.getOptions();t=Ji(e,o)}return cx(s,t)?null:s}}},lx=(e={})=>({...ax(e),name:"InboundFilters"});function Ji(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ox],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function cx(e,t){if(e.type){if(e.type==="transaction"&&dx(e,t.ignoreTransactions))return O&&R.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Lt(e)}`),!0}else{if(ux(e,t.ignoreErrors))return O&&R.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Lt(e)}`),!0;if(mx(e))return O&&R.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Lt(e)}`),!0;if(fx(e,t.denyUrls))return O&&R.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Lt(e)}.
Url: ${kr(e)}`),!0;if(!hx(e,t.allowUrls))return O&&R.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Lt(e)}.
Url: ${kr(e)}`),!0}return!1}function ux(e,t){return t!=null&&t.length?Hl(e).some(s=>jr(s,t)):!1}function dx(e,t){if(!(t!=null&&t.length))return!1;const s=e.transaction;return s?jr(s,t):!1}function fx(e,t){if(!(t!=null&&t.length))return!1;const s=kr(e);return s?jr(s,t):!1}function hx(e,t){if(!(t!=null&&t.length))return!0;const s=kr(e);return s?jr(s,t):!0}function px(e=[]){for(let t=e.length-1;t>=0;t--){const s=e[t];if(s&&s.filename!=="<anonymous>"&&s.filename!=="[native code]")return s.filename||null}return null}function kr(e){var t,s;try{const r=[...((t=e.exception)==null?void 0:t.values)??[]].reverse().find(o=>{var i,a,l;return((i=o.mechanism)==null?void 0:i.parent_id)===void 0&&((l=(a=o.stacktrace)==null?void 0:a.frames)==null?void 0:l.length)}),n=(s=r==null?void 0:r.stacktrace)==null?void 0:s.frames;return n?px(n):null}catch{return O&&R.error(`Cannot extract url for event ${Lt(e)}`),null}}function mx(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)!=null&&s.length?!e.message&&!e.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function gx(e,t,s,r,n,o){var a;if(!((a=n.exception)!=null&&a.values)||!o||!xt(o.originalException,Error))return;const i=n.exception.values.length>0?n.exception.values[n.exception.values.length-1]:void 0;i&&(n.exception.values=Bn(e,t,r,o.originalException,s,n.exception.values,i,0))}function Bn(e,t,s,r,n,o,i,a){if(o.length>=s+1)return o;let l=[...o];if(xt(r[n],Error)){Xi(i,a);const d=e(t,r[n]),u=l.length;Zi(d,n,u,a),l=Bn(e,t,s,r[n],n,[d,...l],d,u)}return Array.isArray(r.errors)&&r.errors.forEach((d,u)=>{if(xt(d,Error)){Xi(i,a);const h=e(t,d),b=l.length;Zi(h,`errors[${u}]`,b,a),l=Bn(e,t,s,d,n,[h,...l],h,b)}}),l}function Xi(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Zi(e,t,s,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:s,parent_id:r}}function yx(e){const t="console";Vt(t,e),$t(t,_x)}function _x(){"console"in J&&P_.forEach(function(e){e in J.console&&Ne(J.console,e,function(t){return _r[e]=t,function(...s){We("console",{args:s,level:e});const n=_r[e];n==null||n.apply(J.console,s)}})})}function bx(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const vx="Dedupe",xx=()=>{let e;return{name:vx,processEvent(t){if(t.type)return t;try{if(Sx(t,e))return O&&R.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},wx=xx;function Sx(e,t){return t?!!(Ex(e,t)||kx(e,t)):!1}function Ex(e,t){const s=e.message,r=t.message;return!(!s&&!r||s&&!r||!s&&r||s!==r||!Yl(e,t)||!Gl(e,t))}function kx(e,t){const s=ea(t),r=ea(e);return!(!s||!r||s.type!==r.type||s.value!==r.value||!Yl(e,t)||!Gl(e,t))}function Gl(e,t){let s=gi(e),r=gi(t);if(!s&&!r)return!0;if(s&&!r||!s&&r||(s=s,r=r,r.length!==s.length))return!1;for(let n=0;n<r.length;n++){const o=r[n],i=s[n];if(o.filename!==i.filename||o.lineno!==i.lineno||o.colno!==i.colno||o.function!==i.function)return!1}return!0}function Yl(e,t){let s=e.fingerprint,r=t.fingerprint;if(!s&&!r)return!0;if(s&&!r||!s&&r)return!1;s=s,r=r;try{return s.join("")===r.join("")}catch{return!1}}function ea(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)==null?void 0:s[0]}function un(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const s=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:s,hash:r,relative:t[5]+s+r}}function Jl(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Os=J;function Px(){return"history"in Os&&!!Os.history}function Cx(){if(!("fetch"in Os))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function jn(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ix(){var s;if(typeof EdgeRuntime=="string")return!0;if(!Cx())return!1;if(jn(Os.fetch))return!0;let e=!1;const t=Os.document;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),(s=r.contentWindow)!=null&&s.fetch&&(e=jn(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){O&&R.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function Ax(e,t){const s="fetch";Vt(s,e),$t(s,()=>Tx(void 0,t))}function Tx(e,t=!1){t&&!Ix()||Ne(J,"fetch",function(s){return function(...r){const n=new Error,{method:o,url:i}=Dx(r),a={args:r,fetchData:{method:o,url:i},startTimestamp:Ce()*1e3,virtualError:n,headers:Rx(r)};return We("fetch",{...a}),s.apply(J,r).then(async l=>(We("fetch",{...a,endTimestamp:Ce()*1e3,response:l}),l),l=>{if(We("fetch",{...a,endTimestamp:Ce()*1e3,error:l}),ho(l)&&l.stack===void 0&&(l.stack=n.stack,je(l,"framesToPop",1)),l instanceof TypeError&&(l.message==="Failed to fetch"||l.message==="Load failed"||l.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(a.fetchData.url);l.message=`${l.message} (${d.host})`}catch{}throw l})}})}function Un(e,t){return!!e&&typeof e=="object"&&!!e[t]}function ta(e){return typeof e=="string"?e:e?Un(e,"url")?e.url:e.toString?e.toString():"":""}function Dx(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[s,r]=e;return{url:ta(s),method:Un(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:ta(t),method:Un(t,"method")?String(t.method).toUpperCase():"GET"}}function Rx(e){const[t,s]=e;try{if(typeof s=="object"&&s!==null&&"headers"in s&&s.headers)return new Headers(s.headers);if(V_(t))return new Headers(t.headers)}catch{}}function Lx(){return"npm"}const ie=J;let Hn=0;function Xl(){return Hn>0}function Nx(){Hn++,setTimeout(()=>{Hn--})}function ns(e,t={}){function s(n){return typeof n=="function"}if(!s(e))return e;try{const n=e.__sentry_wrapped__;if(n)return typeof n=="function"?n:e;if(_o(e))return e}catch{return e}const r=function(...n){try{const o=n.map(i=>ns(i,t));return e.apply(this,o)}catch(o){throw Nx(),bo(i=>{i.addEventProcessor(a=>(t.mechanism&&(In(a,void 0),ts(a,t.mechanism)),a.extra={...a.extra,arguments:n},a)),ql(o)}),o}};try{for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}catch{}bl(r,e),je(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Ox(){const e=yo(),{referrer:t}=ie.document||{},{userAgent:s}=ie.navigator||{},r={...t&&{Referer:t},...s&&{"User-Agent":s}};return{url:e,headers:r}}function Co(e,t){const s=Io(e,t),r={type:jx(t),value:Ux(t)};return s.length&&(r.stacktrace={frames:s}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Fx(e,t,s,r){const n=ce(),o=n==null?void 0:n.getOptions().normalizeDepth,i=Qx(t),a={__serialized__:Ll(t,o)};if(i)return{exception:{values:[Co(e,i)]},extra:a};const l={exception:{values:[{type:Mr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:$x(t,{isUnhandledRejection:r})}]},extra:a};if(s){const d=Io(e,s);d.length&&(l.exception.values[0].stacktrace={frames:d})}return l}function dn(e,t){return{exception:{values:[Co(e,t)]}}}function Io(e,t){const s=t.stacktrace||t.stack||"",r=Mx(t),n=Bx(t);try{return e(s,r,n)}catch{}return[]}const qx=/Minified React error #\d+;/i;function Mx(e){return e&&qx.test(e.message)?1:0}function Bx(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Zl(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function jx(e){const t=e==null?void 0:e.name;return!t&&Zl(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Ux(e){const t=e==null?void 0:e.message;return Zl(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Hx(e,t,s,r){const n=(s==null?void 0:s.syntheticException)||void 0,o=Ao(e,t,n,r);return ts(o),o.level="error",s!=null&&s.event_id&&(o.event_id=s.event_id),jt(o)}function Vx(e,t,s="info",r,n){const o=(r==null?void 0:r.syntheticException)||void 0,i=Vn(e,t,o,n);return i.level=s,r!=null&&r.event_id&&(i.event_id=r.event_id),jt(i)}function Ao(e,t,s,r,n){let o;if(gl(t)&&t.error)return dn(e,t.error);if(_i(t)||B_(t)){const i=t;if("stack"in t)o=dn(e,t);else{const a=i.name||(_i(i)?"DOMError":"DOMException"),l=i.message?`${a}: ${i.message}`:a;o=Vn(e,l,s,r),In(o,l)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return ho(t)?dn(e,t):Rs(t)||Mr(t)?(o=Fx(e,t,s,n),ts(o,{synthetic:!0}),o):(o=Vn(e,t,s,r),In(o,`${t}`),ts(o,{synthetic:!0}),o)}function Vn(e,t,s,r){const n={};if(r&&s){const o=Io(e,s);o.length&&(n.exception={values:[{value:t,stacktrace:{frames:o}}]}),ts(n,{synthetic:!0})}if(po(t)){const{__sentry_template_string__:o,__sentry_template_values__:i}=t;return n.logentry={message:o,params:i},n}return n.message=t,n}function $x(e,{isUnhandledRejection:t}){const s=K_(e),r=t?"promise rejection":"exception";return gl(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Mr(e)?`Event \`${Wx(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${s}`}function Wx(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Qx(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const s=e[t];if(s instanceof Error)return s}}const Kx=5e3;class zx extends qv{constructor(t){const s=Gx(t),r=ie.SENTRY_SDK_SOURCE||Lx();zl(s,"browser",["browser"],r),super(s);const{sendDefaultPii:n,sendClientReports:o,enableLogs:i}=this._options;ie.document&&(o||i)&&ie.document.addEventListener("visibilitychange",()=>{ie.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),i&&cn(this))}),i&&(this.on("flush",()=>{cn(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{cn(this)},Kx)})),n&&(this.on("postprocessEvent",Zv),this.on("beforeSendSession",ex))}eventFromException(t,s){return Hx(this._options.stackParser,t,s,this._options.attachStacktrace)}eventFromMessage(t,s="info",r){return Vx(this._options.stackParser,t,s,r,this._options.attachStacktrace)}_prepareEvent(t,s,r,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,s,r,n)}}function Gx(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=ie.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Yx=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,be=J,Jx=1e3;let sa,$n,Wn;function Xx(e){const t="dom";Vt(t,e),$t(t,Zx)}function Zx(){if(!be.document)return;const e=We.bind(null,"dom"),t=ra(e,!0);be.document.addEventListener("click",t,!1),be.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(s=>{var o,i;const n=(o=be[s])==null?void 0:o.prototype;(i=n==null?void 0:n.hasOwnProperty)!=null&&i.call(n,"addEventListener")&&(Ne(n,"addEventListener",function(a){return function(l,d,u){if(l==="click"||l=="keypress")try{const h=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},b=h[l]=h[l]||{refCount:0};if(!b.handler){const y=ra(e);b.handler=y,a.call(this,l,y,u)}b.refCount++}catch{}return a.call(this,l,d,u)}}),Ne(n,"removeEventListener",function(a){return function(l,d,u){if(l==="click"||l=="keypress")try{const h=this.__sentry_instrumentation_handlers__||{},b=h[l];b&&(b.refCount--,b.refCount<=0&&(a.call(this,l,b.handler,u),b.handler=void 0,delete h[l]),Object.keys(h).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,d,u)}}))})}function e1(e){if(e.type!==$n)return!1;try{if(!e.target||e.target._sentryId!==Wn)return!1}catch{}return!0}function t1(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function ra(e,t=!1){return s=>{if(!s||s._sentryCaptured)return;const r=s1(s);if(t1(s.type,r))return;je(s,"_sentryCaptured",!0),r&&!r._sentryId&&je(r,"_sentryId",qe());const n=s.type==="keypress"?"input":s.type;e1(s)||(e({event:s,name:n,global:t}),$n=s.type,Wn=r?r._sentryId:void 0),clearTimeout(sa),sa=be.setTimeout(()=>{Wn=void 0,$n=void 0},Jx)}}function s1(e){try{return e.target}catch{return null}}let er;function ec(e){const t="history";Vt(t,e),$t(t,r1)}function r1(){if(be.addEventListener("popstate",()=>{const t=be.location.href,s=er;if(er=t,s===t)return;We("history",{from:s,to:t})}),!Px())return;function e(t){return function(...s){const r=s.length>2?s[2]:void 0;if(r){const n=er,o=n1(String(r));if(er=o,n===o)return t.apply(this,s);We("history",{from:n,to:o})}return t.apply(this,s)}}Ne(be.history,"pushState",e),Ne(be.history,"replaceState",e)}function n1(e){try{return new URL(e,be.location.origin).toString()}catch{return e}}const ur={};function o1(e){const t=ur[e];if(t)return t;let s=be[e];if(jn(s))return ur[e]=s.bind(be);const r=be.document;if(r&&typeof r.createElement=="function")try{const n=r.createElement("iframe");n.hidden=!0,r.head.appendChild(n);const o=n.contentWindow;o!=null&&o[e]&&(s=o[e]),r.head.removeChild(n)}catch(n){Yx&&R.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,n)}return s&&(ur[e]=s.bind(be))}function na(e){ur[e]=void 0}const gs="__sentry_xhr_v3__";function i1(e){const t="xhr";Vt(t,e),$t(t,a1)}function a1(){if(!be.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,s,r){const n=new Error,o=Ce()*1e3,i=dt(r[0])?r[0].toUpperCase():void 0,a=l1(r[1]);if(!i||!a)return t.apply(s,r);s[gs]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(s.__sentry_own_request__=!0);const l=()=>{const d=s[gs];if(d&&s.readyState===4){try{d.status_code=s.status}catch{}const u={endTimestamp:Ce()*1e3,startTimestamp:o,xhr:s,virtualError:n};We("xhr",u)}};return"onreadystatechange"in s&&typeof s.onreadystatechange=="function"?s.onreadystatechange=new Proxy(s.onreadystatechange,{apply(d,u,h){return l(),d.apply(u,h)}}):s.addEventListener("readystatechange",l),s.setRequestHeader=new Proxy(s.setRequestHeader,{apply(d,u,h){const[b,y]=h,D=u[gs];return D&&dt(b)&&dt(y)&&(D.request_headers[b.toLowerCase()]=y),d.apply(u,h)}}),t.apply(s,r)}}),e.send=new Proxy(e.send,{apply(t,s,r){const n=s[gs];if(!n)return t.apply(s,r);r[0]!==void 0&&(n.body=r[0]);const o={startTimestamp:Ce()*1e3,xhr:s};return We("xhr",o),t.apply(s,r)}})}function l1(e){if(dt(e))return e;try{return e.toString()}catch{}}function c1(e,t=o1("fetch")){let s=0,r=0;function n(o){const i=o.body.length;s+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:s<=6e4&&r<15,...e.fetchOptions};if(!t)return na("fetch"),Er("No fetch implementation available");try{return t(e.url,a).then(l=>(s-=i,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return na("fetch"),s-=i,r--,Er(l)}}return Xv(e,n)}const u1=30,d1=50;function Qn(e,t,s,r){const n={filename:e,function:t==="<anonymous>"?Bt:t,in_app:!0};return s!==void 0&&(n.lineno=s),r!==void 0&&(n.colno=r),n}const f1=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,h1=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,p1=/\((\S*)(?::(\d+))(?::(\d+))\)/,m1=/at (.+?) ?\(data:(.+?),/,g1=e=>{const t=e.match(m1);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const s=f1.exec(e);if(s){const[,n,o,i]=s;return Qn(n,Bt,+o,+i)}const r=h1.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=p1.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[o,i]=tc(r[1]||Bt,r[2]);return Qn(i,o,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},y1=[u1,g1],_1=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,b1=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,v1=e=>{const t=_1.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=b1.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],n=t[1]||Bt;return[n,r]=tc(n,r),Qn(r,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},x1=[d1,v1],w1=[y1,x1],S1=pl(...w1),tc=(e,t)=>{const s=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return s||r?[e.indexOf("@")!==-1?e.split("@")[0]:Bt,s?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Vr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,tr=1024,E1="Breadcrumbs",k1=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:E1,setup(s){t.console&&yx(A1(s)),t.dom&&Xx(I1(s,t.dom)),t.xhr&&i1(T1(s)),t.fetch&&Ax(D1(s)),t.history&&ec(R1(s)),t.sentry&&s.on("beforeSendEvent",C1(s))}}},P1=k1;function C1(e){return function(s){ce()===e&&Ut({category:`sentry.${s.type==="transaction"?"transaction":"event"}`,event_id:s.event_id,level:s.level,message:Lt(s)},{event:s})}}function I1(e,t){return function(r){if(ce()!==e)return;let n,o,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>tr&&(Vr&&R.warn(`\`dom.maxStringLength\` cannot exceed ${tr}, but a value of ${a} was configured. Sentry will use ${tr} instead.`),a=tr),typeof i=="string"&&(i=[i]);try{const d=r.event,u=L1(d)?d.target:d;n=_l(u,{keyAttrs:i,maxStringLength:a}),o=Q_(u)}catch{n="<unknown>"}if(n.length===0)return;const l={category:`ui.${r.name}`,message:n};o&&(l.data={"ui.component_name":o}),Ut(l,{event:r.event,name:r.name,global:r.global})}}function A1(e){return function(s){if(ce()!==e)return;const r={category:"console",data:{arguments:s.args,logger:"console"},level:bx(s.level),message:bi(s.args," ")};if(s.level==="assert")if(s.args[0]===!1)r.message=`Assertion failed: ${bi(s.args.slice(1)," ")||"console.assert"}`,r.data.arguments=s.args.slice(1);else return;Ut(r,{input:s.args,level:s.level})}}function T1(e){return function(s){if(ce()!==e)return;const{startTimestamp:r,endTimestamp:n}=s,o=s.xhr[gs];if(!r||!n||!o)return;const{method:i,url:a,status_code:l,body:d}=o,u={method:i,url:a,status_code:l},h={xhr:s.xhr,input:d,startTimestamp:r,endTimestamp:n},b={category:"xhr",data:u,type:"http",level:Jl(l)};e.emit("beforeOutgoingRequestBreadcrumb",b,h),Ut(b,h)}}function D1(e){return function(s){if(ce()!==e)return;const{startTimestamp:r,endTimestamp:n}=s;if(n&&!(s.fetchData.url.match(/sentry_key/)&&s.fetchData.method==="POST"))if(s.fetchData.method,s.fetchData.url,s.error){const o=s.fetchData,i={data:s.error,input:s.args,startTimestamp:r,endTimestamp:n},a={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),Ut(a,i)}else{const o=s.response,i={...s.fetchData,status_code:o==null?void 0:o.status};s.fetchData.request_body_size,s.fetchData.response_body_size,o==null||o.status;const a={input:s.args,response:o,startTimestamp:r,endTimestamp:n},l={category:"fetch",data:i,type:"http",level:Jl(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",l,a),Ut(l,a)}}}function R1(e){return function(s){if(ce()!==e)return;let r=s.from,n=s.to;const o=un(ie.location.href);let i=r?un(r):void 0;const a=un(n);i!=null&&i.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(n=a.relative),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),Ut({category:"navigation",data:{from:r,to:n}})}}function L1(e){return!!e&&!!e.target}const N1=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],O1="BrowserApiErrors",F1=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:O1,setupOnce(){t.setTimeout&&Ne(ie,"setTimeout",oa),t.setInterval&&Ne(ie,"setInterval",oa),t.requestAnimationFrame&&Ne(ie,"requestAnimationFrame",M1),t.XMLHttpRequest&&"XMLHttpRequest"in ie&&Ne(XMLHttpRequest.prototype,"send",B1);const s=t.eventTarget;s&&(Array.isArray(s)?s:N1).forEach(n=>j1(n,t))}}},q1=F1;function oa(e){return function(...t){const s=t[0];return t[0]=ns(s,{mechanism:{data:{function:vt(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function M1(e){return function(t){return e.apply(this,[ns(t,{mechanism:{data:{function:"requestAnimationFrame",handler:vt(e)},handled:!1,type:"instrument"}})])}}function B1(e){return function(...t){const s=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(n=>{n in s&&typeof s[n]=="function"&&Ne(s,n,function(o){const i={mechanism:{data:{function:n,handler:vt(o)},handled:!1,type:"instrument"}},a=_o(o);return a&&(i.mechanism.data.handler=vt(a)),ns(o,i)})}),e.apply(this,t)}}function j1(e,t){var n,o;const r=(n=ie[e])==null?void 0:n.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(Ne(r,"addEventListener",function(i){return function(a,l,d){try{U1(l)&&(l.handleEvent=ns(l.handleEvent,{mechanism:{data:{function:"handleEvent",handler:vt(l),target:e},handled:!1,type:"instrument"}}))}catch{}return t.unregisterOriginalCallbacks&&H1(this,a,l),i.apply(this,[a,ns(l,{mechanism:{data:{function:"addEventListener",handler:vt(l),target:e},handled:!1,type:"instrument"}}),d])}}),Ne(r,"removeEventListener",function(i){return function(a,l,d){try{const u=l.__sentry_wrapped__;u&&i.call(this,a,u,d)}catch{}return i.call(this,a,l,d)}}))}function U1(e){return typeof e.handleEvent=="function"}function H1(e,t,s){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,s)}const V1=()=>({name:"BrowserSession",setupOnce(){if(typeof ie.document>"u"){Vr&&R.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Ui({ignoreDuration:!0}),Hi(),ec(({from:e,to:t})=>{e!==void 0&&e!==t&&(Ui({ignoreDuration:!0}),Hi())})}}),$1="GlobalHandlers",W1=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:$1,setupOnce(){Error.stackTraceLimit=50},setup(s){t.onerror&&(K1(s),ia("onerror")),t.onunhandledrejection&&(z1(s),ia("onunhandledrejection"))}}},Q1=W1;function K1(e){O_(t=>{const{stackParser:s,attachStacktrace:r}=sc();if(ce()!==e||Xl())return;const{msg:n,url:o,line:i,column:a,error:l}=t,d=J1(Ao(s,l||n,void 0,r,!1),o,i,a);d.level="error",Ml(d,{originalException:l,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function z1(e){q_(t=>{const{stackParser:s,attachStacktrace:r}=sc();if(ce()!==e||Xl())return;const n=G1(t),o=mo(n)?Y1(n):Ao(s,n,void 0,r,!0);o.level="error",Ml(o,{originalException:n,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function G1(e){if(mo(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Y1(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function J1(e,t,s,r){const n=e.exception=e.exception||{},o=n.values=n.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},l=a.frames=a.frames||[],d=r,u=s,h=X1(t)??yo();return l.length===0&&l.push({colno:d,filename:h,function:Bt,in_app:!0,lineno:u}),e}function ia(e){Vr&&R.log(`Global Handler attached: ${e}`)}function sc(){const e=ce();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function X1(e){if(!(!dt(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),s=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${s}${r?",base64":""}>`}return e.slice(0,1024)}}const Z1=()=>({name:"HttpContext",preprocessEvent(e){var r;if(!ie.navigator&&!ie.location&&!ie.document)return;const t=Ox(),s={...t.headers,...(r=e.request)==null?void 0:r.headers};e.request={...t,...e.request,headers:s}}}),ew="cause",tw=5,sw="LinkedErrors",rw=(e={})=>{const t=e.limit||tw,s=e.key||ew;return{name:sw,preprocessEvent(r,n,o){const i=o.getOptions();gx(Co,i.stackParser,s,t,r,n)}}},nw=rw;function ow(){return iw()?(Vr&&Pt(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function iw(){var o;if(typeof ie.window>"u")return!1;const e=ie;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((o=t==null?void 0:t.runtime)!=null&&o.id))return!1;const s=yo(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(ie===ie.top&&r.some(i=>s.startsWith(`${i}://`)))}function rc(e){return[lx(),nx(),q1(),P1(),Q1(),nw(),wx(),Z1(),V1()]}function aw(e={}){const t=!e.skipBrowserExtensionCheck&&ow(),s={...e,enabled:t?!1:e.enabled,stackParser:L_(e.stackParser||S1),integrations:Rv({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?rc():e.defaultIntegrations}),transport:e.transport||c1};return Vv(zx,s)}const nc=["activate","mount"],oc=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,lw=/(?:^|[-_])(\w)/g,cw=e=>e.replace(lw,t=>t.toUpperCase()).replace(/[-_]/g,""),uw="<Root>",fn="<Anonymous>",dw=(e,t)=>e.repeat(t),Ps=(e,t)=>{if(!e)return fn;if(e.$root===e)return uw;if(!e.$options)return fn;const s=e.$options;let r=s.name||s._componentTag||s.__name;const n=s.__file;if(!r&&n){const o=n.match(/([^/\\]+)\.vue$/);o&&(r=o[1])}return(r?`<${cw(r)}>`:fn)+(n&&t!==!1?` at ${n}`:"")},fw=e=>{if(e&&(e._isVue||e.__isVue)&&e.$parent){const t=[];let s=0;for(;e;){if(t.length>0){const n=t[t.length-1];if(n.constructor===e.constructor){s++,e=e.$parent;continue}else s>0&&(t[t.length-1]=[n,s],s=0)}t.push(e),e=e.$parent}return`

found in

${t.map((n,o)=>`${(o===0?"---> ":dw(" ",5+o*2))+(Array.isArray(n)?`${Ps(n[0])}... (${n[1]} recursive calls)`:Ps(n))}`).join(`
`)}`}return`

(found in ${Ps(e)})`},hw=(e,t)=>{const{errorHandler:s}=e.config;e.config.errorHandler=(r,n,o)=>{var d;const i=Ps(n,!1),a=n?fw(n):"",l={componentName:i,lifecycleHook:o,trace:a};if(t.attachProps&&n&&((d=n.$options)!=null&&d.propsData?l.propsData=n.$options.propsData:n.$props&&(l.propsData=n.$props)),setTimeout(()=>{ql(r,{captureContext:{contexts:{vue:l}},mechanism:{handled:!!s,type:"vue"}})}),typeof s=="function"&&e.config.errorHandler)s.call(e,r,n,o);else throw r}},aa="ui.vue",pw={activate:["activated","deactivated"],create:["beforeCreate","created"],unmount:["beforeUnmount","unmounted"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]};function hn(e,t,s){e.$_sentryRootComponentSpanTimer&&clearTimeout(e.$_sentryRootComponentSpanTimer),e.$_sentryRootComponentSpanTimer=setTimeout(()=>{var r;(r=e.$root)!=null&&r.$_sentryRootComponentSpan&&(e.$root.$_sentryRootComponentSpan.end(t),e.$root.$_sentryRootComponentSpan=void 0)},s)}function mw(e,t){function s(n){return n.replace(/^<([^\s]*)>(?: at [^\s]*)?$/,"$1")}return e.some(n=>s(t)===s(n))}const gw=(e={})=>{const t=(e.hooks||[]).concat(nc).filter((n,o,i)=>i.indexOf(n)===o),s={},r=e.timeout||2e3;for(const n of t){const o=pw[n];if(!o){oc&&R.warn(`Unknown hook: ${n}`);continue}for(const i of o)s[i]=function(){var b;const a=this.$root===this;a&&(this.$_sentryRootComponentSpan=this.$_sentryRootComponentSpan||Oi({name:"Application Render",op:`${aa}.render`,attributes:{[Ls]:"auto.ui.vue"},onlyIfParent:!0}),hn(this,Ce(),r));const l=Ps(this,!1);if(!(a||(Array.isArray(e.trackComponents)?mw(e.trackComponents,l):e.trackComponents))){hn(this,Ce(),r);return}this.$_sentryComponentSpans=this.$_sentryComponentSpans||{};const u=i===o[0],h=((b=this.$root)==null?void 0:b.$_sentryRootComponentSpan)||Rb();if(u){if(h){const y=this.$_sentryComponentSpans[n];y&&y.end(),this.$_sentryComponentSpans[n]=Oi({name:`Vue ${l}`,op:`${aa}.${n}`,attributes:{[Ls]:"auto.ui.vue"},onlyIfParent:!0})}}else{const y=this.$_sentryComponentSpans[n];if(!y)return;y.end(),hn(this,Ce(),r)}}}return s},yw=J,_w={Vue:yw.Vue,attachProps:!0,attachErrorHandler:!0,tracingOptions:{hooks:nc,timeout:2e3,trackComponents:!1}},bw="Vue",vw=(e={})=>({name:bw,setup(t){const s={..._w,...t.getOptions(),...e};if(!s.Vue&&!s.app){Pt(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured. Update your `Sentry.init` call with an appropriate config option: `app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).")});return}s.app?(Array.isArray(s.app)?s.app:[s.app]).forEach(n=>la(n,s)):s.Vue&&la(s.Vue,s)}}),la=(e,t)=>{var s;oc&&((s=e._instance)==null?void 0:s.isMounted)===!0&&Pt(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`.")}),t.attachErrorHandler&&hw(e,t),Hr(t)&&e.mixin(gw(t.tracingOptions))};function xw(e={}){const t={defaultIntegrations:[...rc(),vw()],...e};return zl(t,"vue"),aw(t)}const ic=Rd(k_);xw({app:ic,dsn:"https://3115bfd7236aa90bd81024a1fdb8c823@o4509821219700736.ingest.de.sentry.io/4509821222518864",sendDefaultPii:!0});ic.mount("#app");export{Ht as A,Y as a};
