(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const o of n)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const o={};return n.integrity&&(o.integrity=n.integrity),n.referrerPolicy&&(o.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?o.credentials="include":n.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(n){if(n.ep)return;n.ep=!0;const o=s(n);fetch(n.href,o)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function zn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const Z={},zt=[],tt=()=>{},ll=()=>!1,Pr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Gn=e=>e.startsWith("onUpdate:"),xe=Object.assign,Yn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},ul=Object.prototype.hasOwnProperty,Q=(e,t)=>ul.call(e,t),B=Array.isArray,Gt=e=>Cr(e)==="[object Map]",ua=e=>Cr(e)==="[object Set]",j=e=>typeof e=="function",ce=e=>typeof e=="string",St=e=>typeof e=="symbol",se=e=>e!==null&&typeof e=="object",da=e=>(se(e)||j(e))&&j(e.then)&&j(e.catch),fa=Object.prototype.toString,Cr=e=>fa.call(e),dl=e=>Cr(e).slice(8,-1),ha=e=>Cr(e)==="[object Object]",Jn=e=>ce(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,_s=zn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ir=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},fl=/-(\w)/g,Be=Ir(e=>e.replace(fl,(t,s)=>s?s.toUpperCase():"")),hl=/\B([A-Z])/g,Et=Ir(e=>e.replace(hl,"-$1").toLowerCase()),Ar=Ir(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wr=Ir(e=>e?`on${Ar(e)}`:""),Ot=(e,t)=>!Object.is(e,t),rr=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},pn=(e,t,s,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:s})},mn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Fo;const Tr=()=>Fo||(Fo=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qs(e){if(B(e)){const t={};for(let s=0;s<e.length;s++){const r=e[s],n=ce(r)?yl(r):qs(r);if(n)for(const o in n)t[o]=n[o]}return t}else if(ce(e)||se(e))return e}const pl=/;(?![^(]*\))/g,ml=/:([^]+)/,gl=/\/\*[^]*?\*\//g;function yl(e){const t={};return e.replace(gl,"").split(pl).forEach(s=>{if(s){const r=s.split(ml);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ae(e){let t="";if(ce(e))t=e;else if(B(e))for(let s=0;s<e.length;s++){const r=ae(e[s]);r&&(t+=r+" ")}else if(se(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const _l="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bl=zn(_l);function pa(e){return!!e||e===""}const ma=e=>!!(e&&e.__v_isRef===!0),_=e=>ce(e)?e:e==null?"":B(e)||se(e)&&(e.toString===fa||!j(e.toString))?ma(e)?_(e.value):JSON.stringify(e,ga,2):String(e),ga=(e,t)=>ma(t)?ga(e,t.value):Gt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[r,n],o)=>(s[Qr(r,o)+" =>"]=n,s),{})}:ua(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Qr(s))}:St(t)?Qr(t):se(t)&&!B(t)&&!ha(t)?String(t):t,Qr=(e,t="")=>{var s;return St(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ke;class vl{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ke,!t&&ke&&(this.index=(ke.scopes||(ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ke;try{return ke=this,t()}finally{ke=s}}}on(){++this._on===1&&(this.prevScope=ke,ke=this)}off(){this._on>0&&--this._on===0&&(ke=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function xl(){return ke}let te;const Kr=new WeakSet;class ya{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ke&&ke.active&&ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Kr.has(this)&&(Kr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||ba(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,qo(this),va(this);const t=te,s=Ve;te=this,Ve=!0;try{return this.fn()}finally{xa(this),te=t,Ve=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)eo(t);this.deps=this.depsTail=void 0,qo(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Kr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gn(this)&&this.run()}get dirty(){return gn(this)}}let _a=0,bs,vs;function ba(e,t=!1){if(e.flags|=8,t){e.next=vs,vs=e;return}e.next=bs,bs=e}function Xn(){_a++}function Zn(){if(--_a>0)return;if(vs){let t=vs;for(vs=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;bs;){let t=bs;for(bs=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=s}}if(e)throw e}function va(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function xa(e){let t,s=e.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),eo(r),wl(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=s}function gn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(wa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function wa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Is)||(e.globalVersion=Is,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!gn(e))))return;e.flags|=2;const t=e.dep,s=te,r=Ve;te=e,Ve=!0;try{va(e);const n=e.fn(e._value);(t.version===0||Ot(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{te=s,Ve=r,xa(e),e.flags&=-3}}function eo(e,t=!1){const{dep:s,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),s.subs===e&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let o=s.computed.deps;o;o=o.nextDep)eo(o,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function wl(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let Ve=!0;const Sa=[];function dt(){Sa.push(Ve),Ve=!1}function ft(){const e=Sa.pop();Ve=e===void 0?!0:e}function qo(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=te;te=void 0;try{t()}finally{te=s}}}let Is=0;class Sl{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Ea{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!te||!Ve||te===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==te)s=this.activeLink=new Sl(te,this),te.deps?(s.prevDep=te.depsTail,te.depsTail.nextDep=s,te.depsTail=s):te.deps=te.depsTail=s,ka(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=te.depsTail,s.nextDep=void 0,te.depsTail.nextDep=s,te.depsTail=s,te.deps===s&&(te.deps=r)}return s}trigger(t){this.version++,Is++,this.notify(t)}notify(t){Xn();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Zn()}}}function ka(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)ka(r)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const yn=new WeakMap,Ft=Symbol(""),_n=Symbol(""),As=Symbol("");function pe(e,t,s){if(Ve&&te){let r=yn.get(e);r||yn.set(e,r=new Map);let n=r.get(s);n||(r.set(s,n=new Ea),n.map=r,n.key=s),n.track()}}function ct(e,t,s,r,n,o){const i=yn.get(e);if(!i){Is++;return}const a=c=>{c&&c.trigger()};if(Xn(),t==="clear")i.forEach(a);else{const c=B(e),d=c&&Jn(s);if(c&&s==="length"){const u=Number(r);i.forEach((h,b)=>{(b==="length"||b===As||!St(b)&&b>=u)&&a(h)})}else switch((s!==void 0||i.has(void 0))&&a(i.get(s)),d&&a(i.get(As)),t){case"add":c?d&&a(i.get("length")):(a(i.get(Ft)),Gt(e)&&a(i.get(_n)));break;case"delete":c||(a(i.get(Ft)),Gt(e)&&a(i.get(_n)));break;case"set":Gt(e)&&a(i.get(Ft));break}}Zn()}function Wt(e){const t=Y(e);return t===e?t:(pe(t,"iterate",As),$e(e)?t:t.map(ye))}function Dr(e){return pe(e=Y(e),"iterate",As),e}const El={__proto__:null,[Symbol.iterator](){return zr(this,Symbol.iterator,ye)},concat(...e){return Wt(this).concat(...e.map(t=>B(t)?Wt(t):t))},entries(){return zr(this,"entries",e=>(e[1]=ye(e[1]),e))},every(e,t){return ot(this,"every",e,t,void 0,arguments)},filter(e,t){return ot(this,"filter",e,t,s=>s.map(ye),arguments)},find(e,t){return ot(this,"find",e,t,ye,arguments)},findIndex(e,t){return ot(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return ot(this,"findLast",e,t,ye,arguments)},findLastIndex(e,t){return ot(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return ot(this,"forEach",e,t,void 0,arguments)},includes(...e){return Gr(this,"includes",e)},indexOf(...e){return Gr(this,"indexOf",e)},join(e){return Wt(this).join(e)},lastIndexOf(...e){return Gr(this,"lastIndexOf",e)},map(e,t){return ot(this,"map",e,t,void 0,arguments)},pop(){return hs(this,"pop")},push(...e){return hs(this,"push",e)},reduce(e,...t){return Mo(this,"reduce",e,t)},reduceRight(e,...t){return Mo(this,"reduceRight",e,t)},shift(){return hs(this,"shift")},some(e,t){return ot(this,"some",e,t,void 0,arguments)},splice(...e){return hs(this,"splice",e)},toReversed(){return Wt(this).toReversed()},toSorted(e){return Wt(this).toSorted(e)},toSpliced(...e){return Wt(this).toSpliced(...e)},unshift(...e){return hs(this,"unshift",e)},values(){return zr(this,"values",ye)}};function zr(e,t,s){const r=Dr(e),n=r[t]();return r!==e&&!$e(e)&&(n._next=n.next,n.next=()=>{const o=n._next();return o.value&&(o.value=s(o.value)),o}),n}const kl=Array.prototype;function ot(e,t,s,r,n,o){const i=Dr(e),a=i!==e&&!$e(e),c=i[t];if(c!==kl[t]){const h=c.apply(e,o);return a?ye(h):h}let d=s;i!==e&&(a?d=function(h,b){return s.call(this,ye(h),b,e)}:s.length>2&&(d=function(h,b){return s.call(this,h,b,e)}));const u=c.call(i,d,r);return a&&n?n(u):u}function Mo(e,t,s,r){const n=Dr(e);let o=s;return n!==e&&($e(e)?s.length>3&&(o=function(i,a,c){return s.call(this,i,a,c,e)}):o=function(i,a,c){return s.call(this,i,ye(a),c,e)}),n[t](o,...r)}function Gr(e,t,s){const r=Y(e);pe(r,"iterate",As);const n=r[t](...s);return(n===-1||n===!1)&&no(s[0])?(s[0]=Y(s[0]),r[t](...s)):n}function hs(e,t,s=[]){dt(),Xn();const r=Y(e)[t].apply(e,s);return Zn(),ft(),r}const Pl=zn("__proto__,__v_isRef,__isVue"),Pa=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(St));function Cl(e){St(e)||(e=String(e));const t=Y(this);return pe(t,"has",e),t.hasOwnProperty(e)}class Ca{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,r){if(s==="__v_skip")return t.__v_skip;const n=this._isReadonly,o=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return o;if(s==="__v_raw")return r===(n?o?ql:Da:o?Ta:Aa).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const i=B(t);if(!n){let c;if(i&&(c=El[s]))return c;if(s==="hasOwnProperty")return Cl}const a=Reflect.get(t,s,ve(t)?t:r);return(St(s)?Pa.has(s):Pl(s))||(n||pe(t,"get",s),o)?a:ve(a)?i&&Jn(s)?a:a.value:se(a)?n?Ra(a):so(a):a}}class Ia extends Ca{constructor(t=!1){super(!1,t)}set(t,s,r,n){let o=t[s];if(!this._isShallow){const c=Mt(o);if(!$e(r)&&!Mt(r)&&(o=Y(o),r=Y(r)),!B(t)&&ve(o)&&!ve(r))return c?!1:(o.value=r,!0)}const i=B(t)&&Jn(s)?Number(s)<t.length:Q(t,s),a=Reflect.set(t,s,r,ve(t)?t:n);return t===Y(n)&&(i?Ot(r,o)&&ct(t,"set",s,r):ct(t,"add",s,r)),a}deleteProperty(t,s){const r=Q(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&r&&ct(t,"delete",s,void 0),n}has(t,s){const r=Reflect.has(t,s);return(!St(s)||!Pa.has(s))&&pe(t,"has",s),r}ownKeys(t){return pe(t,"iterate",B(t)?"length":Ft),Reflect.ownKeys(t)}}class Il extends Ca{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Al=new Ia,Tl=new Il,Dl=new Ia(!0);const bn=e=>e,zs=e=>Reflect.getPrototypeOf(e);function Rl(e,t,s){return function(...r){const n=this.__v_raw,o=Y(n),i=Gt(o),a=e==="entries"||e===Symbol.iterator&&i,c=e==="keys"&&i,d=n[e](...r),u=s?bn:t?fr:ye;return!t&&pe(o,"iterate",c?_n:Ft),{next(){const{value:h,done:b}=d.next();return b?{value:h,done:b}:{value:a?[u(h[0]),u(h[1])]:u(h),done:b}},[Symbol.iterator](){return this}}}}function Gs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ll(e,t){const s={get(n){const o=this.__v_raw,i=Y(o),a=Y(n);e||(Ot(n,a)&&pe(i,"get",n),pe(i,"get",a));const{has:c}=zs(i),d=t?bn:e?fr:ye;if(c.call(i,n))return d(o.get(n));if(c.call(i,a))return d(o.get(a));o!==i&&o.get(n)},get size(){const n=this.__v_raw;return!e&&pe(Y(n),"iterate",Ft),Reflect.get(n,"size",n)},has(n){const o=this.__v_raw,i=Y(o),a=Y(n);return e||(Ot(n,a)&&pe(i,"has",n),pe(i,"has",a)),n===a?o.has(n):o.has(n)||o.has(a)},forEach(n,o){const i=this,a=i.__v_raw,c=Y(a),d=t?bn:e?fr:ye;return!e&&pe(c,"iterate",Ft),a.forEach((u,h)=>n.call(o,d(u),d(h),i))}};return xe(s,e?{add:Gs("add"),set:Gs("set"),delete:Gs("delete"),clear:Gs("clear")}:{add(n){!t&&!$e(n)&&!Mt(n)&&(n=Y(n));const o=Y(this);return zs(o).has.call(o,n)||(o.add(n),ct(o,"add",n,n)),this},set(n,o){!t&&!$e(o)&&!Mt(o)&&(o=Y(o));const i=Y(this),{has:a,get:c}=zs(i);let d=a.call(i,n);d||(n=Y(n),d=a.call(i,n));const u=c.call(i,n);return i.set(n,o),d?Ot(o,u)&&ct(i,"set",n,o):ct(i,"add",n,o),this},delete(n){const o=Y(this),{has:i,get:a}=zs(o);let c=i.call(o,n);c||(n=Y(n),c=i.call(o,n)),a&&a.call(o,n);const d=o.delete(n);return c&&ct(o,"delete",n,void 0),d},clear(){const n=Y(this),o=n.size!==0,i=n.clear();return o&&ct(n,"clear",void 0,void 0),i}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Rl(n,e,t)}),s}function to(e,t){const s=Ll(e,t);return(r,n,o)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get(Q(s,n)&&n in r?s:r,n,o)}const Nl={get:to(!1,!1)},Ol={get:to(!1,!0)},Fl={get:to(!0,!1)};const Aa=new WeakMap,Ta=new WeakMap,Da=new WeakMap,ql=new WeakMap;function Ml(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bl(e){return e.__v_skip||!Object.isExtensible(e)?0:Ml(dl(e))}function so(e){return Mt(e)?e:ro(e,!1,Al,Nl,Aa)}function jl(e){return ro(e,!1,Dl,Ol,Ta)}function Ra(e){return ro(e,!0,Tl,Fl,Da)}function ro(e,t,s,r,n){if(!se(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const o=Bl(e);if(o===0)return e;const i=n.get(e);if(i)return i;const a=new Proxy(e,o===2?r:s);return n.set(e,a),a}function Yt(e){return Mt(e)?Yt(e.__v_raw):!!(e&&e.__v_isReactive)}function Mt(e){return!!(e&&e.__v_isReadonly)}function $e(e){return!!(e&&e.__v_isShallow)}function no(e){return e?!!e.__v_raw:!1}function Y(e){const t=e&&e.__v_raw;return t?Y(t):e}function Ul(e){return!Q(e,"__v_skip")&&Object.isExtensible(e)&&pn(e,"__v_skip",!0),e}const ye=e=>se(e)?so(e):e,fr=e=>se(e)?Ra(e):e;function ve(e){return e?e.__v_isRef===!0:!1}function Hl(e){return ve(e)?e.value:e}const Vl={get:(e,t,s)=>t==="__v_raw"?e:Hl(Reflect.get(e,t,s)),set:(e,t,s,r)=>{const n=e[t];return ve(n)&&!ve(s)?(n.value=s,!0):Reflect.set(e,t,s,r)}};function La(e){return Yt(e)?e:new Proxy(e,Vl)}class $l{constructor(t,s,r){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Ea(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&te!==this)return ba(this,!0),!0}get value(){const t=this.dep.track();return wa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Wl(e,t,s=!1){let r,n;return j(e)?r=e:(r=e.get,n=e.set),new $l(r,n,s)}const Ys={},hr=new WeakMap;let Rt;function Ql(e,t=!1,s=Rt){if(s){let r=hr.get(s);r||hr.set(s,r=[]),r.push(e)}}function Kl(e,t,s=Z){const{immediate:r,deep:n,once:o,scheduler:i,augmentJob:a,call:c}=s,d=q=>n?q:$e(q)||n===!1||n===0?lt(q,1):lt(q);let u,h,b,y,D=!1,F=!1;if(ve(e)?(h=()=>e.value,D=$e(e)):Yt(e)?(h=()=>d(e),D=!0):B(e)?(F=!0,D=e.some(q=>Yt(q)||$e(q)),h=()=>e.map(q=>{if(ve(q))return q.value;if(Yt(q))return d(q);if(j(q))return c?c(q,2):q()})):j(e)?t?h=c?()=>c(e,2):e:h=()=>{if(b){dt();try{b()}finally{ft()}}const q=Rt;Rt=u;try{return c?c(e,3,[y]):e(y)}finally{Rt=q}}:h=tt,t&&n){const q=h,re=n===!0?1/0:n;h=()=>lt(q(),re)}const $=xl(),U=()=>{u.stop(),$&&$.active&&Yn($.effects,u)};if(o&&t){const q=t;t=(...re)=>{q(...re),U()}}let K=F?new Array(e.length).fill(Ys):Ys;const G=q=>{if(!(!(u.flags&1)||!u.dirty&&!q))if(t){const re=u.run();if(n||D||(F?re.some((Ue,Ae)=>Ot(Ue,K[Ae])):Ot(re,K))){b&&b();const Ue=Rt;Rt=u;try{const Ae=[re,K===Ys?void 0:F&&K[0]===Ys?[]:K,y];K=re,c?c(t,3,Ae):t(...Ae)}finally{Rt=Ue}}}else u.run()};return a&&a(G),u=new ya(h),u.scheduler=i?()=>i(G,!1):G,y=q=>Ql(q,!1,u),b=u.onStop=()=>{const q=hr.get(u);if(q){if(c)c(q,4);else for(const re of q)re();hr.delete(u)}},t?r?G(!0):K=u.run():i?i(G.bind(null,!0),!0):u.run(),U.pause=u.pause.bind(u),U.resume=u.resume.bind(u),U.stop=U,U}function lt(e,t=1/0,s){if(t<=0||!se(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,ve(e))lt(e.value,t,s);else if(B(e))for(let r=0;r<e.length;r++)lt(e[r],t,s);else if(ua(e)||Gt(e))e.forEach(r=>{lt(r,t,s)});else if(ha(e)){for(const r in e)lt(e[r],t,s);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&lt(e[r],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ms(e,t,s,r){try{return r?e(...r):e()}catch(n){Rr(n,t,s)}}function st(e,t,s,r){if(j(e)){const n=Ms(e,t,s,r);return n&&da(n)&&n.catch(o=>{Rr(o,t,s)}),n}if(B(e)){const n=[];for(let o=0;o<e.length;o++)n.push(st(e[o],t,s,r));return n}}function Rr(e,t,s,r=!0){const n=t?t.vnode:null,{errorHandler:o,throwUnhandledErrorInProduction:i}=t&&t.appContext.config||Z;if(t){let a=t.parent;const c=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,c,d)===!1)return}a=a.parent}if(o){dt(),Ms(o,null,10,[e,c,d]),ft();return}}zl(e,s,n,r,i)}function zl(e,t,s,r=!0,n=!1){if(n)throw e;console.error(e)}const _e=[];let Ze=-1;const Jt=[];let gt=null,Qt=0;const Na=Promise.resolve();let pr=null;function Gl(e){const t=pr||Na;return e?t.then(this?e.bind(this):e):t}function Yl(e){let t=Ze+1,s=_e.length;for(;t<s;){const r=t+s>>>1,n=_e[r],o=Ts(n);o<e||o===e&&n.flags&2?t=r+1:s=r}return t}function oo(e){if(!(e.flags&1)){const t=Ts(e),s=_e[_e.length-1];!s||!(e.flags&2)&&t>=Ts(s)?_e.push(e):_e.splice(Yl(t),0,e),e.flags|=1,Oa()}}function Oa(){pr||(pr=Na.then(qa))}function Jl(e){B(e)?Jt.push(...e):gt&&e.id===-1?gt.splice(Qt+1,0,e):e.flags&1||(Jt.push(e),e.flags|=1),Oa()}function Bo(e,t,s=Ze+1){for(;s<_e.length;s++){const r=_e[s];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;_e.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Fa(e){if(Jt.length){const t=[...new Set(Jt)].sort((s,r)=>Ts(s)-Ts(r));if(Jt.length=0,gt){gt.push(...t);return}for(gt=t,Qt=0;Qt<gt.length;Qt++){const s=gt[Qt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}gt=null,Qt=0}}const Ts=e=>e.id==null?e.flags&2?-1:1/0:e.id;function qa(e){try{for(Ze=0;Ze<_e.length;Ze++){const t=_e[Ze];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ms(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Ze<_e.length;Ze++){const t=_e[Ze];t&&(t.flags&=-2)}Ze=-1,_e.length=0,Fa(),pr=null,(_e.length||Jt.length)&&qa()}}let Re=null,Ma=null;function mr(e){const t=Re;return Re=e,Ma=e&&e.type.__scopeId||null,t}function Xl(e,t=Re,s){if(!t||e._n)return e;const r=(...n)=>{r._d&&Go(-1);const o=mr(t);let i;try{i=e(...n)}finally{mr(o),r._d&&Go(1)}return i};return r._n=!0,r._c=!0,r._d=!0,r}function ue(e,t){if(Re===null)return e;const s=Fr(Re),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[o,i,a,c=Z]=t[n];o&&(j(o)&&(o={mounted:o,updated:o}),o.deep&&lt(i),r.push({dir:o,instance:s,value:i,oldValue:void 0,arg:a,modifiers:c}))}return e}function Tt(e,t,s,r){const n=e.dirs,o=t&&t.dirs;for(let i=0;i<n.length;i++){const a=n[i];o&&(a.oldValue=o[i].value);let c=a.dir[r];c&&(dt(),st(c,s,8,[e.el,a,e,t]),ft())}}const Zl=Symbol("_vte"),eu=e=>e.__isTeleport;function io(e,t){e.shapeFlag&6&&e.component?(e.transition=t,io(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ba(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function xs(e,t,s,r,n=!1){if(B(e)){e.forEach((D,F)=>xs(D,t&&(B(t)?t[F]:t),s,r,n));return}if(ws(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xs(e,t,s,r.component.subTree);return}const o=r.shapeFlag&4?Fr(r.component):r.el,i=n?null:o,{i:a,r:c}=e,d=t&&t.r,u=a.refs===Z?a.refs={}:a.refs,h=a.setupState,b=Y(h),y=h===Z?()=>!1:D=>Q(b,D);if(d!=null&&d!==c&&(ce(d)?(u[d]=null,y(d)&&(h[d]=null)):ve(d)&&(d.value=null)),j(c))Ms(c,a,12,[i,u]);else{const D=ce(c),F=ve(c);if(D||F){const $=()=>{if(e.f){const U=D?y(c)?h[c]:u[c]:c.value;n?B(U)&&Yn(U,o):B(U)?U.includes(o)||U.push(o):D?(u[c]=[o],y(c)&&(h[c]=u[c])):(c.value=[o],e.k&&(u[e.k]=c.value))}else D?(u[c]=i,y(c)&&(h[c]=i)):F&&(c.value=i,e.k&&(u[e.k]=i))};i?($.id=-1,De($,s)):$()}}}Tr().requestIdleCallback;Tr().cancelIdleCallback;const ws=e=>!!e.type.__asyncLoader,ja=e=>e.type.__isKeepAlive;function tu(e,t){Ua(e,"a",t)}function su(e,t){Ua(e,"da",t)}function Ua(e,t,s=me){const r=e.__wdc||(e.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Lr(t,r,s),s){let n=s.parent;for(;n&&n.parent;)ja(n.parent.vnode)&&ru(r,t,s,n),n=n.parent}}function ru(e,t,s,r){const n=Lr(t,e,r,!0);Ha(()=>{Yn(r[t],n)},s)}function Lr(e,t,s=me,r=!1){if(s){const n=s[e]||(s[e]=[]),o=t.__weh||(t.__weh=(...i)=>{dt();const a=Bs(s),c=st(t,s,e,i);return a(),ft(),c});return r?n.unshift(o):n.push(o),o}}const ht=e=>(t,s=me)=>{(!Rs||e==="sp")&&Lr(e,(...r)=>t(...r),s)},nu=ht("bm"),ou=ht("m"),iu=ht("bu"),au=ht("u"),cu=ht("bum"),Ha=ht("um"),lu=ht("sp"),uu=ht("rtg"),du=ht("rtc");function fu(e,t=me){Lr("ec",e,t)}const hu="components";function Nt(e,t){return mu(hu,e,!0,t)||e}const pu=Symbol.for("v-ndc");function mu(e,t,s=!0,r=!1){const n=Re||me;if(n){const o=n.type;{const a=rd(o,!1);if(a&&(a===t||a===Be(t)||a===Ar(Be(t))))return o}const i=jo(n[e]||o[e],t)||jo(n.appContext[e],t);return!i&&r?o:i}}function jo(e,t){return e&&(e[t]||e[Be(t)]||e[Ar(Be(t))])}function Fe(e,t,s,r){let n;const o=s,i=B(e);if(i||ce(e)){const a=i&&Yt(e);let c=!1,d=!1;a&&(c=!$e(e),d=Mt(e),e=Dr(e)),n=new Array(e.length);for(let u=0,h=e.length;u<h;u++)n[u]=t(c?d?fr(ye(e[u])):ye(e[u]):e[u],u,void 0,o)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,o)}else if(se(e))if(e[Symbol.iterator])n=Array.from(e,(a,c)=>t(a,c,void 0,o));else{const a=Object.keys(e);n=new Array(a.length);for(let c=0,d=a.length;c<d;c++){const u=a[c];n[c]=t(e[u],u,c,o)}}else n=[];return n}const vn=e=>e?lc(e)?Fr(e):vn(e.parent):null,Ss=xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vn(e.parent),$root:e=>vn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>$a(e),$forceUpdate:e=>e.f||(e.f=()=>{oo(e.update)}),$nextTick:e=>e.n||(e.n=Gl.bind(e.proxy)),$watch:e=>qu.bind(e)}),Yr=(e,t)=>e!==Z&&!e.__isScriptSetup&&Q(e,t),gu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:o,accessCache:i,type:a,appContext:c}=e;let d;if(t[0]!=="$"){const y=i[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return n[t];case 4:return s[t];case 3:return o[t]}else{if(Yr(r,t))return i[t]=1,r[t];if(n!==Z&&Q(n,t))return i[t]=2,n[t];if((d=e.propsOptions[0])&&Q(d,t))return i[t]=3,o[t];if(s!==Z&&Q(s,t))return i[t]=4,s[t];xn&&(i[t]=0)}}const u=Ss[t];let h,b;if(u)return t==="$attrs"&&pe(e.attrs,"get",""),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(s!==Z&&Q(s,t))return i[t]=4,s[t];if(b=c.config.globalProperties,Q(b,t))return b[t]},set({_:e},t,s){const{data:r,setupState:n,ctx:o}=e;return Yr(n,t)?(n[t]=s,!0):r!==Z&&Q(r,t)?(r[t]=s,!0):Q(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(o[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:r,appContext:n,propsOptions:o}},i){let a;return!!s[i]||e!==Z&&Q(e,i)||Yr(t,i)||(a=o[0])&&Q(a,i)||Q(r,i)||Q(Ss,i)||Q(n.config.globalProperties,i)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:Q(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Uo(e){return B(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let xn=!0;function yu(e){const t=$a(e),s=e.proxy,r=e.ctx;xn=!1,t.beforeCreate&&Ho(t.beforeCreate,e,"bc");const{data:n,computed:o,methods:i,watch:a,provide:c,inject:d,created:u,beforeMount:h,mounted:b,beforeUpdate:y,updated:D,activated:F,deactivated:$,beforeDestroy:U,beforeUnmount:K,destroyed:G,unmounted:q,render:re,renderTracked:Ue,renderTriggered:Ae,errorCaptured:He,serverPrefetch:Ct,expose:Ke,inheritAttrs:pt,components:x,directives:we,filters:nt}=t;if(d&&_u(d,r,null),i)for(const W in i){const H=i[W];j(H)&&(r[W]=H.bind(s))}if(n){const W=n.call(s,s);se(W)&&(e.data=so(W))}if(xn=!0,o)for(const W in o){const H=o[W],It=j(H)?H.bind(s,s):j(H.get)?H.get.bind(s,s):tt,Qs=!j(H)&&j(H.set)?H.set.bind(s):tt,At=od({get:It,set:Qs});Object.defineProperty(r,W,{enumerable:!0,configurable:!0,get:()=>At.value,set:ze=>At.value=ze})}if(a)for(const W in a)Va(a[W],r,s,W);if(c){const W=j(c)?c.call(s):c;Reflect.ownKeys(W).forEach(H=>{Eu(H,W[H])})}u&&Ho(u,e,"c");function oe(W,H){B(H)?H.forEach(It=>W(It.bind(s))):H&&W(H.bind(s))}if(oe(nu,h),oe(ou,b),oe(iu,y),oe(au,D),oe(tu,F),oe(su,$),oe(fu,He),oe(du,Ue),oe(uu,Ae),oe(cu,K),oe(Ha,q),oe(lu,Ct),B(Ke))if(Ke.length){const W=e.exposed||(e.exposed={});Ke.forEach(H=>{Object.defineProperty(W,H,{get:()=>s[H],set:It=>s[H]=It,enumerable:!0})})}else e.exposed||(e.exposed={});re&&e.render===tt&&(e.render=re),pt!=null&&(e.inheritAttrs=pt),x&&(e.components=x),we&&(e.directives=we),Ct&&Ba(e)}function _u(e,t,s=tt){B(e)&&(e=wn(e));for(const r in e){const n=e[r];let o;se(n)?"default"in n?o=nr(n.from||r,n.default,!0):o=nr(n.from||r):o=nr(n),ve(o)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>o.value,set:i=>o.value=i}):t[r]=o}}function Ho(e,t,s){st(B(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,s)}function Va(e,t,s,r){let n=r.includes(".")?rc(s,r):()=>s[r];if(ce(e)){const o=t[e];j(o)&&Xr(n,o)}else if(j(e))Xr(n,e.bind(s));else if(se(e))if(B(e))e.forEach(o=>Va(o,t,s,r));else{const o=j(e.handler)?e.handler.bind(s):t[e.handler];j(o)&&Xr(n,o,e)}}function $a(e){const t=e.type,{mixins:s,extends:r}=t,{mixins:n,optionsCache:o,config:{optionMergeStrategies:i}}=e.appContext,a=o.get(t);let c;return a?c=a:!n.length&&!s&&!r?c=t:(c={},n.length&&n.forEach(d=>gr(c,d,i,!0)),gr(c,t,i)),se(t)&&o.set(t,c),c}function gr(e,t,s,r=!1){const{mixins:n,extends:o}=t;o&&gr(e,o,s,!0),n&&n.forEach(i=>gr(e,i,s,!0));for(const i in t)if(!(r&&i==="expose")){const a=bu[i]||s&&s[i];e[i]=a?a(e[i],t[i]):t[i]}return e}const bu={data:Vo,props:$o,emits:$o,methods:ms,computed:ms,beforeCreate:ge,created:ge,beforeMount:ge,mounted:ge,beforeUpdate:ge,updated:ge,beforeDestroy:ge,beforeUnmount:ge,destroyed:ge,unmounted:ge,activated:ge,deactivated:ge,errorCaptured:ge,serverPrefetch:ge,components:ms,directives:ms,watch:xu,provide:Vo,inject:vu};function Vo(e,t){return t?e?function(){return xe(j(e)?e.call(this,this):e,j(t)?t.call(this,this):t)}:t:e}function vu(e,t){return ms(wn(e),wn(t))}function wn(e){if(B(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ge(e,t){return e?[...new Set([].concat(e,t))]:t}function ms(e,t){return e?xe(Object.create(null),e,t):t}function $o(e,t){return e?B(e)&&B(t)?[...new Set([...e,...t])]:xe(Object.create(null),Uo(e),Uo(t??{})):t}function xu(e,t){if(!e)return t;if(!t)return e;const s=xe(Object.create(null),e);for(const r in t)s[r]=ge(e[r],t[r]);return s}function Wa(){return{app:null,config:{isNativeTag:ll,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wu=0;function Su(e,t){return function(r,n=null){j(r)||(r=xe({},r)),n!=null&&!se(n)&&(n=null);const o=Wa(),i=new WeakSet,a=[];let c=!1;const d=o.app={_uid:wu++,_component:r,_props:n,_container:null,_context:o,_instance:null,version:id,get config(){return o.config},set config(u){},use(u,...h){return i.has(u)||(u&&j(u.install)?(i.add(u),u.install(d,...h)):j(u)&&(i.add(u),u(d,...h))),d},mixin(u){return o.mixins.includes(u)||o.mixins.push(u),d},component(u,h){return h?(o.components[u]=h,d):o.components[u]},directive(u,h){return h?(o.directives[u]=h,d):o.directives[u]},mount(u,h,b){if(!c){const y=d._ceVNode||Oe(r,n);return y.appContext=o,b===!0?b="svg":b===!1&&(b=void 0),e(y,u,b),c=!0,d._container=u,u.__vue_app__=d,Fr(y.component)}},onUnmount(u){a.push(u)},unmount(){c&&(st(a,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,h){return o.provides[u]=h,d},runWithContext(u){const h=Xt;Xt=d;try{return u()}finally{Xt=h}}};return d}}let Xt=null;function Eu(e,t){if(me){let s=me.provides;const r=me.parent&&me.parent.provides;r===s&&(s=me.provides=Object.create(r)),s[e]=t}}function nr(e,t,s=!1){const r=Xu();if(r||Xt){let n=Xt?Xt._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return s&&j(t)?t.call(r&&r.proxy):t}}const Qa={},Ka=()=>Object.create(Qa),za=e=>Object.getPrototypeOf(e)===Qa;function ku(e,t,s,r=!1){const n={},o=Ka();e.propsDefaults=Object.create(null),Ga(e,t,n,o);for(const i in e.propsOptions[0])i in n||(n[i]=void 0);s?e.props=r?n:jl(n):e.type.props?e.props=n:e.props=o,e.attrs=o}function Pu(e,t,s,r){const{props:n,attrs:o,vnode:{patchFlag:i}}=e,a=Y(n),[c]=e.propsOptions;let d=!1;if((r||i>0)&&!(i&16)){if(i&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let b=u[h];if(Nr(e.emitsOptions,b))continue;const y=t[b];if(c)if(Q(o,b))y!==o[b]&&(o[b]=y,d=!0);else{const D=Be(b);n[D]=Sn(c,a,D,y,e,!1)}else y!==o[b]&&(o[b]=y,d=!0)}}}else{Ga(e,t,n,o)&&(d=!0);let u;for(const h in a)(!t||!Q(t,h)&&((u=Et(h))===h||!Q(t,u)))&&(c?s&&(s[h]!==void 0||s[u]!==void 0)&&(n[h]=Sn(c,a,h,void 0,e,!0)):delete n[h]);if(o!==a)for(const h in o)(!t||!Q(t,h))&&(delete o[h],d=!0)}d&&ct(e.attrs,"set","")}function Ga(e,t,s,r){const[n,o]=e.propsOptions;let i=!1,a;if(t)for(let c in t){if(_s(c))continue;const d=t[c];let u;n&&Q(n,u=Be(c))?!o||!o.includes(u)?s[u]=d:(a||(a={}))[u]=d:Nr(e.emitsOptions,c)||(!(c in r)||d!==r[c])&&(r[c]=d,i=!0)}if(o){const c=Y(s),d=a||Z;for(let u=0;u<o.length;u++){const h=o[u];s[h]=Sn(n,c,h,d[h],e,!Q(d,h))}}return i}function Sn(e,t,s,r,n,o){const i=e[s];if(i!=null){const a=Q(i,"default");if(a&&r===void 0){const c=i.default;if(i.type!==Function&&!i.skipFactory&&j(c)){const{propsDefaults:d}=n;if(s in d)r=d[s];else{const u=Bs(n);r=d[s]=c.call(null,t),u()}}else r=c;n.ce&&n.ce._setProp(s,r)}i[0]&&(o&&!a?r=!1:i[1]&&(r===""||r===Et(s))&&(r=!0))}return r}const Cu=new WeakMap;function Ya(e,t,s=!1){const r=s?Cu:t.propsCache,n=r.get(e);if(n)return n;const o=e.props,i={},a=[];let c=!1;if(!j(e)){const u=h=>{c=!0;const[b,y]=Ya(h,t,!0);xe(i,b),y&&a.push(...y)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!o&&!c)return se(e)&&r.set(e,zt),zt;if(B(o))for(let u=0;u<o.length;u++){const h=Be(o[u]);Wo(h)&&(i[h]=Z)}else if(o)for(const u in o){const h=Be(u);if(Wo(h)){const b=o[u],y=i[h]=B(b)||j(b)?{type:b}:xe({},b),D=y.type;let F=!1,$=!0;if(B(D))for(let U=0;U<D.length;++U){const K=D[U],G=j(K)&&K.name;if(G==="Boolean"){F=!0;break}else G==="String"&&($=!1)}else F=j(D)&&D.name==="Boolean";y[0]=F,y[1]=$,(F||Q(y,"default"))&&a.push(h)}}const d=[i,a];return se(e)&&r.set(e,d),d}function Wo(e){return e[0]!=="$"&&!_s(e)}const ao=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",co=e=>B(e)?e.map(et):[et(e)],Iu=(e,t,s)=>{if(t._n)return t;const r=Xl((...n)=>co(t(...n)),s);return r._c=!1,r},Ja=(e,t,s)=>{const r=e._ctx;for(const n in e){if(ao(n))continue;const o=e[n];if(j(o))t[n]=Iu(n,o,r);else if(o!=null){const i=co(o);t[n]=()=>i}}},Xa=(e,t)=>{const s=co(t);e.slots.default=()=>s},Za=(e,t,s)=>{for(const r in t)(s||!ao(r))&&(e[r]=t[r])},Au=(e,t,s)=>{const r=e.slots=Ka();if(e.vnode.shapeFlag&32){const n=t.__;n&&pn(r,"__",n,!0);const o=t._;o?(Za(r,t,s),s&&pn(r,"_",o,!0)):Ja(t,r)}else t&&Xa(e,t)},Tu=(e,t,s)=>{const{vnode:r,slots:n}=e;let o=!0,i=Z;if(r.shapeFlag&32){const a=t._;a?s&&a===1?o=!1:Za(n,t,s):(o=!t.$stable,Ja(t,n)),i=t}else t&&(Xa(e,t),i={default:1});if(o)for(const a in n)!ao(a)&&i[a]==null&&delete n[a]},De=$u;function Du(e){return Ru(e)}function Ru(e,t){const s=Tr();s.__VUE__=!0;const{insert:r,remove:n,patchProp:o,createElement:i,createText:a,createComment:c,setText:d,setElementText:u,parentNode:h,nextSibling:b,setScopeId:y=tt,insertStaticContent:D}=e,F=(f,p,v,E=null,w=null,S=null,A=void 0,I=null,C=!!p.dynamicChildren)=>{if(f===p)return;f&&!ps(f,p)&&(E=Ks(f),ze(f,w,S,!0),f=null),p.patchFlag===-2&&(C=!1,p.dynamicChildren=null);const{type:k,ref:N,shapeFlag:T}=p;switch(k){case Or:$(f,p,v,E);break;case bt:U(f,p,v,E);break;case or:f==null&&K(p,v,E,A);break;case ne:x(f,p,v,E,w,S,A,I,C);break;default:T&1?re(f,p,v,E,w,S,A,I,C):T&6?we(f,p,v,E,w,S,A,I,C):(T&64||T&128)&&k.process(f,p,v,E,w,S,A,I,C,ds)}N!=null&&w?xs(N,f&&f.ref,S,p||f,!p):N==null&&f&&f.ref!=null&&xs(f.ref,null,S,f,!0)},$=(f,p,v,E)=>{if(f==null)r(p.el=a(p.children),v,E);else{const w=p.el=f.el;p.children!==f.children&&d(w,p.children)}},U=(f,p,v,E)=>{f==null?r(p.el=c(p.children||""),v,E):p.el=f.el},K=(f,p,v,E)=>{[f.el,f.anchor]=D(f.children,p,v,E,f.el,f.anchor)},G=({el:f,anchor:p},v,E)=>{let w;for(;f&&f!==p;)w=b(f),r(f,v,E),f=w;r(p,v,E)},q=({el:f,anchor:p})=>{let v;for(;f&&f!==p;)v=b(f),n(f),f=v;n(p)},re=(f,p,v,E,w,S,A,I,C)=>{p.type==="svg"?A="svg":p.type==="math"&&(A="mathml"),f==null?Ue(p,v,E,w,S,A,I,C):Ct(f,p,w,S,A,I,C)},Ue=(f,p,v,E,w,S,A,I)=>{let C,k;const{props:N,shapeFlag:T,transition:L,dirs:M}=f;if(C=f.el=i(f.type,S,N&&N.is,N),T&8?u(C,f.children):T&16&&He(f.children,C,null,E,w,Jr(f,S),A,I),M&&Tt(f,null,E,"created"),Ae(C,f,f.scopeId,A,E),N){for(const ee in N)ee!=="value"&&!_s(ee)&&o(C,ee,null,N[ee],S,E);"value"in N&&o(C,"value",null,N.value,S),(k=N.onVnodeBeforeMount)&&Xe(k,E,f)}M&&Tt(f,null,E,"beforeMount");const V=Lu(w,L);V&&L.beforeEnter(C),r(C,p,v),((k=N&&N.onVnodeMounted)||V||M)&&De(()=>{k&&Xe(k,E,f),V&&L.enter(C),M&&Tt(f,null,E,"mounted")},w)},Ae=(f,p,v,E,w)=>{if(v&&y(f,v),E)for(let S=0;S<E.length;S++)y(f,E[S]);if(w){let S=w.subTree;if(p===S||oc(S.type)&&(S.ssContent===p||S.ssFallback===p)){const A=w.vnode;Ae(f,A,A.scopeId,A.slotScopeIds,w.parent)}}},He=(f,p,v,E,w,S,A,I,C=0)=>{for(let k=C;k<f.length;k++){const N=f[k]=I?yt(f[k]):et(f[k]);F(null,N,p,v,E,w,S,A,I)}},Ct=(f,p,v,E,w,S,A)=>{const I=p.el=f.el;let{patchFlag:C,dynamicChildren:k,dirs:N}=p;C|=f.patchFlag&16;const T=f.props||Z,L=p.props||Z;let M;if(v&&Dt(v,!1),(M=L.onVnodeBeforeUpdate)&&Xe(M,v,p,f),N&&Tt(p,f,v,"beforeUpdate"),v&&Dt(v,!0),(T.innerHTML&&L.innerHTML==null||T.textContent&&L.textContent==null)&&u(I,""),k?Ke(f.dynamicChildren,k,I,v,E,Jr(p,w),S):A||H(f,p,I,null,v,E,Jr(p,w),S,!1),C>0){if(C&16)pt(I,T,L,v,w);else if(C&2&&T.class!==L.class&&o(I,"class",null,L.class,w),C&4&&o(I,"style",T.style,L.style,w),C&8){const V=p.dynamicProps;for(let ee=0;ee<V.length;ee++){const z=V[ee],Se=T[z],Ee=L[z];(Ee!==Se||z==="value")&&o(I,z,Se,Ee,w,v)}}C&1&&f.children!==p.children&&u(I,p.children)}else!A&&k==null&&pt(I,T,L,v,w);((M=L.onVnodeUpdated)||N)&&De(()=>{M&&Xe(M,v,p,f),N&&Tt(p,f,v,"updated")},E)},Ke=(f,p,v,E,w,S,A)=>{for(let I=0;I<p.length;I++){const C=f[I],k=p[I],N=C.el&&(C.type===ne||!ps(C,k)||C.shapeFlag&198)?h(C.el):v;F(C,k,N,null,E,w,S,A,!0)}},pt=(f,p,v,E,w)=>{if(p!==v){if(p!==Z)for(const S in p)!_s(S)&&!(S in v)&&o(f,S,p[S],null,w,E);for(const S in v){if(_s(S))continue;const A=v[S],I=p[S];A!==I&&S!=="value"&&o(f,S,I,A,w,E)}"value"in v&&o(f,"value",p.value,v.value,w)}},x=(f,p,v,E,w,S,A,I,C)=>{const k=p.el=f?f.el:a(""),N=p.anchor=f?f.anchor:a("");let{patchFlag:T,dynamicChildren:L,slotScopeIds:M}=p;M&&(I=I?I.concat(M):M),f==null?(r(k,v,E),r(N,v,E),He(p.children||[],v,N,w,S,A,I,C)):T>0&&T&64&&L&&f.dynamicChildren?(Ke(f.dynamicChildren,L,v,w,S,A,I),(p.key!=null||w&&p===w.subTree)&&ec(f,p,!0)):H(f,p,v,N,w,S,A,I,C)},we=(f,p,v,E,w,S,A,I,C)=>{p.slotScopeIds=I,f==null?p.shapeFlag&512?w.ctx.activate(p,v,E,A,C):nt(p,v,E,w,S,A,C):mt(f,p,C)},nt=(f,p,v,E,w,S,A)=>{const I=f.component=Ju(f,E,w);if(ja(f)&&(I.ctx.renderer=ds),Zu(I,!1,A),I.asyncDep){if(w&&w.registerDep(I,oe,A),!f.el){const C=I.subTree=Oe(bt);U(null,C,p,v),f.placeholder=C.el}}else oe(I,f,p,v,w,S,A)},mt=(f,p,v)=>{const E=p.component=f.component;if(Hu(f,p,v))if(E.asyncDep&&!E.asyncResolved){W(E,p,v);return}else E.next=p,E.update();else p.el=f.el,E.vnode=p},oe=(f,p,v,E,w,S,A)=>{const I=()=>{if(f.isMounted){let{next:T,bu:L,u:M,parent:V,vnode:ee}=f;{const Ye=tc(f);if(Ye){T&&(T.el=ee.el,W(f,T,A)),Ye.asyncDep.then(()=>{f.isUnmounted||I()});return}}let z=T,Se;Dt(f,!1),T?(T.el=ee.el,W(f,T,A)):T=ee,L&&rr(L),(Se=T.props&&T.props.onVnodeBeforeUpdate)&&Xe(Se,V,T,ee),Dt(f,!0);const Ee=Ko(f),Ge=f.subTree;f.subTree=Ee,F(Ge,Ee,h(Ge.el),Ks(Ge),f,w,S),T.el=Ee.el,z===null&&Vu(f,Ee.el),M&&De(M,w),(Se=T.props&&T.props.onVnodeUpdated)&&De(()=>Xe(Se,V,T,ee),w)}else{let T;const{el:L,props:M}=p,{bm:V,m:ee,parent:z,root:Se,type:Ee}=f,Ge=ws(p);Dt(f,!1),V&&rr(V),!Ge&&(T=M&&M.onVnodeBeforeMount)&&Xe(T,z,p),Dt(f,!0);{Se.ce&&Se.ce._def.shadowRoot!==!1&&Se.ce._injectChildStyle(Ee);const Ye=f.subTree=Ko(f);F(null,Ye,v,E,f,w,S),p.el=Ye.el}if(ee&&De(ee,w),!Ge&&(T=M&&M.onVnodeMounted)){const Ye=p;De(()=>Xe(T,z,Ye),w)}(p.shapeFlag&256||z&&ws(z.vnode)&&z.vnode.shapeFlag&256)&&f.a&&De(f.a,w),f.isMounted=!0,p=v=E=null}};f.scope.on();const C=f.effect=new ya(I);f.scope.off();const k=f.update=C.run.bind(C),N=f.job=C.runIfDirty.bind(C);N.i=f,N.id=f.uid,C.scheduler=()=>oo(N),Dt(f,!0),k()},W=(f,p,v)=>{p.component=f;const E=f.vnode.props;f.vnode=p,f.next=null,Pu(f,p.props,E,v),Tu(f,p.children,v),dt(),Bo(f),ft()},H=(f,p,v,E,w,S,A,I,C=!1)=>{const k=f&&f.children,N=f?f.shapeFlag:0,T=p.children,{patchFlag:L,shapeFlag:M}=p;if(L>0){if(L&128){Qs(k,T,v,E,w,S,A,I,C);return}else if(L&256){It(k,T,v,E,w,S,A,I,C);return}}M&8?(N&16&&us(k,w,S),T!==k&&u(v,T)):N&16?M&16?Qs(k,T,v,E,w,S,A,I,C):us(k,w,S,!0):(N&8&&u(v,""),M&16&&He(T,v,E,w,S,A,I,C))},It=(f,p,v,E,w,S,A,I,C)=>{f=f||zt,p=p||zt;const k=f.length,N=p.length,T=Math.min(k,N);let L;for(L=0;L<T;L++){const M=p[L]=C?yt(p[L]):et(p[L]);F(f[L],M,v,null,w,S,A,I,C)}k>N?us(f,w,S,!0,!1,T):He(p,v,E,w,S,A,I,C,T)},Qs=(f,p,v,E,w,S,A,I,C)=>{let k=0;const N=p.length;let T=f.length-1,L=N-1;for(;k<=T&&k<=L;){const M=f[k],V=p[k]=C?yt(p[k]):et(p[k]);if(ps(M,V))F(M,V,v,null,w,S,A,I,C);else break;k++}for(;k<=T&&k<=L;){const M=f[T],V=p[L]=C?yt(p[L]):et(p[L]);if(ps(M,V))F(M,V,v,null,w,S,A,I,C);else break;T--,L--}if(k>T){if(k<=L){const M=L+1,V=M<N?p[M].el:E;for(;k<=L;)F(null,p[k]=C?yt(p[k]):et(p[k]),v,V,w,S,A,I,C),k++}}else if(k>L)for(;k<=T;)ze(f[k],w,S,!0),k++;else{const M=k,V=k,ee=new Map;for(k=V;k<=L;k++){const Te=p[k]=C?yt(p[k]):et(p[k]);Te.key!=null&&ee.set(Te.key,k)}let z,Se=0;const Ee=L-V+1;let Ge=!1,Ye=0;const fs=new Array(Ee);for(k=0;k<Ee;k++)fs[k]=0;for(k=M;k<=T;k++){const Te=f[k];if(Se>=Ee){ze(Te,w,S,!0);continue}let Je;if(Te.key!=null)Je=ee.get(Te.key);else for(z=V;z<=L;z++)if(fs[z-V]===0&&ps(Te,p[z])){Je=z;break}Je===void 0?ze(Te,w,S,!0):(fs[Je-V]=k+1,Je>=Ye?Ye=Je:Ge=!0,F(Te,p[Je],v,null,w,S,A,I,C),Se++)}const Lo=Ge?Nu(fs):zt;for(z=Lo.length-1,k=Ee-1;k>=0;k--){const Te=V+k,Je=p[Te],No=p[Te+1],Oo=Te+1<N?No.el||No.placeholder:E;fs[k]===0?F(null,Je,v,Oo,w,S,A,I,C):Ge&&(z<0||k!==Lo[z]?At(Je,v,Oo,2):z--)}}},At=(f,p,v,E,w=null)=>{const{el:S,type:A,transition:I,children:C,shapeFlag:k}=f;if(k&6){At(f.component.subTree,p,v,E);return}if(k&128){f.suspense.move(p,v,E);return}if(k&64){A.move(f,p,v,ds);return}if(A===ne){r(S,p,v);for(let T=0;T<C.length;T++)At(C[T],p,v,E);r(f.anchor,p,v);return}if(A===or){G(f,p,v);return}if(E!==2&&k&1&&I)if(E===0)I.beforeEnter(S),r(S,p,v),De(()=>I.enter(S),w);else{const{leave:T,delayLeave:L,afterLeave:M}=I,V=()=>{f.ctx.isUnmounted?n(S):r(S,p,v)},ee=()=>{T(S,()=>{V(),M&&M()})};L?L(S,V,ee):ee()}else r(S,p,v)},ze=(f,p,v,E=!1,w=!1)=>{const{type:S,props:A,ref:I,children:C,dynamicChildren:k,shapeFlag:N,patchFlag:T,dirs:L,cacheIndex:M}=f;if(T===-2&&(w=!1),I!=null&&(dt(),xs(I,null,v,f,!0),ft()),M!=null&&(p.renderCache[M]=void 0),N&256){p.ctx.deactivate(f);return}const V=N&1&&L,ee=!ws(f);let z;if(ee&&(z=A&&A.onVnodeBeforeUnmount)&&Xe(z,p,f),N&6)cl(f.component,v,E);else{if(N&128){f.suspense.unmount(v,E);return}V&&Tt(f,null,p,"beforeUnmount"),N&64?f.type.remove(f,p,v,ds,E):k&&!k.hasOnce&&(S!==ne||T>0&&T&64)?us(k,p,v,!1,!0):(S===ne&&T&384||!w&&N&16)&&us(C,p,v),E&&Do(f)}(ee&&(z=A&&A.onVnodeUnmounted)||V)&&De(()=>{z&&Xe(z,p,f),V&&Tt(f,null,p,"unmounted")},v)},Do=f=>{const{type:p,el:v,anchor:E,transition:w}=f;if(p===ne){al(v,E);return}if(p===or){q(f);return}const S=()=>{n(v),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(f.shapeFlag&1&&w&&!w.persisted){const{leave:A,delayLeave:I}=w,C=()=>A(v,S);I?I(f.el,S,C):C()}else S()},al=(f,p)=>{let v;for(;f!==p;)v=b(f),n(f),f=v;n(p)},cl=(f,p,v)=>{const{bum:E,scope:w,job:S,subTree:A,um:I,m:C,a:k,parent:N,slots:{__:T}}=f;Qo(C),Qo(k),E&&rr(E),N&&B(T)&&T.forEach(L=>{N.renderCache[L]=void 0}),w.stop(),S&&(S.flags|=8,ze(A,f,p,v)),I&&De(I,p),De(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},us=(f,p,v,E=!1,w=!1,S=0)=>{for(let A=S;A<f.length;A++)ze(f[A],p,v,E,w)},Ks=f=>{if(f.shapeFlag&6)return Ks(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const p=b(f.anchor||f.el),v=p&&p[Zl];return v?b(v):p};let $r=!1;const Ro=(f,p,v)=>{f==null?p._vnode&&ze(p._vnode,null,null,!0):F(p._vnode||null,f,p,null,null,null,v),p._vnode=f,$r||($r=!0,Bo(),Fa(),$r=!1)},ds={p:F,um:ze,m:At,r:Do,mt:nt,mc:He,pc:H,pbc:Ke,n:Ks,o:e};return{render:Ro,hydrate:void 0,createApp:Su(Ro)}}function Jr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Dt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Lu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function ec(e,t,s=!1){const r=e.children,n=t.children;if(B(r)&&B(n))for(let o=0;o<r.length;o++){const i=r[o];let a=n[o];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[o]=yt(n[o]),a.el=i.el),!s&&a.patchFlag!==-2&&ec(i,a)),a.type===Or&&(a.el=i.el),a.type===bt&&!a.el&&(a.el=i.el)}}function Nu(e){const t=e.slice(),s=[0];let r,n,o,i,a;const c=e.length;for(r=0;r<c;r++){const d=e[r];if(d!==0){if(n=s[s.length-1],e[n]<d){t[r]=n,s.push(r);continue}for(o=0,i=s.length-1;o<i;)a=o+i>>1,e[s[a]]<d?o=a+1:i=a;d<e[s[o]]&&(o>0&&(t[r]=s[o-1]),s[o]=r)}}for(o=s.length,i=s[o-1];o-- >0;)s[o]=i,i=t[i];return s}function tc(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:tc(t)}function Qo(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ou=Symbol.for("v-scx"),Fu=()=>nr(Ou);function Xr(e,t,s){return sc(e,t,s)}function sc(e,t,s=Z){const{immediate:r,deep:n,flush:o,once:i}=s,a=xe({},s),c=t&&r||!t&&o!=="post";let d;if(Rs){if(o==="sync"){const y=Fu();d=y.__watcherHandles||(y.__watcherHandles=[])}else if(!c){const y=()=>{};return y.stop=tt,y.resume=tt,y.pause=tt,y}}const u=me;a.call=(y,D,F)=>st(y,u,D,F);let h=!1;o==="post"?a.scheduler=y=>{De(y,u&&u.suspense)}:o!=="sync"&&(h=!0,a.scheduler=(y,D)=>{D?y():oo(y)}),a.augmentJob=y=>{t&&(y.flags|=4),h&&(y.flags|=2,u&&(y.id=u.uid,y.i=u))};const b=Kl(e,t,a);return Rs&&(d?d.push(b):c&&b()),b}function qu(e,t,s){const r=this.proxy,n=ce(e)?e.includes(".")?rc(r,e):()=>r[e]:e.bind(r,r);let o;j(t)?o=t:(o=t.handler,s=t);const i=Bs(this),a=sc(n,o.bind(r),s);return i(),a}function rc(e,t){const s=t.split(".");return()=>{let r=e;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const Mu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${Be(t)}Modifiers`]||e[`${Et(t)}Modifiers`];function Bu(e,t,...s){if(e.isUnmounted)return;const r=e.vnode.props||Z;let n=s;const o=t.startsWith("update:"),i=o&&Mu(r,t.slice(7));i&&(i.trim&&(n=s.map(u=>ce(u)?u.trim():u)),i.number&&(n=s.map(mn)));let a,c=r[a=Wr(t)]||r[a=Wr(Be(t))];!c&&o&&(c=r[a=Wr(Et(t))]),c&&st(c,e,6,n);const d=r[a+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,st(d,e,6,n)}}function nc(e,t,s=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const o=e.emits;let i={},a=!1;if(!j(e)){const c=d=>{const u=nc(d,t,!0);u&&(a=!0,xe(i,u))};!s&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!o&&!a?(se(e)&&r.set(e,null),null):(B(o)?o.forEach(c=>i[c]=null):xe(i,o),se(e)&&r.set(e,i),i)}function Nr(e,t){return!e||!Pr(t)?!1:(t=t.slice(2).replace(/Once$/,""),Q(e,t[0].toLowerCase()+t.slice(1))||Q(e,Et(t))||Q(e,t))}function Ko(e){const{type:t,vnode:s,proxy:r,withProxy:n,propsOptions:[o],slots:i,attrs:a,emit:c,render:d,renderCache:u,props:h,data:b,setupState:y,ctx:D,inheritAttrs:F}=e,$=mr(e);let U,K;try{if(s.shapeFlag&4){const q=n||r,re=q;U=et(d.call(re,q,u,h,y,b,D)),K=a}else{const q=t;U=et(q.length>1?q(h,{attrs:a,slots:i,emit:c}):q(h,null)),K=t.props?a:ju(a)}}catch(q){Es.length=0,Rr(q,e,1),U=Oe(bt)}let G=U;if(K&&F!==!1){const q=Object.keys(K),{shapeFlag:re}=G;q.length&&re&7&&(o&&q.some(Gn)&&(K=Uu(K,o)),G=ts(G,K,!1,!0))}return s.dirs&&(G=ts(G,null,!1,!0),G.dirs=G.dirs?G.dirs.concat(s.dirs):s.dirs),s.transition&&io(G,s.transition),U=G,mr($),U}const ju=e=>{let t;for(const s in e)(s==="class"||s==="style"||Pr(s))&&((t||(t={}))[s]=e[s]);return t},Uu=(e,t)=>{const s={};for(const r in e)(!Gn(r)||!(r.slice(9)in t))&&(s[r]=e[r]);return s};function Hu(e,t,s){const{props:r,children:n,component:o}=e,{props:i,children:a,patchFlag:c}=t,d=o.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&c>=0){if(c&1024)return!0;if(c&16)return r?zo(r,i,d):!!i;if(c&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const b=u[h];if(i[b]!==r[b]&&!Nr(d,b))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===i?!1:r?i?zo(r,i,d):!0:!!i;return!1}function zo(e,t,s){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const o=r[n];if(t[o]!==e[o]&&!Nr(s,o))return!0}return!1}function Vu({vnode:e,parent:t},s){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=s,t=t.parent;else break}}const oc=e=>e.__isSuspense;function $u(e,t){t&&t.pendingBranch?B(e)?t.effects.push(...e):t.effects.push(e):Jl(e)}const ne=Symbol.for("v-fgt"),Or=Symbol.for("v-txt"),bt=Symbol.for("v-cmt"),or=Symbol.for("v-stc"),Es=[];let Le=null;function m(e=!1){Es.push(Le=e?null:[])}function Wu(){Es.pop(),Le=Es[Es.length-1]||null}let Ds=1;function Go(e,t=!1){Ds+=e,e<0&&Le&&t&&(Le.hasOnce=!0)}function ic(e){return e.dynamicChildren=Ds>0?Le||zt:null,Wu(),Ds>0&&Le&&Le.push(e),e}function g(e,t,s,r,n,o){return ic(l(e,t,s,r,n,o,!0))}function ks(e,t,s,r,n){return ic(Oe(e,t,s,r,n,!0))}function ac(e){return e?e.__v_isVNode===!0:!1}function ps(e,t){return e.type===t.type&&e.key===t.key}const cc=({key:e})=>e??null,ir=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?ce(e)||ve(e)||j(e)?{i:Re,r:e,k:t,f:!!s}:e:null);function l(e,t=null,s=null,r=0,n=null,o=e===ne?0:1,i=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&cc(t),ref:t&&ir(t),scopeId:Ma,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:o,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Re};return a?(lo(c,s),o&128&&e.normalize(c)):s&&(c.shapeFlag|=ce(s)?8:16),Ds>0&&!i&&Le&&(c.patchFlag>0||o&6)&&c.patchFlag!==32&&Le.push(c),c}const Oe=Qu;function Qu(e,t=null,s=null,r=0,n=null,o=!1){if((!e||e===pu)&&(e=bt),ac(e)){const a=ts(e,t,!0);return s&&lo(a,s),Ds>0&&!o&&Le&&(a.shapeFlag&6?Le[Le.indexOf(e)]=a:Le.push(a)),a.patchFlag=-2,a}if(nd(e)&&(e=e.__vccOpts),t){t=Ku(t);let{class:a,style:c}=t;a&&!ce(a)&&(t.class=ae(a)),se(c)&&(no(c)&&!B(c)&&(c=xe({},c)),t.style=qs(c))}const i=ce(e)?1:oc(e)?128:eu(e)?64:se(e)?4:j(e)?2:0;return l(e,t,s,r,n,i,o,!0)}function Ku(e){return e?no(e)||za(e)?xe({},e):e:null}function ts(e,t,s=!1,r=!1){const{props:n,ref:o,patchFlag:i,children:a,transition:c}=e,d=t?zu(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&cc(d),ref:t&&t.ref?s&&o?B(o)?o.concat(ir(t)):[o,ir(t)]:ir(t):o,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ne?i===-1?16:i|16:i,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ts(e.ssContent),ssFallback:e.ssFallback&&ts(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&io(u,c.clone(u)),u}function he(e=" ",t=0){return Oe(Or,null,e,t)}function Ce(e,t){const s=Oe(or,null,e);return s.staticCount=t,s}function P(e="",t=!1){return t?(m(),ks(bt,null,e)):Oe(bt,null,e)}function et(e){return e==null||typeof e=="boolean"?Oe(bt):B(e)?Oe(ne,null,e.slice()):ac(e)?yt(e):Oe(Or,null,String(e))}function yt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ts(e)}function lo(e,t){let s=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(B(t))s=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),lo(e,n()),n._c&&(n._d=!0));return}else{s=32;const n=t._;!n&&!za(t)?t._ctx=Re:n===3&&Re&&(Re.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else j(t)?(t={default:t,_ctx:Re},s=32):(t=String(t),r&64?(s=16,t=[he(t)]):s=8);e.children=t,e.shapeFlag|=s}function zu(...e){const t={};for(let s=0;s<e.length;s++){const r=e[s];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=ae([t.class,r.class]));else if(n==="style")t.style=qs([t.style,r.style]);else if(Pr(n)){const o=t[n],i=r[n];i&&o!==i&&!(B(o)&&o.includes(i))&&(t[n]=o?[].concat(o,i):i)}else n!==""&&(t[n]=r[n])}return t}function Xe(e,t,s,r=null){st(e,t,7,[s,r])}const Gu=Wa();let Yu=0;function Ju(e,t,s){const r=e.type,n=(t?t.appContext:e.appContext)||Gu,o={uid:Yu++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vl(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ya(r,n),emitsOptions:nc(r,n),emit:null,emitted:null,propsDefaults:Z,inheritAttrs:r.inheritAttrs,ctx:Z,data:Z,props:Z,attrs:Z,slots:Z,refs:Z,setupState:Z,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return o.ctx={_:o},o.root=t?t.root:o,o.emit=Bu.bind(null,o),e.ce&&e.ce(o),o}let me=null;const Xu=()=>me||Re;let yr,En;{const e=Tr(),t=(s,r)=>{let n;return(n=e[s])||(n=e[s]=[]),n.push(r),o=>{n.length>1?n.forEach(i=>i(o)):n[0](o)}};yr=t("__VUE_INSTANCE_SETTERS__",s=>me=s),En=t("__VUE_SSR_SETTERS__",s=>Rs=s)}const Bs=e=>{const t=me;return yr(e),e.scope.on(),()=>{e.scope.off(),yr(t)}},Yo=()=>{me&&me.scope.off(),yr(null)};function lc(e){return e.vnode.shapeFlag&4}let Rs=!1;function Zu(e,t=!1,s=!1){t&&En(t);const{props:r,children:n}=e.vnode,o=lc(e);ku(e,r,o,t),Au(e,n,s||t);const i=o?ed(e,t):void 0;return t&&En(!1),i}function ed(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,gu);const{setup:r}=s;if(r){dt();const n=e.setupContext=r.length>1?sd(e):null,o=Bs(e),i=Ms(r,e,0,[e.props,n]),a=da(i);if(ft(),o(),(a||e.sp)&&!ws(e)&&Ba(e),a){if(i.then(Yo,Yo),t)return i.then(c=>{Jo(e,c)}).catch(c=>{Rr(c,e,0)});e.asyncDep=i}else Jo(e,i)}else uc(e)}function Jo(e,t,s){j(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:se(t)&&(e.setupState=La(t)),uc(e)}function uc(e,t,s){const r=e.type;e.render||(e.render=r.render||tt);{const n=Bs(e);dt();try{yu(e)}finally{ft(),n()}}}const td={get(e,t){return pe(e,"get",""),e[t]}};function sd(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,td),slots:e.slots,emit:e.emit,expose:t}}function Fr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(La(Ul(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Ss)return Ss[s](e)},has(t,s){return s in t||s in Ss}})):e.proxy}function rd(e,t=!0){return j(e)?e.displayName||e.name:e.name||t&&e.__name}function nd(e){return j(e)&&"__vccOpts"in e}const od=(e,t)=>Wl(e,t,Rs),id="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kn;const Xo=typeof window<"u"&&window.trustedTypes;if(Xo)try{kn=Xo.createPolicy("vue",{createHTML:e=>e})}catch{}const dc=kn?e=>kn.createHTML(e):e=>e,ad="http://www.w3.org/2000/svg",cd="http://www.w3.org/1998/Math/MathML",it=typeof document<"u"?document:null,Zo=it&&it.createElement("template"),ld={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,r)=>{const n=t==="svg"?it.createElementNS(ad,e):t==="mathml"?it.createElementNS(cd,e):s?it.createElement(e,{is:s}):it.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>it.createTextNode(e),createComment:e=>it.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>it.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,r,n,o){const i=s?s.previousSibling:t.lastChild;if(n&&(n===o||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),s),!(n===o||!(n=n.nextSibling)););else{Zo.innerHTML=dc(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=Zo.content;if(r==="svg"||r==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,s)}return[i?i.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ud=Symbol("_vtc");function dd(e,t,s){const r=e[ud];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const ei=Symbol("_vod"),fd=Symbol("_vsh"),hd=Symbol(""),pd=/(^|;)\s*display\s*:/;function md(e,t,s){const r=e.style,n=ce(s);let o=!1;if(s&&!n){if(t)if(ce(t))for(const i of t.split(";")){const a=i.slice(0,i.indexOf(":")).trim();s[a]==null&&ar(r,a,"")}else for(const i in t)s[i]==null&&ar(r,i,"");for(const i in s)i==="display"&&(o=!0),ar(r,i,s[i])}else if(n){if(t!==s){const i=r[hd];i&&(s+=";"+i),r.cssText=s,o=pd.test(s)}}else t&&e.removeAttribute("style");ei in e&&(e[ei]=o?r.display:"",e[fd]&&(r.display="none"))}const ti=/\s*!important$/;function ar(e,t,s){if(B(s))s.forEach(r=>ar(e,t,r));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const r=gd(e,t);ti.test(s)?e.setProperty(Et(r),s.replace(ti,""),"important"):e[r]=s}}const si=["Webkit","Moz","ms"],Zr={};function gd(e,t){const s=Zr[t];if(s)return s;let r=Be(t);if(r!=="filter"&&r in e)return Zr[t]=r;r=Ar(r);for(let n=0;n<si.length;n++){const o=si[n]+r;if(o in e)return Zr[t]=o}return t}const ri="http://www.w3.org/1999/xlink";function ni(e,t,s,r,n,o=bl(t)){r&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(ri,t.slice(6,t.length)):e.setAttributeNS(ri,t,s):s==null||o&&!pa(s)?e.removeAttribute(t):e.setAttribute(t,o?"":St(s)?String(s):s)}function oi(e,t,s,r,n){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?dc(s):s);return}const o=e.tagName;if(t==="value"&&o!=="PROGRESS"&&!o.includes("-")){const a=o==="OPTION"?e.getAttribute("value")||"":e.value,c=s==null?e.type==="checkbox"?"on":"":String(s);(a!==c||!("_value"in e))&&(e.value=c),s==null&&e.removeAttribute(t),e._value=s;return}let i=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=pa(s):s==null&&a==="string"?(s="",i=!0):a==="number"&&(s=0,i=!0)}try{e[t]=s}catch{}i&&e.removeAttribute(n||t)}function Kt(e,t,s,r){e.addEventListener(t,s,r)}function yd(e,t,s,r){e.removeEventListener(t,s,r)}const ii=Symbol("_vei");function _d(e,t,s,r,n=null){const o=e[ii]||(e[ii]={}),i=o[t];if(r&&i)i.value=r;else{const[a,c]=bd(t);if(r){const d=o[t]=wd(r,n);Kt(e,a,d,c)}else i&&(yd(e,a,i,c),o[t]=void 0)}}const ai=/(?:Once|Passive|Capture)$/;function bd(e){let t;if(ai.test(e)){t={};let r;for(;r=e.match(ai);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Et(e.slice(2)),t]}let en=0;const vd=Promise.resolve(),xd=()=>en||(vd.then(()=>en=0),en=Date.now());function wd(e,t){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;st(Sd(r,s.value),t,5,[r])};return s.value=e,s.attached=xd(),s}function Sd(e,t){if(B(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const ci=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ed=(e,t,s,r,n,o)=>{const i=n==="svg";t==="class"?dd(e,r,i):t==="style"?md(e,s,r):Pr(t)?Gn(t)||_d(e,t,s,r,o):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):kd(e,t,r,i))?(oi(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&ni(e,t,r,i,o,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!ce(r))?oi(e,Be(t),r,o,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),ni(e,t,r,i))};function kd(e,t,s,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&ci(t)&&j(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return ci(t)&&ce(s)?!1:t in e}const li=e=>{const t=e.props["onUpdate:modelValue"]||!1;return B(t)?s=>rr(t,s):t};function Pd(e){e.target.composing=!0}function ui(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const tn=Symbol("_assign"),de={created(e,{modifiers:{lazy:t,trim:s,number:r}},n){e[tn]=li(n);const o=r||n.props&&n.props.type==="number";Kt(e,t?"change":"input",i=>{if(i.target.composing)return;let a=e.value;s&&(a=a.trim()),o&&(a=mn(a)),e[tn](a)}),s&&Kt(e,"change",()=>{e.value=e.value.trim()}),t||(Kt(e,"compositionstart",Pd),Kt(e,"compositionend",ui),Kt(e,"change",ui))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:r,trim:n,number:o}},i){if(e[tn]=li(i),e.composing)return;const a=(o||e.type==="number")&&!/^0\d/.test(e.value)?mn(e.value):e.value,c=t??"";a!==c&&(document.activeElement===e&&e.type!=="range"&&(r&&t===s||n&&e.value.trim()===c)||(e.value=c))}},Cd=["ctrl","shift","alt","meta"],Id={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Cd.some(s=>e[`${s}Key`]&&!t.includes(s))},Pn=(e,t)=>{const s=e._withMods||(e._withMods={}),r=t.join(".");return s[r]||(s[r]=(n,...o)=>{for(let i=0;i<t.length;i++){const a=Id[t[i]];if(a&&a(n,t))return}return e(n,...o)})},Ad={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},di=(e,t)=>{const s=e._withKeys||(e._withKeys={}),r=t.join(".");return s[r]||(s[r]=n=>{if(!("key"in n))return;const o=Et(n.key);if(t.some(i=>i===o||Ad[i]===o))return e(n)})},Td=xe({patchProp:Ed},ld);let fi;function Dd(){return fi||(fi=Du(Td))}const Rd=(...e)=>{const t=Dd().createApp(...e),{mount:s}=t;return t.mount=r=>{const n=Nd(r);if(!n)return;const o=t._component;!j(o)&&!o.render&&!o.template&&(o.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const i=s(n,!1,Ld(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),i},t};function Ld(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Nd(e){return ce(e)?document.querySelector(e):e}const Od="modulepreload",Fd=function(e){return"/"+e},hi={},Pe=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),a=(i==null?void 0:i.nonce)||(i==null?void 0:i.getAttribute("nonce"));n=Promise.allSettled(s.map(c=>{if(c=Fd(c),c in hi)return;hi[c]=!0;const d=c.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Od,d||(h.as="script"),h.crossOrigin="",h.href=c,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((b,y)=>{h.addEventListener("load",b),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=i,window.dispatchEvent(a),!a.defaultPrevented)throw i}return n.then(i=>{for(const a of i||[])a.status==="rejected"&&o(a.reason);return t().catch(o)})},qd="https://production-tradeworks-n0Lpcg.keelapps.xyz",Ht=`${qd}/api/json`;class Md{constructor(){this.baseUrl=Ht,this.tokenKey="auth_token",this.userKey="auth_user"}getToken(){return localStorage.getItem(this.tokenKey)}setToken(t){localStorage.setItem(this.tokenKey,t)}removeToken(){localStorage.removeItem(this.tokenKey),localStorage.removeItem("refresh_token")}getUser(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setUser(t){localStorage.setItem(this.userKey,JSON.stringify(t))}removeUser(){localStorage.removeItem(this.userKey)}isAuthenticated(){return!!this.getToken()}async login(t,s){try{if(!t||!s)throw new Error("Email and password are required");const r=new URLSearchParams;r.append("grant_type","password"),r.append("username",t),r.append("password",s);const n=await fetch(`${this.baseUrl.replace("/api/json","")}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.message||i.error_description||"Login failed")}const o=await n.json();return this.setToken(o.access_token),o.refresh_token&&localStorage.setItem("refresh_token",o.refresh_token),o}catch(r){throw console.error("Login error:",r),r}}async exchangeAuthorizationCode(t){const s=new URLSearchParams;s.append("grant_type","authorization_code"),s.append("code",t);const r=this.baseUrl.replace("/api/json",""),n=await fetch(`${r}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.message||i.error_description||"SSO token exchange failed")}const o=await n.json();return this.setToken(o.access_token),o.refresh_token&&localStorage.setItem("refresh_token",o.refresh_token),o}async getAuthProviders(){const t=this.baseUrl.replace("/api/json",""),s=await fetch(`${t}/auth/providers`,{method:"GET"});if(!s.ok)throw new Error("Failed to load auth providers");return s.json()}async getCurrentUser(){try{const t=await fetch(`${this.baseUrl}/getMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`}});if(t.ok){const s=await t.json();return s?(this.setUser(s),s):(console.log("getMe returned null, creating user..."),await this.createUser())}else throw new Error("Failed to get user")}catch(t){throw console.error("Error getting user:",t),t}}async createUser(){try{const t=await fetch(`${this.baseUrl}/createMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`}});if(t.ok){const s=await t.json();return this.setUser(s),s}else throw new Error("Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}}async createUserWithProfile(t,s){try{const r=await fetch(`${this.baseUrl}/createMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`},body:JSON.stringify({firstName:t,lastName:s})});if(r.ok){const n=await r.json();return this.setUser(n),n}else throw new Error("Failed to create user with profile")}catch(r){throw console.error("Error creating user with profile:",r),r}}getCustomerId(t){return(t==null?void 0:t.customerId)||null}logout(){this.removeToken(),this.removeUser()}async requestPasswordReset(t,s){try{const r=await fetch(`${this.baseUrl}/requestPasswordReset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,redirectUrl:s})});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.message||"Password reset request failed")}return await r.json()}catch(r){throw console.error("Password reset request error:",r),r}}async resetPassword(t,s){try{const r=await fetch(`${this.baseUrl}/resetPassword`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,password:s})});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.message||"Password reset failed")}return await r.json()}catch(r){throw console.error("Password reset error:",r),r}}async refreshToken(){try{const t=localStorage.getItem("refresh_token");if(!t)throw new Error("No refresh token available");const s=new URLSearchParams;s.append("grant_type","refresh_token"),s.append("refresh_token",t);const r=await fetch(`${this.baseUrl.replace("/api/json","")}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!r.ok){const o=await r.json().catch(()=>({}));throw new Error(o.message||o.error_description||"Token refresh failed")}const n=await r.json();return this.setToken(n.access_token),n.refresh_token&&localStorage.setItem("refresh_token",n.refresh_token),n}catch(t){throw console.error("Token refresh error:",t),this.logout(),t}}async getCurrentUserCached(){if(!this.isAuthenticated())return null;try{const t=this.getUser();return t||await this.getCurrentUser()}catch(t){return console.error("Error getting current user:",t),null}}}const J=new Md;class Bd{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=J.getToken();n&&(r.Authorization=`Bearer ${n}`);const o=await fetch(`${Ht}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!o.ok){const a=(await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(J.logout(),window.location.reload()),new Error(a)}return o.json()}async getPriceLists(){return(await this.makeRequest("/listPriceLists")).results||[]}async getPriceList(t){return await this.makeRequest("/getPriceList",{id:t})}async createPriceList(t){return await this.makeRequest("/createPriceList",{name:t})}async updatePriceList(t,s){return await this.makeRequest("/updatePriceList",{where:{id:t},values:{name:s}})}async deletePriceList(t){return await this.makeRequest("/deletePriceList",{id:t})}async getCustomerPriceLists(t){return(await this.makeRequest("/listCustomerPriceLists",{where:{customer:{id:{equals:t}}}})).results||[]}async getCustomerPriceList(t){var r;return((r=(await this.makeRequest("/listCustomerPriceLists",{where:{id:{equals:t}}})).results)==null?void 0:r[0])||null}async createCustomerPriceList(t,s){return await this.makeRequest("/createCustomerPriceList",{customer:{id:t},priceList:{id:s}})}async deleteCustomerPriceList(t){return await this.makeRequest("/deleteCustomerPriceList",{id:t})}async listPriceListChangeLog(t){return((await this.makeRequest("/listPriceListChangeLog",{where:{priceList:{id:{equals:t}}},orderBy:[{createdAt:"Desc"}],include:{createdBy:!0}})).results||[]).map(n=>{const o=n.createdBy?[n.createdBy.firstName,n.createdBy.lastName].filter(Boolean).join(" ")||n.createdBy.email||n.createdBy.id:n.createdByName;return{...n,createdByName:o}})}}const Cn=new Bd,uo=Object.freeze(Object.defineProperty({__proto__:null,priceListService:Cn},Symbol.toStringTag,{value:"Module"}));class jd{constructor(){this.productCache=new Map}async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=J.getToken();n&&(r.Authorization=`Bearer ${n}`);const o=await fetch(`${Ht}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!o.ok){const a=(await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(J.logout(),window.location.reload()),new Error(a)}return o.json()}async getProducts(){return(await this.makeRequest("/listProducts",{limit:500})).results||[]}async getProduct(t,s=!0){if(s&&this.productCache.has(t))return this.productCache.get(t);const r=await this.makeRequest("/getProduct",{id:t});return this.productCache.set(t,r),r}clearProductCache(t=null){t?this.productCache.delete(t):this.productCache.clear()}async getProductPricesByPriceList(t){return(await this.makeRequest("/listProductPrices",{where:{priceList:{id:{equals:t}}},limit:500})).results||[]}async listBrands(){return(await this.makeRequest("/listBrands",{})).results||[]}}const Zt=new jd,Ud=Object.freeze(Object.defineProperty({__proto__:null,productService:Zt},Symbol.toStringTag,{value:"Module"}));class Hd{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=J.getToken();n&&(r.Authorization=`Bearer ${n}`);const o=await fetch(`${Ht}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!o.ok){const a=(await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(J.logout(),window.location.reload()),new Error(a)}return o.json()}async getQuotesByCustomer(t){return(await this.makeRequest("/listQuotes",{where:{customerPriceList:{customer:{id:{equals:t}}}},limit:500})).results||[]}async getQuotesByCustomerPriceList(t){return(await this.makeRequest("/listQuotes",{where:{customerPriceList:{id:{equals:t}}},limit:500})).results||[]}async getQuote(t){return await this.makeRequest("/getQuote",{id:t})}async createQuote(t){return await this.makeRequest("/createQuote",{customerPriceList:{id:t}})}async deleteQuote(t){return await this.makeRequest("/deleteQuote",{id:t})}async getQuoteProducts(t){return(await this.makeRequest("/listQuoteProducts",{where:{quote:{id:{equals:t}}}})).results||[]}async addProductToQuote(t,s,r){return await this.makeRequest("/createQuoteProduct",{quote:{id:t},productPrice:{id:s},quantity:r})}async updateQuoteProduct(t,s){return await this.makeRequest("/updateQuoteProduct",{where:{id:t},values:{quantity:s}})}async updateQuoteDelivery(t,s,r){return await this.makeRequest("/updateQuoteDelivery",{where:{id:t},values:{deliveryService:s,totalDeliveryFees:r}})}async updateQuoteDeliveryAddress(t,s){return await this.makeRequest("/updateQuoteDeliveryAddress",{where:{id:t},values:{deliveryAddress:s?{id:s}:null}})}async submitQuote(t){return await this.makeRequest("/submitQuote",{where:{id:t}})}async updateQuoteName(t,s){return await this.makeRequest("/updateQuoteName",{where:{id:t},values:{name:s}})}async deleteQuoteProduct(t){return await this.makeRequest("/deleteQuoteProduct",{id:t})}}const fe=new Hd,pi=Object.freeze(Object.defineProperty({__proto__:null,quoteService:fe},Symbol.toStringTag,{value:"Module"})),kt=(e,t)=>{const s=e.__vccOpts||e;for(const[r,n]of t)s[r]=n;return s},Vd={name:"AddProductModal",props:{quoteId:{type:String,required:!0},priceListId:{type:String,required:!1,default:""},existingQuoteProducts:{type:Array,default:()=>[]}},data(){return{productPrices:[],filteredProductPrices:[],searchQuery:"",loading:!1}},async mounted(){await this.loadProductPrices()},methods:{async loadProductPrices(){var e,t;this.loading=!0;try{let s=this.priceListId;if(!s){const r=await fe.getQuote(this.quoteId),{priceListService:n}=await Pe(async()=>{const{priceListService:a}=await Promise.resolve().then(()=>uo);return{priceListService:a}},void 0),i=(await n.getCustomerPriceLists(((t=(e=r.customerPriceList)==null?void 0:e.customer)==null?void 0:t.id)||"")).find(a=>a.id===r.customerPriceListId);s=(i==null?void 0:i.priceListId)||""}this.productPrices=s?await Zt.getProductPricesByPriceList(s):[],this.filteredProductPrices=this.filterAvailableProducts(this.productPrices)}catch(s){console.error("Failed to load product prices:",s)}finally{this.loading=!1}},filterAvailableProducts(e){const t=this.existingQuoteProducts.map(s=>s.productPriceId);return e.filter(s=>!t.includes(s.id))},searchProducts(){const e=this.filterAvailableProducts(this.productPrices);if(!this.searchQuery.trim()){this.filteredProductPrices=e;return}const t=this.searchQuery.toLowerCase();this.filteredProductPrices=e.filter(s=>s.productName.toLowerCase().includes(t)||s.productSku.toLowerCase().includes(t))},async selectProduct(e){try{await fe.addProductToQuote(this.quoteId,e.id,1),this.$emit("product-added")}catch(t){console.error("Failed to add product to quote:",t),alert("Failed to add product to quote")}},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}}},$d={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},Wd={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden"},Qd={class:"flex justify-between items-center p-6 border-b border-gray-200"},Kd={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},zd={class:"mb-6"},Gd={key:0,class:"flex justify-center items-center py-8"},Yd={key:1,class:"text-center py-8"},Jd={key:2,class:"space-y-4"},Xd=["onClick"],Zd={class:"flex items-center space-x-4"},ef={class:"flex-1"},tf={class:"font-medium text-gray-900"},sf={class:"text-sm text-gray-600"},rf={class:"flex items-center space-x-4 mt-2"},nf={class:"text-sm font-medium text-gray-900"},of={class:"text-xs text-gray-500"},af={class:"flex justify-end space-x-3 p-6 border-t border-gray-200"};function cf(e,t,s,r,n,o){return m(),g("div",$d,[l("div",Wd,[l("div",Qd,[t[5]||(t[5]=l("h3",{class:"text-lg font-medium text-gray-900"},"Add Product to Quote",-1)),l("button",{onClick:t[0]||(t[0]=i=>e.$emit("close")),class:"text-gray-400 hover:text-gray-600"},t[4]||(t[4]=[l("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("div",Kd,[l("div",zd,[t[6]||(t[6]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Products",-1)),ue(l("input",{"onUpdate:modelValue":t[1]||(t[1]=i=>n.searchQuery=i),type:"text",placeholder:"Search by name or SKU...",class:"input",onInput:t[2]||(t[2]=(...i)=>o.searchProducts&&o.searchProducts(...i))},null,544),[[de,n.searchQuery]])]),n.loading?(m(),g("div",Gd,t[7]||(t[7]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.filteredProductPrices.length===0?(m(),g("div",Yd,t[8]||(t[8]=[Ce('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products found</h4><p class="text-gray-600">Try adjusting your search terms.</p>',3)]))):(m(),g("div",Jd,[(m(!0),g(ne,null,Fe(n.filteredProductPrices,i=>(m(),g("div",{key:i.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer",onClick:a=>o.selectProduct(i)},[l("div",Zd,[l("div",ef,[l("h4",tf,_(i.productName),1),l("p",sf,"SKU: "+_(i.productSku),1),l("div",rf,[l("div",null,[l("span",nf,"ZAR "+_(o.formatCurrency(i.price)),1)]),l("div",null,[l("span",of," incl. VAT: ZAR "+_(o.formatCurrency(i.priceInclVat)),1)])])]),t[9]||(t[9]=l("div",{class:"text-right"},[l("button",{class:"btn btn-primary text-sm"}," Add to Quote ")],-1))])],8,Xd))),128))]))]),l("div",af,[l("button",{onClick:t[3]||(t[3]=i=>e.$emit("close")),class:"btn btn-secondary"},"Cancel")])])])}const lf=kt(Vd,[["render",cf]]);class uf{constructor(){this.baseUrl=Ht}async makeRequest(t,s=null){const r=`${this.baseUrl}${t}`,n={"Content-Type":"application/json"},o=J.getToken();o&&(n.Authorization=`Bearer ${o}`);const i={method:s?"POST":"GET",headers:n};s&&(i.body=JSON.stringify(s));const a=await fetch(r,i);if(!a.ok){const d=(await a.json().catch(()=>({}))).message||`HTTP error! status: ${a.status}`;throw typeof d=="string"&&d.toLowerCase().includes("token has expired")&&(J.logout(),window.location.reload()),new Error(d)}return a.json()}async calculateDelivery(t){return this.makeRequest("/calculateDelivery",{id:t})}}const df=new uf;class ff{constructor(){this.cache=new Map,this.urlMap=new Map}async get(t,s){if(!t||!s)return s;if(this.cache.has(t))return this.cache.get(t);try{const r=await fetch(s);if(!r.ok)return console.warn(`Failed to fetch image for caching: ${s}`),s;const n=await r.blob(),o=URL.createObjectURL(n);return this.cache.set(t,o),this.urlMap.set(t,s),o}catch(r){return console.warn(`Error caching image for ${t}:`,r),s}}clear(t=null){if(t){const s=this.cache.get(t);s&&URL.revokeObjectURL(s),this.cache.delete(t),this.urlMap.delete(t)}else{for(const s of this.cache.values())URL.revokeObjectURL(s);this.cache.clear(),this.urlMap.clear()}}getStats(){return{entryCount:this.cache.size,ids:Array.from(this.cache.keys())}}}const In=new ff,hf={name:"QuoteDetail",components:{AddProductModal:lf},props:{quote:{type:Object,required:!0},customerId:{type:String,required:!1}},data(){return{productPrices:[],quoteProducts:[],productDetails:{},showAddProductModal:!1,loading:!1,customerPriceList:null,equipmentBoxes:[],equipmentBoxDetails:{},selectedBoxType:"",loadingEquipmentBoxes:!1,loadingProducts:!1,imagePreview:{show:!1,src:"",alt:"",x:0,y:0},deliveryRates:null,loadingDeliveryRates:!1,deliveryRatesError:null,submittingQuote:!1,productsReadOnly:!1,deliveryAddresses:[],loadingAddresses:!1,selectedAddressId:"",addressSubmitAttempted:!1,showAddressDialog:!1,showDeliveryInfoDialog:!1,showRawJson:!1,showNameDialog:!1,editName:"",savingName:!1}},async mounted(){var e,t;this.loadingProducts=!0,this.loadingEquipmentBoxes=!0,this.loadingAddresses=!0,await this.refreshQuoteData(),await this.loadCustomerPriceList(),await this.loadQuoteProducts(),await this.loadProductDetails(),this.initializeBoxType(),await this.loadEquipmentBoxes(),await this.loadDeliveryAddresses(),this.quote.deliveryAddressId&&(this.selectedAddressId=this.quote.deliveryAddressId),this.checkExistingDeliveryDetails(),this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0&&(this.productsReadOnly=!0),((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status)||(this.productsReadOnly=!0),this.hydrateActionUsers(),this.hydrateCreatedByUser()},computed:{isSubmitted(){var e;return((e=this.quote)==null?void 0:e.status)==="Submitted"},isApproved(){var e;return((e=this.quote)==null?void 0:e.status)==="Approved"},isDraft(){var t;const e=(t=this.quote)==null?void 0:t.status;return!e||e==="Draft"},hasDeliveryInfo(){var e;return!!((e=this.quote)!=null&&e.deliveryRawJson)},formattedDeliveryInfo(){var e,t;try{return JSON.stringify(((e=this.quote)==null?void 0:e.deliveryRawJson)??{},null,2)}catch{return String(((t=this.quote)==null?void 0:t.deliveryRawJson)??"")}},parsedDelivery(){var i;const e=(i=this.quote)==null?void 0:i.deliveryRawJson;let t={};if(!e)return{selectedRate:null,otherRates:[]};if(typeof e=="string")try{t=JSON.parse(e)}catch{t={}}else t=e;const r=[...Array.isArray(t.rates)?t.rates:[]].sort((a,c)=>(a.rate??1/0)-(c.rate??1/0)),n=r[0]||null,o=r.slice(1).map((a,c)=>({...a,_key:c}));return{selectedRate:n,otherRates:o}},formatChargedKg(){var t,s;if((t=this.quote)!=null&&t.chargedWeightInGrams)return(this.quote.chargedWeightInGrams/1e3).toFixed(0);const e=(s=this.parsedDelivery.selectedRate)==null?void 0:s.charged_weight;return e!=null?Number(e).toFixed(0):"0"},selectedAddress(){return(this.deliveryAddresses||[]).find(t=>t.id===this.selectedAddressId)||{}},isDeliverySet(){return!!(this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0)},isSubmitDisabled(){return!this.isDeliverySet||!this.productsReadOnly||this.loading||this.loadingEquipmentBoxes||this.loadingDeliveryRates||this.submittingQuote},grandTotal(){return this.quote.total||0},vat(){return this.quote.vat||0},grandTotalInclVat(){return this.quote.totalInclVat||0},productsWeight(){return this.quoteProducts.reduce((e,t)=>{const s=this.productDetails[t.productId];return s&&s.weightInGrams?e+Number(s.weightInGrams)*t.quantity:e},0)},equipmentBoxesWeight(){return this.equipmentBoxes.reduce((e,t)=>{const s=this.equipmentBoxDetails[t.equipmentBoxId];return s&&s.weightInGrams?e+Number(s.weightInGrams)*t.quantity:e},0)},totalShipmentWeight(){return this.productsWeight+this.equipmentBoxesWeight}},watch:{"quote.products":{handler(){this.checkExistingDeliveryDetails()},deep:!0},quote:{handler(){this.$nextTick(()=>{var e,t;this.checkExistingDeliveryDetails(),this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0&&(this.productsReadOnly=!0),((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status)||(this.productsReadOnly=!0),this.hydrateActionUsers(),this.hydrateCreatedByUser()})},deep:!1},equipmentBoxes:{handler(){this.$nextTick(()=>{this.checkExistingDeliveryDetails()})},deep:!0},"quote.boxType":{handler(e){e&&e!==this.selectedBoxType&&(this.selectedBoxType=e,console.log("Box type updated from quote:",e))},immediate:!0}},methods:{async hydrateActionUsers(){var e,t,s,r,n,o;try{const i=((e=this.quote)==null?void 0:e.submittedById)||((t=this.quote)==null?void 0:t.submittedBy),a=((s=this.quote)==null?void 0:s.approvedById)||((r=this.quote)==null?void 0:r.approvedBy),c=i&&!((n=this.quote)!=null&&n.submittedByName),d=a&&!((o=this.quote)!=null&&o.approvedByName);if(!c&&!d)return;const{userService:u}=await Pe(async()=>{const{userService:y}=await import("./userService-D2lqep69.js");return{userService:y}},[]),h={},b=[];c&&b.push(u.getUser(i).then(y=>{h.submittedByName=[y.firstName,y.lastName].filter(Boolean).join(" ")||y.email||y.id}).catch(y=>console.warn("Failed to fetch submitted by user:",y))),d&&b.push(u.getUser(a).then(y=>{h.approvedByName=[y.firstName,y.lastName].filter(Boolean).join(" ")||y.email||y.id}).catch(y=>console.warn("Failed to fetch approved by user:",y))),await Promise.all(b),Object.keys(h).length&&this.$emit("quote-updated",{...this.quote,...h})}catch(i){console.warn("Failed to hydrate action user names",i)}},async hydrateCreatedByUser(){var e,t,s;try{const r=((e=this.quote)==null?void 0:e.createdById)||((t=this.quote)==null?void 0:t.createdBy);if(!r||(s=this.quote)!=null&&s.createdByName)return;const{userService:n}=await Pe(async()=>{const{userService:a}=await import("./userService-D2lqep69.js");return{userService:a}},[]),o=await n.getUser(r),i=[o.firstName,o.lastName].filter(Boolean).join(" ")||o.email||o.id;this.$emit("quote-updated",{...this.quote,createdByName:i})}catch(r){console.warn("Failed to hydrate createdBy user name",r)}},openNameDialog(){var e,t;(((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status))&&(this.editName=this.quote.name||"",this.showNameDialog=!0)},closeNameDialog(){this.showNameDialog=!1},async saveName(){try{if(!this.editName||!this.editName.trim())return;this.savingName=!0,await fe.updateQuoteName(this.quote.id,this.editName.trim());const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),this.showNameDialog=!1}catch(e){console.error("Failed to update quote name:",e),alert("Failed to update name: "+(e.message||"Unknown error"))}finally{this.savingName=!1}},openDeliveryInfoDialog(){this.showDeliveryInfoDialog=!0},closeDeliveryInfoDialog(){this.showDeliveryInfoDialog=!1},openAddressDialog(){this.productsReadOnly||(this.showAddressDialog=!0)},closeAddressDialog(){this.showAddressDialog=!1},selectAddress(e){this.productsReadOnly||(this.selectedAddressId=e,this.onAddressChange(),this.closeAddressDialog())},async loadDeliveryAddresses(){try{if(!this.customerId)return;this.loadingAddresses=!0;const{deliveryAddressService:e}=await Pe(async()=>{const{deliveryAddressService:r}=await Promise.resolve().then(()=>i0);return{deliveryAddressService:r}},void 0),t=await e.listDeliveryAddresses(this.customerId),s=Array.isArray(t)?t:t.results||[];if(this.quote.deliveryAddressId)try{const r=await e.getDeliveryAddress(this.quote.deliveryAddressId);!s.some(o=>o.id===r.id)&&r&&s.push(r)}catch(r){console.warn("Could not hydrate selected delivery address:",r)}this.deliveryAddresses=s}catch(e){console.error("Failed to load delivery addresses",e),this.deliveryAddresses=[]}finally{this.loadingAddresses=!1}},async onAddressChange(){try{await fe.updateQuoteDeliveryAddress(this.quote.id,this.selectedAddressId);const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e)}catch(e){console.error("Failed to update quote delivery address",e),alert("Failed to update delivery address: "+(e.message||"Unknown error"))}},selectBoxType(e){this.selectedBoxType!==e&&(this.selectedBoxType=e,this.onBoxTypeChange())},async toggleProductsReadOnly(){var e,t;(((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status))&&(!this.productsReadOnly&&(this.addressSubmitAttempted=!0,!this.selectedAddressId)||(this.productsReadOnly=!this.productsReadOnly,this.productsReadOnly&&this.selectedBoxType?(await this.calculateEquipmentBoxes(),this.equipmentBoxes.length>0&&await this.calculateDeliveryRates()):this.productsReadOnly||(this.addressSubmitAttempted=!1,await this.resetDeliveryInfo())))},async loadCustomerPriceList(){try{const{priceListService:e}=await Pe(async()=>{const{priceListService:t}=await Promise.resolve().then(()=>uo);return{priceListService:t}},void 0);if(this.customerId){const s=(await e.getCustomerPriceLists(this.customerId)).find(r=>r.id===this.quote.customerPriceListId);s?this.customerPriceList=s:(console.warn("Customer price list not found for quote. Falling back to empty priceListId"),this.customerPriceList={priceListId:""})}else console.warn("No customerId provided to QuoteDetail; cannot resolve priceListId"),this.customerPriceList={priceListId:""}}catch(e){console.error("Failed to load customer price list:",e),this.customerPriceList={priceListId:""}}},async loadQuoteProducts(){try{this.loadingProducts=!0,this.quoteProducts=await fe.getQuoteProducts(this.quote.id)}catch(e){console.error("Failed to load quote products:",e)}finally{this.loadingProducts=!1}try{this.productPrices=await Zt.getProductPricesByPriceList(this.customerPriceList.priceListId)}catch(e){console.error("Failed to load product prices:",e)}},async loadProductDetails(){var e;try{const{productService:t}=await Pe(async()=>{const{productService:s}=await Promise.resolve().then(()=>Ud);return{productService:s}},void 0);for(const s of this.quoteProducts)if(!this.productDetails[s.productId])try{const r=await t.getProduct(s.productId);(e=r.image)!=null&&e.url&&(r.image.url=await In.get(s.productId,r.image.url)),this.productDetails[s.productId]=r}catch(r){console.error(`Failed to load product price ${s.productId}:`,r)}}catch(t){console.error("Failed to load product details:",t)}},async updateProductQuantity(e,t){try{await fe.updateQuoteProduct(e,parseFloat(t)),await this.loadQuoteProducts();const s=await fe.getQuote(this.quote.id);this.$emit("quote-updated",s)}catch(s){console.error("Failed to update product quantity:",s)}},async removeProduct(e){if(confirm("Are you sure you want to remove this product from the quote?"))try{await fe.deleteQuoteProduct(e),await this.loadQuoteProducts();const t=await fe.getQuote(this.quote.id);this.$emit("quote-updated",t)}catch(t){console.error("Failed to remove product:",t)}},async deleteQuote(){if(confirm("Are you sure you want to delete this quote? This action cannot be undone."))try{await fe.deleteQuote(this.quote.id),this.$emit("quote-deleted")}catch(e){console.error("Failed to delete quote:",e)}},async handleProductAdded(){this.showAddProductModal=!1,await this.loadQuoteProducts(),await this.loadProductDetails();const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e)},async loadEquipmentBoxes(){var e;try{this.loadingEquipmentBoxes=!0;const{equipmentBoxService:t}=await Pe(async()=>{const{equipmentBoxService:r}=await import("./equipmentBoxService-BQ1SPVWm.js");return{equipmentBoxService:r}},[]),s=await t.listQuoteEquipmentBoxes(this.quote.id);this.equipmentBoxes=s.results||[];for(const r of this.equipmentBoxes)if(!this.equipmentBoxDetails[r.equipmentBoxId])try{const n=await t.getEquipmentBox(r.equipmentBoxId);(e=n.image)!=null&&e.url&&(n.image.url=await In.get(r.equipmentBoxId,n.image.url)),this.equipmentBoxDetails[r.equipmentBoxId]=n}catch(n){console.error(`Failed to load equipment box details ${r.equipmentBoxId}:`,n)}}catch(t){console.error("Failed to load equipment boxes:",t),this.equipmentBoxes=[]}finally{this.loadingEquipmentBoxes=!1}},async onBoxTypeChange(){this.selectedBoxType?(await this.calculateEquipmentBoxes(),this.equipmentBoxes.length>0&&await this.calculateDeliveryRates()):await this.resetDeliveryInfo()},async resetDeliveryInfo(){try{this.loading=!0;const{equipmentBoxService:e}=await Pe(async()=>{const{equipmentBoxService:t}=await import("./equipmentBoxService-BQ1SPVWm.js");return{equipmentBoxService:t}},[]);await e.resetDeliveryInfo(this.quote.id),this.equipmentBoxes=[],this.deliveryRates=null,this.deliveryRatesError=null,await this.refreshQuoteData()}catch(e){console.error("Failed to reset delivery info:",e),alert("Failed to reset delivery info: "+e.message)}finally{this.loading=!1}},async calculateEquipmentBoxes(){if(this.selectedBoxType)try{this.loading=!0;const{equipmentBoxService:e}=await Pe(async()=>{const{equipmentBoxService:t}=await import("./equipmentBoxService-BQ1SPVWm.js");return{equipmentBoxService:t}},[]);await e.calculateEquipmentBoxes(this.quote.id,this.selectedBoxType),await this.loadEquipmentBoxes(),await this.refreshQuoteData()}catch(e){console.error("Failed to calculate equipment boxes:",e),alert("Failed to calculate equipment boxes: "+e.message)}finally{this.loading=!1}},formatDate(e){if(!e)return"";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear(),o=String(t.getHours()).padStart(2,"0"),i=String(t.getMinutes()).padStart(2,"0");return`${s} ${r} ${n} ${o}:${i}`},formatCurrency(e){return parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})},formatVolume(e){return e?`${parseFloat(e).toFixed(0)} cm`:"N/A"},formatDimensions(e){if(!e)return"N/A";const{lengthInCm:t,widthInCm:s,heightInCm:r}=e;return!t||!s||!r?"N/A":`${parseFloat(t).toFixed(0)}  ${parseFloat(s).toFixed(0)}  ${parseFloat(r).toFixed(0)} cm`},formatWeight(e){if(!e||e===0)return"0 kg";const t=e/1e3;return t>=1?`${t.toFixed(2)} kg`:`${e.toFixed(0)} g`},showImagePreview(e,t){var r;const s=this.productDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let c=t.clientX+10,d=t.clientY+10;c+250>window.innerWidth&&(c=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Product",x:c,y:d}}},updateImagePreviewPosition(e){if(this.imagePreview.show){let o=e.clientX+10,i=e.clientY+10;o+250>window.innerWidth&&(o=e.clientX-250-10),i+250>window.innerHeight&&(i=e.clientY-250-10),this.imagePreview.x=o,this.imagePreview.y=i}},hideImagePreview(){this.imagePreview.show=!1},showBoxImagePreview(e,t){var r;const s=this.equipmentBoxDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let c=t.clientX+10,d=t.clientY+10;c+250>window.innerWidth&&(c=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Equipment Box",x:c,y:d}}},resetDeliveryRates(){this.deliveryRates=null,this.deliveryRatesError=null,this.loadingDeliveryRates=!1},async calculateDeliveryRates(){if(!this.selectedBoxType||this.equipmentBoxes.length===0){this.deliveryRatesError="Please calculate equipment boxes first before calculating delivery rates.";return}this.loadingDeliveryRates=!0,this.deliveryRatesError=null,this.deliveryRates=null;try{const e=await df.calculateDelivery(this.quote.id),t=e.availableRates&&e.availableRates.length>0?e.availableRates[0].weights.chargedWeight:null;this.deliveryRates={...e,chargedWeight:t},await this.refreshQuoteData()}catch(e){console.error("Failed to calculate delivery rates:",e),this.deliveryRatesError=e.message||"Failed to calculate delivery rates"}finally{this.loadingDeliveryRates=!1}},formatDeliveryDate(e){if(!e)return"N/A";try{const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`}catch(t){return console.error("Error formatting delivery date:",t),"Invalid date"}},formatQuoteStatus(e){return e?e==="Submitted"?"Submitted":e==="Approved"?"Approved":"Draft":"Draft"},async refreshQuoteData(){try{const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),await this.$nextTick(),console.log("Quote data refreshed successfully")}catch(e){console.error("Failed to refresh quote data:",e)}},initializeBoxType(){this.quote.boxType&&(this.selectedBoxType=this.quote.boxType,console.log("Initialized box type from quote:",this.quote.boxType))},checkExistingDeliveryDetails(){this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0?(this.deliveryRates={selectedDeliveryService:this.quote.deliveryService,selectedDeliveryFees:this.quote.totalDeliveryFees,totalParcels:this.equipmentBoxes.length>0?this.equipmentBoxes.reduce((e,t)=>e+t.quantity,0):0,totalWeightKg:this.totalShipmentWeight/1e3,totalVolumeCm3:this.equipmentBoxes.length>0?this.equipmentBoxes.reduce((e,t)=>{const s=this.equipmentBoxDetails[t.equipmentBoxId];if(s){const r=s.lengthInCm*s.widthInCm*s.heightInCm*t.quantity;return e+r}return e},0):0},console.log("Hydrated existing delivery details:",this.deliveryRates)):console.log("No existing delivery details found")},async submitQuote(){try{this.submittingQuote=!0,await fe.submitQuote(this.quote.id);const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),this.productsReadOnly=!0,this.showAddProductModal=!1}catch(e){console.error("Failed to submit quote:",e),alert("Failed to submit quote: "+(e.message||"Unknown error"))}finally{this.submittingQuote=!1}}}},pf={class:"space-y-6"},mf={class:"flex justify-between items-center"},gf={class:"flex items-center space-x-4"},yf={class:"flex items-center gap-2"},_f={class:"text-2xl font-semibold text-gray-900"},bf={class:"flex space-x-2"},vf=["disabled"],xf={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},wf={class:"card"},Sf={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Ef={class:"text-lg font-semibold text-gray-900"},kf={class:"flex items-center"},Pf={class:"text-gray-900"},Cf={class:"text-gray-900"},If={class:"text-gray-900"},Af={class:"text-gray-900"},Tf={class:"text-gray-900"},Df={class:"text-gray-900"},Rf={class:"card"},Lf={class:"flex items-center justify-between mb-2"},Nf={class:"block text-sm font-medium text-gray-700"},Of={key:0,class:"text-red-600"},Ff={key:0,class:"text-xs text-red-600"},qf={class:"flex items-start gap-4"},Mf={class:"w-full"},Bf={key:0,class:"rounded-lg border border-gray-200 p-4 text-sm text-gray-500 bg-gray-50"},jf={class:"md:grid md:grid-cols-2 md:gap-6"},Uf={class:"space-y-1"},Hf={class:"text-base font-semibold text-gray-900"},Vf={key:0,class:"text-sm text-gray-700"},$f={key:1,class:"space-y-0.5"},Wf={key:0,class:"text-sm text-gray-700"},Qf={key:1,class:"text-sm text-gray-700"},Kf={key:2,class:"text-sm text-gray-700"},zf={class:"space-y-1 mt-3 md:mt-6"},Gf={class:"text-sm text-gray-700"},Yf={key:0,class:"text-sm text-gray-700"},Jf={class:"text-sm text-gray-700"},Xf={key:1,class:"text-sm text-gray-700"},Zf={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},eh={class:"relative bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden"},th={class:"flex items-center justify-between p-4 border-b border-gray-200"},sh={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},rh={key:0,class:"text-center text-sm text-gray-600 py-8"},nh={key:1,class:"space-y-4"},oh=["onClick"],ih={class:"md:grid md:grid-cols-2 md:gap-6"},ah={class:"space-y-1"},ch={class:"text-base font-semibold text-gray-900"},lh={key:0,class:"text-sm text-gray-700"},uh={key:1,class:"space-y-0.5"},dh={key:0,class:"text-sm text-gray-700"},fh={key:1,class:"text-sm text-gray-700"},hh={key:2,class:"text-sm text-gray-700"},ph={class:"space-y-1 mt-3 md:mt-6"},mh={class:"text-sm text-gray-700"},gh={key:0,class:"text-sm text-gray-700"},yh={class:"text-sm text-gray-700"},_h={key:1,class:"text-sm text-gray-700"},bh={class:"p-4 border-t border-gray-200 flex justify-end"},vh={class:"card"},xh={key:0,class:"flex justify-center items-center py-8"},wh={key:1,class:"text-center py-8"},Sh={key:2,class:"space-y-4"},Eh={class:"flex justify-between items-center"},kh={class:"flex items-center space-x-4"},Ph={class:"relative w-12 h-12"},Ch=["src","alt","onMouseenter"],Ih={key:1,class:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center"},Ah={class:"min-h-[2rem] flex flex-col justify-center"},Th={class:"font-medium text-gray-900"},Dh={class:"text-sm text-gray-600"},Rh={class:"flex items-center space-x-4"},Lh={class:"w-12 text-center"},Nh=["onClick"],Oh={class:"w-20 text-right"},Fh=["value","onChange"],qh={key:1,class:"text-sm font-medium text-gray-900 text-center"},Mh={class:"w-20 text-right"},Bh={class:"text-sm font-medium text-gray-900"},jh={class:"w-20 text-right"},Uh={class:"text-sm font-bold text-gray-900"},Hh={key:3,class:"flex justify-end items-center space-x-3 mt-6 pt-4 border-t border-gray-200"},Vh=["disabled"],$h=["disabled"],Wh={key:0,class:"card"},Qh={key:0,class:"mb-4"},Kh={class:"flex gap-3"},zh=["disabled"],Gh=["disabled"],Yh={key:1,class:"flex justify-center items-center py-8"},Jh={key:2,class:"text-center py-8"},Xh={key:3,class:"text-center py-8"},Zh={key:4,class:"space-y-3"},ep={class:"flex justify-between items-center"},tp={class:"flex items-center space-x-4"},sp={class:"relative w-12 h-12"},rp=["src","alt","onMouseenter"],np={key:1,class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},op={class:"min-h-[2rem] flex flex-col justify-center"},ip={class:"font-medium text-gray-900"},ap={class:"text-xs text-gray-500"},cp={class:"flex items-center space-x-4"},lp={class:"w-20 text-right"},up={class:"text-sm font-medium text-gray-900"},dp={class:"w-20 text-right"},fp={class:"text-sm font-medium text-gray-900"},hp={class:"w-20 text-right"},pp={class:"text-sm font-bold text-gray-900"},mp={key:1,class:"card"},gp={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},yp={class:"text-2xl font-bold text-gray-900"},_p={class:"space-y-2"},bp={class:"flex justify-between text-sm"},vp={class:"font-medium"},xp={key:0,class:"flex justify-between text-sm"},wp={class:"font-medium"},Sp={class:"mt-6 border-t pt-6"},Ep={key:0},kp={class:"bg-green-50 border border-green-200 rounded-lg p-4"},Pp={class:"flex items-start justify-between"},Cp={class:"ml-3 flex-1"},Ip={class:"mt-2 text-sm text-green-700"},Ap={class:"mt-1 text-xs"},Tp={key:0},Dp={class:"ml-3"},Rp={key:0,class:"mt-6 border-t pt-6"},Lp={class:"bg-red-50 border border-red-200 rounded-lg p-4"},Np={class:"flex"},Op={class:"ml-3 flex-1"},Fp={class:"mt-2 text-sm text-red-700"},qp={class:"mt-3"},Mp=["disabled"],Bp={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-red-700",fill:"none",viewBox:"0 0 24 24"},jp={class:"card"},Up={class:"flex justify-end"},Hp={class:"w-80 space-y-2"},Vp={class:"flex justify-between"},$p={class:"font-medium"},Wp={class:"flex justify-between"},Qp={class:"font-medium"},Kp={class:"flex justify-between"},zp={class:"font-medium"},Gp={class:"border-t pt-2"},Yp={class:"flex justify-between"},Jp={class:"text-sm font-medium text-gray-900"},Xp={class:"flex justify-between"},Zp={class:"text-lg font-bold text-gray-900"},em={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},tm={class:"relative bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden"},sm={class:"flex items-center justify-between p-4 border-b border-gray-200"},rm={class:"p-4 overflow-auto max-h-[calc(90vh-160px)] space-y-6"},nm={class:"border border-gray-200 rounded-lg p-4"},om={class:"flex items-start justify-between"},im={class:"text-base font-semibold text-gray-900"},am={class:"text-sm text-gray-700 mt-1"},cm={class:"text-sm text-gray-700 mt-1 flex flex-wrap gap-4"},lm={key:0},um={key:1},dm={key:2},fm={key:0,class:"text-xs text-gray-600 mt-1"},hm={key:0},pm={key:1},mm={class:"text-right text-sm text-gray-700"},gm={key:0},ym={key:1},_m={key:2},bm={key:0,class:"border border-gray-200 rounded-lg p-4"},vm={class:"overflow-x-auto"},xm={class:"min-w-full text-sm"},wm={class:"py-2 pr-4 text-gray-800"},Sm={class:"py-2 pr-4 text-gray-800"},Em={class:"py-2 pr-4 text-gray-800"},km={class:"py-2 pr-4 text-gray-800"},Pm={class:"py-2 pr-4 text-gray-800"},Cm={key:0,class:"mt-2"},Im={class:"text-xs text-gray-800 whitespace-pre-wrap break-words"},Am={class:"p-4 border-t border-gray-200 flex justify-end"},Tm={key:3,class:"fixed inset-0 z-50 flex items-center justify-center"},Dm={class:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4"},Rm={class:"flex items-center justify-between p-4 border-b border-gray-200"},Lm={class:"p-4 space-y-3"},Nm={class:"p-4 border-t border-gray-200 flex justify-end gap-2"},Om=["disabled"],Fm=["src","alt"];function qm(e,t,s,r,n,o){var a,c,d,u,h,b,y,D,F,$,U,K,G,q,re,Ue,Ae,He,Ct,Ke,pt;const i=Nt("AddProductModal");return m(),g("div",pf,[l("div",mf,[l("div",gf,[l("button",{onClick:t[0]||(t[0]=x=>e.$emit("back")),class:"btn btn-secondary"}," Back to Quotes "),l("div",yf,[l("h2",_f,_(s.quote.name||"Quote #"+(s.quote.number||"")),1),o.isDraft?(m(),g("button",{key:0,onClick:t[1]||(t[1]=(...x)=>o.openNameDialog&&o.openNameDialog(...x)),class:"text-gray-500 hover:text-gray-700",title:"Edit quote name"},t[31]||(t[31]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5M18.5 2.5a2.121 2.121 0 113 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]))):P("",!0)])]),l("div",bf,[s.quote.status==="Draft"||!s.quote.status?(m(),g("button",{key:0,onClick:t[2]||(t[2]=(...x)=>o.submitQuote&&o.submitQuote(...x)),class:ae(["btn bg-green-600 hover:bg-green-700 text-white",{"opacity-50 cursor-not-allowed":o.isSubmitDisabled}]),disabled:o.isSubmitDisabled},[n.submittingQuote?(m(),g("span",xf)):P("",!0),he(" "+_(n.submittingQuote?"Submitting...":"Submit Quote"),1)],10,vf)):P("",!0),o.isDraft?(m(),g("button",{key:1,onClick:t[3]||(t[3]=(...x)=>o.deleteQuote&&o.deleteQuote(...x)),class:"btn btn-danger"}," Delete Quote ")):P("",!0)])]),l("div",wf,[l("div",Sf,[l("div",null,[t[32]||(t[32]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quote Number",-1)),l("p",Ef,_(s.quote.number),1)]),l("div",null,[t[33]||(t[33]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),l("div",kf,[l("span",{class:ae(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.quote.status==="Submitted"?"bg-green-100 text-green-800":s.quote.status==="Approved"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},_(o.formatQuoteStatus(s.quote.status)),3)])]),l("div",null,[t[34]||(t[34]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Created By",-1)),l("p",Pf,_(s.quote.createdByName||""),1)]),l("div",null,[t[35]||(t[35]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Updated",-1)),l("p",Cf,_(o.formatDate(s.quote.updatedAt)),1)]),o.isSubmitted||o.isApproved?(m(),g(ne,{key:0},[l("div",null,[t[36]||(t[36]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Submitted By",-1)),l("p",If,_(s.quote.submittedByName||""),1)]),l("div",null,[t[37]||(t[37]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Submitted At",-1)),l("p",Af,_(s.quote.submittedAt?o.formatDate(s.quote.submittedAt):""),1)]),l("div",null,[t[38]||(t[38]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),l("p",Tf,_(s.quote.approvedByName||""),1)]),l("div",null,[t[39]||(t[39]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved At",-1)),l("p",Df,_(s.quote.approvedAt?o.formatDate(s.quote.approvedAt):""),1)])],64)):P("",!0)])]),l("div",Rf,[l("div",Lf,[l("label",Nf,[t[40]||(t[40]=he("Delivery Address ",-1)),n.productsReadOnly?P("",!0):(m(),g("span",Of,"*"))]),!n.productsReadOnly&&n.addressSubmitAttempted&&!n.selectedAddressId?(m(),g("span",Ff,"Address is required")):P("",!0)]),l("div",qf,[l("div",Mf,[n.loadingAddresses?(m(),g("div",Bf,"Loading addresses...")):n.selectedAddressId?(m(),g("div",{key:2,class:ae(["rounded-lg border border-gray-200 p-4 bg-white transition w-full",{"cursor-pointer hover:border-blue-400":!n.productsReadOnly&&!n.loadingAddresses,"cursor-not-allowed":n.productsReadOnly||n.loadingAddresses}]),role:"button",tabindex:"0",onClick:t[6]||(t[6]=(...x)=>o.openAddressDialog&&o.openAddressDialog(...x)),onKeydown:t[7]||(t[7]=di((...x)=>o.openAddressDialog&&o.openAddressDialog(...x),["enter"]))},[l("div",jf,[l("div",Uf,[l("div",Hf,_(o.selectedAddress.name),1),o.selectedAddress.organisation?(m(),g("div",Vf,_(o.selectedAddress.organisation),1)):P("",!0),o.selectedAddress.contactPerson||o.selectedAddress.contactPhone||o.selectedAddress.contactEmail?(m(),g("div",$f,[o.selectedAddress.contactPerson?(m(),g("p",Wf,"Contact: "+_(o.selectedAddress.contactPerson),1)):P("",!0),o.selectedAddress.contactPhone?(m(),g("p",Qf,"Phone: "+_(o.selectedAddress.contactPhone),1)):P("",!0),o.selectedAddress.contactEmail?(m(),g("p",Kf,"Email: "+_(o.selectedAddress.contactEmail),1)):P("",!0)])):P("",!0)]),l("div",zf,[l("div",Gf,_(o.selectedAddress.addressLine1),1),o.selectedAddress.addressLine2?(m(),g("div",Yf,_(o.selectedAddress.addressLine2),1)):P("",!0),l("div",Jf,_(o.selectedAddress.suburb)+", "+_(o.selectedAddress.city)+", "+_(o.selectedAddress.province)+" "+_(o.selectedAddress.postalCode),1),o.selectedAddress.deliveryNotes?(m(),g("div",Xf,_(o.selectedAddress.deliveryNotes),1)):P("",!0)])])],34)):(m(),g("div",{key:1,class:ae(["rounded-lg border border-dashed border-gray-300 p-4 text-sm text-gray-600 transition",{"cursor-pointer hover:border-blue-400":!n.productsReadOnly&&!n.loadingAddresses,"cursor-not-allowed":n.productsReadOnly||n.loadingAddresses}]),role:"button",tabindex:"0",onClick:t[4]||(t[4]=(...x)=>o.openAddressDialog&&o.openAddressDialog(...x)),onKeydown:t[5]||(t[5]=di((...x)=>o.openAddressDialog&&o.openAddressDialog(...x),["enter"]))}," No address selected ",34))])]),n.showAddressDialog?(m(),g("div",Zf,[l("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[8]||(t[8]=(...x)=>o.closeAddressDialog&&o.closeAddressDialog(...x))}),l("div",eh,[l("div",th,[t[42]||(t[42]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Select Delivery Address",-1)),l("button",{onClick:t[9]||(t[9]=(...x)=>o.closeAddressDialog&&o.closeAddressDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[41]||(t[41]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("div",sh,[n.deliveryAddresses.length===0?(m(),g("div",rh,"No delivery addresses found.")):(m(),g("div",nh,[(m(!0),g(ne,null,Fe(n.deliveryAddresses,x=>(m(),g("div",{key:x.id,class:"border rounded-lg p-4 hover:border-blue-500 hover:shadow cursor-pointer transition w-full",onClick:we=>o.selectAddress(x.id)},[l("div",ih,[l("div",ah,[l("div",ch,_(x.name),1),x.organisation?(m(),g("div",lh,_(x.organisation),1)):P("",!0),x.contactPerson||x.contactPhone||x.contactEmail?(m(),g("div",uh,[x.contactPerson?(m(),g("p",dh,"Contact: "+_(x.contactPerson),1)):P("",!0),x.contactPhone?(m(),g("p",fh,"Phone: "+_(x.contactPhone),1)):P("",!0),x.contactEmail?(m(),g("p",hh,"Email: "+_(x.contactEmail),1)):P("",!0)])):P("",!0)]),l("div",ph,[l("div",mh,_(x.addressLine1),1),x.addressLine2?(m(),g("div",gh,_(x.addressLine2),1)):P("",!0),l("div",yh,_(x.suburb)+", "+_(x.city)+", "+_(x.province)+" "+_(x.postalCode),1),x.deliveryNotes?(m(),g("div",_h,_(x.deliveryNotes),1)):P("",!0)])])],8,oh))),128))]))]),l("div",bh,[l("button",{onClick:t[10]||(t[10]=(...x)=>o.closeAddressDialog&&o.closeAddressDialog(...x)),class:"btn btn-secondary"},"Close")])])])):P("",!0)]),l("div",vh,[n.loadingProducts?(m(),g("div",xh,t[43]||(t[43]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.quoteProducts.length===0?(m(),g("div",wh,t[44]||(t[44]=[Ce('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21h18"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21v-4h6"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7l3 3-3 3-3-3 3-3z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 6l3 3"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10h3"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products added</h4><p class="text-gray-600">Add products to this quote to get started.</p>',3)]))):(m(),g("div",Sh,[t[47]||(t[47]=Ce('<div class="flex justify-between items-center px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg"><div class="flex items-center space-x-4"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Product</h4></div></div><div class="flex items-center space-x-4"><div class="w-12 text-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide"></h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Quantity</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Total</h4></div></div></div>',1)),(m(!0),g(ne,null,Fe(n.quoteProducts,x=>{var we,nt,mt,oe,W;return m(),g("div",{key:x.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[l("div",Eh,[l("div",kh,[l("div",Ph,[(nt=(we=n.productDetails[x.productId])==null?void 0:we.image)!=null&&nt.url?(m(),g("img",{key:0,src:n.productDetails[x.productId].image.url,alt:(mt=n.productDetails[x.productId])==null?void 0:mt.name,class:"w-12 h-12 object-contain rounded-lg cursor-pointer bg-white",onMouseenter:H=>o.showImagePreview(x.productId,H),onMousemove:t[11]||(t[11]=H=>o.updateImagePreviewPosition(H)),onMouseleave:t[12]||(t[12]=(...H)=>o.hideImagePreview&&o.hideImagePreview(...H))},null,40,Ch)):(m(),g("div",Ih,t[45]||(t[45]=[l("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),l("div",Ah,[l("h4",Th,_(((oe=n.productDetails[x.productId])==null?void 0:oe.name)||"Product"),1),l("p",Dh,"SKU: "+_(((W=n.productDetails[x.productId])==null?void 0:W.sku)||"N/A"),1)])]),l("div",Rh,[l("div",Lh,[n.productsReadOnly?P("",!0):(m(),g("button",{key:0,onClick:H=>o.removeProduct(x.id),class:"text-red-600 hover:text-red-800 p-2 rounded",title:"Remove product"},t[46]||(t[46]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Nh))]),l("div",Oh,[n.productsReadOnly?(m(),g("p",qh,_(x.quantity),1)):(m(),g("input",{key:0,type:"number",value:x.quantity,onChange:H=>o.updateProductQuantity(x.id,H.target.value),class:"input w-16 text-sm text-center",min:"0",step:"1"},null,40,Fh))]),l("div",Mh,[l("p",Bh,_(o.formatCurrency(x.price)),1)]),l("div",jh,[l("p",Uh,_(o.formatCurrency(x.total)),1)])])])])}),128))])),o.isDraft?(m(),g("div",Hh,[l("button",{onClick:t[13]||(t[13]=x=>n.showAddProductModal=!0),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.productsReadOnly}]),disabled:n.productsReadOnly}," Add Product ",10,Vh),l("button",{onClick:t[14]||(t[14]=(...x)=>o.toggleProductsReadOnly&&o.toggleProductsReadOnly(...x)),class:ae(["btn btn-secondary",{"opacity-50 cursor-not-allowed":!n.productsReadOnly&&(n.quoteProducts.length===0||!n.selectedAddressId)}]),disabled:!n.productsReadOnly&&(n.quoteProducts.length===0||!n.selectedAddressId)},_(n.productsReadOnly?"Edit Products":"Continue with Shipping"),11,$h)])):P("",!0)]),n.productsReadOnly?(m(),g("div",Wh,[o.isDraft?(m(),g("div",Qh,[l("div",Kh,[l("button",{type:"button",onClick:t[15]||(t[15]=x=>o.selectBoxType("PlasticEquipment")),disabled:n.loading,class:ae(["flex items-center gap-3 px-3 py-2 rounded-md border transition",n.selectedBoxType==="PlasticEquipment"?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"])},t[48]||(t[48]=[Ce('<svg class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="4" y="4" width="16" height="12" rx="2" ry="2" stroke-width="2"></rect><path d="M4 12h16" stroke-width="2"></path></svg><div class="text-left"><div class="text-sm font-medium text-gray-900">Plastic Equipment</div><div class="text-xs text-gray-500">Plastic tote box</div></div>',2)]),10,zh),l("button",{type:"button",onClick:t[16]||(t[16]=x=>o.selectBoxType("Cardboard")),disabled:n.loading,class:ae(["flex items-center gap-3 px-3 py-2 rounded-md border transition",n.selectedBoxType==="Cardboard"?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"])},t[49]||(t[49]=[Ce('<svg class="w-5 h-5 text-yellow-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 7l9-4 9 4-9 4-9-4z" stroke-width="2"></path><path d="M3 7v10l9 4 9-4V7" stroke-width="2"></path></svg><div class="text-left"><div class="text-sm font-medium text-gray-900">Cardboard</div><div class="text-xs text-gray-500">Plain cardboard box</div></div>',2)]),10,Gh)])])):P("",!0),n.loadingEquipmentBoxes?(m(),g("div",Yh,t[50]||(t[50]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.selectedBoxType?n.equipmentBoxes.length===0?(m(),g("div",Xh,t[52]||(t[52]=[Ce('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No equipment boxes needed</h4><p class="text-gray-600">The current products don&#39;t require any equipment boxes.</p>',3)]))):(m(),g("div",Zh,[t[54]||(t[54]=Ce('<div class="flex justify-between items-center px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg"><div class="flex items-center space-x-4"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Packaging</h4></div></div><div class="flex items-center space-x-4"><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Quantity</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Total</h4></div></div></div>',1)),(m(!0),g(ne,null,Fe(n.equipmentBoxes,x=>{var we,nt,mt,oe;return m(),g("div",{key:x.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[l("div",ep,[l("div",tp,[l("div",sp,[(nt=(we=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:we.image)!=null&&nt.url?(m(),g("img",{key:0,src:n.equipmentBoxDetails[x.equipmentBoxId].image.url,alt:((mt=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:mt.name)||"Equipment Box",class:"w-12 h-12 object-contain rounded-lg cursor-pointer bg-white",onMouseenter:W=>o.showBoxImagePreview(x.equipmentBoxId,W),onMousemove:t[17]||(t[17]=W=>o.updateImagePreviewPosition(W)),onMouseleave:t[18]||(t[18]=(...W)=>o.hideImagePreview&&o.hideImagePreview(...W))},null,40,rp)):(m(),g("div",np,t[53]||(t[53]=[l("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)])))]),l("div",op,[l("h4",ip,_(((oe=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:oe.name)||`Equipment Box ${x.equipmentBoxId}`),1),l("p",ap," Dimensions: "+_(o.formatDimensions(n.equipmentBoxDetails[x.equipmentBoxId])),1)])]),l("div",cp,[l("div",lp,[l("p",up,_(x.quantity),1)]),l("div",dp,[l("p",fp,_(o.formatCurrency(x.price)),1)]),l("div",hp,[l("p",pp,_(o.formatCurrency(x.total)),1)])])])])}),128))])):(m(),g("div",Jh,t[51]||(t[51]=[Ce('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No equipment boxes selected</h4><p class="text-gray-600">Select a box type to automatically calculate packaging requirements.</p>',3)])))])):P("",!0),n.productsReadOnly?(m(),g("div",mp,[l("div",gp,[l("div",null,[t[55]||(t[55]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Total Shipment Weight",-1)),l("div",yp,_(o.formatWeight(o.totalShipmentWeight)),1),t[56]||(t[56]=l("p",{class:"text-sm text-gray-600 mt-1"}," Combined weight of all products and equipment boxes ",-1))]),l("div",null,[t[59]||(t[59]=l("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Weight Breakdown",-1)),l("div",_p,[l("div",bp,[t[57]||(t[57]=l("span",{class:"text-gray-600"},"Products",-1)),l("span",vp,_(o.formatWeight(o.productsWeight)),1)]),n.selectedBoxType&&n.equipmentBoxes.length>0?(m(),g("div",xp,[t[58]||(t[58]=l("span",{class:"text-gray-600"},"Equipment Boxes",-1)),l("span",wp,_(o.formatWeight(o.equipmentBoxesWeight)),1)])):P("",!0)])])]),l("div",Sp,[n.deliveryRates?(m(),g("div",Ep,[l("div",kp,[l("div",Pp,[t[61]||(t[61]=l("div",{class:"flex-shrink-0"},[l("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),l("div",Cp,[t[60]||(t[60]=l("h3",{class:"text-sm font-medium text-green-800"},"The Courier Guy delivery quote",-1)),l("div",Ip,[l("p",null,[l("strong",null,_(n.deliveryRates.selectedDeliveryService),1),he(" - ZAR "+_(o.formatCurrency(n.deliveryRates.selectedDeliveryFees)),1)]),l("p",Ap,[he(_(n.deliveryRates.totalParcels)+" parcels  Actual Weight "+_(((a=n.deliveryRates.totalWeightKg)==null?void 0:a.toFixed(2))||"0.00")+" kg ",1),n.deliveryRates.chargedWeight?(m(),g("span",Tp,"  Charged Weight "+_(n.deliveryRates.chargedWeight.toFixed(0))+" kg ",1)):P("",!0)])])]),l("div",Dp,[o.hasDeliveryInfo?(m(),g("button",{key:0,class:"text-xs text-green-700 hover:text-green-900 underline",onClick:t[19]||(t[19]=(...x)=>o.openDeliveryInfoDialog&&o.openDeliveryInfoDialog(...x))}," View details ")):P("",!0)])])])])):P("",!0)]),n.deliveryRatesError?(m(),g("div",Rp,[l("div",Lp,[l("div",Np,[t[64]||(t[64]=l("div",{class:"flex-shrink-0"},[l("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),l("div",Op,[t[63]||(t[63]=l("h3",{class:"text-sm font-medium text-red-800"},"Failed to calculate delivery rates",-1)),l("div",Fp,[l("p",null,_(n.deliveryRatesError),1)]),l("div",qp,[l("button",{onClick:t[20]||(t[20]=(...x)=>o.calculateDeliveryRates&&o.calculateDeliveryRates(...x)),disabled:n.loadingDeliveryRates,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[n.loadingDeliveryRates?(m(),g("svg",Bp,t[62]||(t[62]=[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):P("",!0),he(" "+_(n.loadingDeliveryRates?"Retrying...":"Retry"),1)],8,Mp)])])])])])):P("",!0)])):P("",!0),l("div",jp,[l("div",Up,[l("div",Hp,[l("div",Vp,[t[65]||(t[65]=l("span",{class:"text-gray-600"},"Products",-1)),l("span",$p,_(o.formatCurrency(s.quote.totalProductPrice||0)),1)]),l("div",Wp,[t[66]||(t[66]=l("span",{class:"text-gray-600"},"Equipment Boxes",-1)),l("span",Qp,_(s.quote.totalEquipmentBoxPrice&&s.quote.totalEquipmentBoxPrice>0?o.formatCurrency(s.quote.totalEquipmentBoxPrice):"0.00"),1)]),l("div",Kp,[t[67]||(t[67]=l("span",{class:"text-gray-600"},"Delivery",-1)),l("span",zp,_(s.quote.totalDeliveryFees&&s.quote.totalDeliveryFees>0?o.formatCurrency(s.quote.totalDeliveryFees):"0.00"),1)]),l("div",Gp,[l("div",Yp,[t[68]||(t[68]=l("span",{class:"text-sm text-gray-600"},"Total excl. VAT",-1)),l("span",Jp,"ZAR "+_(o.formatCurrency(o.grandTotal)),1)]),l("div",Xp,[t[69]||(t[69]=l("span",{class:"text-lg font-semibold"},"Total incl. VAT",-1)),l("span",Zp,"ZAR "+_(o.formatCurrency(o.grandTotalInclVat)),1)])])])])]),n.showDeliveryInfoDialog?(m(),g("div",em,[l("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[21]||(t[21]=(...x)=>o.closeDeliveryInfoDialog&&o.closeDeliveryInfoDialog(...x))}),l("div",tm,[l("div",sm,[t[71]||(t[71]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Delivery details",-1)),l("button",{onClick:t[22]||(t[22]=(...x)=>o.closeDeliveryInfoDialog&&o.closeDeliveryInfoDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[70]||(t[70]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("div",rm,[l("div",nm,[l("div",om,[l("div",null,[l("div",im,_(s.quote.deliveryService||((d=(c=o.parsedDelivery.selectedRate)==null?void 0:c.service_level)==null?void 0:d.name)||"Selected service"),1),l("div",am,"Price: ZAR "+_(o.formatCurrency(s.quote.totalDeliveryFees||((u=o.parsedDelivery.selectedRate)==null?void 0:u.rate)||0)),1),l("div",cm,[s.quote.chargedWeightInGrams||(h=o.parsedDelivery.selectedRate)!=null&&h.charged_weight?(m(),g("span",lm,"Charged: "+_(o.formatChargedKg)+" kg",1)):P("",!0),(b=o.parsedDelivery.selectedRate)!=null&&b.actual_weight?(m(),g("span",um,"Actual: "+_(o.parsedDelivery.selectedRate.actual_weight.toFixed(2))+" kg",1)):P("",!0),(y=o.parsedDelivery.selectedRate)!=null&&y.volumetric_weight?(m(),g("span",dm,"Volumetric: "+_(o.parsedDelivery.selectedRate.volumetric_weight.toFixed(2))+" kg",1)):P("",!0)]),(F=(D=o.parsedDelivery.selectedRate)==null?void 0:D.service_level)!=null&&F.delivery_date_from||(U=($=o.parsedDelivery.selectedRate)==null?void 0:$.service_level)!=null&&U.delivery_date_to?(m(),g("div",fm,[t[72]||(t[72]=he(" Delivery window: ",-1)),(G=(K=o.parsedDelivery.selectedRate)==null?void 0:K.service_level)!=null&&G.delivery_date_from?(m(),g("span",hm,_(o.formatDeliveryDate(o.parsedDelivery.selectedRate.service_level.delivery_date_from)),1)):P("",!0),(re=(q=o.parsedDelivery.selectedRate)==null?void 0:q.service_level)!=null&&re.delivery_date_to?(m(),g("span",pm," - "+_(o.formatDeliveryDate(o.parsedDelivery.selectedRate.service_level.delivery_date_to)),1)):P("",!0)])):P("",!0)]),l("div",mm,[(Ue=o.parsedDelivery.selectedRate)!=null&&Ue.rate_excluding_vat?(m(),g("div",gm,"Excl. VAT: ZAR "+_(o.formatCurrency(o.parsedDelivery.selectedRate.rate_excluding_vat)),1)):P("",!0),(He=(Ae=o.parsedDelivery.selectedRate)==null?void 0:Ae.base_rate)!=null&&He.vat?(m(),g("div",ym,"VAT: ZAR "+_(o.formatCurrency(o.parsedDelivery.selectedRate.base_rate.vat)),1)):P("",!0),(Ke=(Ct=o.parsedDelivery.selectedRate)==null?void 0:Ct.base_rate)!=null&&Ke.vat_percentage?(m(),g("div",_m,"VAT %: "+_(o.parsedDelivery.selectedRate.base_rate.vat_percentage)+"%",1)):P("",!0)])])]),o.parsedDelivery.otherRates.length?(m(),g("div",bm,[t[74]||(t[74]=l("div",{class:"text-sm font-medium text-gray-900 mb-3"},"Available services",-1)),l("div",vm,[l("table",xm,[t[73]||(t[73]=l("thead",null,[l("tr",{class:"text-left text-gray-600"},[l("th",{class:"py-2 pr-4"},"Service"),l("th",{class:"py-2 pr-4"},"Price (ZAR)"),l("th",{class:"py-2 pr-4"},"Charged (kg)"),l("th",{class:"py-2 pr-4"},"Actual (kg)"),l("th",{class:"py-2 pr-4"},"Volumetric (kg)")])],-1)),l("tbody",null,[(m(!0),g(ne,null,Fe(o.parsedDelivery.otherRates,x=>{var we;return m(),g("tr",{key:x._key,class:"border-t"},[l("td",wm,_(((we=x.service_level)==null?void 0:we.name)||"-"),1),l("td",Sm,_(o.formatCurrency(x.rate||0)),1),l("td",Em,_(x.charged_weight!=null?x.charged_weight.toFixed(0):"-"),1),l("td",km,_(x.actual_weight!=null?x.actual_weight.toFixed(2):"-"),1),l("td",Pm,_(x.volumetric_weight!=null?x.volumetric_weight.toFixed(2):"-"),1)])}),128))])])])])):P("",!0),l("div",null,[l("button",{class:"text-xs text-gray-600 hover:text-gray-800 underline",onClick:t[23]||(t[23]=x=>n.showRawJson=!n.showRawJson)},_(n.showRawJson?"Hide raw JSON":"Show raw JSON"),1),n.showRawJson?(m(),g("div",Cm,[l("pre",Im,_(o.formattedDeliveryInfo),1)])):P("",!0)])]),l("div",Am,[l("button",{onClick:t[24]||(t[24]=(...x)=>o.closeDeliveryInfoDialog&&o.closeDeliveryInfoDialog(...x)),class:"btn btn-secondary"},"Close")])])])):P("",!0),n.showNameDialog?(m(),g("div",Tm,[l("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[25]||(t[25]=(...x)=>o.closeNameDialog&&o.closeNameDialog(...x))}),l("div",Dm,[l("div",Rm,[t[76]||(t[76]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Edit quote name",-1)),l("button",{onClick:t[26]||(t[26]=(...x)=>o.closeNameDialog&&o.closeNameDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[75]||(t[75]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("div",Lm,[t[77]||(t[77]=l("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),ue(l("input",{"onUpdate:modelValue":t[27]||(t[27]=x=>n.editName=x),type:"text",class:"input",placeholder:"e.g. Term 3, 2025"},null,512),[[de,n.editName]])]),l("div",Nm,[l("button",{onClick:t[28]||(t[28]=(...x)=>o.closeNameDialog&&o.closeNameDialog(...x)),class:"btn btn-secondary"},"Cancel"),l("button",{onClick:t[29]||(t[29]=(...x)=>o.saveName&&o.saveName(...x)),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.savingName||!n.editName.trim()}]),disabled:n.savingName||!n.editName.trim()},_(n.savingName?"Saving...":"Save"),11,Om)])])])):P("",!0),n.imagePreview.show?(m(),g("div",{key:4,style:qs({position:"fixed",top:n.imagePreview.y+"px",left:n.imagePreview.x+"px",zIndex:1e3,pointerEvents:"none"}),class:"bg-white border border-gray-300 rounded-lg shadow-lg p-2"},[l("img",{src:n.imagePreview.src,alt:n.imagePreview.alt,class:"w-60 h-60 object-contain rounded bg-white"},null,8,Fm)],4)):P("",!0),n.showAddProductModal?(m(),ks(i,{key:5,"quote-id":s.quote.id,"price-list-id":(pt=n.customerPriceList)==null?void 0:pt.priceListId,"existing-quote-products":n.quoteProducts,onClose:t[30]||(t[30]=x=>n.showAddProductModal=!1),onProductAdded:o.handleProductAdded},null,8,["quote-id","price-list-id","existing-quote-products","onProductAdded"])):P("",!0)])}const Mm=kt(hf,[["render",qm]]),Bm={name:"PriceListView",props:{priceList:{type:Object,required:!0}},data(){return{productPrices:[],productDetails:{},loading:!0,error:null,brands:[],selectedBrandId:"ALL",showChangeLog:!1,changeLog:[],imagePreview:{show:!1,src:"",alt:"",x:0,y:0}}},async mounted(){await Promise.all([this.loadProductPrices(),this.loadBrands()]),await this.loadProductDetails()},methods:{async openChangeLog(){try{const e=this.priceList.priceListId||this.priceList.id,{priceListService:t}=await Pe(async()=>{const{priceListService:n}=await Promise.resolve().then(()=>uo);return{priceListService:n}},void 0),s=await t.listPriceListChangeLog(e),r=s.filter(n=>!n.createdByName&&(n.createdById||n.createdBy));if(r.length)try{const{userService:n}=await Pe(async()=>{const{userService:a}=await import("./userService-D2lqep69.js");return{userService:a}},[]),o=[...new Set(r.map(a=>a.createdById||a.createdBy))],i=new Map;await Promise.all(o.map(async a=>{try{const c=await n.getUser(a);i.set(a,c)}catch(c){console.warn(`Failed to fetch user ${a}:`,c)}})),r.forEach(a=>{const c=a.createdById||a.createdBy,d=i.get(c);d&&(a.createdByName=[d.firstName,d.lastName].filter(Boolean).join(" ")||d.email||d.id)})}catch(n){console.warn("Failed to hydrate creator names",n)}this.changeLog=s,this.showChangeLog=!0}catch(e){alert("Failed to load change log: "+(e.message||"Unknown error"))}},closeChangeLog(){this.showChangeLog=!1},async loadBrands(){try{const e=await Zt.listBrands();this.brands=e}catch(e){console.error("Failed to load brands",e),this.brands=[]}},async loadProductPrices(){try{this.loading=!0,this.error=null;const e=this.priceList.priceListId||this.priceList.id;this.productPrices=await Zt.getProductPricesByPriceList(e),console.log("Product prices loaded:",this.productPrices)}catch(e){console.error("Failed to load product prices:",e),this.error=e.message||"Failed to load product prices"}finally{this.loading=!1}},async loadProductDetails(){var e;try{for(const t of this.productPrices)if(!this.productDetails[t.productId])try{const s=await Zt.getProduct(t.productId);(e=s.image)!=null&&e.url&&(s.image.url=await In.get(t.productId,s.image.url)),this.productDetails[t.productId]=s}catch(s){console.error(`Failed to load product ${t.productId}:`,s)}}catch(t){console.error("Failed to load product details:",t)}},formatDate(e){if(!e)return"";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`},formatDateTime(e){if(!e)return"";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear(),o=t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});return`${s} ${r} ${n} ${o}`},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},showImagePreview(e,t){var r;const s=this.productDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let c=t.clientX+10,d=t.clientY+10;c+250>window.innerWidth&&(c=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Product",x:c,y:d}}},updateImagePreviewPosition(e){if(this.imagePreview.show){let o=e.clientX+10,i=e.clientY+10;o+250>window.innerWidth&&(o=e.clientX-250-10),i+250>window.innerHeight&&(i=e.clientY-250-10),this.imagePreview.x=o,this.imagePreview.y=i}},hideImagePreview(){this.imagePreview.show=!1}},computed:{filteredProductPrices(){return this.selectedBrandId==="ALL"?this.productPrices:this.productPrices.filter(e=>{const t=this.productDetails[e.productId];return((t==null?void 0:t.brandId)||e.brandId||e.productBrandId)===this.selectedBrandId})}}},jm={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},Um={class:"flex justify-between items-start mb-6"},Hm={class:"text-xl font-semibold text-gray-900 mb-1"},Vm={class:"text-sm text-gray-600"},$m={class:"text-sm text-gray-600"},Wm={class:"flex items-center gap-2"},Qm={key:0,class:"flex justify-center items-center py-8"},Km={key:1,class:"text-center py-8"},zm={class:"text-gray-600"},Gm={key:2,class:"text-center py-8"},Ym={key:3},Jm={class:"mb-4 flex flex-wrap items-center gap-2"},Xm=["onClick"],Zm={class:"space-y-2"},eg={class:"flex justify-between items-center"},tg={class:"flex items-center space-x-4"},sg={class:"relative w-12 h-12"},rg=["src","alt","onMouseenter"],ng={key:1,class:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center"},og={class:"min-h-[2rem] flex flex-col justify-center"},ig={class:"font-medium text-gray-900"},ag={class:"text-sm text-gray-600"},cg={class:"flex items-center space-x-8"},lg={class:"w-24 text-right"},ug={class:"text-sm font-medium text-gray-900"},dg={class:"w-24 text-right whitespace-nowrap"},fg={class:"text-sm font-bold text-gray-900"},hg=["src","alt"],pg={key:5,class:"fixed inset-0 z-50 flex items-center justify-center"},mg={class:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden"},gg={class:"flex items-center justify-between p-4 border-b border-gray-200"},yg={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},_g={key:0,class:"text-sm text-gray-600"},bg={key:1,class:"space-y-3"},vg={class:"flex justify-between text-sm"},xg={key:0,class:"font-medium text-gray-900"},wg={class:"text-gray-600"},Sg={key:0,class:"text-sm text-gray-700 mt-1"},Eg={key:1,class:"text-xs text-gray-600 mt-1 whitespace-pre-wrap"},kg={class:"p-4 border-t border-gray-200 flex justify-end"},Pg={key:6,class:"fixed inset-0 z-50 flex items-center justify-center"},Cg={class:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden"},Ig={class:"flex items-center justify-between p-4 border-b border-gray-200"},Ag={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},Tg={key:0,class:"text-sm text-gray-600"},Dg={key:1,class:"space-y-3"},Rg={class:"flex justify-between text-sm"},Lg={class:"font-medium text-gray-900"},Ng={class:"text-gray-600"},Og={key:0,class:"text-sm text-gray-700 mt-1"},Fg={key:1,class:"text-xs text-gray-600 mt-1 whitespace-pre-wrap"},qg={class:"p-4 border-t border-gray-200 flex justify-end"};function Mg(e,t,s,r,n,o){return m(),g("div",jm,[l("div",Um,[l("div",null,[l("h3",Hm,_(s.priceList.name),1),l("p",Vm," Created: "+_(o.formatDate(s.priceList.createdAt)),1),l("p",$m,_(n.productPrices.length)+" products ",1)]),l("div",Wm,[l("button",{onClick:t[0]||(t[0]=(...i)=>o.openChangeLog&&o.openChangeLog(...i)),class:"btn btn-secondary text-sm",title:"View Change Log"}," Change Log "),l("button",{onClick:t[1]||(t[1]=i=>e.$emit("close")),class:"btn btn-secondary text-sm",title:"Close"},t[11]||(t[11]=[l("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),n.loading?(m(),g("div",Qm,t[12]||(t[12]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",Km,[t[13]||(t[13]=l("div",{class:"text-red-500 mb-4"},[l("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[14]||(t[14]=l("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error loading products",-1)),l("p",zm,_(n.error),1)])):n.productPrices.length===0?(m(),g("div",Gm,t[15]||(t[15]=[Ce('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products found</h4><p class="text-gray-600">This price list doesn&#39;t contain any products.</p>',3)]))):(m(),g("div",Ym,[l("div",Jm,[l("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.selectedBrandId==="ALL"?"bg-gray-800 text-white border-gray-800":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:t[2]||(t[2]=i=>n.selectedBrandId="ALL")}," All ",2),(m(!0),g(ne,null,Fe(n.brands,i=>(m(),g("button",{key:i.id,class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.selectedBrandId===i.id?"bg-brand-navy text-white border-brand-navy":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:a=>n.selectedBrandId=i.id},_(i.name),11,Xm))),128))]),t[17]||(t[17]=Ce('<div class="flex justify-between items-center mb-4 px-4 py-2 bg-gray-50 rounded-lg"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Product</h4></div><div class="flex items-center space-x-8"><div class="w-24 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-24 text-right whitespace-nowrap"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price (incl. VAT)</h4></div></div></div>',1)),l("div",Zm,[(m(!0),g(ne,null,Fe(o.filteredProductPrices,i=>{var a,c,d,u,h;return m(),g("div",{key:i.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[l("div",eg,[l("div",tg,[l("div",sg,[(c=(a=n.productDetails[i.productId])==null?void 0:a.image)!=null&&c.url?(m(),g("img",{key:0,src:n.productDetails[i.productId].image.url,alt:(d=n.productDetails[i.productId])==null?void 0:d.name,class:"w-12 h-12 object-cover rounded-lg cursor-pointer",onMouseenter:b=>o.showImagePreview(i.productId,b),onMousemove:t[3]||(t[3]=b=>o.updateImagePreviewPosition(b)),onMouseleave:t[4]||(t[4]=(...b)=>o.hideImagePreview&&o.hideImagePreview(...b))},null,40,rg)):(m(),g("div",ng,t[16]||(t[16]=[l("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),l("div",og,[l("h4",ig,_(((u=n.productDetails[i.productId])==null?void 0:u.name)||i.productName),1),l("p",ag,"SKU: "+_(((h=n.productDetails[i.productId])==null?void 0:h.sku)||i.productSku),1)])]),l("div",cg,[l("div",lg,[l("p",ug,"ZAR "+_(o.formatCurrency(i.price)),1)]),l("div",dg,[l("p",fg,"ZAR "+_(o.formatCurrency(i.priceInclVat)),1)])])])])}),128))])])),n.imagePreview.show?(m(),g("div",{key:4,style:qs({position:"fixed",top:n.imagePreview.y+"px",left:n.imagePreview.x+"px",zIndex:1e3,pointerEvents:"none"}),class:"bg-white border border-gray-300 rounded-lg shadow-lg p-2"},[l("img",{src:n.imagePreview.src,alt:n.imagePreview.alt,class:"w-60 h-60 object-contain rounded bg-white"},null,8,hg)],4)):P("",!0),n.showChangeLog?(m(),g("div",pg,[l("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[5]||(t[5]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i))}),l("div",mg,[l("div",gg,[t[19]||(t[19]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Price List Change Log",-1)),l("button",{onClick:t[6]||(t[6]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i)),class:"text-gray-400 hover:text-gray-600"},t[18]||(t[18]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("div",yg,[n.changeLog.length?(m(),g("ul",bg,[(m(!0),g(ne,null,Fe(n.changeLog,i=>(m(),g("li",{key:i.id,class:"border rounded p-3"},[l("div",vg,[i.changeType||i.type?(m(),g("span",xg,_(i.changeType||i.type),1)):P("",!0),l("span",wg,_(o.formatDateTime(i.createdAt))+"  "+_(i.createdByName||""),1)]),i.description?(m(),g("div",Sg,_(i.description),1)):i.details?(m(),g("div",Eg,_(JSON.stringify(i.details,null,2)),1)):P("",!0)]))),128))])):(m(),g("div",_g,"No changes recorded."))]),l("div",kg,[l("button",{onClick:t[7]||(t[7]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i)),class:"btn btn-secondary"},"Close")])])])):P("",!0),n.showChangeLog?(m(),g("div",Pg,[l("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[8]||(t[8]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i))}),l("div",Cg,[l("div",Ig,[t[21]||(t[21]=l("h3",{class:"text-lg font-semibold text-gray-900"},"Price List Change Log",-1)),l("button",{onClick:t[9]||(t[9]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i)),class:"text-gray-400 hover:text-gray-600"},t[20]||(t[20]=[l("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),l("div",Ag,[n.changeLog.length?(m(),g("ul",Dg,[(m(!0),g(ne,null,Fe(n.changeLog,i=>(m(),g("li",{key:i.id,class:"border rounded p-3"},[l("div",Rg,[l("span",Lg,_(i.changeType||i.type||"Change"),1),l("span",Ng,_(o.formatDate(i.createdAt)),1)]),i.description?(m(),g("div",Og,_(i.description),1)):i.details?(m(),g("div",Fg,_(JSON.stringify(i.details,null,2)),1)):P("",!0)]))),128))])):(m(),g("div",Tg,"No changes recorded."))]),l("div",qg,[l("button",{onClick:t[10]||(t[10]=(...i)=>o.closeChangeLog&&o.closeChangeLog(...i)),class:"btn btn-secondary"},"Close")])])])):P("",!0)])}const Bg=kt(Bm,[["render",Mg]]),jg={name:"PriceListManager",components:{QuoteDetail:Mm,PriceListView:Bg},props:{customerId:{type:String,required:!0}},data(){return{priceLists:[],quotes:{},loading:!1,error:null,selectedQuote:null,selectedPriceList:null,lastHiddenTime:null,statusFilters:{},searchTerms:{}}},watch:{customerId:{immediate:!0,async handler(e,t){e&&e!==t&&(console.log("Customer ID changed, reloading data:",e),this.selectedQuote=null,this.selectedPriceList=null,this.loading=!0,this.error=null,this.priceLists=[],this.quotes={},await this.loadCustomerPriceLists())}}},async mounted(){this.selectedQuote=null,this.selectedPriceList=null,this.loading=!0,this.error=null,this.priceLists=[],this.quotes={};const e=setTimeout(()=>{this.loading&&(console.error("Loading timeout - forcing loading to false"),this.loading=!1,this.error="Loading timeout - please refresh the page")},1e4);try{console.log("PriceListManager mounted - loading fresh data for customer:",this.customerId),await this.loadCustomerPriceLists()}finally{clearTimeout(e)}document.addEventListener("visibilitychange",this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener("visibilitychange",this.handleVisibilityChange)},methods:{async hydrateCreatorsForList(e){try{const s=(this.quotes[e]||[]).filter(i=>(i.createdById||i.createdBy)&&!i.createdByName);if(s.length===0)return;const{userService:r}=await Pe(async()=>{const{userService:i}=await import("./userService-D2lqep69.js");return{userService:i}},[]),n=[...new Set(s.map(i=>i.createdById||i.createdBy))],o=new Map;await Promise.all(n.map(async i=>{try{const a=await r.getUser(i);o.set(i,a)}catch(a){console.warn(`Failed to fetch user ${i}:`,a)}})),s.forEach(i=>{const a=i.createdById||i.createdBy,c=o.get(a);c&&(i.createdByName=[c.firstName,c.lastName].filter(Boolean).join(" ")||c.email||c.id)}),o.size>0&&(this.quotes={...this.quotes})}catch(t){console.warn("Failed to hydrate creator names",t)}},getStatusCounts(e){const t=this.quotes[e]||[],s={Draft:0,Submitted:0,Approved:0};for(const r of t){const n=r.status||"Draft";n in s&&s[n]++}return{...s,all:t.length}},setStatusFilter(e,t){this.$set?this.$set(this.statusFilters,e,t):this.statusFilters={...this.statusFilters,[e]:t}},getFilteredQuotes(e){const t=this.quotes[e]||[],s=this.statusFilters[e]||"All",r=(this.searchTerms[e]||"").trim().toLowerCase();let n=s==="All"?t:t.filter(o=>(o.status||"Draft")===s);return r&&(n=n.filter(o=>{const i=(o.name||"").toLowerCase(),a=(o.number||"").toString().toLowerCase();return i.includes(r)||a.includes(r)})),n},setSearchTerm(e,t){this.$set?this.$set(this.searchTerms,e,t):this.searchTerms={...this.searchTerms,[e]:t}},handleVisibilityChange(){!document.hidden&&this.lastHiddenTime&&Date.now()-this.lastHiddenTime>3e4&&(console.log("User returned to tab after being away, refreshing data"),this.refreshData()),this.lastHiddenTime=document.hidden?Date.now():null},async refreshData(){console.log("Refreshing all data..."),this.loading=!0,this.error=null;try{await this.loadCustomerPriceLists()}catch(e){console.error("Error refreshing data:",e),this.error="Failed to refresh data"}finally{this.loading=!1}},async loadCustomerPriceLists(){this.loading=!0,this.error=null;try{console.log("Loading customer price lists for customer:",this.customerId);const e=await Cn.getCustomerPriceLists(this.customerId);if(console.log("Customer price lists:",e),!e||e.length===0){console.log("No customer price lists found"),this.priceLists=[],this.loading=!1;return}this.priceLists=await Promise.all(e.map(async t=>({...await Cn.getPriceList(t.priceListId),customerPriceListId:t.id}))),console.log("Price lists loaded:",this.priceLists),await this.loadQuotesForPriceLists()}catch(e){console.error("Error loading customer price lists:",e),this.error=e.message||"Failed to load price lists",this.priceLists=[],this.quotes={}}finally{this.loading=!1}},async loadQuotesForPriceLists(){try{console.log("Loading quotes for price lists...");const{quoteService:e}=await Pe(async()=>{const{quoteService:t}=await Promise.resolve().then(()=>pi);return{quoteService:t}},void 0);for(const t of this.priceLists){console.log("Loading quotes for price list:",t.customerPriceListId);const s=await e.getQuotesByCustomerPriceList(t.customerPriceListId);this.quotes[t.customerPriceListId]=s,console.log("Quotes loaded for price list:",t.customerPriceListId,s),this.hydrateCreatorsForList(t.customerPriceListId)}console.log("All quotes loaded:",this.quotes)}catch(e){console.error("Failed to load quotes:",e),this.error="Failed to load some quotes, but price lists are available"}},viewPriceList(e){this.selectedPriceList=e},async createQuoteFromPriceList(e){try{const{quoteService:t}=await Pe(async()=>{const{quoteService:r}=await Promise.resolve().then(()=>pi);return{quoteService:r}},void 0),s=await t.createQuote(e.customerPriceListId);this.quotes[e.customerPriceListId]||(this.quotes[e.customerPriceListId]=[]),this.quotes[e.customerPriceListId].unshift(s),this.selectQuote(s)}catch(t){this.error=t.message||"Failed to create quote"}},selectQuote(e){this.selectedQuote=e},handleQuoteUpdated(e){const t=e.customerPriceListId;if(this.quotes[t]){const s=this.quotes[t].findIndex(r=>r.id===e.id);s!==-1&&(this.quotes[t][s]=e)}this.selectedQuote=e},handleQuoteDeleted(){const e=this.selectedQuote.customerPriceListId;this.quotes[e]&&(this.quotes[e]=this.quotes[e].filter(t=>t.id!==this.selectedQuote.id)),this.selectedQuote=null},formatDate(e){if(!e)return"";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatQuoteStatus(e){const t=e||"Draft";return t==="Approved"?"Approved":t==="Submitted"?"Submitted":"Draft"}}},Ug={key:0,class:"flex justify-center items-center py-12"},Hg={key:1,class:"card"},Vg={class:"text-center"},$g={class:"text-gray-600 mb-4"},Wg={key:2},Qg={key:3},Kg={key:4},zg={key:0,class:"card text-center py-12"},Gg={key:1,class:"space-y-8"},Yg={class:"flex justify-between items-start mb-6"},Jg={class:"text-xl font-semibold text-gray-900 mb-1"},Xg={key:0,class:"text-sm text-gray-700 mb-1"},Zg={class:"text-sm text-gray-600"},ey={class:"flex items-center gap-2"},ty=["onClick"],sy=["onClick"],ry={class:"border-t pt-4"},ny={class:"flex justify-between items-center mb-4"},oy={class:"text-sm text-gray-600"},iy={class:"flex flex-wrap items-center gap-2 mb-4"},ay=["onClick"],cy=["onClick"],ly=["onClick"],uy=["onClick"],dy={class:"ml-auto w-full md:w-64"},fy=["value","onInput"],hy={key:0,class:"text-center py-6"},py={key:1,class:"space-y-3"},my=["onClick"],gy={class:"flex justify-between items-start"},yy={class:"flex items-center gap-2 mb-1"},_y={class:"font-medium text-gray-900"},by={key:0,class:"text-sm text-gray-600"},vy={class:"text-sm text-gray-600"},xy={class:"text-sm text-gray-600"},wy={class:"text-right"},Sy={class:"text-lg font-bold text-gray-900"},Ey={class:"text-sm text-gray-600"};function ky(e,t,s,r,n,o){const i=Nt("QuoteDetail"),a=Nt("PriceListView");return m(),g("div",null,[n.loading?(m(),g("div",Ug,t[3]||(t[3]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",Hg,[l("div",Vg,[t[4]||(t[4]=l("div",{class:"text-red-600 text-lg font-medium mb-2"},"Error",-1)),l("p",$g,_(n.error),1),l("button",{onClick:t[0]||(t[0]=(...c)=>o.loadCustomerPriceLists&&o.loadCustomerPriceLists(...c)),class:"btn btn-primary"},"Try Again")])])):n.selectedQuote?(m(),g("div",Wg,[Oe(i,{quote:n.selectedQuote,"customer-id":s.customerId,onBack:t[1]||(t[1]=c=>n.selectedQuote=null),onQuoteUpdated:o.handleQuoteUpdated,onQuoteDeleted:o.handleQuoteDeleted},null,8,["quote","customer-id","onQuoteUpdated","onQuoteDeleted"])])):n.selectedPriceList?(m(),g("div",Qg,[Oe(a,{"price-list":n.selectedPriceList,onClose:t[2]||(t[2]=c=>n.selectedPriceList=null)},null,8,["price-list"])])):(m(),g("div",Kg,[t[8]||(t[8]=l("div",{class:"mb-6"},null,-1)),n.priceLists.length===0?(m(),g("div",zg,t[5]||(t[5]=[Ce('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No price lists assigned</h3><p class="text-gray-600 mb-4">You don&#39;t have any price lists assigned to your account.</p>',3)]))):(m(),g("div",Gg,[(m(!0),g(ne,null,Fe(n.priceLists,c=>{var d;return m(),g("div",{key:c.id,class:"card"},[l("div",Yg,[l("div",null,[l("h3",Jg,_(c.name),1),c.description?(m(),g("p",Xg,_(c.description),1)):P("",!0),l("p",Zg," Created: "+_(o.formatDate(c.createdAt)),1)]),l("div",ey,[l("button",{onClick:u=>o.viewPriceList(c),class:"btn btn-secondary text-sm",title:"View Price List"}," View Price List ",8,ty),l("button",{onClick:u=>o.createQuoteFromPriceList(c),class:"btn btn-primary text-sm",title:"Start New Quote"}," Start New Quote ",8,sy)])]),l("div",ry,[l("div",ny,[t[6]||(t[6]=l("h4",{class:"text-lg font-medium text-gray-900"},"Quotes",-1)),l("span",oy,_(((d=n.quotes[c.customerPriceListId])==null?void 0:d.length)||0)+" quotes",1)]),l("div",iy,[l("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[c.customerPriceListId]==="All"?"bg-gray-800 text-white border-gray-800":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:u=>o.setStatusFilter(c.customerPriceListId,"All")}," All ("+_(o.getStatusCounts(c.customerPriceListId).all)+") ",11,ay),l("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[c.customerPriceListId]==="Draft"?"bg-yellow-500 text-white border-yellow-500":"text-yellow-800 border-yellow-300 hover:border-yellow-400"]),onClick:u=>o.setStatusFilter(c.customerPriceListId,"Draft")}," Draft ("+_(o.getStatusCounts(c.customerPriceListId).Draft)+") ",11,cy),l("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[c.customerPriceListId]==="Submitted"?"bg-blue-600 text-white border-blue-600":"text-blue-800 border-blue-300 hover:border-blue-400"]),onClick:u=>o.setStatusFilter(c.customerPriceListId,"Submitted")}," Submitted ("+_(o.getStatusCounts(c.customerPriceListId).Submitted)+") ",11,ly),l("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[c.customerPriceListId]==="Approved"?"bg-green-600 text-white border-green-600":"text-green-800 border-green-300 hover:border-green-400"]),onClick:u=>o.setStatusFilter(c.customerPriceListId,"Approved")}," Approved ("+_(o.getStatusCounts(c.customerPriceListId).Approved)+") ",11,uy),l("div",dy,[l("input",{value:n.searchTerms[c.customerPriceListId]||"",onInput:u=>o.setSearchTerm(c.customerPriceListId,u.target.value),type:"text",class:"input h-9 text-sm",placeholder:"Search quotes..."},null,40,fy)])]),o.getFilteredQuotes(c.customerPriceListId).length?(m(),g("div",py,[(m(!0),g(ne,null,Fe(o.getFilteredQuotes(c.customerPriceListId),u=>(m(),g("div",{key:u.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:h=>o.selectQuote(u)},[l("div",gy,[l("div",null,[l("div",yy,[l("h5",_y,[he(_(u.name||"Quote #"+(u.number||""))+" ",1),u.number?(m(),g("span",by," #"+_(u.number),1)):P("",!0)]),l("span",{class:ae(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",u.status==="Approved"?"bg-green-100 text-green-800":u.status==="Submitted"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},_(o.formatQuoteStatus(u.status)),3)]),l("p",vy," Created By: "+_(u.createdByName||""),1),l("p",xy," Last updated: "+_(o.formatDate(u.updatedAt)),1)]),l("div",wy,[l("div",Sy," ZAR "+_(o.formatCurrency(u.total)),1),l("div",Ey," incl. VAT: ZAR "+_(o.formatCurrency(u.totalInclVat)),1)])])],8,my))),128))])):(m(),g("div",hy,t[7]||(t[7]=[l("div",{class:"text-gray-500 mb-2"},[l("svg",{class:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[l("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),l("p",{class:"text-sm text-gray-600"},"No quotes yet",-1)])))])])}),128))]))]))])}const Py=kt(jg,[["render",ky]]),Cy="/createspace-logo.png",Iy={name:"LoginForm",data(){return{email:"",password:"",loading:!1,error:"",showForgotPassword:!1,resetEmail:"",resetLoading:!1,resetError:"",resetSuccess:""}},methods:{async handleLogin(){this.loading=!0,this.error="";try{const e=await J.login(this.email,this.password);this.$emit("login-success",e)}catch(e){this.error=e.message||"Login failed. Please check your credentials."}finally{this.loading=!1}},async handleForgotPassword(){this.resetLoading=!0,this.resetError="",this.resetSuccess="";try{const e=`${window.location.origin}/reset-password`;await J.requestPasswordReset(this.resetEmail,e),this.resetSuccess="Password reset link has been sent to your email.",this.resetEmail=""}catch(e){this.resetError=e.message||"Failed to send reset link. Please try again."}finally{this.resetLoading=!1}},async signInWithGoogle(){try{const t=(await J.getAuthProviders()||[]).find(r=>(r.name||"").toLowerCase().includes("google")||(r.type||"").toLowerCase().includes("google")),s=(t==null?void 0:t.authorizeUrl)||`${J.baseUrl.replace("/api/json","")}/auth/authorize/google`;window.location.href=s}catch(e){this.error=e.message||"Google sign-in not available"}}}},Ay={class:"min-h-screen flex items-center justify-center bg-gray-50 py-0 px-4 sm:px-6 lg:px-8 overflow-hidden"},Ty={class:"max-w-md w-full space-y-8"},Dy={class:"rounded-md shadow-sm -space-y-px"},Ry={key:0,class:"rounded-md bg-red-50 p-4"},Ly={class:"flex"},Ny={class:"ml-3"},Oy={class:"text-sm font-medium text-red-800"},Fy=["disabled"],qy={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},My={class:"text-center"},By={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},jy={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Uy={class:"mt-3"},Hy={class:"mb-4"},Vy={key:0,class:"mb-4 text-sm text-red-600"},$y={key:1,class:"mb-4 text-sm text-green-600"},Wy={class:"flex justify-end space-x-3"},Qy=["disabled"];function Ky(e,t,s,r,n,o){return m(),g("div",Ay,[l("div",Ty,[t[13]||(t[13]=l("div",null,[l("div",{class:"flex justify-center mb-8"},[l("img",{src:Cy,alt:"CREATESPACE",class:"h-10 w-auto"})]),l("h2",{class:"mt-4 text-center text-3xl font-extrabold text-gray-900"}," Sign in to your account "),l("p",{class:"mt-2 text-center text-sm text-gray-600"}," Enter your credentials to access the order management system ")],-1)),l("form",{class:"mt-8 space-y-6",onSubmit:t[3]||(t[3]=Pn((...i)=>o.handleLogin&&o.handleLogin(...i),["prevent"]))},[l("div",Dy,[l("div",null,[t[8]||(t[8]=l("label",{for:"email",class:"sr-only"},"Email address",-1)),ue(l("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=i=>n.email=i),name:"email",type:"email",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address"},null,512),[[de,n.email]])]),l("div",null,[t[9]||(t[9]=l("label",{for:"password",class:"sr-only"},"Password",-1)),ue(l("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=i=>n.password=i),name:"password",type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password"},null,512),[[de,n.password]])])]),n.error?(m(),g("div",Ry,[l("div",Ly,[t[10]||(t[10]=l("div",{class:"flex-shrink-0"},[l("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[l("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),l("div",Ny,[l("h3",Oy,_(n.error),1)])])])):P("",!0),l("div",null,[l("button",{type:"submit",disabled:n.loading,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[n.loading?(m(),g("span",qy,t[11]||(t[11]=[l("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[l("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),l("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0),he(" "+_(n.loading?"Signing in...":"Sign in"),1)],8,Fy)]),l("div",My,[l("button",{type:"button",onClick:t[2]||(t[2]=i=>n.showForgotPassword=!0),class:"text-sm text-indigo-600 hover:text-indigo-500"}," Forgot your password? ")])],32),t[14]||(t[14]=Ce('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-gray-50 text-gray-500">Or</span></div></div>',1)),l("button",{onClick:t[4]||(t[4]=(...i)=>o.signInWithGoogle&&o.signInWithGoogle(...i)),type:"button",class:"w-full inline-flex items-center justify-center gap-2 border border-gray-300 rounded-md px-4 py-2 hover:bg-gray-100"},t[12]||(t[12]=[Ce('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-5 h-5"><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12    s5.373-12,12-12c3.059,0,5.842,1.153,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24    s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,16.108,18.961,13,24,13c3.059,0,5.842,1.153,7.961,3.039l5.657-5.657    C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4CAF50" d="M24,44c4.983,0,9.514-1.917,12.961-5.039l-5.981-5.064C29.047,35.091,26.715,36,24,36    c-5.202,0-9.619-3.317-11.277-7.951l-6.534,5.036C9.582,39.556,16.227,44,24,44z"></path><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.103,5.597c0,0,0,0,0,0l6.581,5.561    c-0.465,0.427,7.219-5.289,7.219-15.238C44,22.659,43.862,21.35,43.611,20.083z"></path></svg><span>Continue with Google</span>',2)]))]),n.showForgotPassword?(m(),g("div",By,[l("div",jy,[l("div",Uy,[t[16]||(t[16]=l("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Reset Password",-1)),l("form",{onSubmit:t[7]||(t[7]=Pn((...i)=>o.handleForgotPassword&&o.handleForgotPassword(...i),["prevent"]))},[l("div",Hy,[t[15]||(t[15]=l("label",{for:"reset-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email address ",-1)),ue(l("input",{id:"reset-email","onUpdate:modelValue":t[5]||(t[5]=i=>n.resetEmail=i),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email"},null,512),[[de,n.resetEmail]])]),n.resetError?(m(),g("div",Vy,_(n.resetError),1)):P("",!0),n.resetSuccess?(m(),g("div",$y,_(n.resetSuccess),1)):P("",!0),l("div",Wy,[l("button",{type:"button",onClick:t[6]||(t[6]=i=>n.showForgotPassword=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Cancel "),l("button",{type:"submit",disabled:n.resetLoading,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50"},_(n.resetLoading?"Sending...":"Send Reset Link"),9,Qy)])],32)])])])):P("",!0)])}const zy=kt(Iy,[["render",Ky]]),Gy={name:"UserProfileDialog",props:{show:{type:Boolean,default:!1}},data(){return{firstName:"",lastName:"",loading:!1,error:""}},computed:{isValid(){return this.firstName.trim()&&this.lastName.trim()}},methods:{async handleSubmit(){if(!this.isValid){this.error="Please enter both first and last name.";return}this.loading=!0,this.error="";try{this.$emit("profile-saved",{firstName:this.firstName.trim(),lastName:this.lastName.trim()})}catch(e){this.error=e.message||"Failed to save profile. Please try again."}finally{this.loading=!1}},handleCancel(){this.$emit("cancel")}}},Yy={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Jy={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Xy={class:"mt-3"},Zy={class:"space-y-4"},e0={key:0,class:"text-sm text-red-600"},t0={class:"flex justify-end space-x-3 mt-6"},s0=["disabled"];function r0(e,t,s,r,n,o){return s.show?(m(),g("div",Yy,[l("div",Jy,[l("div",Xy,[t[6]||(t[6]=Ce('<div class="flex items-center justify-center w-12 h-12 mx-auto bg-green-100 rounded-full"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center mt-4 mb-4"> Complete Your Profile </h3><p class="text-sm text-gray-600 text-center mb-6"> Please provide your first and last name to complete your account setup. </p>',3)),l("form",{onSubmit:t[3]||(t[3]=Pn((...i)=>o.handleSubmit&&o.handleSubmit(...i),["prevent"]))},[l("div",Zy,[l("div",null,[t[4]||(t[4]=l("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 mb-1"}," First Name * ",-1)),ue(l("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=i=>n.firstName=i),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your first name"},null,512),[[de,n.firstName]])]),l("div",null,[t[5]||(t[5]=l("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"}," Last Name * ",-1)),ue(l("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=i=>n.lastName=i),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your last name"},null,512),[[de,n.lastName]])]),n.error?(m(),g("div",e0,_(n.error),1)):P("",!0)]),l("div",t0,[l("button",{type:"button",onClick:t[2]||(t[2]=(...i)=>o.handleCancel&&o.handleCancel(...i)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Cancel "),l("button",{type:"submit",disabled:n.loading||!o.isValid,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},_(n.loading?"Saving...":"Save Profile"),9,s0)])],32)])])])):P("",!0)}const n0=kt(Gy,[["render",r0]]);class o0{constructor(){this.baseUrl=Ht}async makeRequest(t,s=null){const r=`${this.baseUrl}${t}`,n={"Content-Type":"application/json"},o=J.getToken();o&&(n.Authorization=`Bearer ${o}`);const i={method:s?"POST":"GET",headers:n};s&&(i.body=JSON.stringify(s));const a=await fetch(r,i);if(!a.ok){let c=`HTTP error! status: ${a.status}`;try{const d=await a.json();d!=null&&d.message&&(c=d.message)}catch{}throw typeof c=="string"&&c.toLowerCase().includes("token has expired")&&(J.logout(),window.location.reload()),new Error(c)}return a.json()}async listDeliveryAddresses(t){return this.makeRequest("/listDeliveryAddresses",{where:{customer:{id:{equals:t}}},limit:500})}async getDeliveryAddress(t){return this.makeRequest("/getDeliveryAddress",{id:t})}async createDeliveryAddress(t,s){const r={customer:{id:s},name:t.name,addressLine1:t.addressLine1,suburb:t.suburb,city:t.city,province:t.province,postalCode:t.postalCode};return t.organisation&&(r.organisation=t.organisation),t.contactPerson&&(r.contactPerson=t.contactPerson),t.contactPhone&&(r.contactPhone=t.contactPhone),t.contactEmail&&(r.contactEmail=t.contactEmail),t.addressLine2&&(r.addressLine2=t.addressLine2),t.deliveryNotes&&(r.deliveryNotes=t.deliveryNotes),this.makeRequest("/createDeliveryAddress",r)}async updateDeliveryAddress(t,s){const r={};return typeof s.organisation=="string"&&(r.organisation=s.organisation),typeof s.contactPerson=="string"&&(r.contactPerson=s.contactPerson),typeof s.contactPhone=="string"&&(r.contactPhone=s.contactPhone),typeof s.contactEmail=="string"&&(r.contactEmail=s.contactEmail),typeof s.name=="string"&&(r.name=s.name),typeof s.addressLine1=="string"&&(r.addressLine1=s.addressLine1),typeof s.addressLine2=="string"&&(r.addressLine2=s.addressLine2),typeof s.suburb=="string"&&(r.suburb=s.suburb),typeof s.deliveryNotes=="string"&&(r.deliveryNotes=s.deliveryNotes),this.makeRequest("/updateDeliveryAddress",{where:{id:t},values:r})}async deactivateDeliveryAddress(t){return this.makeRequest("/deactivateDeliveryAddress",{where:{id:t}})}}const gs=new o0,i0=Object.freeze(Object.defineProperty({__proto__:null,deliveryAddressService:gs},Symbol.toStringTag,{value:"Module"})),a0={name:"DeliveryAddresses",emits:["close"],props:{customerId:{type:String,required:!0}},data(){return{loading:!1,saving:!1,submitAttempted:!1,error:null,addresses:[],editingAddress:null,deactivatingId:null,isFormOpen:!1,form:{name:"",organisation:"",contactPerson:"",contactPhone:"",contactEmail:"",addressLine1:"",addressLine2:"",deliveryNotes:"",suburb:"",city:"",province:"",postalCode:""}}},computed:{isFormValid(){return[this.form.name,this.form.addressLine1,this.form.suburb,this.editingAddress?"ok":this.form.city,this.editingAddress?"ok":this.form.province,this.editingAddress?"ok":this.form.postalCode].every(t=>typeof t=="string"&&t.trim().length>0)}},async mounted(){await this.loadAddresses()},methods:{async loadAddresses(){try{this.loading=!0,this.error=null;const e=await gs.listDeliveryAddresses(this.customerId);this.addresses=Array.isArray(e)?e:e.results||[]}catch(e){this.error=e.message||"Failed to load delivery addresses"}finally{this.loading=!1}},resetForm(){this.editingAddress=null,this.form={name:"",organisation:"",contactPerson:"",contactPhone:"",contactEmail:"",addressLine1:"",addressLine2:"",deliveryNotes:"",suburb:"",city:"",province:"",postalCode:""}},openCreateForm(){this.resetForm(),this.isFormOpen=!0,this.submitAttempted=!1},cancelForm(){this.isFormOpen=!1,this.editingAddress=null,this.submitAttempted=!1},startEdit(e){this.editingAddress=e,this.form={name:e.name||"",organisation:e.organisation||"",contactPerson:e.contactPerson||"",contactPhone:e.contactPhone||"",contactEmail:e.contactEmail||"",addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||"",deliveryNotes:e.deliveryNotes||"",suburb:e.suburb||"",city:e.city||"",province:e.province||"",postalCode:e.postalCode||""},window.scrollTo({top:0,behavior:"smooth"}),this.isFormOpen=!0},async saveAddress(){try{if(this.submitAttempted=!0,!this.isFormValid)return;if(this.saving=!0,this.error=null,this.editingAddress){const{name:e,organisation:t,contactPerson:s,contactPhone:r,contactEmail:n,addressLine1:o,addressLine2:i,suburb:a,deliveryNotes:c}=this.form;await gs.updateDeliveryAddress(this.editingAddress.id,{name:e,organisation:t,contactPerson:s,contactPhone:r,contactEmail:n,addressLine1:o,addressLine2:i,suburb:a,deliveryNotes:c})}else await gs.createDeliveryAddress({...this.form},this.customerId);await this.loadAddresses(),this.resetForm(),this.submitAttempted=!1,this.isFormOpen=!1}catch(e){this.error=e.message||"Failed to save address"}finally{this.saving=!1}},async deactivate(e){if(confirm("Deactivate this address?"))try{this.deactivatingId=e.id,await gs.deactivateDeliveryAddress(e.id),await this.loadAddresses()}catch(t){this.error=t.message||"Failed to deactivate address"}finally{this.deactivatingId=null}}}},c0={class:"card"},l0={class:"flex items-start justify-between mb-6"},u0={class:"mb-6"},d0={key:1,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},f0={class:"flex items-start justify-between mb-3"},h0={class:"text-lg font-medium text-gray-900"},p0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},m0={key:0,class:"mt-1 text-xs text-red-600"},g0={class:"md:col-span-2"},y0={class:"md:col-span-2"},_0={class:"md:col-span-2"},b0={key:0,class:"mt-1 text-xs text-red-600"},v0={class:"md:col-span-2"},x0={key:0,class:"mt-1 text-xs text-red-600"},w0={class:"block text-sm font-medium text-gray-700 mb-1"},S0={key:0,class:"text-red-600"},E0=["disabled"],k0={key:0,class:"mt-1 text-xs text-red-600"},P0={class:"block text-sm font-medium text-gray-700 mb-1"},C0={key:0,class:"text-red-600"},I0=["disabled"],A0={key:0,class:"mt-1 text-xs text-red-600"},T0={class:"block text-sm font-medium text-gray-700 mb-1"},D0={key:0,class:"text-red-600"},R0=["disabled"],L0={key:0,class:"mt-1 text-xs text-red-600"},N0={class:"md:col-span-2"},O0={class:"mt-4 flex items-center gap-3"},F0=["disabled"],q0={class:"flex items-center justify-between mb-3"},M0={class:"text-sm text-gray-600"},B0={key:0,class:"flex justify-center items-center py-8"},j0={key:1,class:"bg-red-50 border border-red-200 text-red-800 rounded p-3"},U0={key:2,class:"text-center text-gray-600 py-10"},H0={key:3,class:"space-y-3"},V0={class:"flex items-start justify-between mb-3"},$0={class:"flex items-center gap-2"},W0={class:"text-base font-semibold text-gray-900"},Q0={key:0,class:"text-xs px-2 py-0.5 rounded-full bg-gray-200 text-gray-700"},K0={class:"flex items-center gap-2"},z0=["onClick"],G0=["onClick","disabled"],Y0={class:"md:grid md:grid-cols-2 md:gap-6"},J0={class:"space-y-1"},X0={key:0,class:"text-sm text-gray-700"},Z0={key:1,class:"space-y-0.5"},e_={key:0,class:"text-sm text-gray-700"},t_={key:1,class:"text-sm text-gray-700"},s_={key:2,class:"text-sm text-gray-700"},r_={class:"space-y-1 mt-3 md:mt-6"},n_={class:"text-sm text-gray-700"},o_={key:0,class:"text-sm text-gray-700"},i_={class:"text-sm text-gray-700"},a_={key:1,class:"text-sm text-gray-700"};function c_(e,t,s,r,n,o){return m(),g("div",c0,[l("div",l0,[t[17]||(t[17]=l("div",null,[l("h2",{class:"text-2xl font-semibold text-gray-900"},"Delivery Addresses"),l("p",{class:"text-gray-600"},"Manage your saved delivery addresses")],-1)),l("button",{onClick:t[0]||(t[0]=i=>e.$emit("close")),class:"btn btn-secondary",title:"Close"}," Close ")]),l("div",u0,[n.isFormOpen?(m(),g("div",d0,[l("div",f0,[l("h3",h0,_(n.editingAddress?"Edit Address":"Add New Address"),1),l("button",{onClick:t[2]||(t[2]=(...i)=>o.cancelForm&&o.cancelForm(...i)),class:"btn btn-secondary btn-sm"},"Cancel")]),t[30]||(t[30]=l("p",{class:"text-xs text-gray-600 mb-3"},[he("Fields marked with "),l("span",{class:"text-red-600"},"*"),he(" are required.")],-1)),l("div",p0,[l("div",null,[t[18]||(t[18]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Name "),l("span",{class:"text-red-600"},"*")],-1)),ue(l("input",{"onUpdate:modelValue":t[3]||(t[3]=i=>n.form.name=i),type:"text",class:"input w-full",placeholder:"e.g., Warehouse, Office",required:""},null,512),[[de,n.form.name]]),n.submitAttempted&&!n.form.name?(m(),g("p",m0,"Name is required")):P("",!0)]),l("div",g0,[t[19]||(t[19]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Organisation",-1)),ue(l("input",{"onUpdate:modelValue":t[4]||(t[4]=i=>n.form.organisation=i),type:"text",class:"input w-full",placeholder:"e.g., Acme Ltd"},null,512),[[de,n.form.organisation]])]),l("div",null,[t[20]||(t[20]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Person",-1)),ue(l("input",{"onUpdate:modelValue":t[5]||(t[5]=i=>n.form.contactPerson=i),type:"text",class:"input w-full",placeholder:"e.g., Jane Doe"},null,512),[[de,n.form.contactPerson]])]),l("div",null,[t[21]||(t[21]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Phone",-1)),ue(l("input",{"onUpdate:modelValue":t[6]||(t[6]=i=>n.form.contactPhone=i),type:"tel",class:"input w-full",placeholder:"e.g., 082 123 4567"},null,512),[[de,n.form.contactPhone]])]),l("div",y0,[t[22]||(t[22]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Email",-1)),ue(l("input",{"onUpdate:modelValue":t[7]||(t[7]=i=>n.form.contactEmail=i),type:"email",class:"input w-full",placeholder:"e.g., jane@example.com"},null,512),[[de,n.form.contactEmail]])]),l("div",_0,[t[23]||(t[23]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Address Line 1 "),l("span",{class:"text-red-600"},"*")],-1)),ue(l("input",{"onUpdate:modelValue":t[8]||(t[8]=i=>n.form.addressLine1=i),type:"text",class:"input w-full",required:""},null,512),[[de,n.form.addressLine1]]),n.submitAttempted&&!n.form.addressLine1?(m(),g("p",b0,"Address Line 1 is required")):P("",!0)]),l("div",v0,[t[24]||(t[24]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address Line 2",-1)),ue(l("input",{"onUpdate:modelValue":t[9]||(t[9]=i=>n.form.addressLine2=i),type:"text",class:"input w-full"},null,512),[[de,n.form.addressLine2]])]),l("div",null,[t[25]||(t[25]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Suburb "),l("span",{class:"text-red-600"},"*")],-1)),ue(l("input",{"onUpdate:modelValue":t[10]||(t[10]=i=>n.form.suburb=i),type:"text",class:"input w-full",required:""},null,512),[[de,n.form.suburb]]),n.submitAttempted&&!n.form.suburb?(m(),g("p",x0,"Suburb is required")):P("",!0)]),l("div",null,[l("label",w0,[t[26]||(t[26]=he("City ",-1)),n.editingAddress?P("",!0):(m(),g("span",S0,"*"))]),ue(l("input",{"onUpdate:modelValue":t[11]||(t[11]=i=>n.form.city=i),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,E0),[[de,n.form.city]]),n.submitAttempted&&!n.form.city?(m(),g("p",k0,"City is required")):P("",!0)]),l("div",null,[l("label",P0,[t[27]||(t[27]=he("Province ",-1)),n.editingAddress?P("",!0):(m(),g("span",C0,"*"))]),ue(l("input",{"onUpdate:modelValue":t[12]||(t[12]=i=>n.form.province=i),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,I0),[[de,n.form.province]]),n.submitAttempted&&!n.form.province?(m(),g("p",A0,"Province is required")):P("",!0)]),l("div",null,[l("label",T0,[t[28]||(t[28]=he("Postal Code ",-1)),n.editingAddress?P("",!0):(m(),g("span",D0,"*"))]),ue(l("input",{"onUpdate:modelValue":t[13]||(t[13]=i=>n.form.postalCode=i),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,R0),[[de,n.form.postalCode]]),n.submitAttempted&&!n.form.postalCode?(m(),g("p",L0,"Postal Code is required")):P("",!0)]),l("div",N0,[t[29]||(t[29]=l("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Delivery Notes",-1)),ue(l("input",{"onUpdate:modelValue":t[14]||(t[14]=i=>n.form.deliveryNotes=i),type:"text",class:"input w-full"},null,512),[[de,n.form.deliveryNotes]])])]),l("div",O0,[l("button",{onClick:t[15]||(t[15]=(...i)=>o.saveAddress&&o.saveAddress(...i)),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.saving||!o.isFormValid}]),disabled:n.saving||!o.isFormValid},_(n.saving?n.editingAddress?"Saving...":"Creating...":n.editingAddress?"Save Changes":"Create Address"),11,F0),l("button",{onClick:t[16]||(t[16]=(...i)=>o.cancelForm&&o.cancelForm(...i)),class:"btn btn-secondary"},"Cancel")])])):(m(),g("button",{key:0,onClick:t[1]||(t[1]=(...i)=>o.openCreateForm&&o.openCreateForm(...i)),class:"btn btn-primary"}," Add New Address "))]),l("div",null,[l("div",q0,[t[31]||(t[31]=l("h3",{class:"text-lg font-medium text-gray-900"},"Saved Addresses",-1)),l("span",M0,_(n.addresses.length)+" total",1)]),n.loading?(m(),g("div",B0,t[32]||(t[32]=[l("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",j0,_(n.error),1)):n.addresses.length===0?(m(),g("div",U0,"No active addresses.")):(m(),g("div",H0,[(m(!0),g(ne,null,Fe(n.addresses,i=>(m(),g("div",{key:i.id,class:"border border-gray-200 rounded-lg p-4"},[l("div",V0,[l("div",$0,[l("h4",W0,_(i.name||"Address"),1),i.isActive===!1?(m(),g("span",Q0,"Inactive")):P("",!0)]),l("div",K0,[l("button",{onClick:a=>o.startEdit(i),class:"btn btn-secondary btn-sm"},"Edit",8,z0),l("button",{onClick:a=>o.deactivate(i),class:"btn btn-danger btn-sm",disabled:n.deactivatingId===i.id},_(n.deactivatingId===i.id?"Deactivating...":"Deactivate"),9,G0)])]),l("div",Y0,[l("div",J0,[i.organisation?(m(),g("p",X0,_(i.organisation),1)):P("",!0),i.contactPerson||i.contactPhone||i.contactEmail?(m(),g("div",Z0,[i.contactPerson?(m(),g("p",e_,"Contact: "+_(i.contactPerson),1)):P("",!0),i.contactPhone?(m(),g("p",t_,"Phone: "+_(i.contactPhone),1)):P("",!0),i.contactEmail?(m(),g("p",s_,"Email: "+_(i.contactEmail),1)):P("",!0)])):P("",!0)]),l("div",r_,[l("p",n_,_(i.addressLine1),1),i.addressLine2?(m(),g("p",o_,_(i.addressLine2),1)):P("",!0),l("p",i_,_(i.suburb)+", "+_(i.city)+", "+_(i.province)+" "+_(i.postalCode),1),i.deliveryNotes?(m(),g("p",a_,_(i.deliveryNotes),1)):P("",!0)])])]))),128))]))])])}const l_=kt(a0,[["render",c_]]);class u_{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=J.getToken();n&&(r.Authorization=`Bearer ${n}`);const o=await fetch(`${Ht}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!o.ok){const a=(await o.json().catch(()=>({}))).message||`HTTP error! status: ${o.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(J.logout(),window.location.reload()),new Error(a)}return o.json()}async getCustomer(t){return await this.makeRequest("/getCustomer",{id:t})}}const d_=new u_,f_={name:"App",components:{PriceListManager:Py,LoginForm:zy,UserProfileDialog:n0,DeliveryAddresses:l_},data(){return{isAuthenticated:!1,currentUser:null,showProfileDialog:!1,loginData:null,customerId:null,showAddresses:!1,logoOk:!0,logoSrc:"/createspace-logo.png",customerName:""}},computed:{hasCustomerId(){return!!this.customerId},welcomeText(){var t,s;const e=((t=this.currentUser)==null?void 0:t.firstName)||((s=this.currentUser)==null?void 0:s.id)||"User";return this.customerName?`${e} (${this.customerName})`:e}},async mounted(){try{const t=new URLSearchParams(window.location.search).get("code");if(t&&!J.isAuthenticated()){await J.exchangeAuthorizationCode(t);const s=new URL(window.location.href);s.searchParams.delete("code"),window.history.replaceState({},"",s.toString())}}catch(e){console.error("SSO exchange failed:",e)}if(this.isAuthenticated=J.isAuthenticated(),this.isAuthenticated)try{this.currentUser=await J.getCurrentUser(),this.customerId=J.getCustomerId(this.currentUser),await this.loadCustomerName(),console.log("User data refreshed on page load:",this.currentUser),console.log("Customer ID refreshed on page load:",this.customerId)}catch(e){console.error("Failed to refresh user data on page load:",e),this.currentUser=await J.getCurrentUserCached(),this.customerId=J.getCustomerId(this.currentUser),await this.loadCustomerName()}},methods:{async handleLoginSuccess(e){console.log("Login successful:",e),this.isAuthenticated=!0,this.loginData=e,e.identity_created?(console.log("New user detected, showing profile dialog"),this.showProfileDialog=!0):(console.log("Existing user, retrieving profile"),this.currentUser=await J.getCurrentUser(),this.customerId=J.getCustomerId(this.currentUser),await this.loadCustomerName())},async handleProfileSaved(e){console.log("Profile data received:",e);try{this.currentUser=await J.createUserWithProfile(e.firstName,e.lastName),console.log("User created with profile:",this.currentUser),this.customerId=J.getCustomerId(this.currentUser),await this.loadCustomerName(),this.showProfileDialog=!1}catch(t){console.error("Failed to save profile:",t)}},handleProfileCancel(){this.handleLogout()},handleLogout(){J.logout(),this.isAuthenticated=!1,this.currentUser=null,this.showProfileDialog=!1,this.loginData=null,this.customerId=null,this.customerName=""},async loadCustomerName(){try{if(!this.customerId)return;const e=await d_.getCustomer(this.customerId);this.customerName=(e==null?void 0:e.name)||(e==null?void 0:e.companyName)||""}catch(e){console.warn("Failed to load customer name",e),this.customerName=""}}}},h_={id:"app",class:"min-h-screen bg-gray-50"},p_={key:0,class:"min-h-screen"},m_={class:"max-w-6xl mx-auto px-4 py-0"},g_={key:2,class:"max-w-6xl mx-auto px-4 py-8"},y_={class:"mb-8"},__={class:"flex justify-between items-center"},b_={class:"flex items-center gap-3 mb-1"},v_=["src"],x_={key:1,class:"text-3xl font-bold text-gray-900"},w_={class:"flex items-center space-x-4"},S_={class:"text-sm text-gray-600"},E_={key:0,class:"card text-center py-12"};function k_(e,t,s,r,n,o){const i=Nt("LoginForm"),a=Nt("UserProfileDialog"),c=Nt("PriceListManager"),d=Nt("DeliveryAddresses");return m(),g("div",h_,[n.isAuthenticated?P("",!0):(m(),g("div",p_,[l("div",m_,[Oe(i,{onLoginSuccess:o.handleLoginSuccess},null,8,["onLoginSuccess"])])])),n.showProfileDialog?(m(),ks(a,{key:1,show:n.showProfileDialog,onProfileSaved:o.handleProfileSaved,onCancel:o.handleProfileCancel},null,8,["show","onProfileSaved","onCancel"])):n.isAuthenticated&&!n.showProfileDialog?(m(),g("div",g_,[l("header",y_,[l("div",__,[l("div",null,[l("div",b_,[n.logoOk?(m(),g("img",{key:0,src:n.logoSrc,alt:"CREATESPACE",class:"h-10 md:h-7 w-auto",onError:t[0]||(t[0]=u=>n.logoOk=!1)},null,40,v_)):(m(),g("h1",x_,"CREATESPACE"))])]),l("div",w_,[l("span",S_," Welcome, "+_(o.welcomeText),1),o.hasCustomerId?(m(),g("button",{key:0,onClick:t[1]||(t[1]=u=>n.showAddresses=!0),class:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 rounded-md hover:bg-blue-100 border border-blue-200"}," Manage Delivery Addresses ")):P("",!0),l("button",{onClick:t[2]||(t[2]=(...u)=>o.handleLogout&&o.handleLogout(...u)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Logout ")])])]),o.hasCustomerId?o.hasCustomerId&&!n.showAddresses?(m(),ks(c,{"customer-id":n.customerId,key:`price-list-manager-${n.customerId}`},null,8,["customer-id"])):o.hasCustomerId&&n.showAddresses?(m(),ks(d,{key:2,"customer-id":n.customerId,onClose:t[3]||(t[3]=u=>n.showAddresses=!1)},null,8,["customer-id"])):P("",!0):(m(),g("div",E_,t[4]||(t[4]=[l("div",{class:"text-yellow-600 text-lg font-medium mb-2"},"No Customer Assigned",-1),l("p",{class:"text-gray-600 mb-4"},"No customer has been assigned to you yet. Please contact your administrator.",-1)])))])):P("",!0)])}const P_=kt(f_,[["render",k_]]),O=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,X=globalThis,qt="10.3.0";function is(){return qr(X),X}function qr(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||qt,t[qt]=t[qt]||{}}function js(e,t,s=X){const r=s.__SENTRY__=s.__SENTRY__||{},n=r[qt]=r[qt]||{};return n[e]||(n[e]=t())}const C_=["debug","info","warn","error","log","assert","trace"],I_="Sentry Logger ",_r={};function Pt(e){if(!("console"in X))return e();const t=X.console,s={},r=Object.keys(_r);r.forEach(n=>{const o=_r[n];s[n]=t[n],t[n]=o});try{return e()}finally{r.forEach(n=>{t[n]=s[n]})}}function A_(){ho().enabled=!0}function T_(){ho().enabled=!1}function fc(){return ho().enabled}function D_(...e){fo("log",...e)}function R_(...e){fo("warn",...e)}function L_(...e){fo("error",...e)}function fo(e,...t){O&&fc()&&Pt(()=>{X.console[e](`${I_}[${e}]:`,...t)})}function ho(){return O?js("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const R={enable:A_,disable:T_,isEnabled:fc,log:D_,warn:R_,error:L_},hc=50,Bt="?",mi=/\(error: (.*)\)/,gi=/captureMessage|captureException/;function pc(...e){const t=e.sort((s,r)=>s[0]-r[0]).map(s=>s[1]);return(s,r=0,n=0)=>{const o=[],i=s.split(`
`);for(let a=r;a<i.length;a++){let c=i[a];c.length>1024&&(c=c.slice(0,1024));const d=mi.test(c)?c.replace(mi,"$1"):c;if(!d.match(/\S*Error: /)){for(const u of t){const h=u(d);if(h){o.push(h);break}}if(o.length>=hc+n)break}}return O_(o.slice(n))}}function N_(e){return Array.isArray(e)?pc(...e):e}function O_(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Js(t).function||"")&&t.pop(),t.reverse(),gi.test(Js(t).function||"")&&(t.pop(),gi.test(Js(t).function||"")&&t.pop()),t.slice(0,hc).map(s=>({...s,filename:s.filename||Js(t).filename,function:s.function||Bt}))}function Js(e){return e[e.length-1]||{}}const sn="<anonymous>";function vt(e){try{return!e||typeof e!="function"?sn:e.name||sn}catch{return sn}}function yi(e){const t=e.exception;if(t){const s=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&s.push(...r.stacktrace.frames)}),s}catch{return}}}const cr={},_i={};function Vt(e,t){cr[e]=cr[e]||[],cr[e].push(t)}function $t(e,t){if(!_i[e]){_i[e]=!0;try{t()}catch(s){O&&R.error(`Error while instrumenting ${e}`,s)}}}function We(e,t){const s=e&&cr[e];if(s)for(const r of s)try{r(t)}catch(n){O&&R.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${vt(r)}
Error:`,n)}}let rn=null;function F_(e){const t="error";Vt(t,e),$t(t,q_)}function q_(){rn=X.onerror,X.onerror=function(e,t,s,r,n){return We("error",{column:r,error:n,line:s,msg:e,url:t}),rn?rn.apply(this,arguments):!1},X.onerror.__SENTRY_INSTRUMENTED__=!0}let nn=null;function M_(e){const t="unhandledrejection";Vt(t,e),$t(t,B_)}function B_(){nn=X.onunhandledrejection,X.onunhandledrejection=function(e){return We("unhandledrejection",e),nn?nn.apply(this,arguments):!0},X.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const mc=Object.prototype.toString;function po(e){switch(mc.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return xt(e,Error)}}function as(e,t){return mc.call(e)===`[object ${t}]`}function gc(e){return as(e,"ErrorEvent")}function bi(e){return as(e,"DOMError")}function j_(e){return as(e,"DOMException")}function ut(e){return as(e,"String")}function mo(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function go(e){return e===null||mo(e)||typeof e!="object"&&typeof e!="function"}function Ls(e){return as(e,"Object")}function Mr(e){return typeof Event<"u"&&xt(e,Event)}function U_(e){return typeof Element<"u"&&xt(e,Element)}function H_(e){return as(e,"RegExp")}function Br(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function V_(e){return Ls(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function xt(e,t){try{return e instanceof t}catch{return!1}}function yc(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function $_(e){return typeof Request<"u"&&xt(e,Request)}const yo=X,W_=80;function _c(e,t={}){if(!e)return"<unknown>";try{let s=e;const r=5,n=[];let o=0,i=0;const a=" > ",c=a.length;let d;const u=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||W_;for(;s&&o++<r&&(d=Q_(s,u),!(d==="html"||o>1&&i+n.length*c+d.length>=h));)n.push(d),i+=d.length,s=s.parentNode;return n.reverse().join(a)}catch{return"<unknown>"}}function Q_(e,t){const s=e,r=[];if(!(s!=null&&s.tagName))return"";if(yo.HTMLElement&&s instanceof HTMLElement&&s.dataset){if(s.dataset.sentryComponent)return s.dataset.sentryComponent;if(s.dataset.sentryElement)return s.dataset.sentryElement}r.push(s.tagName.toLowerCase());const n=t!=null&&t.length?t.filter(i=>s.getAttribute(i)).map(i=>[i,s.getAttribute(i)]):null;if(n!=null&&n.length)n.forEach(i=>{r.push(`[${i[0]}="${i[1]}"]`)});else{s.id&&r.push(`#${s.id}`);const i=s.className;if(i&&ut(i)){const a=i.split(/\s+/);for(const c of a)r.push(`.${c}`)}}const o=["aria-label","type","name","title","alt"];for(const i of o){const a=s.getAttribute(i);a&&r.push(`[${i}="${a}"]`)}return r.join("")}function _o(){try{return yo.document.location.href}catch{return""}}function K_(e){if(!yo.HTMLElement)return null;let t=e;const s=5;for(let r=0;r<s;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function br(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function vi(e,t){if(!Array.isArray(e))return"";const s=[];for(let r=0;r<e.length;r++){const n=e[r];try{yc(n)?s.push("[VueViewModel]"):s.push(String(n))}catch{s.push("[value cannot be serialized]")}}return s.join(t)}function lr(e,t,s=!1){return ut(e)?H_(t)?t.test(e):ut(t)?s?e===t:e.includes(t):!1:!1}function jr(e,t=[],s=!1){return t.some(r=>lr(e,r,s))}function Ne(e,t,s){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const n=s(r);typeof n=="function"&&bc(n,r);try{e[t]=n}catch{O&&R.log(`Failed to replace method "${t}" in object`,e)}}function je(e,t,s){try{Object.defineProperty(e,t,{value:s,writable:!0,configurable:!0})}catch{O&&R.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function bc(e,t){try{const s=t.prototype||{};e.prototype=t.prototype=s,je(e,"__sentry_original__",t)}catch{}}function bo(e){return e.__sentry_original__}function vc(e){if(po(e))return{message:e.message,name:e.name,stack:e.stack,...wi(e)};if(Mr(e)){const t={type:e.type,target:xi(e.target),currentTarget:xi(e.currentTarget),...wi(e)};return typeof CustomEvent<"u"&&xt(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function xi(e){try{return U_(e)?_c(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function wi(e){if(typeof e=="object"&&e!==null){const t={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}else return{}}function z_(e,t=40){const s=Object.keys(vc(e));s.sort();const r=s[0];if(!r)return"[object has no keys]";if(r.length>=t)return br(r,t);for(let n=s.length;n>0;n--){const o=s.slice(0,n).join(", ");if(!(o.length>t))return n===s.length?o:br(o,t)}return""}function G_(){const e=X;return e.crypto||e.msCrypto}function qe(e=G_()){let t=()=>Math.random()*16;try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e!=null&&e.getRandomValues&&(t=()=>{const s=new Uint8Array(1);return e.getRandomValues(s),s[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,s=>(s^(t()&15)>>s/4).toString(16))}function xc(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)==null?void 0:s[0]}function Lt(e){const{message:t,event_id:s}=e;if(t)return t;const r=xc(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||s||"<unknown>":s||"<unknown>"}function An(e,t,s){const r=e.exception=e.exception||{},n=r.values=r.values||[],o=n[0]=n[0]||{};o.value||(o.value=t||""),o.type||(o.type="Error")}function ss(e,t){const s=xc(e);if(!s)return;const r={type:"generic",handled:!0},n=s.mechanism;if(s.mechanism={...r,...n,...t},t&&"data"in t){const o={...n==null?void 0:n.data,...t.data};s.mechanism.data=o}}function Si(e){if(Y_(e))return!0;try{je(e,"__sentry_captured__",!0)}catch{}return!1}function Y_(e){try{return e.__sentry_captured__}catch{}}const wc=1e3;function Us(){return Date.now()/wc}function J_(){const{performance:e}=X;if(!(e!=null&&e.now)||!e.timeOrigin)return Us;const t=e.timeOrigin;return()=>(t+e.now())/wc}let Ei;function Ie(){return(Ei??(Ei=J_()))()}function X_(e){const t=Ie(),s={sid:qe(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>eb(s)};return e&&rs(s,e),s}function rs(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ie(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:qe()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const s=e.timestamp-e.started;e.duration=s>=0?s:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function Z_(e,t){let s={};e.status==="ok"&&(s={status:"exited"}),rs(e,s)}function eb(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Hs(e,t,s=2){if(!t||typeof t!="object"||s<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Hs(r[n],t[n],s-1));return r}function vr(){return qe()}function Ur(){return qe().substring(16)}const Tn="_sentrySpan";function Dn(e,t){t?je(e,Tn,t):delete e[Tn]}function xr(e){return e[Tn]}const tb=100;class rt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:vr(),sampleRand:Math.random()}}clone(){const t=new rt;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Dn(t,xr(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&rs(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,s){return this._tags={...this._tags,[t]:s},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,s){return this._extra={...this._extra,[t]:s},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,s){return s===null?delete this._contexts[t]:this._contexts[t]=s,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const s=typeof t=="function"?t(this):t,r=s instanceof rt?s.getScopeData():Ls(s)?t:void 0,{tags:n,extra:o,user:i,contexts:a,level:c,fingerprint:d=[],propagationContext:u}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...o},this._contexts={...this._contexts,...a},i&&Object.keys(i).length&&(this._user=i),c&&(this._level=c),d.length&&(this._fingerprint=d),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Dn(this,void 0),this._attachments=[],this.setPropagationContext({traceId:vr(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,s){var o;const r=typeof s=="number"?s:tb;if(r<=0)return this;const n={timestamp:Us(),...t,message:t.message?br(t.message,2048):t.message};return this._breadcrumbs.push(n),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(o=this._client)==null||o.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:xr(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Hs(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,s){const r=(s==null?void 0:s.event_id)||qe();if(!this._client)return O&&R.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:n,...s,event_id:r},this),r}captureMessage(t,s,r){const n=(r==null?void 0:r.event_id)||qe();if(!this._client)return O&&R.warn("No client configured on scope - will not capture message!"),n;const o=new Error(t);return this._client.captureMessage(t,s,{originalException:t,syntheticException:o,...r,event_id:n},this),n}captureEvent(t,s){const r=(s==null?void 0:s.event_id)||qe();return this._client?(this._client.captureEvent(t,{...s,event_id:r},this),r):(O&&R.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function sb(){return js("defaultCurrentScope",()=>new rt)}function rb(){return js("defaultIsolationScope",()=>new rt)}class nb{constructor(t,s){let r;t?r=t:r=new rt;let n;s?n=s:n=new rt,this._stack=[{scope:r}],this._isolationScope=n}withScope(t){const s=this._pushScope();let r;try{r=t(s)}catch(n){throw this._popScope(),n}return Br(r)?r.then(n=>(this._popScope(),n),n=>{throw this._popScope(),n}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function ns(){const e=is(),t=qr(e);return t.stack=t.stack||new nb(sb(),rb())}function ob(e){return ns().withScope(e)}function ib(e,t){const s=ns();return s.withScope(()=>(s.getStackTop().scope=e,t(e)))}function ki(e){return ns().withScope(()=>e(ns().getIsolationScope()))}function ab(){return{withIsolationScope:ki,withScope:ob,withSetScope:ib,withSetIsolationScope:(e,t)=>ki(t),getCurrentScope:()=>ns().getScope(),getIsolationScope:()=>ns().getIsolationScope()}}function Vs(e){const t=qr(e);return t.acs?t.acs:ab()}function Qe(){const e=is();return Vs(e).getCurrentScope()}function cs(){const e=is();return Vs(e).getIsolationScope()}function cb(){return js("globalScope",()=>new rt)}function vo(...e){const t=is(),s=Vs(t);if(e.length===2){const[r,n]=e;return r?s.withSetScope(r,n):s.withScope(n)}return s.withScope(e[0])}function le(){return Qe().getClient()}function lb(e){const t=e.getPropagationContext(),{traceId:s,parentSpanId:r,propagationSpanId:n}=t,o={trace_id:s,span_id:n||Ur()};return r&&(o.parent_span_id=r),o}const wr="sentry.source",Sc="sentry.sample_rate",ub="sentry.previous_trace_sample_rate",Rn="sentry.op",Ns="sentry.origin",db="sentry.measurement_unit",fb="sentry.measurement_value",Pi="sentry.custom_span_name",xo="sentry.profile_id",wo="sentry.exclusive_time",hb=0,pb=1,Ec="_sentryScope",kc="_sentryIsolationScope";function mb(e,t,s){e&&(je(e,kc,s),je(e,Ec,t))}function Sr(e){return{scope:e[Ec],isolationScope:e[kc]}}const gb="sentry-",yb=/^sentry-/;function _b(e){const t=bb(e);if(!t)return;const s=Object.entries(t).reduce((r,[n,o])=>{if(n.match(yb)){const i=n.slice(gb.length);r[i]=o}return r},{});if(Object.keys(s).length>0)return s}function bb(e){if(!(!e||!ut(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,s)=>{const r=Ci(s);return Object.entries(r).forEach(([n,o])=>{t[n]=o}),t},{}):Ci(e)}function Ci(e){return e.split(",").map(t=>t.split("=").map(s=>{try{return decodeURIComponent(s.trim())}catch{return}})).reduce((t,[s,r])=>(s&&r&&(t[s]=r),t),{})}const vb=/^o(\d+)\./,xb=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function wb(e){return e==="http"||e==="https"}function $s(e,t=!1){const{host:s,path:r,pass:n,port:o,projectId:i,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&n?`:${n}`:""}@${s}${o?`:${o}`:""}/${r&&`${r}/`}${i}`}function Sb(e){const t=xb.exec(e);if(!t){Pt(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[s,r,n="",o="",i="",a=""]=t.slice(1);let c="",d=a;const u=d.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),d=u.pop()),d){const h=d.match(/^\d+/);h&&(d=h[0])}return Pc({host:o,pass:n,path:c,projectId:d,port:i,protocol:s,publicKey:r})}function Pc(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Eb(e){if(!O)return!0;const{port:t,projectId:s,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(i=>e[i]?!1:(R.error(`Invalid Sentry Dsn: ${i} missing`),!0))?!1:s.match(/^\d+$/)?wb(r)?t&&isNaN(parseInt(t,10))?(R.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(R.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(R.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),!1)}function kb(e){const t=e.match(vb);return t==null?void 0:t[1]}function Pb(e){const t=e.getOptions(),{host:s}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):s&&(r=kb(s)),r}function Cb(e){const t=typeof e=="string"?Sb(e):Pc(e);if(!(!t||!Eb(t)))return t}function So(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Cc=0,Eo=1;let Ii=!1;function Ib(e){const{spanId:t,traceId:s}=e.spanContext(),{data:r,op:n,parent_span_id:o,status:i,origin:a,links:c}=Me(e);return{parent_span_id:o,span_id:t,trace_id:s,data:r,op:n,status:i,origin:a,links:c}}function Ab(e){const{spanId:t,traceId:s,isRemote:r}=e.spanContext(),n=r?t:Me(e).parent_span_id,o=Sr(e).scope,i=r?(o==null?void 0:o.getPropagationContext().propagationSpanId)||Ur():t;return{parent_span_id:n,span_id:i,trace_id:s}}function Ic(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:s,traceFlags:r,...n},attributes:o})=>({span_id:t,trace_id:s,sampled:r===Eo,attributes:o,...n}))}function es(e){return typeof e=="number"?Ai(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Ai(e.getTime()):Ie()}function Ai(e){return e>9999999999?e/1e3:e}function Me(e){var r;if(Db(e))return e.getSpanJSON();const{spanId:t,traceId:s}=e.spanContext();if(Tb(e)){const{attributes:n,startTime:o,name:i,endTime:a,status:c,links:d}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(r=e.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:t,trace_id:s,data:n,description:i,parent_span_id:u,start_timestamp:es(o),timestamp:es(a)||void 0,status:Ac(c),op:n[Rn],origin:n[Ns],links:Ic(d)}}return{span_id:t,trace_id:s,start_timestamp:0,data:{}}}function Tb(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Db(e){return typeof e.getSpanJSON=="function"}function Ws(e){const{traceFlags:t}=e.spanContext();return t===Eo}function Ac(e){if(!(!e||e.code===hb))return e.code===pb?"ok":e.message||"unknown_error"}const Ps="_sentryChildSpans",Ln="_sentryRootSpan";function Tc(e,t){const s=e[Ln]||e;je(t,Ln,s),e[Ps]?e[Ps].add(t):je(e,Ps,new Set([t]))}function Rb(e){const t=new Set;function s(r){if(!t.has(r)&&Ws(r)){t.add(r);const n=r[Ps]?Array.from(r[Ps]):[];for(const o of n)s(o)}}return s(e),Array.from(t)}function _t(e){return e[Ln]||e}function Lb(){const e=is(),t=Vs(e);return t.getActiveSpan?t.getActiveSpan():xr(Qe())}function Nn(){Ii||(Pt(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Ii=!0)}function Hr(e){var s;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((s=le())==null?void 0:s.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const ko="production",Dc="_frozenDsc";function on(e,t){je(e,Dc,t)}function Rc(e,t){const s=t.getOptions(),{publicKey:r}=t.getDsn()||{},n={environment:s.environment||ko,release:s.release,public_key:r,trace_id:e,org_id:Pb(t)};return t.emit("createDsc",n),n}function Nb(e,t){const s=t.getPropagationContext();return s.dsc||Rc(s.traceId,e)}function Os(e){var D;const t=le();if(!t)return{};const s=_t(e),r=Me(s),n=r.data,o=s.spanContext().traceState,i=(o==null?void 0:o.get("sentry.sample_rate"))??n[Sc]??n[ub];function a(F){return(typeof i=="number"||typeof i=="string")&&(F.sample_rate=`${i}`),F}const c=s[Dc];if(c)return a(c);const d=o==null?void 0:o.get("sentry.dsc"),u=d&&_b(d);if(u)return a(u);const h=Rc(e.spanContext().traceId,t),b=n[wr],y=r.description;return b!=="url"&&y&&(h.transaction=y),Hr()&&(h.sampled=String(Ws(s)),h.sample_rand=(o==null?void 0:o.get("sentry.sample_rand"))??((D=Sr(s).scope)==null?void 0:D.getPropagationContext().sampleRand.toString())),a(h),t.emit("createDsc",h,s),h}class Po{constructor(t={}){this._traceId=t.traceId||vr(),this._spanId=t.spanId||Ur()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Cc}}end(t){}setAttribute(t,s){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,s,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,s){}}function at(e,t=100,s=1/0){try{return On("",e,t,s)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Lc(e,t=3,s=100*1024){const r=at(e,t);return Mb(r)>s?Lc(e,t-1,s):r}function On(e,t,s=1/0,r=1/0,n=Bb()){const[o,i]=n;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Ob(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:s;if(c===0)return a.replace("object ","");if(o(t))return"[Circular ~]";const d=t;if(d&&typeof d.toJSON=="function")try{const y=d.toJSON();return On("",y,c-1,r,n)}catch{}const u=Array.isArray(t)?[]:{};let h=0;const b=vc(t);for(const y in b){if(!Object.prototype.hasOwnProperty.call(b,y))continue;if(h>=r){u[y]="[MaxProperties ~]";break}const D=b[y];u[y]=On(y,D,c-1,r,n),h++}return i(t),u}function Ob(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(yc(t))return"[VueViewModel]";if(V_(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${vt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const s=Fb(t);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(s){return`**non-serializable** (${s})`}}function Fb(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function qb(e){return~-encodeURI(e).split(/%..|./).length}function Mb(e){return qb(JSON.stringify(e))}function Bb(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function s(r){e.delete(r)}return[t,s]}function ls(e,t=[]){return[e,t]}function jb(e,t){const[s,r]=e;return[s,[...r,t]]}function Ti(e,t){const s=e[1];for(const r of s){const n=r[0].type;if(t(r,n))return!0}return!1}function Fn(e){const t=qr(X);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function Ub(e){const[t,s]=e;let r=JSON.stringify(t);function n(o){typeof r=="string"?r=typeof o=="string"?r+o:[Fn(r),o]:r.push(typeof o=="string"?Fn(o):o)}for(const o of s){const[i,a]=o;if(n(`
${JSON.stringify(i)}
`),typeof a=="string"||a instanceof Uint8Array)n(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(at(a))}n(c)}}return typeof r=="string"?r:Hb(r)}function Hb(e){const t=e.reduce((n,o)=>n+o.length,0),s=new Uint8Array(t);let r=0;for(const n of e)s.set(n,r),r+=n.length;return s}function Vb(e){return[{type:"span"},e]}function $b(e){const t=typeof e.data=="string"?Fn(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const Wb={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function Di(e){return Wb[e]}function Nc(e){if(!(e!=null&&e.sdk))return;const{name:t,version:s}=e.sdk;return{name:t,version:s}}function Qb(e,t,s,r){var o;const n=(o=e.sdkProcessingMetadata)==null?void 0:o.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!s&&r&&{dsn:$s(r)},...n&&{trace:n}}}function qn(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const s of t){if(zb(s)){if(lr(e.description,s))return!0;continue}if(!s.name&&!s.op)continue;const r=s.name?lr(e.description,s.name):!0,n=s.op?e.op&&lr(e.op,s.op):!0;if(r&&n)return!0}return!1}function Kb(e,t){const s=t.parent_span_id,r=t.span_id;if(s)for(const n of e)n.parent_span_id===r&&(n.parent_span_id=s)}function zb(e){return typeof e=="string"||e instanceof RegExp}function Gb(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Yb(e,t,s,r){const n=Nc(s),o={sent_at:new Date().toISOString(),...n&&{sdk:n},...!!r&&t&&{dsn:$s(t)}},i="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return ls(o,[i])}function Jb(e,t,s,r){const n=Nc(s),o=e.type&&e.type!=="replay_event"?e.type:"event";Gb(e,s==null?void 0:s.sdk);const i=Qb(e,n,r,t);return delete e.sdkProcessingMetadata,ls(i,[[{type:o},e]])}function Xb(e,t){function s(y){return!!y.trace_id&&!!y.public_key}const r=Os(e[0]),n=t==null?void 0:t.getDsn(),o=t==null?void 0:t.getOptions().tunnel,i={sent_at:new Date().toISOString(),...s(r)&&{trace:r},...!!o&&n&&{dsn:$s(n)}},{beforeSendSpan:a,ignoreSpans:c}=(t==null?void 0:t.getOptions())||{},d=c!=null&&c.length?e.filter(y=>!qn(Me(y),c)):e,u=e.length-d.length;u&&(t==null||t.recordDroppedEvent("before_send","span",u));const h=a?y=>{const D=Me(y),F=a(D);return F||(Nn(),D)}:Me,b=[];for(const y of d){const D=h(y);D&&b.push(Vb(D))}return ls(i,b)}function Zb(e){if(!O)return;const{description:t="< unknown name >",op:s="< unknown op >",parent_span_id:r}=Me(e),{spanId:n}=e.spanContext(),o=Ws(e),i=_t(e),a=i===e,c=`[Tracing] Starting ${o?"sampled":"unsampled"} ${a?"root ":""}span`,d=[`op: ${s}`,`name: ${t}`,`ID: ${n}`];if(r&&d.push(`parent ID: ${r}`),!a){const{op:u,description:h}=Me(i);d.push(`root ID: ${i.spanContext().spanId}`),u&&d.push(`root op: ${u}`),h&&d.push(`root description: ${h}`)}R.log(`${c}
  ${d.join(`
  `)}`)}function ev(e){if(!O)return;const{description:t="< unknown name >",op:s="< unknown op >"}=Me(e),{spanId:r}=e.spanContext(),o=_t(e)===e,i=`[Tracing] Finishing "${s}" ${o?"root ":""}span "${t}" with ID ${r}`;R.log(i)}function Ri(e){if(!e||e.length===0)return;const t={};return e.forEach(s=>{const r=s.attributes||{},n=r[db],o=r[fb];typeof n=="string"&&typeof o=="number"&&(t[s.name]={value:o,unit:n})}),t}const Li=1e3;class Co{constructor(t={}){this._traceId=t.traceId||vr(),this._spanId=t.spanId||Ur(),this._startTime=t.startTimestamp||Ie(),this._links=t.links,this._attributes={},this.setAttributes({[Ns]:"manual",[Rn]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,s){}spanContext(){const{_spanId:t,_traceId:s,_sampled:r}=this;return{spanId:t,traceId:s,traceFlags:r?Eo:Cc}}setAttribute(t,s){return s===void 0?delete this._attributes[t]:this._attributes[t]=s,this}setAttributes(t){return Object.keys(t).forEach(s=>this.setAttribute(s,t[s])),this}updateStartTime(t){this._startTime=es(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(wr,"custom"),this}end(t){this._endTime||(this._endTime=es(t),ev(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Rn],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Ac(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ns],profile_id:this._attributes[xo],exclusive_time:this._attributes[wo],measurements:Ri(this._events),is_segment:this._isStandaloneSpan&&_t(this)===this||void 0,segment_id:this._isStandaloneSpan?_t(this).spanContext().spanId:void 0,links:Ic(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,s,r){O&&R.log("[Tracing] Adding an event to span:",t);const n=Ni(s)?s:r||Ie(),o=Ni(s)?{}:s||{},i={name:t,time:es(n),attributes:o};return this._events.push(i),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=le();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===_t(this)))return;if(this._isStandaloneSpan){this._sampled?sv(Xb([this],t)):(O&&R.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Sr(this).scope||Qe()).captureEvent(r)}_convertSpanToTransaction(){var u;if(!Oi(Me(this)))return;this._name||(O&&R.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:s}=Sr(this),r=(u=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:u.normalizedRequest;if(this._sampled!==!0)return;const o=Rb(this).filter(h=>h!==this&&!tv(h)).map(h=>Me(h)).filter(Oi),i=this._attributes[wr];delete this._attributes[Pi],o.forEach(h=>{delete h.data[Pi]});const a={contexts:{trace:Ib(this)},spans:o.length>Li?o.sort((h,b)=>h.start_timestamp-b.start_timestamp).slice(0,Li):o,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:s,dynamicSamplingContext:Os(this)},request:r,...i&&{transaction_info:{source:i}}},c=Ri(this._events);return c&&Object.keys(c).length&&(O&&R.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Ni(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function Oi(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function tv(e){return e instanceof Co&&e.isStandaloneSpan()}function sv(e){const t=le();if(!t)return;const s=e[1];if(!s||s.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function rv(e,t,s){if(!Hr(e))return[!1];let r,n;typeof e.tracesSampler=="function"?(n=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?n=t.parentSampled:typeof e.tracesSampleRate<"u"&&(n=e.tracesSampleRate,r=!0);const o=So(n);if(o===void 0)return O&&R.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`),[!1];if(!o)return O&&R.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,o,r];const i=s<o;return i||O&&R.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[i,o,r]}const Oc="__SENTRY_SUPPRESS_TRACING__";function Fi(e){const t=Fc();if(t.startInactiveSpan)return t.startInactiveSpan(e);const s=iv(e),{forceTransaction:r,parentSpan:n}=e;return(e.scope?i=>vo(e.scope,i):n!==void 0?i=>nv(n,i):i=>i())(()=>{const i=Qe(),a=cv(i,n);return e.onlyIfParent&&!a?new Po:ov({parentSpan:a,spanArguments:s,forceTransaction:r,scope:i})})}function nv(e,t){const s=Fc();return s.withActiveSpan?s.withActiveSpan(e,t):vo(r=>(Dn(r,e||void 0),t(r)))}function ov({parentSpan:e,spanArguments:t,forceTransaction:s,scope:r}){if(!Hr()){const i=new Po;if(s||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...Os(i)};on(i,a)}return i}const n=cs();let o;if(e&&!s)o=av(e,r,t),Tc(e,o);else if(e){const i=Os(e),{traceId:a,spanId:c}=e.spanContext(),d=Ws(e);o=qi({traceId:a,parentSpanId:c,...t},r,d),on(o,i)}else{const{traceId:i,dsc:a,parentSpanId:c,sampled:d}={...n.getPropagationContext(),...r.getPropagationContext()};o=qi({traceId:i,parentSpanId:c,...t},r,d),a&&on(o,a)}return Zb(o),mb(o,r,n),o}function iv(e){const s={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...s};return r.startTimestamp=es(e.startTime),delete r.startTime,r}return s}function Fc(){const e=is();return Vs(e)}function qi(e,t,s){var D;const r=le(),n=(r==null?void 0:r.getOptions())||{},{name:o=""}=e,i={spanAttributes:{...e.attributes},spanName:o,parentSampled:s};r==null||r.emit("beforeSampling",i,{decision:!1});const a=i.parentSampled??s,c=i.spanAttributes,d=t.getPropagationContext(),[u,h,b]=t.getScopeData().sdkProcessingMetadata[Oc]?[!1]:rv(n,{name:o,parentSampled:a,attributes:c,parentSampleRate:So((D=d.dsc)==null?void 0:D.sample_rate)},d.sampleRand),y=new Co({...e,attributes:{[wr]:"custom",[Sc]:h!==void 0&&b?h:void 0,...c},sampled:u});return!u&&r&&(O&&R.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",y),y}function av(e,t,s){const{spanId:r,traceId:n}=e.spanContext(),o=t.getScopeData().sdkProcessingMetadata[Oc]?!1:Ws(e),i=o?new Co({...s,parentSpanId:r,traceId:n,sampled:o}):new Po({traceId:n});Tc(e,i);const a=le();return a&&(a.emit("spanStart",i),s.endTimestamp&&a.emit("spanEnd",i)),i}function cv(e,t){if(t)return t;if(t===null)return;const s=xr(e);if(!s)return;const r=le();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?_t(s):s}const an=0,Mi=1,Bi=2;function jt(e){return new wt(t=>{t(e)})}function Er(e){return new wt((t,s)=>{s(e)})}class wt{constructor(t){this._state=an,this._handlers=[],this._runExecutor(t)}then(t,s){return new wt((r,n)=>{this._handlers.push([!1,o=>{if(!t)r(o);else try{r(t(o))}catch(i){n(i)}},o=>{if(!s)n(o);else try{r(s(o))}catch(i){n(i)}}]),this._executeHandlers()})}catch(t){return this.then(s=>s,t)}finally(t){return new wt((s,r)=>{let n,o;return this.then(i=>{o=!1,n=i,t&&t()},i=>{o=!0,n=i,t&&t()}).then(()=>{if(o){r(n);return}s(n)})})}_executeHandlers(){if(this._state===an)return;const t=this._handlers.slice();this._handlers=[],t.forEach(s=>{s[0]||(this._state===Mi&&s[1](this._value),this._state===Bi&&s[2](this._value),s[0]=!0)})}_runExecutor(t){const s=(o,i)=>{if(this._state===an){if(Br(i)){i.then(r,n);return}this._state=o,this._value=i,this._executeHandlers()}},r=o=>{s(Mi,o)},n=o=>{s(Bi,o)};try{t(r,n)}catch(o){n(o)}}}function Mn(e,t,s,r=0){return new wt((n,o)=>{const i=e[r];if(t===null||typeof i!="function")n(t);else{const a=i({...t},s);O&&i.id&&a===null&&R.log(`Event processor "${i.id}" dropped event`),Br(a)?a.then(c=>Mn(e,c,s,r+1).then(n)).then(null,o):Mn(e,a,s,r+1).then(n).then(null,o)}})}function lv(e,t){const{fingerprint:s,span:r,breadcrumbs:n,sdkProcessingMetadata:o}=t;uv(e,t),r&&hv(e,r),pv(e,s),dv(e,n),fv(e,o)}function ji(e,t){const{extra:s,tags:r,user:n,contexts:o,level:i,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:d,eventProcessors:u,attachments:h,propagationContext:b,transactionName:y,span:D}=t;Xs(e,"extra",s),Xs(e,"tags",r),Xs(e,"user",n),Xs(e,"contexts",o),e.sdkProcessingMetadata=Hs(e.sdkProcessingMetadata,a,2),i&&(e.level=i),y&&(e.transactionName=y),D&&(e.span=D),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),h.length&&(e.attachments=[...e.attachments,...h]),e.propagationContext={...e.propagationContext,...b}}function Xs(e,t,s){e[t]=Hs(e[t],s,1)}function uv(e,t){const{extra:s,tags:r,user:n,contexts:o,level:i,transactionName:a}=t;Object.keys(s).length&&(e.extra={...s,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(n).length&&(e.user={...n,...e.user}),Object.keys(o).length&&(e.contexts={...o,...e.contexts}),i&&(e.level=i),a&&e.type!=="transaction"&&(e.transaction=a)}function dv(e,t){const s=[...e.breadcrumbs||[],...t];e.breadcrumbs=s.length?s:void 0}function fv(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function hv(e,t){e.contexts={trace:Ab(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Os(t),...e.sdkProcessingMetadata};const s=_t(t),r=Me(s).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function pv(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let Zs,Ui,er;function mv(e){const t=X._sentryDebugIds;if(!t)return{};const s=Object.keys(t);return er&&s.length===Ui||(Ui=s.length,er=s.reduce((r,n)=>{Zs||(Zs={});const o=Zs[n];if(o)r[o[0]]=o[1];else{const i=e(n);for(let a=i.length-1;a>=0;a--){const c=i[a],d=c==null?void 0:c.filename,u=t[n];if(d&&u){r[d]=u,Zs[n]=[d,u];break}}}return r},{})),er}function gv(e,t,s,r,n,o){const{normalizeDepth:i=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||s.event_id||qe(),timestamp:t.timestamp||Us()},d=s.integrations||e.integrations.map($=>$.name);yv(c,e),vv(c,d),n&&n.emit("applyFrameMetadata",t),t.type===void 0&&_v(c,e.stackParser);const u=wv(r,s.captureContext);s.mechanism&&ss(c,s.mechanism);const h=n?n.getEventProcessors():[],b=cb().getScopeData();if(o){const $=o.getScopeData();ji(b,$)}if(u){const $=u.getScopeData();ji(b,$)}const y=[...s.attachments||[],...b.attachments];y.length&&(s.attachments=y),lv(c,b);const D=[...h,...b.eventProcessors];return Mn(D,c,s).then($=>($&&bv($),typeof i=="number"&&i>0?xv($,i,a):$))}function yv(e,t){const{environment:s,release:r,dist:n,maxValueLength:o=250}=t;e.environment=e.environment||s||ko,!e.release&&r&&(e.release=r),!e.dist&&n&&(e.dist=n);const i=e.request;i!=null&&i.url&&(i.url=br(i.url,o))}function _v(e,t){var r,n;const s=mv(t);(n=(r=e.exception)==null?void 0:r.values)==null||n.forEach(o=>{var i,a;(a=(i=o.stacktrace)==null?void 0:i.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=s[c.filename])})})}function bv(e){var r,n;const t={};if((n=(r=e.exception)==null?void 0:r.values)==null||n.forEach(o=>{var i,a;(a=(i=o.stacktrace)==null?void 0:i.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?t[c.abs_path]=c.debug_id:c.filename&&(t[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const s=e.debug_meta.images;Object.entries(t).forEach(([o,i])=>{s.push({type:"sourcemap",code_file:o,debug_id:i})})}function vv(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function xv(e,t,s){var n,o;if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(i=>({...i,...i.data&&{data:at(i.data,t,s)}}))},...e.user&&{user:at(e.user,t,s)},...e.contexts&&{contexts:at(e.contexts,t,s)},...e.extra&&{extra:at(e.extra,t,s)}};return(n=e.contexts)!=null&&n.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=at(e.contexts.trace.data,t,s))),e.spans&&(r.spans=e.spans.map(i=>({...i,...i.data&&{data:at(i.data,t,s)}}))),(o=e.contexts)!=null&&o.flags&&r.contexts&&(r.contexts.flags=at(e.contexts.flags,3,s)),r}function wv(e,t){if(!t)return e;const s=e?e.clone():new rt;return s.update(t),s}function Sv(e){if(e)return Ev(e)?{captureContext:e}:Pv(e)?{captureContext:e}:e}function Ev(e){return e instanceof rt||typeof e=="function"}const kv=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function Pv(e){return Object.keys(e).some(t=>kv.includes(t))}function qc(e,t){return Qe().captureException(e,Sv(t))}function Mc(e,t){return Qe().captureEvent(e,t)}function Hi(e){const t=cs(),s=Qe(),{userAgent:r}=X.navigator||{},n=X_({user:s.getUser()||t.getUser(),...r&&{userAgent:r},...e}),o=t.getSession();return(o==null?void 0:o.status)==="ok"&&rs(o,{status:"exited"}),Bc(),t.setSession(n),n}function Bc(){const e=cs(),s=Qe().getSession()||e.getSession();s&&Z_(s),jc(),e.setSession()}function jc(){const e=cs(),t=le(),s=e.getSession();s&&t&&t.captureSession(s)}function Vi(e=!1){if(e){Bc();return}jc()}const Cv="7";function Iv(e){const t=e.protocol?`${e.protocol}:`:"",s=e.port?`:${e.port}`:"";return`${t}//${e.host}${s}${e.path?`/${e.path}`:""}/api/`}function Av(e){return`${Iv(e)}${e.projectId}/envelope/`}function Tv(e,t){const s={sentry_version:Cv};return e.publicKey&&(s.sentry_key=e.publicKey),t&&(s.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(s).toString()}function Dv(e,t,s){return t||`${Av(e)}?${Tv(e,s)}`}const $i=[];function Rv(e){const t={};return e.forEach(s=>{const{name:r}=s,n=t[r];n&&!n.isDefaultInstance&&s.isDefaultInstance||(t[r]=s)}),Object.values(t)}function Lv(e){const t=e.defaultIntegrations||[],s=e.integrations;t.forEach(n=>{n.isDefaultInstance=!0});let r;if(Array.isArray(s))r=[...t,...s];else if(typeof s=="function"){const n=s(t);r=Array.isArray(n)?n:[n]}else r=t;return Rv(r)}function Nv(e,t){const s={};return t.forEach(r=>{r&&Uc(e,r,s)}),s}function Wi(e,t){for(const s of t)s!=null&&s.afterAllSetup&&s.afterAllSetup(e)}function Uc(e,t,s){if(s[t.name]){O&&R.log(`Integration skipped because it was already installed: ${t.name}`);return}if(s[t.name]=t,$i.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),$i.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(n,o)=>r(n,o,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),n=Object.assign((o,i)=>r(o,i,e),{id:t.name});e.addEventProcessor(n)}O&&R.log(`Integration installed: ${t.name}`)}function Ov(e,t,s){const r=[{type:"client_report"},{timestamp:Us(),discarded_events:e}];return ls(t?{dsn:t}:{},[r])}function Hc(e){const t=[];e.message&&t.push(e.message);try{const s=e.exception.values[e.exception.values.length-1];s!=null&&s.value&&(t.push(s.value),s.type&&t.push(`${s.type}: ${s.value}`))}catch{}return t}function Fv(e){var c;const{trace_id:t,parent_span_id:s,span_id:r,status:n,origin:o,data:i,op:a}=((c=e.contexts)==null?void 0:c.trace)??{};return{data:i??{},description:e.transaction,op:a,parent_span_id:s,span_id:r??"",start_timestamp:e.start_timestamp??0,status:n,timestamp:e.timestamp,trace_id:t??"",origin:o,profile_id:i==null?void 0:i[xo],exclusive_time:i==null?void 0:i[wo],measurements:e.measurements,is_segment:!0}}function qv(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[xo]:e.profile_id},...e.exclusive_time&&{[wo]:e.exclusive_time}}}},measurements:e.measurements}}const Qi="Not capturing exception because it's already been captured.",Ki="Discarded session because of missing or non-string release",Vc=Symbol.for("SentryInternalError"),$c=Symbol.for("SentryDoNotSendEventError");function ur(e){return{message:e,[Vc]:!0}}function cn(e){return{message:e,[$c]:!0}}function zi(e){return!!e&&typeof e=="object"&&Vc in e}function Gi(e){return!!e&&typeof e=="object"&&$c in e}class Mv{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Cb(t.dsn):O&&R.warn("No DSN provided, client will not send events."),this._dsn){const s=Dv(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:s})}}captureException(t,s,r){const n=qe();if(Si(t))return O&&R.log(Qi),n;const o={event_id:n,...s};return this._process(this.eventFromException(t,o).then(i=>this._captureEvent(i,o,r))),o.event_id}captureMessage(t,s,r,n){const o={event_id:qe(),...r},i=mo(t)?t:String(t),a=go(t)?this.eventFromMessage(i,s,o):this.eventFromException(t,o);return this._process(a.then(c=>this._captureEvent(c,o,n))),o.event_id}captureEvent(t,s,r){const n=qe();if(s!=null&&s.originalException&&Si(s.originalException))return O&&R.log(Qi),n;const o={event_id:n,...s},i=t.sdkProcessingMetadata||{},a=i.capturedSpanScope,c=i.capturedSpanIsolationScope;return this._process(this._captureEvent(t,o,a||r,c)),o.event_id}captureSession(t){this.sendSession(t),rs(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const s=this._transport;return s?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>s.flush(t).then(n=>r&&n))):jt(!0)}close(t){return this.flush(t).then(s=>(this.getOptions().enabled=!1,this.emit("close"),s))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const s=this._integrations[t.name];Uc(this,t,this._integrations),s||Wi(this,[t])}sendEvent(t,s={}){this.emit("beforeSendEvent",t,s);let r=Jb(t,this._dsn,this._options._metadata,this._options.tunnel);for(const o of s.attachments||[])r=jb(r,$b(o));const n=this.sendEnvelope(r);n&&n.then(o=>this.emit("afterSendEvent",t,o),null)}sendSession(t){const{release:s,environment:r=ko}=this._options;if("aggregates"in t){const o=t.attrs||{};if(!o.release&&!s){O&&R.warn(Ki);return}o.release=o.release||s,o.environment=o.environment||r,t.attrs=o}else{if(!t.release&&!s){O&&R.warn(Ki);return}t.release=t.release||s,t.environment=t.environment||r}this.emit("beforeSendSession",t);const n=Yb(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,s,r=1){if(this._options.sendClientReports){const n=`${t}:${s}`;O&&R.log(`Recording outcome: "${n}"${r>1?` (${r} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(t,s){const r=this._hooks[t]=this._hooks[t]||[];return r.push(s),()=>{const n=r.indexOf(s);n>-1&&r.splice(n,1)}}emit(t,...s){const r=this._hooks[t];r&&r.forEach(n=>n(...s))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,s=>(O&&R.error("Error while sending envelope:",s),s)):(O&&R.error("Transport disabled"),jt({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Nv(this,t),Wi(this,t)}_updateSessionFromEvent(t,s){var c;let r=s.level==="fatal",n=!1;const o=(c=s.exception)==null?void 0:c.values;if(o){n=!0;for(const d of o){const u=d.mechanism;if((u==null?void 0:u.handled)===!1){r=!0;break}}}const i=t.status==="ok";(i&&t.errors===0||i&&r)&&(rs(t,{...r&&{status:"crashed"},errors:t.errors||Number(n||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new wt(s=>{let r=0;const n=1,o=setInterval(()=>{this._numProcessing==0?(clearInterval(o),s(!0)):(r+=n,t&&r>=t&&(clearInterval(o),s(!1)))},n)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,s,r,n){const o=this.getOptions(),i=Object.keys(this._integrations);return!s.integrations&&(i!=null&&i.length)&&(s.integrations=i),this.emit("preprocessEvent",t,s),t.type||n.setLastEventId(t.event_id||s.event_id),gv(o,t,s,r,this,n).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,s),a.contexts={trace:lb(r),...a.contexts};const c=Nb(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(t,s={},r=Qe(),n=cs()){return O&&Bn(t)&&R.log(`Captured error event \`${Hc(t)[0]||"<unknown>"}\``),this._processEvent(t,s,r,n).then(o=>o.event_id,o=>{O&&(Gi(o)?R.log(o.message):zi(o)?R.warn(o.message):R.warn(o))})}_processEvent(t,s,r,n){const o=this.getOptions(),{sampleRate:i}=o,a=Wc(t),c=Bn(t),d=t.type||"error",u=`before send for type \`${d}\``,h=typeof i>"u"?void 0:So(i);if(c&&typeof h=="number"&&Math.random()>h)return this.recordDroppedEvent("sample_rate","error"),Er(cn(`Discarding event because it's not included in the random sample (sampling rate = ${i})`));const b=d==="replay_event"?"replay":d;return this._prepareEvent(t,s,r,n).then(y=>{if(y===null)throw this.recordDroppedEvent("event_processor",b),cn("An event processor returned `null`, will not send event.");if(s.data&&s.data.__sentry__===!0)return y;const F=jv(this,o,y,s);return Bv(F,u)}).then(y=>{var $;if(y===null){if(this.recordDroppedEvent("before_send",b),a){const K=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",K)}throw cn(`${u} returned \`null\`, will not send event.`)}const D=r.getSession()||n.getSession();if(c&&D&&this._updateSessionFromEvent(D,y),a){const U=(($=y.sdkProcessingMetadata)==null?void 0:$.spanCountBeforeProcessing)||0,K=y.spans?y.spans.length:0,G=U-K;G>0&&this.recordDroppedEvent("before_send","span",G)}const F=y.transaction_info;if(a&&F&&y.transaction!==t.transaction){const U="custom";y.transaction_info={...F,source:U}}return this.sendEvent(y,s),y}).then(null,y=>{throw Gi(y)||zi(y)?y:(this.captureException(y,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:y}),ur(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${y}`))})}_process(t){this._numProcessing++,t.then(s=>(this._numProcessing--,s),s=>(this._numProcessing--,s))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([s,r])=>{const[n,o]=s.split(":");return{reason:n,category:o,quantity:r}})}_flushOutcomes(){O&&R.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){O&&R.log("No outcomes to send");return}if(!this._dsn){O&&R.log("No dsn provided, will not send outcomes");return}O&&R.log("Sending outcomes:",t);const s=Ov(t,this._options.tunnel&&$s(this._dsn));this.sendEnvelope(s)}}function Bv(e,t){const s=`${t} must return \`null\` or a valid event.`;if(Br(e))return e.then(r=>{if(!Ls(r)&&r!==null)throw ur(s);return r},r=>{throw ur(`${t} rejected with ${r}`)});if(!Ls(e)&&e!==null)throw ur(s);return e}function jv(e,t,s,r){const{beforeSend:n,beforeSendTransaction:o,beforeSendSpan:i,ignoreSpans:a}=t;let c=s;if(Bn(c)&&n)return n(c,r);if(Wc(c)){if(i||a){const d=Fv(c);if(a!=null&&a.length&&qn(d,a))return null;if(i){const u=i(d);u?c=Hs(s,qv(u)):Nn()}if(c.spans){const u=[],h=c.spans;for(const y of h){if(a!=null&&a.length&&qn(y,a)){Kb(h,y);continue}if(i){const D=i(y);D?u.push(D):(Nn(),u.push(y))}else u.push(y)}const b=c.spans.length-u.length;b&&e.recordDroppedEvent("before_send","span",b),c.spans=u}}if(o){if(c.spans){const d=c.spans.length;c.sdkProcessingMetadata={...s.sdkProcessingMetadata,spanCountBeforeProcessing:d}}return o(c,r)}}return c}function Bn(e){return e.type===void 0}function Wc(e){return e.type==="transaction"}function Uv(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Hv(e,t,s,r){const n={};return t!=null&&t.sdk&&(n.sdk={name:t.sdk.name,version:t.sdk.version}),s&&r&&(n.dsn=$s(r)),ls(n,[Uv(e)])}function ln(e,t){const s=Vv(e)??[];if(s.length===0)return;const r=e.getOptions(),n=Hv(s,r._metadata,r.tunnel,e.getDsn());Qc().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(n)}function Vv(e){return Qc().get(e)}function Qc(){return js("clientToLogBufferMap",()=>new WeakMap)}function $v(e,t){t.debug===!0&&(O?R.enable():Pt(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Qe().update(t.initialScope);const r=new e(t);return Wv(r),r.init(),r}function Wv(e){Qe().setClient(e)}const Kc=Symbol.for("SentryBufferFullError");function Qv(e){const t=[];function s(){return e===void 0||t.length<e}function r(i){return t.splice(t.indexOf(i),1)[0]||Promise.resolve(void 0)}function n(i){if(!s())return Er(Kc);const a=i();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function o(i){return new wt((a,c)=>{let d=t.length;if(!d)return a(!0);const u=setTimeout(()=>{i&&i>0&&a(!1)},i);t.forEach(h=>{jt(h).then(()=>{--d||(clearTimeout(u),a(!0))},c)})})}return{$:t,add:n,drain:o}}const Kv=60*1e3;function zv(e,t=Date.now()){const s=parseInt(`${e}`,10);if(!isNaN(s))return s*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Kv:r-t}function Gv(e,t){return e[t]||e.all||0}function Yv(e,t,s=Date.now()){return Gv(e,t)>s}function Jv(e,{statusCode:t,headers:s},r=Date.now()){const n={...e},o=s==null?void 0:s["x-sentry-rate-limits"],i=s==null?void 0:s["retry-after"];if(o)for(const a of o.trim().split(",")){const[c,d,,,u]=a.split(":",5),h=parseInt(c,10),b=(isNaN(h)?60:h)*1e3;if(!d)n.all=r+b;else for(const y of d.split(";"))y==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(n[y]=r+b):n[y]=r+b}else i?n.all=r+zv(i,r):t===429&&(n.all=r+60*1e3);return n}const Xv=64;function Zv(e,t,s=Qv(e.bufferSize||Xv)){let r={};const n=i=>s.drain(i);function o(i){const a=[];if(Ti(i,(h,b)=>{const y=Di(b);Yv(r,y)?e.recordDroppedEvent("ratelimit_backoff",y):a.push(h)}),a.length===0)return jt({});const c=ls(i[0],a),d=h=>{Ti(c,(b,y)=>{e.recordDroppedEvent(h,Di(y))})},u=()=>t({body:Ub(c)}).then(h=>(h.statusCode!==void 0&&(h.statusCode<200||h.statusCode>=300)&&O&&R.warn(`Sentry responded with status code ${h.statusCode} to sent event.`),r=Jv(r,h),h),h=>{throw d("network_error"),O&&R.error("Encountered error running transport request:",h),h});return s.add(u).then(h=>h,h=>{if(h===Kc)return O&&R.error("Skipped sending event because buffer is full."),d("queue_overflow"),jt({});throw h})}return{send:o,flush:n}}function ex(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function tx(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function zc(e,t,s=[t],r="npm"){const n=e._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${t}`,packages:s.map(o=>({name:`${r}:@sentry/${o}`,version:qt})),version:qt}),e._metadata=n}const sx=100;function Ut(e,t){const s=le(),r=cs();if(!s)return;const{beforeBreadcrumb:n=null,maxBreadcrumbs:o=sx}=s.getOptions();if(o<=0)return;const a={timestamp:Us(),...e},c=n?Pt(()=>n(a,t)):a;c!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",c,t),r.addBreadcrumb(c,o))}let Yi;const rx="FunctionToString",Ji=new WeakMap,nx=()=>({name:rx,setupOnce(){Yi=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=bo(this),s=Ji.has(le())&&t!==void 0?t:this;return Yi.apply(s,e)}}catch{}},setup(e){Ji.set(e,!0)}}),ox=nx,ix=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],ax="EventFilters",cx=(e={})=>{let t;return{name:ax,setup(s){const r=s.getOptions();t=Xi(e,r)},processEvent(s,r,n){if(!t){const o=n.getOptions();t=Xi(e,o)}return ux(s,t)?null:s}}},lx=(e={})=>({...cx(e),name:"InboundFilters"});function Xi(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ix],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function ux(e,t){if(e.type){if(e.type==="transaction"&&fx(e,t.ignoreTransactions))return O&&R.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Lt(e)}`),!0}else{if(dx(e,t.ignoreErrors))return O&&R.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Lt(e)}`),!0;if(gx(e))return O&&R.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Lt(e)}`),!0;if(hx(e,t.denyUrls))return O&&R.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Lt(e)}.
Url: ${kr(e)}`),!0;if(!px(e,t.allowUrls))return O&&R.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Lt(e)}.
Url: ${kr(e)}`),!0}return!1}function dx(e,t){return t!=null&&t.length?Hc(e).some(s=>jr(s,t)):!1}function fx(e,t){if(!(t!=null&&t.length))return!1;const s=e.transaction;return s?jr(s,t):!1}function hx(e,t){if(!(t!=null&&t.length))return!1;const s=kr(e);return s?jr(s,t):!1}function px(e,t){if(!(t!=null&&t.length))return!0;const s=kr(e);return s?jr(s,t):!0}function mx(e=[]){for(let t=e.length-1;t>=0;t--){const s=e[t];if(s&&s.filename!=="<anonymous>"&&s.filename!=="[native code]")return s.filename||null}return null}function kr(e){var t,s;try{const r=[...((t=e.exception)==null?void 0:t.values)??[]].reverse().find(o=>{var i,a,c;return((i=o.mechanism)==null?void 0:i.parent_id)===void 0&&((c=(a=o.stacktrace)==null?void 0:a.frames)==null?void 0:c.length)}),n=(s=r==null?void 0:r.stacktrace)==null?void 0:s.frames;return n?mx(n):null}catch{return O&&R.error(`Cannot extract url for event ${Lt(e)}`),null}}function gx(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)!=null&&s.length?!e.message&&!e.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function yx(e,t,s,r,n,o){var a;if(!((a=n.exception)!=null&&a.values)||!o||!xt(o.originalException,Error))return;const i=n.exception.values.length>0?n.exception.values[n.exception.values.length-1]:void 0;i&&(n.exception.values=jn(e,t,r,o.originalException,s,n.exception.values,i,0))}function jn(e,t,s,r,n,o,i,a){if(o.length>=s+1)return o;let c=[...o];if(xt(r[n],Error)){Zi(i,a);const d=e(t,r[n]),u=c.length;ea(d,n,u,a),c=jn(e,t,s,r[n],n,[d,...c],d,u)}return Array.isArray(r.errors)&&r.errors.forEach((d,u)=>{if(xt(d,Error)){Zi(i,a);const h=e(t,d),b=c.length;ea(h,`errors[${u}]`,b,a),c=jn(e,t,s,d,n,[h,...c],h,b)}}),c}function Zi(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function ea(e,t,s,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:s,parent_id:r}}function _x(e){const t="console";Vt(t,e),$t(t,bx)}function bx(){"console"in X&&C_.forEach(function(e){e in X.console&&Ne(X.console,e,function(t){return _r[e]=t,function(...s){We("console",{args:s,level:e});const n=_r[e];n==null||n.apply(X.console,s)}})})}function vx(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const xx="Dedupe",wx=()=>{let e;return{name:xx,processEvent(t){if(t.type)return t;try{if(Ex(t,e))return O&&R.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},Sx=wx;function Ex(e,t){return t?!!(kx(e,t)||Px(e,t)):!1}function kx(e,t){const s=e.message,r=t.message;return!(!s&&!r||s&&!r||!s&&r||s!==r||!Yc(e,t)||!Gc(e,t))}function Px(e,t){const s=ta(t),r=ta(e);return!(!s||!r||s.type!==r.type||s.value!==r.value||!Yc(e,t)||!Gc(e,t))}function Gc(e,t){let s=yi(e),r=yi(t);if(!s&&!r)return!0;if(s&&!r||!s&&r||(s=s,r=r,r.length!==s.length))return!1;for(let n=0;n<r.length;n++){const o=r[n],i=s[n];if(o.filename!==i.filename||o.lineno!==i.lineno||o.colno!==i.colno||o.function!==i.function)return!1}return!0}function Yc(e,t){let s=e.fingerprint,r=t.fingerprint;if(!s&&!r)return!0;if(s&&!r||!s&&r)return!1;s=s,r=r;try{return s.join("")===r.join("")}catch{return!1}}function ta(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)==null?void 0:s[0]}function un(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const s=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:s,hash:r,relative:t[5]+s+r}}function Jc(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Fs=X;function Cx(){return"history"in Fs&&!!Fs.history}function Ix(){if(!("fetch"in Fs))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function Un(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ax(){var s;if(typeof EdgeRuntime=="string")return!0;if(!Ix())return!1;if(Un(Fs.fetch))return!0;let e=!1;const t=Fs.document;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),(s=r.contentWindow)!=null&&s.fetch&&(e=Un(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){O&&R.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function Tx(e,t){const s="fetch";Vt(s,e),$t(s,()=>Dx(void 0,t))}function Dx(e,t=!1){t&&!Ax()||Ne(X,"fetch",function(s){return function(...r){const n=new Error,{method:o,url:i}=Rx(r),a={args:r,fetchData:{method:o,url:i},startTimestamp:Ie()*1e3,virtualError:n,headers:Lx(r)};return We("fetch",{...a}),s.apply(X,r).then(async c=>(We("fetch",{...a,endTimestamp:Ie()*1e3,response:c}),c),c=>{if(We("fetch",{...a,endTimestamp:Ie()*1e3,error:c}),po(c)&&c.stack===void 0&&(c.stack=n.stack,je(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(a.fetchData.url);c.message=`${c.message} (${d.host})`}catch{}throw c})}})}function Hn(e,t){return!!e&&typeof e=="object"&&!!e[t]}function sa(e){return typeof e=="string"?e:e?Hn(e,"url")?e.url:e.toString?e.toString():"":""}function Rx(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[s,r]=e;return{url:sa(s),method:Hn(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:sa(t),method:Hn(t,"method")?String(t.method).toUpperCase():"GET"}}function Lx(e){const[t,s]=e;try{if(typeof s=="object"&&s!==null&&"headers"in s&&s.headers)return new Headers(s.headers);if($_(t))return new Headers(t.headers)}catch{}}function Nx(){return"npm"}const ie=X;let Vn=0;function Xc(){return Vn>0}function Ox(){Vn++,setTimeout(()=>{Vn--})}function os(e,t={}){function s(n){return typeof n=="function"}if(!s(e))return e;try{const n=e.__sentry_wrapped__;if(n)return typeof n=="function"?n:e;if(bo(e))return e}catch{return e}const r=function(...n){try{const o=n.map(i=>os(i,t));return e.apply(this,o)}catch(o){throw Ox(),vo(i=>{i.addEventProcessor(a=>(t.mechanism&&(An(a,void 0),ss(a,t.mechanism)),a.extra={...a.extra,arguments:n},a)),qc(o)}),o}};try{for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}catch{}bc(r,e),je(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Fx(){const e=_o(),{referrer:t}=ie.document||{},{userAgent:s}=ie.navigator||{},r={...t&&{Referer:t},...s&&{"User-Agent":s}};return{url:e,headers:r}}function Io(e,t){const s=Ao(e,t),r={type:Ux(t),value:Hx(t)};return s.length&&(r.stacktrace={frames:s}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function qx(e,t,s,r){const n=le(),o=n==null?void 0:n.getOptions().normalizeDepth,i=Kx(t),a={__serialized__:Lc(t,o)};if(i)return{exception:{values:[Io(e,i)]},extra:a};const c={exception:{values:[{type:Mr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:Wx(t,{isUnhandledRejection:r})}]},extra:a};if(s){const d=Ao(e,s);d.length&&(c.exception.values[0].stacktrace={frames:d})}return c}function dn(e,t){return{exception:{values:[Io(e,t)]}}}function Ao(e,t){const s=t.stacktrace||t.stack||"",r=Bx(t),n=jx(t);try{return e(s,r,n)}catch{}return[]}const Mx=/Minified React error #\d+;/i;function Bx(e){return e&&Mx.test(e.message)?1:0}function jx(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Zc(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function Ux(e){const t=e==null?void 0:e.name;return!t&&Zc(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Hx(e){const t=e==null?void 0:e.message;return Zc(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Vx(e,t,s,r){const n=(s==null?void 0:s.syntheticException)||void 0,o=To(e,t,n,r);return ss(o),o.level="error",s!=null&&s.event_id&&(o.event_id=s.event_id),jt(o)}function $x(e,t,s="info",r,n){const o=(r==null?void 0:r.syntheticException)||void 0,i=$n(e,t,o,n);return i.level=s,r!=null&&r.event_id&&(i.event_id=r.event_id),jt(i)}function To(e,t,s,r,n){let o;if(gc(t)&&t.error)return dn(e,t.error);if(bi(t)||j_(t)){const i=t;if("stack"in t)o=dn(e,t);else{const a=i.name||(bi(i)?"DOMError":"DOMException"),c=i.message?`${a}: ${i.message}`:a;o=$n(e,c,s,r),An(o,c)}return"code"in i&&(o.tags={...o.tags,"DOMException.code":`${i.code}`}),o}return po(t)?dn(e,t):Ls(t)||Mr(t)?(o=qx(e,t,s,n),ss(o,{synthetic:!0}),o):(o=$n(e,t,s,r),An(o,`${t}`),ss(o,{synthetic:!0}),o)}function $n(e,t,s,r){const n={};if(r&&s){const o=Ao(e,s);o.length&&(n.exception={values:[{value:t,stacktrace:{frames:o}}]}),ss(n,{synthetic:!0})}if(mo(t)){const{__sentry_template_string__:o,__sentry_template_values__:i}=t;return n.logentry={message:o,params:i},n}return n.message=t,n}function Wx(e,{isUnhandledRejection:t}){const s=z_(e),r=t?"promise rejection":"exception";return gc(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Mr(e)?`Event \`${Qx(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${s}`}function Qx(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Kx(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const s=e[t];if(s instanceof Error)return s}}const zx=5e3;class Gx extends Mv{constructor(t){const s=Yx(t),r=ie.SENTRY_SDK_SOURCE||Nx();zc(s,"browser",["browser"],r),super(s);const{sendDefaultPii:n,sendClientReports:o,enableLogs:i}=this._options;ie.document&&(o||i)&&ie.document.addEventListener("visibilitychange",()=>{ie.document.visibilityState==="hidden"&&(o&&this._flushOutcomes(),i&&ln(this))}),i&&(this.on("flush",()=>{ln(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{ln(this)},zx)})),n&&(this.on("postprocessEvent",ex),this.on("beforeSendSession",tx))}eventFromException(t,s){return Vx(this._options.stackParser,t,s,this._options.attachStacktrace)}eventFromMessage(t,s="info",r){return $x(this._options.stackParser,t,s,r,this._options.attachStacktrace)}_prepareEvent(t,s,r,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,s,r,n)}}function Yx(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=ie.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Jx=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,be=X,Xx=1e3;let ra,Wn,Qn;function Zx(e){const t="dom";Vt(t,e),$t(t,e1)}function e1(){if(!be.document)return;const e=We.bind(null,"dom"),t=na(e,!0);be.document.addEventListener("click",t,!1),be.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(s=>{var o,i;const n=(o=be[s])==null?void 0:o.prototype;(i=n==null?void 0:n.hasOwnProperty)!=null&&i.call(n,"addEventListener")&&(Ne(n,"addEventListener",function(a){return function(c,d,u){if(c==="click"||c=="keypress")try{const h=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},b=h[c]=h[c]||{refCount:0};if(!b.handler){const y=na(e);b.handler=y,a.call(this,c,y,u)}b.refCount++}catch{}return a.call(this,c,d,u)}}),Ne(n,"removeEventListener",function(a){return function(c,d,u){if(c==="click"||c=="keypress")try{const h=this.__sentry_instrumentation_handlers__||{},b=h[c];b&&(b.refCount--,b.refCount<=0&&(a.call(this,c,b.handler,u),b.handler=void 0,delete h[c]),Object.keys(h).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,c,d,u)}}))})}function t1(e){if(e.type!==Wn)return!1;try{if(!e.target||e.target._sentryId!==Qn)return!1}catch{}return!0}function s1(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function na(e,t=!1){return s=>{if(!s||s._sentryCaptured)return;const r=r1(s);if(s1(s.type,r))return;je(s,"_sentryCaptured",!0),r&&!r._sentryId&&je(r,"_sentryId",qe());const n=s.type==="keypress"?"input":s.type;t1(s)||(e({event:s,name:n,global:t}),Wn=s.type,Qn=r?r._sentryId:void 0),clearTimeout(ra),ra=be.setTimeout(()=>{Qn=void 0,Wn=void 0},Xx)}}function r1(e){try{return e.target}catch{return null}}let tr;function el(e){const t="history";Vt(t,e),$t(t,n1)}function n1(){if(be.addEventListener("popstate",()=>{const t=be.location.href,s=tr;if(tr=t,s===t)return;We("history",{from:s,to:t})}),!Cx())return;function e(t){return function(...s){const r=s.length>2?s[2]:void 0;if(r){const n=tr,o=o1(String(r));if(tr=o,n===o)return t.apply(this,s);We("history",{from:n,to:o})}return t.apply(this,s)}}Ne(be.history,"pushState",e),Ne(be.history,"replaceState",e)}function o1(e){try{return new URL(e,be.location.origin).toString()}catch{return e}}const dr={};function i1(e){const t=dr[e];if(t)return t;let s=be[e];if(Un(s))return dr[e]=s.bind(be);const r=be.document;if(r&&typeof r.createElement=="function")try{const n=r.createElement("iframe");n.hidden=!0,r.head.appendChild(n);const o=n.contentWindow;o!=null&&o[e]&&(s=o[e]),r.head.removeChild(n)}catch(n){Jx&&R.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,n)}return s&&(dr[e]=s.bind(be))}function oa(e){dr[e]=void 0}const ys="__sentry_xhr_v3__";function a1(e){const t="xhr";Vt(t,e),$t(t,c1)}function c1(){if(!be.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,s,r){const n=new Error,o=Ie()*1e3,i=ut(r[0])?r[0].toUpperCase():void 0,a=l1(r[1]);if(!i||!a)return t.apply(s,r);s[ys]={method:i,url:a,request_headers:{}},i==="POST"&&a.match(/sentry_key/)&&(s.__sentry_own_request__=!0);const c=()=>{const d=s[ys];if(d&&s.readyState===4){try{d.status_code=s.status}catch{}const u={endTimestamp:Ie()*1e3,startTimestamp:o,xhr:s,virtualError:n};We("xhr",u)}};return"onreadystatechange"in s&&typeof s.onreadystatechange=="function"?s.onreadystatechange=new Proxy(s.onreadystatechange,{apply(d,u,h){return c(),d.apply(u,h)}}):s.addEventListener("readystatechange",c),s.setRequestHeader=new Proxy(s.setRequestHeader,{apply(d,u,h){const[b,y]=h,D=u[ys];return D&&ut(b)&&ut(y)&&(D.request_headers[b.toLowerCase()]=y),d.apply(u,h)}}),t.apply(s,r)}}),e.send=new Proxy(e.send,{apply(t,s,r){const n=s[ys];if(!n)return t.apply(s,r);r[0]!==void 0&&(n.body=r[0]);const o={startTimestamp:Ie()*1e3,xhr:s};return We("xhr",o),t.apply(s,r)}})}function l1(e){if(ut(e))return e;try{return e.toString()}catch{}}function u1(e,t=i1("fetch")){let s=0,r=0;function n(o){const i=o.body.length;s+=i,r++;const a={body:o.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:s<=6e4&&r<15,...e.fetchOptions};if(!t)return oa("fetch"),Er("No fetch implementation available");try{return t(e.url,a).then(c=>(s-=i,r--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return oa("fetch"),s-=i,r--,Er(c)}}return Zv(e,n)}const d1=30,f1=50;function Kn(e,t,s,r){const n={filename:e,function:t==="<anonymous>"?Bt:t,in_app:!0};return s!==void 0&&(n.lineno=s),r!==void 0&&(n.colno=r),n}const h1=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,p1=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,m1=/\((\S*)(?::(\d+))(?::(\d+))\)/,g1=/at (.+?) ?\(data:(.+?),/,y1=e=>{const t=e.match(g1);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const s=h1.exec(e);if(s){const[,n,o,i]=s;return Kn(n,Bt,+o,+i)}const r=p1.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=m1.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[o,i]=tl(r[1]||Bt,r[2]);return Kn(i,o,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},_1=[d1,y1],b1=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,v1=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,x1=e=>{const t=b1.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const o=v1.exec(t[3]);o&&(t[1]=t[1]||"eval",t[3]=o[1],t[4]=o[2],t[5]="")}let r=t[3],n=t[1]||Bt;return[n,r]=tl(n,r),Kn(r,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},w1=[f1,x1],S1=[_1,w1],E1=pc(...S1),tl=(e,t)=>{const s=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return s||r?[e.indexOf("@")!==-1?e.split("@")[0]:Bt,s?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Vr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,sr=1024,k1="Breadcrumbs",P1=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:k1,setup(s){t.console&&_x(T1(s)),t.dom&&Zx(A1(s,t.dom)),t.xhr&&a1(D1(s)),t.fetch&&Tx(R1(s)),t.history&&el(L1(s)),t.sentry&&s.on("beforeSendEvent",I1(s))}}},C1=P1;function I1(e){return function(s){le()===e&&Ut({category:`sentry.${s.type==="transaction"?"transaction":"event"}`,event_id:s.event_id,level:s.level,message:Lt(s)},{event:s})}}function A1(e,t){return function(r){if(le()!==e)return;let n,o,i=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>sr&&(Vr&&R.warn(`\`dom.maxStringLength\` cannot exceed ${sr}, but a value of ${a} was configured. Sentry will use ${sr} instead.`),a=sr),typeof i=="string"&&(i=[i]);try{const d=r.event,u=N1(d)?d.target:d;n=_c(u,{keyAttrs:i,maxStringLength:a}),o=K_(u)}catch{n="<unknown>"}if(n.length===0)return;const c={category:`ui.${r.name}`,message:n};o&&(c.data={"ui.component_name":o}),Ut(c,{event:r.event,name:r.name,global:r.global})}}function T1(e){return function(s){if(le()!==e)return;const r={category:"console",data:{arguments:s.args,logger:"console"},level:vx(s.level),message:vi(s.args," ")};if(s.level==="assert")if(s.args[0]===!1)r.message=`Assertion failed: ${vi(s.args.slice(1)," ")||"console.assert"}`,r.data.arguments=s.args.slice(1);else return;Ut(r,{input:s.args,level:s.level})}}function D1(e){return function(s){if(le()!==e)return;const{startTimestamp:r,endTimestamp:n}=s,o=s.xhr[ys];if(!r||!n||!o)return;const{method:i,url:a,status_code:c,body:d}=o,u={method:i,url:a,status_code:c},h={xhr:s.xhr,input:d,startTimestamp:r,endTimestamp:n},b={category:"xhr",data:u,type:"http",level:Jc(c)};e.emit("beforeOutgoingRequestBreadcrumb",b,h),Ut(b,h)}}function R1(e){return function(s){if(le()!==e)return;const{startTimestamp:r,endTimestamp:n}=s;if(n&&!(s.fetchData.url.match(/sentry_key/)&&s.fetchData.method==="POST"))if(s.fetchData.method,s.fetchData.url,s.error){const o=s.fetchData,i={data:s.error,input:s.args,startTimestamp:r,endTimestamp:n},a={category:"fetch",data:o,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,i),Ut(a,i)}else{const o=s.response,i={...s.fetchData,status_code:o==null?void 0:o.status};s.fetchData.request_body_size,s.fetchData.response_body_size,o==null||o.status;const a={input:s.args,response:o,startTimestamp:r,endTimestamp:n},c={category:"fetch",data:i,type:"http",level:Jc(i.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",c,a),Ut(c,a)}}}function L1(e){return function(s){if(le()!==e)return;let r=s.from,n=s.to;const o=un(ie.location.href);let i=r?un(r):void 0;const a=un(n);i!=null&&i.path||(i=o),o.protocol===a.protocol&&o.host===a.host&&(n=a.relative),o.protocol===i.protocol&&o.host===i.host&&(r=i.relative),Ut({category:"navigation",data:{from:r,to:n}})}}function N1(e){return!!e&&!!e.target}const O1=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],F1="BrowserApiErrors",q1=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:F1,setupOnce(){t.setTimeout&&Ne(ie,"setTimeout",ia),t.setInterval&&Ne(ie,"setInterval",ia),t.requestAnimationFrame&&Ne(ie,"requestAnimationFrame",B1),t.XMLHttpRequest&&"XMLHttpRequest"in ie&&Ne(XMLHttpRequest.prototype,"send",j1);const s=t.eventTarget;s&&(Array.isArray(s)?s:O1).forEach(n=>U1(n,t))}}},M1=q1;function ia(e){return function(...t){const s=t[0];return t[0]=os(s,{mechanism:{data:{function:vt(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function B1(e){return function(t){return e.apply(this,[os(t,{mechanism:{data:{function:"requestAnimationFrame",handler:vt(e)},handled:!1,type:"instrument"}})])}}function j1(e){return function(...t){const s=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(n=>{n in s&&typeof s[n]=="function"&&Ne(s,n,function(o){const i={mechanism:{data:{function:n,handler:vt(o)},handled:!1,type:"instrument"}},a=bo(o);return a&&(i.mechanism.data.handler=vt(a)),os(o,i)})}),e.apply(this,t)}}function U1(e,t){var n,o;const r=(n=ie[e])==null?void 0:n.prototype;(o=r==null?void 0:r.hasOwnProperty)!=null&&o.call(r,"addEventListener")&&(Ne(r,"addEventListener",function(i){return function(a,c,d){try{H1(c)&&(c.handleEvent=os(c.handleEvent,{mechanism:{data:{function:"handleEvent",handler:vt(c),target:e},handled:!1,type:"instrument"}}))}catch{}return t.unregisterOriginalCallbacks&&V1(this,a,c),i.apply(this,[a,os(c,{mechanism:{data:{function:"addEventListener",handler:vt(c),target:e},handled:!1,type:"instrument"}}),d])}}),Ne(r,"removeEventListener",function(i){return function(a,c,d){try{const u=c.__sentry_wrapped__;u&&i.call(this,a,u,d)}catch{}return i.call(this,a,c,d)}}))}function H1(e){return typeof e.handleEvent=="function"}function V1(e,t,s){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,s)}const $1=()=>({name:"BrowserSession",setupOnce(){if(typeof ie.document>"u"){Vr&&R.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Hi({ignoreDuration:!0}),Vi(),el(({from:e,to:t})=>{e!==void 0&&e!==t&&(Hi({ignoreDuration:!0}),Vi())})}}),W1="GlobalHandlers",Q1=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:W1,setupOnce(){Error.stackTraceLimit=50},setup(s){t.onerror&&(z1(s),aa("onerror")),t.onunhandledrejection&&(G1(s),aa("onunhandledrejection"))}}},K1=Q1;function z1(e){F_(t=>{const{stackParser:s,attachStacktrace:r}=sl();if(le()!==e||Xc())return;const{msg:n,url:o,line:i,column:a,error:c}=t,d=X1(To(s,c||n,void 0,r,!1),o,i,a);d.level="error",Mc(d,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function G1(e){M_(t=>{const{stackParser:s,attachStacktrace:r}=sl();if(le()!==e||Xc())return;const n=Y1(t),o=go(n)?J1(n):To(s,n,void 0,r,!0);o.level="error",Mc(o,{originalException:n,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function Y1(e){if(go(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function J1(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function X1(e,t,s,r){const n=e.exception=e.exception||{},o=n.values=n.values||[],i=o[0]=o[0]||{},a=i.stacktrace=i.stacktrace||{},c=a.frames=a.frames||[],d=r,u=s,h=Z1(t)??_o();return c.length===0&&c.push({colno:d,filename:h,function:Bt,in_app:!0,lineno:u}),e}function aa(e){Vr&&R.log(`Global Handler attached: ${e}`)}function sl(){const e=le();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function Z1(e){if(!(!ut(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),s=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${s}${r?",base64":""}>`}return e.slice(0,1024)}}const ew=()=>({name:"HttpContext",preprocessEvent(e){var r;if(!ie.navigator&&!ie.location&&!ie.document)return;const t=Fx(),s={...t.headers,...(r=e.request)==null?void 0:r.headers};e.request={...t,...e.request,headers:s}}}),tw="cause",sw=5,rw="LinkedErrors",nw=(e={})=>{const t=e.limit||sw,s=e.key||tw;return{name:rw,preprocessEvent(r,n,o){const i=o.getOptions();yx(Io,i.stackParser,s,t,r,n)}}},ow=nw;function iw(){return aw()?(Vr&&Pt(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function aw(){var o;if(typeof ie.window>"u")return!1;const e=ie;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((o=t==null?void 0:t.runtime)!=null&&o.id))return!1;const s=_o(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(ie===ie.top&&r.some(i=>s.startsWith(`${i}://`)))}function rl(e){return[lx(),ox(),M1(),C1(),K1(),ow(),Sx(),ew(),$1()]}function cw(e={}){const t=!e.skipBrowserExtensionCheck&&iw(),s={...e,enabled:t?!1:e.enabled,stackParser:N_(e.stackParser||E1),integrations:Lv({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?rl():e.defaultIntegrations}),transport:e.transport||u1};return $v(Gx,s)}const nl=["activate","mount"],ol=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,lw=/(?:^|[-_])(\w)/g,uw=e=>e.replace(lw,t=>t.toUpperCase()).replace(/[-_]/g,""),dw="<Root>",fn="<Anonymous>",fw=(e,t)=>e.repeat(t),Cs=(e,t)=>{if(!e)return fn;if(e.$root===e)return dw;if(!e.$options)return fn;const s=e.$options;let r=s.name||s._componentTag||s.__name;const n=s.__file;if(!r&&n){const o=n.match(/([^/\\]+)\.vue$/);o&&(r=o[1])}return(r?`<${uw(r)}>`:fn)+(n&&t!==!1?` at ${n}`:"")},hw=e=>{if(e&&(e._isVue||e.__isVue)&&e.$parent){const t=[];let s=0;for(;e;){if(t.length>0){const n=t[t.length-1];if(n.constructor===e.constructor){s++,e=e.$parent;continue}else s>0&&(t[t.length-1]=[n,s],s=0)}t.push(e),e=e.$parent}return`

found in

${t.map((n,o)=>`${(o===0?"---> ":fw(" ",5+o*2))+(Array.isArray(n)?`${Cs(n[0])}... (${n[1]} recursive calls)`:Cs(n))}`).join(`
`)}`}return`

(found in ${Cs(e)})`},pw=(e,t)=>{const{errorHandler:s}=e.config;e.config.errorHandler=(r,n,o)=>{var d;const i=Cs(n,!1),a=n?hw(n):"",c={componentName:i,lifecycleHook:o,trace:a};if(t.attachProps&&n&&((d=n.$options)!=null&&d.propsData?c.propsData=n.$options.propsData:n.$props&&(c.propsData=n.$props)),setTimeout(()=>{qc(r,{captureContext:{contexts:{vue:c}},mechanism:{handled:!!s,type:"vue"}})}),typeof s=="function"&&e.config.errorHandler)s.call(e,r,n,o);else throw r}},ca="ui.vue",mw={activate:["activated","deactivated"],create:["beforeCreate","created"],unmount:["beforeUnmount","unmounted"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]};function hn(e,t,s){e.$_sentryRootComponentSpanTimer&&clearTimeout(e.$_sentryRootComponentSpanTimer),e.$_sentryRootComponentSpanTimer=setTimeout(()=>{var r;(r=e.$root)!=null&&r.$_sentryRootComponentSpan&&(e.$root.$_sentryRootComponentSpan.end(t),e.$root.$_sentryRootComponentSpan=void 0)},s)}function gw(e,t){function s(n){return n.replace(/^<([^\s]*)>(?: at [^\s]*)?$/,"$1")}return e.some(n=>s(t)===s(n))}const yw=(e={})=>{const t=(e.hooks||[]).concat(nl).filter((n,o,i)=>i.indexOf(n)===o),s={},r=e.timeout||2e3;for(const n of t){const o=mw[n];if(!o){ol&&R.warn(`Unknown hook: ${n}`);continue}for(const i of o)s[i]=function(){var b;const a=this.$root===this;a&&(this.$_sentryRootComponentSpan=this.$_sentryRootComponentSpan||Fi({name:"Application Render",op:`${ca}.render`,attributes:{[Ns]:"auto.ui.vue"},onlyIfParent:!0}),hn(this,Ie(),r));const c=Cs(this,!1);if(!(a||(Array.isArray(e.trackComponents)?gw(e.trackComponents,c):e.trackComponents))){hn(this,Ie(),r);return}this.$_sentryComponentSpans=this.$_sentryComponentSpans||{};const u=i===o[0],h=((b=this.$root)==null?void 0:b.$_sentryRootComponentSpan)||Lb();if(u){if(h){const y=this.$_sentryComponentSpans[n];y&&y.end(),this.$_sentryComponentSpans[n]=Fi({name:`Vue ${c}`,op:`${ca}.${n}`,attributes:{[Ns]:"auto.ui.vue"},onlyIfParent:!0})}}else{const y=this.$_sentryComponentSpans[n];if(!y)return;y.end(),hn(this,Ie(),r)}}}return s},_w=X,bw={Vue:_w.Vue,attachProps:!0,attachErrorHandler:!0,tracingOptions:{hooks:nl,timeout:2e3,trackComponents:!1}},vw="Vue",xw=(e={})=>({name:vw,setup(t){const s={...bw,...t.getOptions(),...e};if(!s.Vue&&!s.app){Pt(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured. Update your `Sentry.init` call with an appropriate config option: `app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).")});return}s.app?(Array.isArray(s.app)?s.app:[s.app]).forEach(n=>la(n,s)):s.Vue&&la(s.Vue,s)}}),la=(e,t)=>{var s;ol&&((s=e._instance)==null?void 0:s.isMounted)===!0&&Pt(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`.")}),t.attachErrorHandler&&pw(e,t),Hr(t)&&e.mixin(yw(t.tracingOptions))};function ww(e={}){const t={defaultIntegrations:[...rl(),xw()],...e};return zc(t,"vue"),cw(t)}const il=Rd(P_);ww({app:il,dsn:"https://3115bfd7236aa90bd81024a1fdb8c823@o4509821219700736.ingest.de.sentry.io/4509821222518864",sendDefaultPii:!0});il.mount("#app");export{Ht as A,J as a};
