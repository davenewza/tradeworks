(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))r(n);new MutationObserver(n=>{for(const i of n)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(n){const i={};return n.integrity&&(i.integrity=n.integrity),n.referrerPolicy&&(i.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?i.credentials="include":n.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(n){if(n.ep)return;n.ep=!0;const i=s(n);fetch(n.href,i)}})();/**
* @vue/shared v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Kn(e){const t=Object.create(null);for(const s of e.split(","))t[s]=1;return s=>s in t}const X={},Gt=[],nt=()=>{},cc=()=>!1,Pr=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),zn=e=>e.startsWith("onUpdate:"),xe=Object.assign,Gn=(e,t)=>{const s=e.indexOf(t);s>-1&&e.splice(s,1)},uc=Object.prototype.hasOwnProperty,$=(e,t)=>uc.call(e,t),B=Array.isArray,Yt=e=>Cr(e)==="[object Map]",ca=e=>Cr(e)==="[object Set]",j=e=>typeof e=="function",le=e=>typeof e=="string",kt=e=>typeof e=="symbol",re=e=>e!==null&&typeof e=="object",ua=e=>(re(e)||j(e))&&j(e.then)&&j(e.catch),da=Object.prototype.toString,Cr=e=>da.call(e),dc=e=>Cr(e).slice(8,-1),fa=e=>Cr(e)==="[object Object]",Yn=e=>le(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,_s=Kn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Ir=e=>{const t=Object.create(null);return s=>t[s]||(t[s]=e(s))},fc=/-(\w)/g,je=Ir(e=>e.replace(fc,(t,s)=>s?s.toUpperCase():"")),hc=/\B([A-Z])/g,Pt=Ir(e=>e.replace(hc,"-$1").toLowerCase()),Ar=Ir(e=>e.charAt(0).toUpperCase()+e.slice(1)),Wr=Ir(e=>e?`on${Ar(e)}`:""),Ft=(e,t)=>!Object.is(e,t),sr=(e,...t)=>{for(let s=0;s<e.length;s++)e[s](...t)},pn=(e,t,s,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:s})},mn=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Ni;const Tr=()=>Ni||(Ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function qs(e){if(B(e)){const t={};for(let s=0;s<e.length;s++){const r=e[s],n=le(r)?yc(r):qs(r);if(n)for(const i in n)t[i]=n[i]}return t}else if(le(e)||re(e))return e}const pc=/;(?![^(]*\))/g,mc=/:([^]+)/,gc=/\/\*[^]*?\*\//g;function yc(e){const t={};return e.replace(gc,"").split(pc).forEach(s=>{if(s){const r=s.split(mc);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ae(e){let t="";if(le(e))t=e;else if(B(e))for(let s=0;s<e.length;s++){const r=ae(e[s]);r&&(t+=r+" ")}else if(re(e))for(const s in e)e[s]&&(t+=s+" ");return t.trim()}const _c="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",bc=Kn(_c);function ha(e){return!!e||e===""}const pa=e=>!!(e&&e.__v_isRef===!0),_=e=>le(e)?e:e==null?"":B(e)||re(e)&&(e.toString===da||!j(e.toString))?pa(e)?_(e.value):JSON.stringify(e,ma,2):String(e),ma=(e,t)=>pa(t)?ma(e,t.value):Yt(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((s,[r,n],i)=>(s[Qr(r,i)+" =>"]=n,s),{})}:ca(t)?{[`Set(${t.size})`]:[...t.values()].map(s=>Qr(s))}:kt(t)?Qr(t):re(t)&&!B(t)&&!fa(t)?String(t):t,Qr=(e,t="")=>{var s;return kt(e)?`Symbol(${(s=e.description)!=null?s:t})`:e};/**
* @vue/reactivity v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ke;class vc{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ke,!t&&ke&&(this.index=(ke.scopes||(ke.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].pause();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,s;if(this.scopes)for(t=0,s=this.scopes.length;t<s;t++)this.scopes[t].resume();for(t=0,s=this.effects.length;t<s;t++)this.effects[t].resume()}}run(t){if(this._active){const s=ke;try{return ke=this,t()}finally{ke=s}}}on(){++this._on===1&&(this.prevScope=ke,ke=this)}off(){this._on>0&&--this._on===0&&(ke=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let s,r;for(s=0,r=this.effects.length;s<r;s++)this.effects[s].stop();for(this.effects.length=0,s=0,r=this.cleanups.length;s<r;s++)this.cleanups[s]();if(this.cleanups.length=0,this.scopes){for(s=0,r=this.scopes.length;s<r;s++)this.scopes[s].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function xc(){return ke}let te;const Kr=new WeakSet;class ga{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ke&&ke.active&&ke.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Kr.has(this)&&(Kr.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||_a(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Oi(this),ba(this);const t=te,s=$e;te=this,$e=!0;try{return this.fn()}finally{va(this),te=t,$e=s,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Zn(t);this.deps=this.depsTail=void 0,Oi(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Kr.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){gn(this)&&this.run()}get dirty(){return gn(this)}}let ya=0,bs,vs;function _a(e,t=!1){if(e.flags|=8,t){e.next=vs,vs=e;return}e.next=bs,bs=e}function Jn(){ya++}function Xn(){if(--ya>0)return;if(vs){let t=vs;for(vs=void 0;t;){const s=t.next;t.next=void 0,t.flags&=-9,t=s}}let e;for(;bs;){let t=bs;for(bs=void 0;t;){const s=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=s}}if(e)throw e}function ba(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function va(e){let t,s=e.depsTail,r=s;for(;r;){const n=r.prevDep;r.version===-1?(r===s&&(s=n),Zn(r),wc(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=n}e.deps=t,e.depsTail=s}function gn(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(xa(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function xa(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===Is)||(e.globalVersion=Is,!e.isSSR&&e.flags&128&&(!e.deps&&!e._dirty||!gn(e))))return;e.flags|=2;const t=e.dep,s=te,r=$e;te=e,$e=!0;try{ba(e);const n=e.fn(e._value);(t.version===0||Ft(n,e._value))&&(e.flags|=128,e._value=n,t.version++)}catch(n){throw t.version++,n}finally{te=s,$e=r,va(e),e.flags&=-3}}function Zn(e,t=!1){const{dep:s,prevSub:r,nextSub:n}=e;if(r&&(r.nextSub=n,e.prevSub=void 0),n&&(n.prevSub=r,e.nextSub=void 0),s.subs===e&&(s.subs=r,!r&&s.computed)){s.computed.flags&=-5;for(let i=s.computed.deps;i;i=i.nextDep)Zn(i,!0)}!t&&!--s.sc&&s.map&&s.map.delete(s.key)}function wc(e){const{prevDep:t,nextDep:s}=e;t&&(t.nextDep=s,e.prevDep=void 0),s&&(s.prevDep=t,e.nextDep=void 0)}let $e=!0;const wa=[];function pt(){wa.push($e),$e=!1}function mt(){const e=wa.pop();$e=e===void 0?!0:e}function Oi(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const s=te;te=void 0;try{t()}finally{te=s}}}let Is=0;class Sc{constructor(t,s){this.sub=t,this.dep=s,this.version=s.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Sa{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(t){if(!te||!$e||te===this.computed)return;let s=this.activeLink;if(s===void 0||s.sub!==te)s=this.activeLink=new Sc(te,this),te.deps?(s.prevDep=te.depsTail,te.depsTail.nextDep=s,te.depsTail=s):te.deps=te.depsTail=s,Ea(s);else if(s.version===-1&&(s.version=this.version,s.nextDep)){const r=s.nextDep;r.prevDep=s.prevDep,s.prevDep&&(s.prevDep.nextDep=r),s.prevDep=te.depsTail,s.nextDep=void 0,te.depsTail.nextDep=s,te.depsTail=s,te.deps===s&&(te.deps=r)}return s}trigger(t){this.version++,Is++,this.notify(t)}notify(t){Jn();try{for(let s=this.subs;s;s=s.prevSub)s.sub.notify()&&s.sub.dep.notify()}finally{Xn()}}}function Ea(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)Ea(r)}const s=e.dep.subs;s!==e&&(e.prevSub=s,s&&(s.nextSub=e)),e.dep.subs=e}}const yn=new WeakMap,qt=Symbol(""),_n=Symbol(""),As=Symbol("");function pe(e,t,s){if($e&&te){let r=yn.get(e);r||yn.set(e,r=new Map);let n=r.get(s);n||(r.set(s,n=new Sa),n.map=r,n.key=s),n.track()}}function dt(e,t,s,r,n,i){const o=yn.get(e);if(!o){Is++;return}const a=l=>{l&&l.trigger()};if(Jn(),t==="clear")o.forEach(a);else{const l=B(e),d=l&&Yn(s);if(l&&s==="length"){const u=Number(r);o.forEach((h,b)=>{(b==="length"||b===As||!kt(b)&&b>=u)&&a(h)})}else switch((s!==void 0||o.has(void 0))&&a(o.get(s)),d&&a(o.get(As)),t){case"add":l?d&&a(o.get("length")):(a(o.get(qt)),Yt(e)&&a(o.get(_n)));break;case"delete":l||(a(o.get(qt)),Yt(e)&&a(o.get(_n)));break;case"set":Yt(e)&&a(o.get(qt));break}}Xn()}function Qt(e){const t=G(e);return t===e?t:(pe(t,"iterate",As),We(e)?t:t.map(ye))}function Dr(e){return pe(e=G(e),"iterate",As),e}const Ec={__proto__:null,[Symbol.iterator](){return zr(this,Symbol.iterator,ye)},concat(...e){return Qt(this).concat(...e.map(t=>B(t)?Qt(t):t))},entries(){return zr(this,"entries",e=>(e[1]=ye(e[1]),e))},every(e,t){return lt(this,"every",e,t,void 0,arguments)},filter(e,t){return lt(this,"filter",e,t,s=>s.map(ye),arguments)},find(e,t){return lt(this,"find",e,t,ye,arguments)},findIndex(e,t){return lt(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return lt(this,"findLast",e,t,ye,arguments)},findLastIndex(e,t){return lt(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return lt(this,"forEach",e,t,void 0,arguments)},includes(...e){return Gr(this,"includes",e)},indexOf(...e){return Gr(this,"indexOf",e)},join(e){return Qt(this).join(e)},lastIndexOf(...e){return Gr(this,"lastIndexOf",e)},map(e,t){return lt(this,"map",e,t,void 0,arguments)},pop(){return hs(this,"pop")},push(...e){return hs(this,"push",e)},reduce(e,...t){return Fi(this,"reduce",e,t)},reduceRight(e,...t){return Fi(this,"reduceRight",e,t)},shift(){return hs(this,"shift")},some(e,t){return lt(this,"some",e,t,void 0,arguments)},splice(...e){return hs(this,"splice",e)},toReversed(){return Qt(this).toReversed()},toSorted(e){return Qt(this).toSorted(e)},toSpliced(...e){return Qt(this).toSpliced(...e)},unshift(...e){return hs(this,"unshift",e)},values(){return zr(this,"values",ye)}};function zr(e,t,s){const r=Dr(e),n=r[t]();return r!==e&&!We(e)&&(n._next=n.next,n.next=()=>{const i=n._next();return i.value&&(i.value=s(i.value)),i}),n}const kc=Array.prototype;function lt(e,t,s,r,n,i){const o=Dr(e),a=o!==e&&!We(e),l=o[t];if(l!==kc[t]){const h=l.apply(e,i);return a?ye(h):h}let d=s;o!==e&&(a?d=function(h,b){return s.call(this,ye(h),b,e)}:s.length>2&&(d=function(h,b){return s.call(this,h,b,e)}));const u=l.call(o,d,r);return a&&n?n(u):u}function Fi(e,t,s,r){const n=Dr(e);let i=s;return n!==e&&(We(e)?s.length>3&&(i=function(o,a,l){return s.call(this,o,a,l,e)}):i=function(o,a,l){return s.call(this,o,ye(a),l,e)}),n[t](i,...r)}function Gr(e,t,s){const r=G(e);pe(r,"iterate",As);const n=r[t](...s);return(n===-1||n===!1)&&ri(s[0])?(s[0]=G(s[0]),r[t](...s)):n}function hs(e,t,s=[]){pt(),Jn();const r=G(e)[t].apply(e,s);return Xn(),mt(),r}const Pc=Kn("__proto__,__v_isRef,__isVue"),ka=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(kt));function Cc(e){kt(e)||(e=String(e));const t=G(this);return pe(t,"has",e),t.hasOwnProperty(e)}class Pa{constructor(t=!1,s=!1){this._isReadonly=t,this._isShallow=s}get(t,s,r){if(s==="__v_skip")return t.__v_skip;const n=this._isReadonly,i=this._isShallow;if(s==="__v_isReactive")return!n;if(s==="__v_isReadonly")return n;if(s==="__v_isShallow")return i;if(s==="__v_raw")return r===(n?i?qc:Ta:i?Aa:Ia).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const o=B(t);if(!n){let l;if(o&&(l=Ec[s]))return l;if(s==="hasOwnProperty")return Cc}const a=Reflect.get(t,s,ve(t)?t:r);return(kt(s)?ka.has(s):Pc(s))||(n||pe(t,"get",s),i)?a:ve(a)?o&&Yn(s)?a:a.value:re(a)?n?Da(a):ti(a):a}}class Ca extends Pa{constructor(t=!1){super(!1,t)}set(t,s,r,n){let i=t[s];if(!this._isShallow){const l=Bt(i);if(!We(r)&&!Bt(r)&&(i=G(i),r=G(r)),!B(t)&&ve(i)&&!ve(r))return l?!1:(i.value=r,!0)}const o=B(t)&&Yn(s)?Number(s)<t.length:$(t,s),a=Reflect.set(t,s,r,ve(t)?t:n);return t===G(n)&&(o?Ft(r,i)&&dt(t,"set",s,r):dt(t,"add",s,r)),a}deleteProperty(t,s){const r=$(t,s);t[s];const n=Reflect.deleteProperty(t,s);return n&&r&&dt(t,"delete",s,void 0),n}has(t,s){const r=Reflect.has(t,s);return(!kt(s)||!ka.has(s))&&pe(t,"has",s),r}ownKeys(t){return pe(t,"iterate",B(t)?"length":qt),Reflect.ownKeys(t)}}class Ic extends Pa{constructor(t=!1){super(!0,t)}set(t,s){return!0}deleteProperty(t,s){return!0}}const Ac=new Ca,Tc=new Ic,Dc=new Ca(!0);const bn=e=>e,Ks=e=>Reflect.getPrototypeOf(e);function Rc(e,t,s){return function(...r){const n=this.__v_raw,i=G(n),o=Yt(i),a=e==="entries"||e===Symbol.iterator&&o,l=e==="keys"&&o,d=n[e](...r),u=s?bn:t?dr:ye;return!t&&pe(i,"iterate",l?_n:qt),{next(){const{value:h,done:b}=d.next();return b?{value:h,done:b}:{value:a?[u(h[0]),u(h[1])]:u(h),done:b}},[Symbol.iterator](){return this}}}}function zs(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Lc(e,t){const s={get(n){const i=this.__v_raw,o=G(i),a=G(n);e||(Ft(n,a)&&pe(o,"get",n),pe(o,"get",a));const{has:l}=Ks(o),d=t?bn:e?dr:ye;if(l.call(o,n))return d(i.get(n));if(l.call(o,a))return d(i.get(a));i!==o&&i.get(n)},get size(){const n=this.__v_raw;return!e&&pe(G(n),"iterate",qt),Reflect.get(n,"size",n)},has(n){const i=this.__v_raw,o=G(i),a=G(n);return e||(Ft(n,a)&&pe(o,"has",n),pe(o,"has",a)),n===a?i.has(n):i.has(n)||i.has(a)},forEach(n,i){const o=this,a=o.__v_raw,l=G(a),d=t?bn:e?dr:ye;return!e&&pe(l,"iterate",qt),a.forEach((u,h)=>n.call(i,d(u),d(h),o))}};return xe(s,e?{add:zs("add"),set:zs("set"),delete:zs("delete"),clear:zs("clear")}:{add(n){!t&&!We(n)&&!Bt(n)&&(n=G(n));const i=G(this);return Ks(i).has.call(i,n)||(i.add(n),dt(i,"add",n,n)),this},set(n,i){!t&&!We(i)&&!Bt(i)&&(i=G(i));const o=G(this),{has:a,get:l}=Ks(o);let d=a.call(o,n);d||(n=G(n),d=a.call(o,n));const u=l.call(o,n);return o.set(n,i),d?Ft(i,u)&&dt(o,"set",n,i):dt(o,"add",n,i),this},delete(n){const i=G(this),{has:o,get:a}=Ks(i);let l=o.call(i,n);l||(n=G(n),l=o.call(i,n)),a&&a.call(i,n);const d=i.delete(n);return l&&dt(i,"delete",n,void 0),d},clear(){const n=G(this),i=n.size!==0,o=n.clear();return i&&dt(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{s[n]=Rc(n,e,t)}),s}function ei(e,t){const s=Lc(e,t);return(r,n,i)=>n==="__v_isReactive"?!e:n==="__v_isReadonly"?e:n==="__v_raw"?r:Reflect.get($(s,n)&&n in r?s:r,n,i)}const Nc={get:ei(!1,!1)},Oc={get:ei(!1,!0)},Fc={get:ei(!0,!1)};const Ia=new WeakMap,Aa=new WeakMap,Ta=new WeakMap,qc=new WeakMap;function Mc(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Bc(e){return e.__v_skip||!Object.isExtensible(e)?0:Mc(dc(e))}function ti(e){return Bt(e)?e:si(e,!1,Ac,Nc,Ia)}function jc(e){return si(e,!1,Dc,Oc,Aa)}function Da(e){return si(e,!0,Tc,Fc,Ta)}function si(e,t,s,r,n){if(!re(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=Bc(e);if(i===0)return e;const o=n.get(e);if(o)return o;const a=new Proxy(e,i===2?r:s);return n.set(e,a),a}function Jt(e){return Bt(e)?Jt(e.__v_raw):!!(e&&e.__v_isReactive)}function Bt(e){return!!(e&&e.__v_isReadonly)}function We(e){return!!(e&&e.__v_isShallow)}function ri(e){return e?!!e.__v_raw:!1}function G(e){const t=e&&e.__v_raw;return t?G(t):e}function Uc(e){return!$(e,"__v_skip")&&Object.isExtensible(e)&&pn(e,"__v_skip",!0),e}const ye=e=>re(e)?ti(e):e,dr=e=>re(e)?Da(e):e;function ve(e){return e?e.__v_isRef===!0:!1}function Hc(e){return ve(e)?e.value:e}const Vc={get:(e,t,s)=>t==="__v_raw"?e:Hc(Reflect.get(e,t,s)),set:(e,t,s,r)=>{const n=e[t];return ve(n)&&!ve(s)?(n.value=s,!0):Reflect.set(e,t,s,r)}};function Ra(e){return Jt(e)?e:new Proxy(e,Vc)}class $c{constructor(t,s,r){this.fn=t,this.setter=s,this._value=void 0,this.dep=new Sa(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=Is-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!s,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&te!==this)return _a(this,!0),!0}get value(){const t=this.dep.track();return xa(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Wc(e,t,s=!1){let r,n;return j(e)?r=e:(r=e.get,n=e.set),new $c(r,n,s)}const Gs={},fr=new WeakMap;let Lt;function Qc(e,t=!1,s=Lt){if(s){let r=fr.get(s);r||fr.set(s,r=[]),r.push(e)}}function Kc(e,t,s=X){const{immediate:r,deep:n,once:i,scheduler:o,augmentJob:a,call:l}=s,d=q=>n?q:We(q)||n===!1||n===0?ft(q,1):ft(q);let u,h,b,y,D=!1,L=!1;if(ve(e)?(h=()=>e.value,D=We(e)):Jt(e)?(h=()=>d(e),D=!0):B(e)?(L=!0,D=e.some(q=>Jt(q)||We(q)),h=()=>e.map(q=>{if(ve(q))return q.value;if(Jt(q))return d(q);if(j(q))return l?l(q,2):q()})):j(e)?t?h=l?()=>l(e,2):e:h=()=>{if(b){pt();try{b()}finally{mt()}}const q=Lt;Lt=u;try{return l?l(e,3,[y]):e(y)}finally{Lt=q}}:h=nt,t&&n){const q=h,ne=n===!0?1/0:n;h=()=>ft(q(),ne)}const V=xc(),U=()=>{u.stop(),V&&V.active&&Gn(V.effects,u)};if(i&&t){const q=t;t=(...ne)=>{q(...ne),U()}}let W=L?new Array(e.length).fill(Gs):Gs;const z=q=>{if(!(!(u.flags&1)||!u.dirty&&!q))if(t){const ne=u.run();if(n||D||(L?ne.some((He,Ie)=>Ft(He,W[Ie])):Ft(ne,W))){b&&b();const He=Lt;Lt=u;try{const Ie=[ne,W===Gs?void 0:L&&W[0]===Gs?[]:W,y];W=ne,l?l(t,3,Ie):t(...Ie)}finally{Lt=He}}}else u.run()};return a&&a(z),u=new ga(h),u.scheduler=o?()=>o(z,!1):z,y=q=>Qc(q,!1,u),b=u.onStop=()=>{const q=fr.get(u);if(q){if(l)l(q,4);else for(const ne of q)ne();fr.delete(u)}},t?r?z(!0):W=u.run():o?o(z.bind(null,!0),!0):u.run(),U.pause=u.pause.bind(u),U.resume=u.resume.bind(u),U.stop=U,U}function ft(e,t=1/0,s){if(t<=0||!re(e)||e.__v_skip||(s=s||new Set,s.has(e)))return e;if(s.add(e),t--,ve(e))ft(e.value,t,s);else if(B(e))for(let r=0;r<e.length;r++)ft(e[r],t,s);else if(ca(e)||Yt(e))e.forEach(r=>{ft(r,t,s)});else if(fa(e)){for(const r in e)ft(e[r],t,s);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&ft(e[r],t,s)}return e}/**
* @vue/runtime-core v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ms(e,t,s,r){try{return r?e(...r):e()}catch(n){Rr(n,t,s)}}function it(e,t,s,r){if(j(e)){const n=Ms(e,t,s,r);return n&&ua(n)&&n.catch(i=>{Rr(i,t,s)}),n}if(B(e)){const n=[];for(let i=0;i<e.length;i++)n.push(it(e[i],t,s,r));return n}}function Rr(e,t,s,r=!0){const n=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||X;if(t){let a=t.parent;const l=t.proxy,d=`https://vuejs.org/error-reference/#runtime-${s}`;for(;a;){const u=a.ec;if(u){for(let h=0;h<u.length;h++)if(u[h](e,l,d)===!1)return}a=a.parent}if(i){pt(),Ms(i,null,10,[e,l,d]),mt();return}}zc(e,s,n,r,o)}function zc(e,t,s,r=!0,n=!1){if(n)throw e;console.error(e)}const _e=[];let st=-1;const Xt=[];let _t=null,Kt=0;const La=Promise.resolve();let hr=null;function Gc(e){const t=hr||La;return e?t.then(this?e.bind(this):e):t}function Yc(e){let t=st+1,s=_e.length;for(;t<s;){const r=t+s>>>1,n=_e[r],i=Ts(n);i<e||i===e&&n.flags&2?t=r+1:s=r}return t}function ni(e){if(!(e.flags&1)){const t=Ts(e),s=_e[_e.length-1];!s||!(e.flags&2)&&t>=Ts(s)?_e.push(e):_e.splice(Yc(t),0,e),e.flags|=1,Na()}}function Na(){hr||(hr=La.then(Fa))}function Jc(e){B(e)?Xt.push(...e):_t&&e.id===-1?_t.splice(Kt+1,0,e):e.flags&1||(Xt.push(e),e.flags|=1),Na()}function qi(e,t,s=st+1){for(;s<_e.length;s++){const r=_e[s];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;_e.splice(s,1),s--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function Oa(e){if(Xt.length){const t=[...new Set(Xt)].sort((s,r)=>Ts(s)-Ts(r));if(Xt.length=0,_t){_t.push(...t);return}for(_t=t,Kt=0;Kt<_t.length;Kt++){const s=_t[Kt];s.flags&4&&(s.flags&=-2),s.flags&8||s(),s.flags&=-2}_t=null,Kt=0}}const Ts=e=>e.id==null?e.flags&2?-1:1/0:e.id;function Fa(e){try{for(st=0;st<_e.length;st++){const t=_e[st];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ms(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;st<_e.length;st++){const t=_e[st];t&&(t.flags&=-2)}st=-1,_e.length=0,Oa(),hr=null,(_e.length||Xt.length)&&Fa()}}let Le=null,qa=null;function pr(e){const t=Le;return Le=e,qa=e&&e.type.__scopeId||null,t}function Xc(e,t=Le,s){if(!t||e._n)return e;const r=(...n)=>{r._d&&Ki(-1);const i=pr(t);let o;try{o=e(...n)}finally{pr(i),r._d&&Ki(1)}return o};return r._n=!0,r._c=!0,r._d=!0,r}function ue(e,t){if(Le===null)return e;const s=Fr(Le),r=e.dirs||(e.dirs=[]);for(let n=0;n<t.length;n++){let[i,o,a,l=X]=t[n];i&&(j(i)&&(i={mounted:i,updated:i}),i.deep&&ft(o),r.push({dir:i,instance:s,value:o,oldValue:void 0,arg:a,modifiers:l}))}return e}function Dt(e,t,s,r){const n=e.dirs,i=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];i&&(a.oldValue=i[o].value);let l=a.dir[r];l&&(pt(),it(l,s,8,[e.el,a,e,t]),mt())}}const Zc=Symbol("_vte"),eu=e=>e.__isTeleport;function ii(e,t){e.shapeFlag&6&&e.component?(e.transition=t,ii(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}function Ma(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function xs(e,t,s,r,n=!1){if(B(e)){e.forEach((D,L)=>xs(D,t&&(B(t)?t[L]:t),s,r,n));return}if(ws(r)&&!n){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&xs(e,t,s,r.component.subTree);return}const i=r.shapeFlag&4?Fr(r.component):r.el,o=n?null:i,{i:a,r:l}=e,d=t&&t.r,u=a.refs===X?a.refs={}:a.refs,h=a.setupState,b=G(h),y=h===X?()=>!1:D=>$(b,D);if(d!=null&&d!==l&&(le(d)?(u[d]=null,y(d)&&(h[d]=null)):ve(d)&&(d.value=null)),j(l))Ms(l,a,12,[o,u]);else{const D=le(l),L=ve(l);if(D||L){const V=()=>{if(e.f){const U=D?y(l)?h[l]:u[l]:l.value;n?B(U)&&Gn(U,i):B(U)?U.includes(i)||U.push(i):D?(u[l]=[i],y(l)&&(h[l]=u[l])):(l.value=[i],e.k&&(u[e.k]=l.value))}else D?(u[l]=o,y(l)&&(h[l]=o)):L&&(l.value=o,e.k&&(u[e.k]=o))};o?(V.id=-1,De(V,s)):V()}}}Tr().requestIdleCallback;Tr().cancelIdleCallback;const ws=e=>!!e.type.__asyncLoader,Ba=e=>e.type.__isKeepAlive;function tu(e,t){ja(e,"a",t)}function su(e,t){ja(e,"da",t)}function ja(e,t,s=me){const r=e.__wdc||(e.__wdc=()=>{let n=s;for(;n;){if(n.isDeactivated)return;n=n.parent}return e()});if(Lr(t,r,s),s){let n=s.parent;for(;n&&n.parent;)Ba(n.parent.vnode)&&ru(r,t,s,n),n=n.parent}}function ru(e,t,s,r){const n=Lr(t,e,r,!0);Ua(()=>{Gn(r[t],n)},s)}function Lr(e,t,s=me,r=!1){if(s){const n=s[e]||(s[e]=[]),i=t.__weh||(t.__weh=(...o)=>{pt();const a=Bs(s),l=it(t,s,e,o);return a(),mt(),l});return r?n.unshift(i):n.push(i),i}}const gt=e=>(t,s=me)=>{(!Rs||e==="sp")&&Lr(e,(...r)=>t(...r),s)},nu=gt("bm"),iu=gt("m"),ou=gt("bu"),au=gt("u"),lu=gt("bum"),Ua=gt("um"),cu=gt("sp"),uu=gt("rtg"),du=gt("rtc");function fu(e,t=me){Lr("ec",e,t)}const hu="components";function Ot(e,t){return mu(hu,e,!0,t)||e}const pu=Symbol.for("v-ndc");function mu(e,t,s=!0,r=!1){const n=Le||me;if(n){const i=n.type;{const a=rd(i,!1);if(a&&(a===t||a===je(t)||a===Ar(je(t))))return i}const o=Mi(n[e]||i[e],t)||Mi(n.appContext[e],t);return!o&&r?i:o}}function Mi(e,t){return e&&(e[t]||e[je(t)]||e[Ar(je(t))])}function qe(e,t,s,r){let n;const i=s,o=B(e);if(o||le(e)){const a=o&&Jt(e);let l=!1,d=!1;a&&(l=!We(e),d=Bt(e),e=Dr(e)),n=new Array(e.length);for(let u=0,h=e.length;u<h;u++)n[u]=t(l?d?dr(ye(e[u])):ye(e[u]):e[u],u,void 0,i)}else if(typeof e=="number"){n=new Array(e);for(let a=0;a<e;a++)n[a]=t(a+1,a,void 0,i)}else if(re(e))if(e[Symbol.iterator])n=Array.from(e,(a,l)=>t(a,l,void 0,i));else{const a=Object.keys(e);n=new Array(a.length);for(let l=0,d=a.length;l<d;l++){const u=a[l];n[l]=t(e[u],u,l,i)}}else n=[];return n}const vn=e=>e?ll(e)?Fr(e):vn(e.parent):null,Ss=xe(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>vn(e.parent),$root:e=>vn(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>Va(e),$forceUpdate:e=>e.f||(e.f=()=>{ni(e.update)}),$nextTick:e=>e.n||(e.n=Gc.bind(e.proxy)),$watch:e=>qu.bind(e)}),Yr=(e,t)=>e!==X&&!e.__isScriptSetup&&$(e,t),gu={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:s,setupState:r,data:n,props:i,accessCache:o,type:a,appContext:l}=e;let d;if(t[0]!=="$"){const y=o[t];if(y!==void 0)switch(y){case 1:return r[t];case 2:return n[t];case 4:return s[t];case 3:return i[t]}else{if(Yr(r,t))return o[t]=1,r[t];if(n!==X&&$(n,t))return o[t]=2,n[t];if((d=e.propsOptions[0])&&$(d,t))return o[t]=3,i[t];if(s!==X&&$(s,t))return o[t]=4,s[t];xn&&(o[t]=0)}}const u=Ss[t];let h,b;if(u)return t==="$attrs"&&pe(e.attrs,"get",""),u(e);if((h=a.__cssModules)&&(h=h[t]))return h;if(s!==X&&$(s,t))return o[t]=4,s[t];if(b=l.config.globalProperties,$(b,t))return b[t]},set({_:e},t,s){const{data:r,setupState:n,ctx:i}=e;return Yr(n,t)?(n[t]=s,!0):r!==X&&$(r,t)?(r[t]=s,!0):$(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=s,!0)},has({_:{data:e,setupState:t,accessCache:s,ctx:r,appContext:n,propsOptions:i}},o){let a;return!!s[o]||e!==X&&$(e,o)||Yr(t,o)||(a=i[0])&&$(a,o)||$(r,o)||$(Ss,o)||$(n.config.globalProperties,o)},defineProperty(e,t,s){return s.get!=null?e._.accessCache[t]=0:$(s,"value")&&this.set(e,t,s.value,null),Reflect.defineProperty(e,t,s)}};function Bi(e){return B(e)?e.reduce((t,s)=>(t[s]=null,t),{}):e}let xn=!0;function yu(e){const t=Va(e),s=e.proxy,r=e.ctx;xn=!1,t.beforeCreate&&ji(t.beforeCreate,e,"bc");const{data:n,computed:i,methods:o,watch:a,provide:l,inject:d,created:u,beforeMount:h,mounted:b,beforeUpdate:y,updated:D,activated:L,deactivated:V,beforeDestroy:U,beforeUnmount:W,destroyed:z,unmounted:q,render:ne,renderTracked:He,renderTriggered:Ie,errorCaptured:Ve,serverPrefetch:At,expose:ze,inheritAttrs:x,components:we,directives:Ge,filters:at}=t;if(d&&_u(d,r,null),o)for(const Z in o){const Q=o[Z];j(Q)&&(r[Z]=Q.bind(s))}if(n){const Z=n.call(s,s);re(Z)&&(e.data=ti(Z))}if(xn=!0,i)for(const Z in i){const Q=i[Z],Ye=j(Q)?Q.bind(s,s):j(Q.get)?Q.get.bind(s,s):nt,Ae=!j(Q)&&j(Q.set)?Q.set.bind(s):nt,Tt=id({get:Ye,set:Ae});Object.defineProperty(r,Z,{enumerable:!0,configurable:!0,get:()=>Tt.value,set:Je=>Tt.value=Je})}if(a)for(const Z in a)Ha(a[Z],r,s,Z);if(l){const Z=j(l)?l.call(s):l;Reflect.ownKeys(Z).forEach(Q=>{Eu(Q,Z[Q])})}u&&ji(u,e,"c");function se(Z,Q){B(Q)?Q.forEach(Ye=>Z(Ye.bind(s))):Q&&Z(Q.bind(s))}if(se(nu,h),se(iu,b),se(ou,y),se(au,D),se(tu,L),se(su,V),se(fu,Ve),se(du,He),se(uu,Ie),se(lu,W),se(Ua,q),se(cu,At),B(ze))if(ze.length){const Z=e.exposed||(e.exposed={});ze.forEach(Q=>{Object.defineProperty(Z,Q,{get:()=>s[Q],set:Ye=>s[Q]=Ye,enumerable:!0})})}else e.exposed||(e.exposed={});ne&&e.render===nt&&(e.render=ne),x!=null&&(e.inheritAttrs=x),we&&(e.components=we),Ge&&(e.directives=Ge),At&&Ma(e)}function _u(e,t,s=nt){B(e)&&(e=wn(e));for(const r in e){const n=e[r];let i;re(n)?"default"in n?i=rr(n.from||r,n.default,!0):i=rr(n.from||r):i=rr(n),ve(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:o=>i.value=o}):t[r]=i}}function ji(e,t,s){it(B(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,s)}function Ha(e,t,s,r){let n=r.includes(".")?sl(s,r):()=>s[r];if(le(e)){const i=t[e];j(i)&&Xr(n,i)}else if(j(e))Xr(n,e.bind(s));else if(re(e))if(B(e))e.forEach(i=>Ha(i,t,s,r));else{const i=j(e.handler)?e.handler.bind(s):t[e.handler];j(i)&&Xr(n,i,e)}}function Va(e){const t=e.type,{mixins:s,extends:r}=t,{mixins:n,optionsCache:i,config:{optionMergeStrategies:o}}=e.appContext,a=i.get(t);let l;return a?l=a:!n.length&&!s&&!r?l=t:(l={},n.length&&n.forEach(d=>mr(l,d,o,!0)),mr(l,t,o)),re(t)&&i.set(t,l),l}function mr(e,t,s,r=!1){const{mixins:n,extends:i}=t;i&&mr(e,i,s,!0),n&&n.forEach(o=>mr(e,o,s,!0));for(const o in t)if(!(r&&o==="expose")){const a=bu[o]||s&&s[o];e[o]=a?a(e[o],t[o]):t[o]}return e}const bu={data:Ui,props:Hi,emits:Hi,methods:ms,computed:ms,beforeCreate:ge,created:ge,beforeMount:ge,mounted:ge,beforeUpdate:ge,updated:ge,beforeDestroy:ge,beforeUnmount:ge,destroyed:ge,unmounted:ge,activated:ge,deactivated:ge,errorCaptured:ge,serverPrefetch:ge,components:ms,directives:ms,watch:xu,provide:Ui,inject:vu};function Ui(e,t){return t?e?function(){return xe(j(e)?e.call(this,this):e,j(t)?t.call(this,this):t)}:t:e}function vu(e,t){return ms(wn(e),wn(t))}function wn(e){if(B(e)){const t={};for(let s=0;s<e.length;s++)t[e[s]]=e[s];return t}return e}function ge(e,t){return e?[...new Set([].concat(e,t))]:t}function ms(e,t){return e?xe(Object.create(null),e,t):t}function Hi(e,t){return e?B(e)&&B(t)?[...new Set([...e,...t])]:xe(Object.create(null),Bi(e),Bi(t??{})):t}function xu(e,t){if(!e)return t;if(!t)return e;const s=xe(Object.create(null),e);for(const r in t)s[r]=ge(e[r],t[r]);return s}function $a(){return{app:null,config:{isNativeTag:cc,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let wu=0;function Su(e,t){return function(r,n=null){j(r)||(r=xe({},r)),n!=null&&!re(n)&&(n=null);const i=$a(),o=new WeakSet,a=[];let l=!1;const d=i.app={_uid:wu++,_component:r,_props:n,_container:null,_context:i,_instance:null,version:od,get config(){return i.config},set config(u){},use(u,...h){return o.has(u)||(u&&j(u.install)?(o.add(u),u.install(d,...h)):j(u)&&(o.add(u),u(d,...h))),d},mixin(u){return i.mixins.includes(u)||i.mixins.push(u),d},component(u,h){return h?(i.components[u]=h,d):i.components[u]},directive(u,h){return h?(i.directives[u]=h,d):i.directives[u]},mount(u,h,b){if(!l){const y=d._ceVNode||Fe(r,n);return y.appContext=i,b===!0?b="svg":b===!1&&(b=void 0),e(y,u,b),l=!0,d._container=u,u.__vue_app__=d,Fr(y.component)}},onUnmount(u){a.push(u)},unmount(){l&&(it(a,d._instance,16),e(null,d._container),delete d._container.__vue_app__)},provide(u,h){return i.provides[u]=h,d},runWithContext(u){const h=Zt;Zt=d;try{return u()}finally{Zt=h}}};return d}}let Zt=null;function Eu(e,t){if(me){let s=me.provides;const r=me.parent&&me.parent.provides;r===s&&(s=me.provides=Object.create(r)),s[e]=t}}function rr(e,t,s=!1){const r=Xu();if(r||Zt){let n=Zt?Zt._context.provides:r?r.parent==null||r.ce?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(n&&e in n)return n[e];if(arguments.length>1)return s&&j(t)?t.call(r&&r.proxy):t}}const Wa={},Qa=()=>Object.create(Wa),Ka=e=>Object.getPrototypeOf(e)===Wa;function ku(e,t,s,r=!1){const n={},i=Qa();e.propsDefaults=Object.create(null),za(e,t,n,i);for(const o in e.propsOptions[0])o in n||(n[o]=void 0);s?e.props=r?n:jc(n):e.type.props?e.props=n:e.props=i,e.attrs=i}function Pu(e,t,s,r){const{props:n,attrs:i,vnode:{patchFlag:o}}=e,a=G(n),[l]=e.propsOptions;let d=!1;if((r||o>0)&&!(o&16)){if(o&8){const u=e.vnode.dynamicProps;for(let h=0;h<u.length;h++){let b=u[h];if(Nr(e.emitsOptions,b))continue;const y=t[b];if(l)if($(i,b))y!==i[b]&&(i[b]=y,d=!0);else{const D=je(b);n[D]=Sn(l,a,D,y,e,!1)}else y!==i[b]&&(i[b]=y,d=!0)}}}else{za(e,t,n,i)&&(d=!0);let u;for(const h in a)(!t||!$(t,h)&&((u=Pt(h))===h||!$(t,u)))&&(l?s&&(s[h]!==void 0||s[u]!==void 0)&&(n[h]=Sn(l,a,h,void 0,e,!0)):delete n[h]);if(i!==a)for(const h in i)(!t||!$(t,h))&&(delete i[h],d=!0)}d&&dt(e.attrs,"set","")}function za(e,t,s,r){const[n,i]=e.propsOptions;let o=!1,a;if(t)for(let l in t){if(_s(l))continue;const d=t[l];let u;n&&$(n,u=je(l))?!i||!i.includes(u)?s[u]=d:(a||(a={}))[u]=d:Nr(e.emitsOptions,l)||(!(l in r)||d!==r[l])&&(r[l]=d,o=!0)}if(i){const l=G(s),d=a||X;for(let u=0;u<i.length;u++){const h=i[u];s[h]=Sn(n,l,h,d[h],e,!$(d,h))}}return o}function Sn(e,t,s,r,n,i){const o=e[s];if(o!=null){const a=$(o,"default");if(a&&r===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&j(l)){const{propsDefaults:d}=n;if(s in d)r=d[s];else{const u=Bs(n);r=d[s]=l.call(null,t),u()}}else r=l;n.ce&&n.ce._setProp(s,r)}o[0]&&(i&&!a?r=!1:o[1]&&(r===""||r===Pt(s))&&(r=!0))}return r}const Cu=new WeakMap;function Ga(e,t,s=!1){const r=s?Cu:t.propsCache,n=r.get(e);if(n)return n;const i=e.props,o={},a=[];let l=!1;if(!j(e)){const u=h=>{l=!0;const[b,y]=Ga(h,t,!0);xe(o,b),y&&a.push(...y)};!s&&t.mixins.length&&t.mixins.forEach(u),e.extends&&u(e.extends),e.mixins&&e.mixins.forEach(u)}if(!i&&!l)return re(e)&&r.set(e,Gt),Gt;if(B(i))for(let u=0;u<i.length;u++){const h=je(i[u]);Vi(h)&&(o[h]=X)}else if(i)for(const u in i){const h=je(u);if(Vi(h)){const b=i[u],y=o[h]=B(b)||j(b)?{type:b}:xe({},b),D=y.type;let L=!1,V=!0;if(B(D))for(let U=0;U<D.length;++U){const W=D[U],z=j(W)&&W.name;if(z==="Boolean"){L=!0;break}else z==="String"&&(V=!1)}else L=j(D)&&D.name==="Boolean";y[0]=L,y[1]=V,(L||$(y,"default"))&&a.push(h)}}const d=[o,a];return re(e)&&r.set(e,d),d}function Vi(e){return e[0]!=="$"&&!_s(e)}const oi=e=>e==="_"||e==="__"||e==="_ctx"||e==="$stable",ai=e=>B(e)?e.map(rt):[rt(e)],Iu=(e,t,s)=>{if(t._n)return t;const r=Xc((...n)=>ai(t(...n)),s);return r._c=!1,r},Ya=(e,t,s)=>{const r=e._ctx;for(const n in e){if(oi(n))continue;const i=e[n];if(j(i))t[n]=Iu(n,i,r);else if(i!=null){const o=ai(i);t[n]=()=>o}}},Ja=(e,t)=>{const s=ai(t);e.slots.default=()=>s},Xa=(e,t,s)=>{for(const r in t)(s||!oi(r))&&(e[r]=t[r])},Au=(e,t,s)=>{const r=e.slots=Qa();if(e.vnode.shapeFlag&32){const n=t.__;n&&pn(r,"__",n,!0);const i=t._;i?(Xa(r,t,s),s&&pn(r,"_",i,!0)):Ya(t,r)}else t&&Ja(e,t)},Tu=(e,t,s)=>{const{vnode:r,slots:n}=e;let i=!0,o=X;if(r.shapeFlag&32){const a=t._;a?s&&a===1?i=!1:Xa(n,t,s):(i=!t.$stable,Ya(t,n)),o=t}else t&&(Ja(e,t),o={default:1});if(i)for(const a in n)!oi(a)&&o[a]==null&&delete n[a]},De=$u;function Du(e){return Ru(e)}function Ru(e,t){const s=Tr();s.__VUE__=!0;const{insert:r,remove:n,patchProp:i,createElement:o,createText:a,createComment:l,setText:d,setElementText:u,parentNode:h,nextSibling:b,setScopeId:y=nt,insertStaticContent:D}=e,L=(f,p,v,E=null,w=null,S=null,A=void 0,I=null,C=!!p.dynamicChildren)=>{if(f===p)return;f&&!ps(f,p)&&(E=Qs(f),Je(f,w,S,!0),f=null),p.patchFlag===-2&&(C=!1,p.dynamicChildren=null);const{type:k,ref:O,shapeFlag:T}=p;switch(k){case Or:V(f,p,v,E);break;case xt:U(f,p,v,E);break;case nr:f==null&&W(p,v,E,A);break;case ie:we(f,p,v,E,w,S,A,I,C);break;default:T&1?ne(f,p,v,E,w,S,A,I,C):T&6?Ge(f,p,v,E,w,S,A,I,C):(T&64||T&128)&&k.process(f,p,v,E,w,S,A,I,C,ds)}O!=null&&w?xs(O,f&&f.ref,S,p||f,!p):O==null&&f&&f.ref!=null&&xs(f.ref,null,S,f,!0)},V=(f,p,v,E)=>{if(f==null)r(p.el=a(p.children),v,E);else{const w=p.el=f.el;p.children!==f.children&&d(w,p.children)}},U=(f,p,v,E)=>{f==null?r(p.el=l(p.children||""),v,E):p.el=f.el},W=(f,p,v,E)=>{[f.el,f.anchor]=D(f.children,p,v,E,f.el,f.anchor)},z=({el:f,anchor:p},v,E)=>{let w;for(;f&&f!==p;)w=b(f),r(f,v,E),f=w;r(p,v,E)},q=({el:f,anchor:p})=>{let v;for(;f&&f!==p;)v=b(f),n(f),f=v;n(p)},ne=(f,p,v,E,w,S,A,I,C)=>{p.type==="svg"?A="svg":p.type==="math"&&(A="mathml"),f==null?He(p,v,E,w,S,A,I,C):At(f,p,w,S,A,I,C)},He=(f,p,v,E,w,S,A,I)=>{let C,k;const{props:O,shapeFlag:T,transition:N,dirs:M}=f;if(C=f.el=o(f.type,S,O&&O.is,O),T&8?u(C,f.children):T&16&&Ve(f.children,C,null,E,w,Jr(f,S),A,I),M&&Dt(f,null,E,"created"),Ie(C,f,f.scopeId,A,E),O){for(const ee in O)ee!=="value"&&!_s(ee)&&i(C,ee,null,O[ee],S,E);"value"in O&&i(C,"value",null,O.value,S),(k=O.onVnodeBeforeMount)&&tt(k,E,f)}M&&Dt(f,null,E,"beforeMount");const H=Lu(w,N);H&&N.beforeEnter(C),r(C,p,v),((k=O&&O.onVnodeMounted)||H||M)&&De(()=>{k&&tt(k,E,f),H&&N.enter(C),M&&Dt(f,null,E,"mounted")},w)},Ie=(f,p,v,E,w)=>{if(v&&y(f,v),E)for(let S=0;S<E.length;S++)y(f,E[S]);if(w){let S=w.subTree;if(p===S||nl(S.type)&&(S.ssContent===p||S.ssFallback===p)){const A=w.vnode;Ie(f,A,A.scopeId,A.slotScopeIds,w.parent)}}},Ve=(f,p,v,E,w,S,A,I,C=0)=>{for(let k=C;k<f.length;k++){const O=f[k]=I?bt(f[k]):rt(f[k]);L(null,O,p,v,E,w,S,A,I)}},At=(f,p,v,E,w,S,A)=>{const I=p.el=f.el;let{patchFlag:C,dynamicChildren:k,dirs:O}=p;C|=f.patchFlag&16;const T=f.props||X,N=p.props||X;let M;if(v&&Rt(v,!1),(M=N.onVnodeBeforeUpdate)&&tt(M,v,p,f),O&&Dt(p,f,v,"beforeUpdate"),v&&Rt(v,!0),(T.innerHTML&&N.innerHTML==null||T.textContent&&N.textContent==null)&&u(I,""),k?ze(f.dynamicChildren,k,I,v,E,Jr(p,w),S):A||Q(f,p,I,null,v,E,Jr(p,w),S,!1),C>0){if(C&16)x(I,T,N,v,w);else if(C&2&&T.class!==N.class&&i(I,"class",null,N.class,w),C&4&&i(I,"style",T.style,N.style,w),C&8){const H=p.dynamicProps;for(let ee=0;ee<H.length;ee++){const K=H[ee],Se=T[K],Ee=N[K];(Ee!==Se||K==="value")&&i(I,K,Se,Ee,w,v)}}C&1&&f.children!==p.children&&u(I,p.children)}else!A&&k==null&&x(I,T,N,v,w);((M=N.onVnodeUpdated)||O)&&De(()=>{M&&tt(M,v,p,f),O&&Dt(p,f,v,"updated")},E)},ze=(f,p,v,E,w,S,A)=>{for(let I=0;I<p.length;I++){const C=f[I],k=p[I],O=C.el&&(C.type===ie||!ps(C,k)||C.shapeFlag&198)?h(C.el):v;L(C,k,O,null,E,w,S,A,!0)}},x=(f,p,v,E,w)=>{if(p!==v){if(p!==X)for(const S in p)!_s(S)&&!(S in v)&&i(f,S,p[S],null,w,E);for(const S in v){if(_s(S))continue;const A=v[S],I=p[S];A!==I&&S!=="value"&&i(f,S,I,A,w,E)}"value"in v&&i(f,"value",p.value,v.value,w)}},we=(f,p,v,E,w,S,A,I,C)=>{const k=p.el=f?f.el:a(""),O=p.anchor=f?f.anchor:a("");let{patchFlag:T,dynamicChildren:N,slotScopeIds:M}=p;M&&(I=I?I.concat(M):M),f==null?(r(k,v,E),r(O,v,E),Ve(p.children||[],v,O,w,S,A,I,C)):T>0&&T&64&&N&&f.dynamicChildren?(ze(f.dynamicChildren,N,v,w,S,A,I),(p.key!=null||w&&p===w.subTree)&&Za(f,p,!0)):Q(f,p,v,O,w,S,A,I,C)},Ge=(f,p,v,E,w,S,A,I,C)=>{p.slotScopeIds=I,f==null?p.shapeFlag&512?w.ctx.activate(p,v,E,A,C):at(p,v,E,w,S,A,C):yt(f,p,C)},at=(f,p,v,E,w,S,A)=>{const I=f.component=Ju(f,E,w);if(Ba(f)&&(I.ctx.renderer=ds),Zu(I,!1,A),I.asyncDep){if(w&&w.registerDep(I,se,A),!f.el){const C=I.subTree=Fe(xt);U(null,C,p,v),f.placeholder=C.el}}else se(I,f,p,v,w,S,A)},yt=(f,p,v)=>{const E=p.component=f.component;if(Hu(f,p,v))if(E.asyncDep&&!E.asyncResolved){Z(E,p,v);return}else E.next=p,E.update();else p.el=f.el,E.vnode=p},se=(f,p,v,E,w,S,A)=>{const I=()=>{if(f.isMounted){let{next:T,bu:N,u:M,parent:H,vnode:ee}=f;{const Ze=el(f);if(Ze){T&&(T.el=ee.el,Z(f,T,A)),Ze.asyncDep.then(()=>{f.isUnmounted||I()});return}}let K=T,Se;Rt(f,!1),T?(T.el=ee.el,Z(f,T,A)):T=ee,N&&sr(N),(Se=T.props&&T.props.onVnodeBeforeUpdate)&&tt(Se,H,T,ee),Rt(f,!0);const Ee=Wi(f),Xe=f.subTree;f.subTree=Ee,L(Xe,Ee,h(Xe.el),Qs(Xe),f,w,S),T.el=Ee.el,K===null&&Vu(f,Ee.el),M&&De(M,w),(Se=T.props&&T.props.onVnodeUpdated)&&De(()=>tt(Se,H,T,ee),w)}else{let T;const{el:N,props:M}=p,{bm:H,m:ee,parent:K,root:Se,type:Ee}=f,Xe=ws(p);Rt(f,!1),H&&sr(H),!Xe&&(T=M&&M.onVnodeBeforeMount)&&tt(T,K,p),Rt(f,!0);{Se.ce&&Se.ce._def.shadowRoot!==!1&&Se.ce._injectChildStyle(Ee);const Ze=f.subTree=Wi(f);L(null,Ze,v,E,f,w,S),p.el=Ze.el}if(ee&&De(ee,w),!Xe&&(T=M&&M.onVnodeMounted)){const Ze=p;De(()=>tt(T,K,Ze),w)}(p.shapeFlag&256||K&&ws(K.vnode)&&K.vnode.shapeFlag&256)&&f.a&&De(f.a,w),f.isMounted=!0,p=v=E=null}};f.scope.on();const C=f.effect=new ga(I);f.scope.off();const k=f.update=C.run.bind(C),O=f.job=C.runIfDirty.bind(C);O.i=f,O.id=f.uid,C.scheduler=()=>ni(O),Rt(f,!0),k()},Z=(f,p,v)=>{p.component=f;const E=f.vnode.props;f.vnode=p,f.next=null,Pu(f,p.props,E,v),Tu(f,p.children,v),pt(),qi(f),mt()},Q=(f,p,v,E,w,S,A,I,C=!1)=>{const k=f&&f.children,O=f?f.shapeFlag:0,T=p.children,{patchFlag:N,shapeFlag:M}=p;if(N>0){if(N&128){Ae(k,T,v,E,w,S,A,I,C);return}else if(N&256){Ye(k,T,v,E,w,S,A,I,C);return}}M&8?(O&16&&us(k,w,S),T!==k&&u(v,T)):O&16?M&16?Ae(k,T,v,E,w,S,A,I,C):us(k,w,S,!0):(O&8&&u(v,""),M&16&&Ve(T,v,E,w,S,A,I,C))},Ye=(f,p,v,E,w,S,A,I,C)=>{f=f||Gt,p=p||Gt;const k=f.length,O=p.length,T=Math.min(k,O);let N;for(N=0;N<T;N++){const M=p[N]=C?bt(p[N]):rt(p[N]);L(f[N],M,v,null,w,S,A,I,C)}k>O?us(f,w,S,!0,!1,T):Ve(p,v,E,w,S,A,I,C,T)},Ae=(f,p,v,E,w,S,A,I,C)=>{let k=0;const O=p.length;let T=f.length-1,N=O-1;for(;k<=T&&k<=N;){const M=f[k],H=p[k]=C?bt(p[k]):rt(p[k]);if(ps(M,H))L(M,H,v,null,w,S,A,I,C);else break;k++}for(;k<=T&&k<=N;){const M=f[T],H=p[N]=C?bt(p[N]):rt(p[N]);if(ps(M,H))L(M,H,v,null,w,S,A,I,C);else break;T--,N--}if(k>T){if(k<=N){const M=N+1,H=M<O?p[M].el:E;for(;k<=N;)L(null,p[k]=C?bt(p[k]):rt(p[k]),v,H,w,S,A,I,C),k++}}else if(k>N)for(;k<=T;)Je(f[k],w,S,!0),k++;else{const M=k,H=k,ee=new Map;for(k=H;k<=N;k++){const Te=p[k]=C?bt(p[k]):rt(p[k]);Te.key!=null&&ee.set(Te.key,k)}let K,Se=0;const Ee=N-H+1;let Xe=!1,Ze=0;const fs=new Array(Ee);for(k=0;k<Ee;k++)fs[k]=0;for(k=M;k<=T;k++){const Te=f[k];if(Se>=Ee){Je(Te,w,S,!0);continue}let et;if(Te.key!=null)et=ee.get(Te.key);else for(K=H;K<=N;K++)if(fs[K-H]===0&&ps(Te,p[K])){et=K;break}et===void 0?Je(Te,w,S,!0):(fs[et-H]=k+1,et>=Ze?Ze=et:Xe=!0,L(Te,p[et],v,null,w,S,A,I,C),Se++)}const Di=Xe?Nu(fs):Gt;for(K=Di.length-1,k=Ee-1;k>=0;k--){const Te=H+k,et=p[Te],Ri=p[Te+1],Li=Te+1<O?Ri.el||Ri.placeholder:E;fs[k]===0?L(null,et,v,Li,w,S,A,I,C):Xe&&(K<0||k!==Di[K]?Tt(et,v,Li,2):K--)}}},Tt=(f,p,v,E,w=null)=>{const{el:S,type:A,transition:I,children:C,shapeFlag:k}=f;if(k&6){Tt(f.component.subTree,p,v,E);return}if(k&128){f.suspense.move(p,v,E);return}if(k&64){A.move(f,p,v,ds);return}if(A===ie){r(S,p,v);for(let T=0;T<C.length;T++)Tt(C[T],p,v,E);r(f.anchor,p,v);return}if(A===nr){z(f,p,v);return}if(E!==2&&k&1&&I)if(E===0)I.beforeEnter(S),r(S,p,v),De(()=>I.enter(S),w);else{const{leave:T,delayLeave:N,afterLeave:M}=I,H=()=>{f.ctx.isUnmounted?n(S):r(S,p,v)},ee=()=>{T(S,()=>{H(),M&&M()})};N?N(S,H,ee):ee()}else r(S,p,v)},Je=(f,p,v,E=!1,w=!1)=>{const{type:S,props:A,ref:I,children:C,dynamicChildren:k,shapeFlag:O,patchFlag:T,dirs:N,cacheIndex:M}=f;if(T===-2&&(w=!1),I!=null&&(pt(),xs(I,null,v,f,!0),mt()),M!=null&&(p.renderCache[M]=void 0),O&256){p.ctx.deactivate(f);return}const H=O&1&&N,ee=!ws(f);let K;if(ee&&(K=A&&A.onVnodeBeforeUnmount)&&tt(K,p,f),O&6)lc(f.component,v,E);else{if(O&128){f.suspense.unmount(v,E);return}H&&Dt(f,null,p,"beforeUnmount"),O&64?f.type.remove(f,p,v,ds,E):k&&!k.hasOnce&&(S!==ie||T>0&&T&64)?us(k,p,v,!1,!0):(S===ie&&T&384||!w&&O&16)&&us(C,p,v),E&&Ai(f)}(ee&&(K=A&&A.onVnodeUnmounted)||H)&&De(()=>{K&&tt(K,p,f),H&&Dt(f,null,p,"unmounted")},v)},Ai=f=>{const{type:p,el:v,anchor:E,transition:w}=f;if(p===ie){ac(v,E);return}if(p===nr){q(f);return}const S=()=>{n(v),w&&!w.persisted&&w.afterLeave&&w.afterLeave()};if(f.shapeFlag&1&&w&&!w.persisted){const{leave:A,delayLeave:I}=w,C=()=>A(v,S);I?I(f.el,S,C):C()}else S()},ac=(f,p)=>{let v;for(;f!==p;)v=b(f),n(f),f=v;n(p)},lc=(f,p,v)=>{const{bum:E,scope:w,job:S,subTree:A,um:I,m:C,a:k,parent:O,slots:{__:T}}=f;$i(C),$i(k),E&&sr(E),O&&B(T)&&T.forEach(N=>{O.renderCache[N]=void 0}),w.stop(),S&&(S.flags|=8,Je(A,f,p,v)),I&&De(I,p),De(()=>{f.isUnmounted=!0},p),p&&p.pendingBranch&&!p.isUnmounted&&f.asyncDep&&!f.asyncResolved&&f.suspenseId===p.pendingId&&(p.deps--,p.deps===0&&p.resolve())},us=(f,p,v,E=!1,w=!1,S=0)=>{for(let A=S;A<f.length;A++)Je(f[A],p,v,E,w)},Qs=f=>{if(f.shapeFlag&6)return Qs(f.component.subTree);if(f.shapeFlag&128)return f.suspense.next();const p=b(f.anchor||f.el),v=p&&p[Zc];return v?b(v):p};let $r=!1;const Ti=(f,p,v)=>{f==null?p._vnode&&Je(p._vnode,null,null,!0):L(p._vnode||null,f,p,null,null,null,v),p._vnode=f,$r||($r=!0,qi(),Oa(),$r=!1)},ds={p:L,um:Je,m:Tt,r:Ai,mt:at,mc:Ve,pc:Q,pbc:ze,n:Qs,o:e};return{render:Ti,hydrate:void 0,createApp:Su(Ti)}}function Jr({type:e,props:t},s){return s==="svg"&&e==="foreignObject"||s==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:s}function Rt({effect:e,job:t},s){s?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function Lu(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Za(e,t,s=!1){const r=e.children,n=t.children;if(B(r)&&B(n))for(let i=0;i<r.length;i++){const o=r[i];let a=n[i];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[i]=bt(n[i]),a.el=o.el),!s&&a.patchFlag!==-2&&Za(o,a)),a.type===Or&&(a.el=o.el),a.type===xt&&!a.el&&(a.el=o.el)}}function Nu(e){const t=e.slice(),s=[0];let r,n,i,o,a;const l=e.length;for(r=0;r<l;r++){const d=e[r];if(d!==0){if(n=s[s.length-1],e[n]<d){t[r]=n,s.push(r);continue}for(i=0,o=s.length-1;i<o;)a=i+o>>1,e[s[a]]<d?i=a+1:o=a;d<e[s[i]]&&(i>0&&(t[r]=s[i-1]),s[i]=r)}}for(i=s.length,o=s[i-1];i-- >0;)s[i]=o,o=t[o];return s}function el(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:el(t)}function $i(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Ou=Symbol.for("v-scx"),Fu=()=>rr(Ou);function Xr(e,t,s){return tl(e,t,s)}function tl(e,t,s=X){const{immediate:r,deep:n,flush:i,once:o}=s,a=xe({},s),l=t&&r||!t&&i!=="post";let d;if(Rs){if(i==="sync"){const y=Fu();d=y.__watcherHandles||(y.__watcherHandles=[])}else if(!l){const y=()=>{};return y.stop=nt,y.resume=nt,y.pause=nt,y}}const u=me;a.call=(y,D,L)=>it(y,u,D,L);let h=!1;i==="post"?a.scheduler=y=>{De(y,u&&u.suspense)}:i!=="sync"&&(h=!0,a.scheduler=(y,D)=>{D?y():ni(y)}),a.augmentJob=y=>{t&&(y.flags|=4),h&&(y.flags|=2,u&&(y.id=u.uid,y.i=u))};const b=Kc(e,t,a);return Rs&&(d?d.push(b):l&&b()),b}function qu(e,t,s){const r=this.proxy,n=le(e)?e.includes(".")?sl(r,e):()=>r[e]:e.bind(r,r);let i;j(t)?i=t:(i=t.handler,s=t);const o=Bs(this),a=tl(n,i.bind(r),s);return o(),a}function sl(e,t){const s=t.split(".");return()=>{let r=e;for(let n=0;n<s.length&&r;n++)r=r[s[n]];return r}}const Mu=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${je(t)}Modifiers`]||e[`${Pt(t)}Modifiers`];function Bu(e,t,...s){if(e.isUnmounted)return;const r=e.vnode.props||X;let n=s;const i=t.startsWith("update:"),o=i&&Mu(r,t.slice(7));o&&(o.trim&&(n=s.map(u=>le(u)?u.trim():u)),o.number&&(n=s.map(mn)));let a,l=r[a=Wr(t)]||r[a=Wr(je(t))];!l&&i&&(l=r[a=Wr(Pt(t))]),l&&it(l,e,6,n);const d=r[a+"Once"];if(d){if(!e.emitted)e.emitted={};else if(e.emitted[a])return;e.emitted[a]=!0,it(d,e,6,n)}}function rl(e,t,s=!1){const r=t.emitsCache,n=r.get(e);if(n!==void 0)return n;const i=e.emits;let o={},a=!1;if(!j(e)){const l=d=>{const u=rl(d,t,!0);u&&(a=!0,xe(o,u))};!s&&t.mixins.length&&t.mixins.forEach(l),e.extends&&l(e.extends),e.mixins&&e.mixins.forEach(l)}return!i&&!a?(re(e)&&r.set(e,null),null):(B(i)?i.forEach(l=>o[l]=null):xe(o,i),re(e)&&r.set(e,o),o)}function Nr(e,t){return!e||!Pr(t)?!1:(t=t.slice(2).replace(/Once$/,""),$(e,t[0].toLowerCase()+t.slice(1))||$(e,Pt(t))||$(e,t))}function Wi(e){const{type:t,vnode:s,proxy:r,withProxy:n,propsOptions:[i],slots:o,attrs:a,emit:l,render:d,renderCache:u,props:h,data:b,setupState:y,ctx:D,inheritAttrs:L}=e,V=pr(e);let U,W;try{if(s.shapeFlag&4){const q=n||r,ne=q;U=rt(d.call(ne,q,u,h,y,b,D)),W=a}else{const q=t;U=rt(q.length>1?q(h,{attrs:a,slots:o,emit:l}):q(h,null)),W=t.props?a:ju(a)}}catch(q){Es.length=0,Rr(q,e,1),U=Fe(xt)}let z=U;if(W&&L!==!1){const q=Object.keys(W),{shapeFlag:ne}=z;q.length&&ne&7&&(i&&q.some(zn)&&(W=Uu(W,i)),z=ts(z,W,!1,!0))}return s.dirs&&(z=ts(z,null,!1,!0),z.dirs=z.dirs?z.dirs.concat(s.dirs):s.dirs),s.transition&&ii(z,s.transition),U=z,pr(V),U}const ju=e=>{let t;for(const s in e)(s==="class"||s==="style"||Pr(s))&&((t||(t={}))[s]=e[s]);return t},Uu=(e,t)=>{const s={};for(const r in e)(!zn(r)||!(r.slice(9)in t))&&(s[r]=e[r]);return s};function Hu(e,t,s){const{props:r,children:n,component:i}=e,{props:o,children:a,patchFlag:l}=t,d=i.emitsOptions;if(t.dirs||t.transition)return!0;if(s&&l>=0){if(l&1024)return!0;if(l&16)return r?Qi(r,o,d):!!o;if(l&8){const u=t.dynamicProps;for(let h=0;h<u.length;h++){const b=u[h];if(o[b]!==r[b]&&!Nr(d,b))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:r===o?!1:r?o?Qi(r,o,d):!0:!!o;return!1}function Qi(e,t,s){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let n=0;n<r.length;n++){const i=r[n];if(t[i]!==e[i]&&!Nr(s,i))return!0}return!1}function Vu({vnode:e,parent:t},s){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=s,t=t.parent;else break}}const nl=e=>e.__isSuspense;function $u(e,t){t&&t.pendingBranch?B(e)?t.effects.push(...e):t.effects.push(e):Jc(e)}const ie=Symbol.for("v-fgt"),Or=Symbol.for("v-txt"),xt=Symbol.for("v-cmt"),nr=Symbol.for("v-stc"),Es=[];let Ne=null;function m(e=!1){Es.push(Ne=e?null:[])}function Wu(){Es.pop(),Ne=Es[Es.length-1]||null}let Ds=1;function Ki(e,t=!1){Ds+=e,e<0&&Ne&&t&&(Ne.hasOnce=!0)}function il(e){return e.dynamicChildren=Ds>0?Ne||Gt:null,Wu(),Ds>0&&Ne&&Ne.push(e),e}function g(e,t,s,r,n,i){return il(c(e,t,s,r,n,i,!0))}function ks(e,t,s,r,n){return il(Fe(e,t,s,r,n,!0))}function ol(e){return e?e.__v_isVNode===!0:!1}function ps(e,t){return e.type===t.type&&e.key===t.key}const al=({key:e})=>e??null,ir=({ref:e,ref_key:t,ref_for:s})=>(typeof e=="number"&&(e=""+e),e!=null?le(e)||ve(e)||j(e)?{i:Le,r:e,k:t,f:!!s}:e:null);function c(e,t=null,s=null,r=0,n=null,i=e===ie?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&al(t),ref:t&&ir(t),scopeId:qa,slotScopeIds:null,children:s,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:Le};return a?(li(l,s),i&128&&e.normalize(l)):s&&(l.shapeFlag|=le(s)?8:16),Ds>0&&!o&&Ne&&(l.patchFlag>0||i&6)&&l.patchFlag!==32&&Ne.push(l),l}const Fe=Qu;function Qu(e,t=null,s=null,r=0,n=null,i=!1){if((!e||e===pu)&&(e=xt),ol(e)){const a=ts(e,t,!0);return s&&li(a,s),Ds>0&&!i&&Ne&&(a.shapeFlag&6?Ne[Ne.indexOf(e)]=a:Ne.push(a)),a.patchFlag=-2,a}if(nd(e)&&(e=e.__vccOpts),t){t=Ku(t);let{class:a,style:l}=t;a&&!le(a)&&(t.class=ae(a)),re(l)&&(ri(l)&&!B(l)&&(l=xe({},l)),t.style=qs(l))}const o=le(e)?1:nl(e)?128:eu(e)?64:re(e)?4:j(e)?2:0;return c(e,t,s,r,n,o,i,!0)}function Ku(e){return e?ri(e)||Ka(e)?xe({},e):e:null}function ts(e,t,s=!1,r=!1){const{props:n,ref:i,patchFlag:o,children:a,transition:l}=e,d=t?zu(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:e.type,props:d,key:d&&al(d),ref:t&&t.ref?s&&i?B(i)?i.concat(ir(t)):[i,ir(t)]:ir(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:a,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==ie?o===-1?16:o|16:o,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:l,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&ts(e.ssContent),ssFallback:e.ssFallback&&ts(e.ssFallback),placeholder:e.placeholder,el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return l&&r&&ii(u,l.clone(u)),u}function he(e=" ",t=0){return Fe(Or,null,e,t)}function Pe(e,t){const s=Fe(nr,null,e);return s.staticCount=t,s}function P(e="",t=!1){return t?(m(),ks(xt,null,e)):Fe(xt,null,e)}function rt(e){return e==null||typeof e=="boolean"?Fe(xt):B(e)?Fe(ie,null,e.slice()):ol(e)?bt(e):Fe(Or,null,String(e))}function bt(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:ts(e)}function li(e,t){let s=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(B(t))s=16;else if(typeof t=="object")if(r&65){const n=t.default;n&&(n._c&&(n._d=!1),li(e,n()),n._c&&(n._d=!0));return}else{s=32;const n=t._;!n&&!Ka(t)?t._ctx=Le:n===3&&Le&&(Le.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else j(t)?(t={default:t,_ctx:Le},s=32):(t=String(t),r&64?(s=16,t=[he(t)]):s=8);e.children=t,e.shapeFlag|=s}function zu(...e){const t={};for(let s=0;s<e.length;s++){const r=e[s];for(const n in r)if(n==="class")t.class!==r.class&&(t.class=ae([t.class,r.class]));else if(n==="style")t.style=qs([t.style,r.style]);else if(Pr(n)){const i=t[n],o=r[n];o&&i!==o&&!(B(i)&&i.includes(o))&&(t[n]=i?[].concat(i,o):o)}else n!==""&&(t[n]=r[n])}return t}function tt(e,t,s,r=null){it(e,t,7,[s,r])}const Gu=$a();let Yu=0;function Ju(e,t,s){const r=e.type,n=(t?t.appContext:e.appContext)||Gu,i={uid:Yu++,vnode:e,type:r,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new vc(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ga(r,n),emitsOptions:rl(r,n),emit:null,emitted:null,propsDefaults:X,inheritAttrs:r.inheritAttrs,ctx:X,data:X,props:X,attrs:X,slots:X,refs:X,setupState:X,setupContext:null,suspense:s,suspenseId:s?s.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Bu.bind(null,i),e.ce&&e.ce(i),i}let me=null;const Xu=()=>me||Le;let gr,En;{const e=Tr(),t=(s,r)=>{let n;return(n=e[s])||(n=e[s]=[]),n.push(r),i=>{n.length>1?n.forEach(o=>o(i)):n[0](i)}};gr=t("__VUE_INSTANCE_SETTERS__",s=>me=s),En=t("__VUE_SSR_SETTERS__",s=>Rs=s)}const Bs=e=>{const t=me;return gr(e),e.scope.on(),()=>{e.scope.off(),gr(t)}},zi=()=>{me&&me.scope.off(),gr(null)};function ll(e){return e.vnode.shapeFlag&4}let Rs=!1;function Zu(e,t=!1,s=!1){t&&En(t);const{props:r,children:n}=e.vnode,i=ll(e);ku(e,r,i,t),Au(e,n,s||t);const o=i?ed(e,t):void 0;return t&&En(!1),o}function ed(e,t){const s=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,gu);const{setup:r}=s;if(r){pt();const n=e.setupContext=r.length>1?sd(e):null,i=Bs(e),o=Ms(r,e,0,[e.props,n]),a=ua(o);if(mt(),i(),(a||e.sp)&&!ws(e)&&Ma(e),a){if(o.then(zi,zi),t)return o.then(l=>{Gi(e,l)}).catch(l=>{Rr(l,e,0)});e.asyncDep=o}else Gi(e,o)}else cl(e)}function Gi(e,t,s){j(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:re(t)&&(e.setupState=Ra(t)),cl(e)}function cl(e,t,s){const r=e.type;e.render||(e.render=r.render||nt);{const n=Bs(e);pt();try{yu(e)}finally{mt(),n()}}}const td={get(e,t){return pe(e,"get",""),e[t]}};function sd(e){const t=s=>{e.exposed=s||{}};return{attrs:new Proxy(e.attrs,td),slots:e.slots,emit:e.emit,expose:t}}function Fr(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(Ra(Uc(e.exposed)),{get(t,s){if(s in t)return t[s];if(s in Ss)return Ss[s](e)},has(t,s){return s in t||s in Ss}})):e.proxy}function rd(e,t=!0){return j(e)?e.displayName||e.name:e.name||t&&e.__name}function nd(e){return j(e)&&"__vccOpts"in e}const id=(e,t)=>Wc(e,t,Rs),od="3.5.18";/**
* @vue/runtime-dom v3.5.18
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let kn;const Yi=typeof window<"u"&&window.trustedTypes;if(Yi)try{kn=Yi.createPolicy("vue",{createHTML:e=>e})}catch{}const ul=kn?e=>kn.createHTML(e):e=>e,ad="http://www.w3.org/2000/svg",ld="http://www.w3.org/1998/Math/MathML",ct=typeof document<"u"?document:null,Ji=ct&&ct.createElement("template"),cd={insert:(e,t,s)=>{t.insertBefore(e,s||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,s,r)=>{const n=t==="svg"?ct.createElementNS(ad,e):t==="mathml"?ct.createElementNS(ld,e):s?ct.createElement(e,{is:s}):ct.createElement(e);return e==="select"&&r&&r.multiple!=null&&n.setAttribute("multiple",r.multiple),n},createText:e=>ct.createTextNode(e),createComment:e=>ct.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>ct.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,s,r,n,i){const o=s?s.previousSibling:t.lastChild;if(n&&(n===i||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),s),!(n===i||!(n=n.nextSibling)););else{Ji.innerHTML=ul(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const a=Ji.content;if(r==="svg"||r==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}t.insertBefore(a,s)}return[o?o.nextSibling:t.firstChild,s?s.previousSibling:t.lastChild]}},ud=Symbol("_vtc");function dd(e,t,s){const r=e[ud];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):s?e.setAttribute("class",t):e.className=t}const Xi=Symbol("_vod"),fd=Symbol("_vsh"),hd=Symbol(""),pd=/(^|;)\s*display\s*:/;function md(e,t,s){const r=e.style,n=le(s);let i=!1;if(s&&!n){if(t)if(le(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();s[a]==null&&or(r,a,"")}else for(const o in t)s[o]==null&&or(r,o,"");for(const o in s)o==="display"&&(i=!0),or(r,o,s[o])}else if(n){if(t!==s){const o=r[hd];o&&(s+=";"+o),r.cssText=s,i=pd.test(s)}}else t&&e.removeAttribute("style");Xi in e&&(e[Xi]=i?r.display:"",e[fd]&&(r.display="none"))}const Zi=/\s*!important$/;function or(e,t,s){if(B(s))s.forEach(r=>or(e,t,r));else if(s==null&&(s=""),t.startsWith("--"))e.setProperty(t,s);else{const r=gd(e,t);Zi.test(s)?e.setProperty(Pt(r),s.replace(Zi,""),"important"):e[r]=s}}const eo=["Webkit","Moz","ms"],Zr={};function gd(e,t){const s=Zr[t];if(s)return s;let r=je(t);if(r!=="filter"&&r in e)return Zr[t]=r;r=Ar(r);for(let n=0;n<eo.length;n++){const i=eo[n]+r;if(i in e)return Zr[t]=i}return t}const to="http://www.w3.org/1999/xlink";function so(e,t,s,r,n,i=bc(t)){r&&t.startsWith("xlink:")?s==null?e.removeAttributeNS(to,t.slice(6,t.length)):e.setAttributeNS(to,t,s):s==null||i&&!ha(s)?e.removeAttribute(t):e.setAttribute(t,i?"":kt(s)?String(s):s)}function ro(e,t,s,r,n){if(t==="innerHTML"||t==="textContent"){s!=null&&(e[t]=t==="innerHTML"?ul(s):s);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const a=i==="OPTION"?e.getAttribute("value")||"":e.value,l=s==null?e.type==="checkbox"?"on":"":String(s);(a!==l||!("_value"in e))&&(e.value=l),s==null&&e.removeAttribute(t),e._value=s;return}let o=!1;if(s===""||s==null){const a=typeof e[t];a==="boolean"?s=ha(s):s==null&&a==="string"?(s="",o=!0):a==="number"&&(s=0,o=!0)}try{e[t]=s}catch{}o&&e.removeAttribute(n||t)}function zt(e,t,s,r){e.addEventListener(t,s,r)}function yd(e,t,s,r){e.removeEventListener(t,s,r)}const no=Symbol("_vei");function _d(e,t,s,r,n=null){const i=e[no]||(e[no]={}),o=i[t];if(r&&o)o.value=r;else{const[a,l]=bd(t);if(r){const d=i[t]=wd(r,n);zt(e,a,d,l)}else o&&(yd(e,a,o,l),i[t]=void 0)}}const io=/(?:Once|Passive|Capture)$/;function bd(e){let t;if(io.test(e)){t={};let r;for(;r=e.match(io);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Pt(e.slice(2)),t]}let en=0;const vd=Promise.resolve(),xd=()=>en||(vd.then(()=>en=0),en=Date.now());function wd(e,t){const s=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=s.attached)return;it(Sd(r,s.value),t,5,[r])};return s.value=e,s.attached=xd(),s}function Sd(e,t){if(B(t)){const s=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{s.call(e),e._stopped=!0},t.map(r=>n=>!n._stopped&&r&&r(n))}else return t}const oo=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,Ed=(e,t,s,r,n,i)=>{const o=n==="svg";t==="class"?dd(e,r,o):t==="style"?md(e,s,r):Pr(t)?zn(t)||_d(e,t,s,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):kd(e,t,r,o))?(ro(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&so(e,t,r,o,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!le(r))?ro(e,je(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),so(e,t,r,o))};function kd(e,t,s,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&oo(t)&&j(s));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=e.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return oo(t)&&le(s)?!1:t in e}const ao=e=>{const t=e.props["onUpdate:modelValue"]||!1;return B(t)?s=>sr(t,s):t};function Pd(e){e.target.composing=!0}function lo(e){const t=e.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const tn=Symbol("_assign"),de={created(e,{modifiers:{lazy:t,trim:s,number:r}},n){e[tn]=ao(n);const i=r||n.props&&n.props.type==="number";zt(e,t?"change":"input",o=>{if(o.target.composing)return;let a=e.value;s&&(a=a.trim()),i&&(a=mn(a)),e[tn](a)}),s&&zt(e,"change",()=>{e.value=e.value.trim()}),t||(zt(e,"compositionstart",Pd),zt(e,"compositionend",lo),zt(e,"change",lo))},mounted(e,{value:t}){e.value=t??""},beforeUpdate(e,{value:t,oldValue:s,modifiers:{lazy:r,trim:n,number:i}},o){if(e[tn]=ao(o),e.composing)return;const a=(i||e.type==="number")&&!/^0\d/.test(e.value)?mn(e.value):e.value,l=t??"";a!==l&&(document.activeElement===e&&e.type!=="range"&&(r&&t===s||n&&e.value.trim()===l)||(e.value=l))}},Cd=["ctrl","shift","alt","meta"],Id={stop:e=>e.stopPropagation(),prevent:e=>e.preventDefault(),self:e=>e.target!==e.currentTarget,ctrl:e=>!e.ctrlKey,shift:e=>!e.shiftKey,alt:e=>!e.altKey,meta:e=>!e.metaKey,left:e=>"button"in e&&e.button!==0,middle:e=>"button"in e&&e.button!==1,right:e=>"button"in e&&e.button!==2,exact:(e,t)=>Cd.some(s=>e[`${s}Key`]&&!t.includes(s))},Pn=(e,t)=>{const s=e._withMods||(e._withMods={}),r=t.join(".");return s[r]||(s[r]=(n,...i)=>{for(let o=0;o<t.length;o++){const a=Id[t[o]];if(a&&a(n,t))return}return e(n,...i)})},Ad={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},co=(e,t)=>{const s=e._withKeys||(e._withKeys={}),r=t.join(".");return s[r]||(s[r]=n=>{if(!("key"in n))return;const i=Pt(n.key);if(t.some(o=>o===i||Ad[o]===i))return e(n)})},Td=xe({patchProp:Ed},cd);let uo;function Dd(){return uo||(uo=Du(Td))}const Rd=(...e)=>{const t=Dd().createApp(...e),{mount:s}=t;return t.mount=r=>{const n=Nd(r);if(!n)return;const i=t._component;!j(i)&&!i.render&&!i.template&&(i.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=s(n,!1,Ld(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function Ld(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function Nd(e){return le(e)?document.querySelector(e):e}const Od="modulepreload",Fd=function(e){return"/"+e},fo={},Re=function(t,s,r){let n=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),a=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));n=Promise.allSettled(s.map(l=>{if(l=Fd(l),l in fo)return;fo[l]=!0;const d=l.endsWith(".css"),u=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${u}`))return;const h=document.createElement("link");if(h.rel=d?"stylesheet":Od,d||(h.as="script"),h.crossOrigin="",h.href=l,a&&h.setAttribute("nonce",a),document.head.appendChild(h),d)return new Promise((b,y)=>{h.addEventListener("load",b),h.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return t().catch(i)})},qd="https://production-tradeworks-n0Lpcg.keelapps.xyz",Vt=`${qd}/api/json`;class Md{constructor(){this.baseUrl=Vt,this.tokenKey="auth_token",this.userKey="auth_user"}getToken(){return localStorage.getItem(this.tokenKey)}setToken(t){localStorage.setItem(this.tokenKey,t)}removeToken(){localStorage.removeItem(this.tokenKey),localStorage.removeItem("refresh_token")}getUser(){const t=localStorage.getItem(this.userKey);return t?JSON.parse(t):null}setUser(t){localStorage.setItem(this.userKey,JSON.stringify(t))}removeUser(){localStorage.removeItem(this.userKey)}isAuthenticated(){return!!this.getToken()}async login(t,s){try{if(!t||!s)throw new Error("Email and password are required");const r=new URLSearchParams;r.append("grant_type","password"),r.append("username",t),r.append("password",s);const n=await fetch(`${this.baseUrl.replace("/api/json","")}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!n.ok){const o=await n.json().catch(()=>({}));throw new Error(o.message||o.error_description||"Login failed")}const i=await n.json();return this.setToken(i.access_token),i.refresh_token&&localStorage.setItem("refresh_token",i.refresh_token),i}catch(r){throw console.error("Login error:",r),r}}async exchangeAuthorizationCode(t){const s=new URLSearchParams;s.append("grant_type","authorization_code"),s.append("code",t);const r=this.baseUrl.replace("/api/json",""),n=await fetch(`${r}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!n.ok){const o=await n.json().catch(()=>({}));throw new Error(o.message||o.error_description||"SSO token exchange failed")}const i=await n.json();return this.setToken(i.access_token),i.refresh_token&&localStorage.setItem("refresh_token",i.refresh_token),i}async getAuthProviders(){const t=this.baseUrl.replace("/api/json",""),s=await fetch(`${t}/auth/providers`,{method:"GET"});if(!s.ok)throw new Error("Failed to load auth providers");return s.json()}async getCurrentUser(){try{const t=await fetch(`${this.baseUrl}/getMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`}});if(t.ok){const s=await t.json();return s?(this.setUser(s),s):(console.log("getMe returned null, creating user..."),await this.createUser())}else throw new Error("Failed to get user")}catch(t){throw console.error("Error getting user:",t),t}}async createUser(){try{const t=await fetch(`${this.baseUrl}/createMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`}});if(t.ok){const s=await t.json();return this.setUser(s),s}else throw new Error("Failed to create user")}catch(t){throw console.error("Error creating user:",t),t}}async createUserWithProfile(t,s){try{const r=await fetch(`${this.baseUrl}/createMe`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.getToken()}`},body:JSON.stringify({firstName:t,lastName:s})});if(r.ok){const n=await r.json();return this.setUser(n),n}else throw new Error("Failed to create user with profile")}catch(r){throw console.error("Error creating user with profile:",r),r}}getCustomerId(t){return(t==null?void 0:t.customerId)||null}logout(){this.removeToken(),this.removeUser()}async requestPasswordReset(t,s){try{const r=await fetch(`${this.baseUrl}/requestPasswordReset`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,redirectUrl:s})});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.message||"Password reset request failed")}return await r.json()}catch(r){throw console.error("Password reset request error:",r),r}}async resetPassword(t,s){try{const r=await fetch(`${this.baseUrl}/resetPassword`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:t,password:s})});if(!r.ok){const n=await r.json().catch(()=>({}));throw new Error(n.message||"Password reset failed")}return await r.json()}catch(r){throw console.error("Password reset error:",r),r}}async refreshToken(){try{const t=localStorage.getItem("refresh_token");if(!t)throw new Error("No refresh token available");const s=new URLSearchParams;s.append("grant_type","refresh_token"),s.append("refresh_token",t);const r=await fetch(`${this.baseUrl.replace("/api/json","")}/auth/token`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!r.ok){const i=await r.json().catch(()=>({}));throw new Error(i.message||i.error_description||"Token refresh failed")}const n=await r.json();return this.setToken(n.access_token),n.refresh_token&&localStorage.setItem("refresh_token",n.refresh_token),n}catch(t){throw console.error("Token refresh error:",t),this.logout(),t}}async getCurrentUserCached(){if(!this.isAuthenticated())return null;try{const t=this.getUser();return t||await this.getCurrentUser()}catch(t){return console.error("Error getting current user:",t),null}}}const Y=new Md;class Bd{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=Y.getToken();n&&(r.Authorization=`Bearer ${n}`);const i=await fetch(`${Vt}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!i.ok){const a=(await i.json().catch(()=>({}))).message||`HTTP error! status: ${i.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(a)}return i.json()}async getPriceLists(){return(await this.makeRequest("/listPriceLists")).results||[]}async getPriceList(t){return await this.makeRequest("/getPriceList",{id:t})}async createPriceList(t){return await this.makeRequest("/createPriceList",{name:t})}async updatePriceList(t,s){return await this.makeRequest("/updatePriceList",{where:{id:t},values:{name:s}})}async deletePriceList(t){return await this.makeRequest("/deletePriceList",{id:t})}async getCustomerPriceLists(t){return(await this.makeRequest("/listCustomerPriceLists",{where:{customer:{id:{equals:t}}}})).results||[]}async getCustomerPriceList(t){var r;return((r=(await this.makeRequest("/listCustomerPriceLists",{where:{id:{equals:t}}})).results)==null?void 0:r[0])||null}async createCustomerPriceList(t,s){return await this.makeRequest("/createCustomerPriceList",{customer:{id:t},priceList:{id:s}})}async deleteCustomerPriceList(t){return await this.makeRequest("/deleteCustomerPriceList",{id:t})}async listPriceListChangeLog(t){return((await this.makeRequest("/listPriceListChangeLog",{where:{priceList:{id:{equals:t}}},orderBy:[{createdAt:"Desc"}],include:{createdBy:!0}})).results||[]).map(n=>{const i=n.createdBy?[n.createdBy.firstName,n.createdBy.lastName].filter(Boolean).join(" ")||n.createdBy.email||n.createdBy.id:n.createdByName;return{...n,createdByName:i}})}}const dl=new Bd,ci=Object.freeze(Object.defineProperty({__proto__:null,priceListService:dl},Symbol.toStringTag,{value:"Module"}));class jd{constructor(){this.productCache=new Map}async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=Y.getToken();n&&(r.Authorization=`Bearer ${n}`);const i=await fetch(`${Vt}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!i.ok){const a=(await i.json().catch(()=>({}))).message||`HTTP error! status: ${i.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(a)}return i.json()}async getProducts(){return(await this.makeRequest("/listProducts",{limit:500})).results||[]}async getProduct(t,s=!0){if(s&&this.productCache.has(t))return this.productCache.get(t);const r=await this.makeRequest("/getProduct",{id:t});return this.productCache.set(t,r),r}clearProductCache(t=null){t?this.productCache.delete(t):this.productCache.clear()}async getProductPricesByPriceList(t){return(await this.makeRequest("/listProductPrices",{where:{priceList:{id:{equals:t}}},limit:500})).results||[]}async listBrands(){return(await this.makeRequest("/listBrands",{})).results||[]}}const yr=new jd;class Ud{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=Y.getToken();n&&(r.Authorization=`Bearer ${n}`);const i=await fetch(`${Vt}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!i.ok){const a=(await i.json().catch(()=>({}))).message||`HTTP error! status: ${i.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(a)}return i.json()}async getQuotesByCustomer(t){return(await this.makeRequest("/listQuotes",{where:{customerPriceList:{customer:{id:{equals:t}}}},limit:500})).results||[]}async getQuotesByCustomerPriceList(t){return(await this.makeRequest("/listQuotes",{where:{customerPriceList:{id:{equals:t}}},limit:500})).results||[]}async getQuote(t){return await this.makeRequest("/getQuote",{id:t})}async createQuote(t){return await this.makeRequest("/createQuote",{customerPriceList:{id:t}})}async deleteQuote(t){return await this.makeRequest("/deleteQuote",{id:t})}async getQuoteProducts(t){return(await this.makeRequest("/listQuoteProducts",{where:{quote:{id:{equals:t}}}})).results||[]}async addProductToQuote(t,s,r){return await this.makeRequest("/createQuoteProduct",{quote:{id:t},productPrice:{id:s},quantity:r})}async updateQuoteProduct(t,s){return await this.makeRequest("/updateQuoteProduct",{where:{id:t},values:{quantity:s}})}async updateQuoteDelivery(t,s,r){return await this.makeRequest("/updateQuoteDelivery",{where:{id:t},values:{deliveryService:s,totalDeliveryFees:r}})}async updateQuoteDeliveryAddress(t,s){return await this.makeRequest("/updateQuoteDeliveryAddress",{where:{id:t},values:{deliveryAddress:s?{id:s}:null}})}async submitQuote(t){return await this.makeRequest("/submitQuote",{where:{id:t}})}async updateQuoteName(t,s){return await this.makeRequest("/updateQuoteName",{where:{id:t},values:{name:s}})}async deleteQuoteProduct(t){return await this.makeRequest("/deleteQuoteProduct",{id:t})}}const fe=new Ud,ho=Object.freeze(Object.defineProperty({__proto__:null,quoteService:fe},Symbol.toStringTag,{value:"Module"})),Ct=(e,t)=>{const s=e.__vccOpts||e;for(const[r,n]of t)s[r]=n;return s},Hd={name:"AddProductModal",props:{quoteId:{type:String,required:!0},priceListId:{type:String,required:!1,default:""},existingQuoteProducts:{type:Array,default:()=>[]}},data(){return{productPrices:[],filteredProductPrices:[],searchQuery:"",loading:!1}},async mounted(){await this.loadProductPrices()},methods:{async loadProductPrices(){var e,t,s;this.loading=!0;try{let r=this.priceListId;if(!r){const n=await fe.getQuote(this.quoteId),{priceListService:i}=await Re(async()=>{const{priceListService:l}=await Promise.resolve().then(()=>ci);return{priceListService:l}},void 0),a=(await i.getCustomerPriceLists(((t=(e=n.customerPriceList)==null?void 0:e.customer)==null?void 0:t.id)||"")).find(l=>l.id===n.customerPriceListId);r=((s=a==null?void 0:a.priceList)==null?void 0:s.id)||""}this.productPrices=r?await yr.getProductPricesByPriceList(r):[],this.filteredProductPrices=this.filterAvailableProducts(this.productPrices)}catch(r){console.error("Failed to load product prices:",r)}finally{this.loading=!1}},filterAvailableProducts(e){const t=this.existingQuoteProducts.map(s=>s.productPriceId);return e.filter(s=>!t.includes(s.id))},searchProducts(){const e=this.filterAvailableProducts(this.productPrices);if(!this.searchQuery.trim()){this.filteredProductPrices=e;return}const t=this.searchQuery.toLowerCase();this.filteredProductPrices=e.filter(s=>s.productName.toLowerCase().includes(t)||s.productSku.toLowerCase().includes(t))},async selectProduct(e){try{await fe.addProductToQuote(this.quoteId,e.id,1),this.$emit("product-added")}catch(t){console.error("Failed to add product to quote:",t),alert("Failed to add product to quote")}},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"}}},Vd={class:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50"},$d={class:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-hidden"},Wd={class:"flex justify-between items-center p-6 border-b border-gray-200"},Qd={class:"p-6 overflow-y-auto max-h-[calc(90vh-140px)]"},Kd={class:"mb-6"},zd={key:0,class:"flex justify-center items-center py-8"},Gd={key:1,class:"text-center py-8"},Yd={key:2,class:"space-y-4"},Jd=["onClick"],Xd={class:"flex items-center space-x-4"},Zd={class:"flex-1"},ef={class:"font-medium text-gray-900"},tf={class:"text-sm text-gray-600"},sf={class:"flex items-center space-x-4 mt-2"},rf={class:"text-sm font-medium text-gray-900"},nf={class:"text-xs text-gray-500"},of={class:"flex justify-end space-x-3 p-6 border-t border-gray-200"};function af(e,t,s,r,n,i){return m(),g("div",Vd,[c("div",$d,[c("div",Wd,[t[5]||(t[5]=c("h3",{class:"text-lg font-medium text-gray-900"},"Add Product to Quote",-1)),c("button",{onClick:t[0]||(t[0]=o=>e.$emit("close")),class:"text-gray-400 hover:text-gray-600"},t[4]||(t[4]=[c("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",Qd,[c("div",Kd,[t[6]||(t[6]=c("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Search Products",-1)),ue(c("input",{"onUpdate:modelValue":t[1]||(t[1]=o=>n.searchQuery=o),type:"text",placeholder:"Search by name or SKU...",class:"input",onInput:t[2]||(t[2]=(...o)=>i.searchProducts&&i.searchProducts(...o))},null,544),[[de,n.searchQuery]])]),n.loading?(m(),g("div",zd,t[7]||(t[7]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.filteredProductPrices.length===0?(m(),g("div",Gd,t[8]||(t[8]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products found</h4><p class="text-gray-600">Try adjusting your search terms.</p>',3)]))):(m(),g("div",Yd,[(m(!0),g(ie,null,qe(n.filteredProductPrices,o=>(m(),g("div",{key:o.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 cursor-pointer",onClick:a=>i.selectProduct(o)},[c("div",Xd,[c("div",Zd,[c("h4",ef,_(o.productName),1),c("p",tf,"SKU: "+_(o.productSku),1),c("div",sf,[c("div",null,[c("span",rf,"ZAR "+_(i.formatCurrency(o.price)),1)]),c("div",null,[c("span",nf," incl. VAT: ZAR "+_(i.formatCurrency(o.priceInclVat)),1)])])]),t[9]||(t[9]=c("div",{class:"text-right"},[c("button",{class:"btn btn-primary text-sm"}," Add to Quote ")],-1))])],8,Jd))),128))]))]),c("div",of,[c("button",{onClick:t[3]||(t[3]=o=>e.$emit("close")),class:"btn btn-secondary"},"Cancel")])])])}const lf=Ct(Hd,[["render",af]]);class cf{constructor(){this.baseUrl=Vt}async makeRequest(t,s=null){const r=`${this.baseUrl}${t}`,n={"Content-Type":"application/json"},i=Y.getToken();i&&(n.Authorization=`Bearer ${i}`);const o={method:s?"POST":"GET",headers:n};s&&(o.body=JSON.stringify(s));const a=await fetch(r,o);if(!a.ok){const d=(await a.json().catch(()=>({}))).message||`HTTP error! status: ${a.status}`;throw typeof d=="string"&&d.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(d)}return a.json()}async calculateDelivery(t){return this.makeRequest("/calculateDelivery",{id:t})}}const uf=new cf;class df{constructor(){this.cache=new Map,this.urlMap=new Map}async get(t,s){if(!t||!s)return s;if(this.cache.has(t))return this.cache.get(t);try{const r=await fetch(s);if(!r.ok)return console.warn(`Failed to fetch image for caching: ${s}`),s;const n=await r.blob(),i=URL.createObjectURL(n);return this.cache.set(t,i),this.urlMap.set(t,s),i}catch(r){return console.warn(`Error caching image for ${t}:`,r),s}}clear(t=null){if(t){const s=this.cache.get(t);s&&URL.revokeObjectURL(s),this.cache.delete(t),this.urlMap.delete(t)}else{for(const s of this.cache.values())URL.revokeObjectURL(s);this.cache.clear(),this.urlMap.clear()}}getStats(){return{entryCount:this.cache.size,ids:Array.from(this.cache.keys())}}}const Cn=new df,ff={name:"QuoteDetail",components:{AddProductModal:lf},props:{quote:{type:Object,required:!0},customerId:{type:String,required:!1}},data(){return{productPrices:[],quoteProducts:[],productDetails:{},showAddProductModal:!1,loading:!1,customerPriceList:null,equipmentBoxes:[],equipmentBoxDetails:{},selectedBoxType:"",loadingEquipmentBoxes:!1,loadingProducts:!1,imagePreview:{show:!1,src:"",alt:"",x:0,y:0},deliveryRates:null,loadingDeliveryRates:!1,deliveryRatesError:null,submittingQuote:!1,productsReadOnly:!1,deliveryAddresses:[],loadingAddresses:!1,selectedAddressId:"",addressSubmitAttempted:!1,showAddressDialog:!1,showDeliveryInfoDialog:!1,showRawJson:!1,showNameDialog:!1,editName:"",savingName:!1}},async mounted(){var e,t;this.loadingProducts=!0,this.loadingEquipmentBoxes=!0,this.loadingAddresses=!0,await this.refreshQuoteData(),await this.loadCustomerPriceList(),await this.loadQuoteProducts(),await this.loadProductDetails(),this.initializeBoxType(),await this.loadEquipmentBoxes(),await this.loadDeliveryAddresses(),this.quote.deliveryAddressId&&(this.selectedAddressId=this.quote.deliveryAddressId),this.checkExistingDeliveryDetails(),this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0&&(this.productsReadOnly=!0),((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status)||(this.productsReadOnly=!0),this.hydrateActionUsers(),this.hydrateCreatedByUser()},computed:{priceListId(){var e,t,s;return((t=(e=this.customerPriceList)==null?void 0:e.priceList)==null?void 0:t.id)||((s=this.customerPriceList)==null?void 0:s.priceListId)},isSubmitted(){var e;return((e=this.quote)==null?void 0:e.status)==="Submitted"},isApproved(){var e;return((e=this.quote)==null?void 0:e.status)==="Approved"},isDraft(){var t;const e=(t=this.quote)==null?void 0:t.status;return!e||e==="Draft"},hasDeliveryInfo(){var e;return!!((e=this.quote)!=null&&e.deliveryRawJson)},formattedDeliveryInfo(){var e,t;try{return JSON.stringify(((e=this.quote)==null?void 0:e.deliveryRawJson)??{},null,2)}catch{return String(((t=this.quote)==null?void 0:t.deliveryRawJson)??"")}},parsedDelivery(){var o;const e=(o=this.quote)==null?void 0:o.deliveryRawJson;let t={};if(!e)return{selectedRate:null,otherRates:[]};if(typeof e=="string")try{t=JSON.parse(e)}catch{t={}}else t=e;const r=[...Array.isArray(t.rates)?t.rates:[]].sort((a,l)=>(a.rate??1/0)-(l.rate??1/0)),n=r[0]||null,i=r.slice(1).map((a,l)=>({...a,_key:l}));return{selectedRate:n,otherRates:i}},formatChargedKg(){var t,s;if((t=this.quote)!=null&&t.chargedWeightInGrams)return(this.quote.chargedWeightInGrams/1e3).toFixed(0);const e=(s=this.parsedDelivery.selectedRate)==null?void 0:s.charged_weight;return e!=null?Number(e).toFixed(0):"0"},selectedAddress(){return(this.deliveryAddresses||[]).find(t=>t.id===this.selectedAddressId)||{}},isDeliverySet(){return!!(this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0)},isSubmitDisabled(){return!this.isDeliverySet||!this.productsReadOnly||this.loading||this.loadingEquipmentBoxes||this.loadingDeliveryRates||this.submittingQuote},grandTotal(){return this.quote.total||0},vat(){return this.quote.vat||0},grandTotalInclVat(){return this.quote.totalInclVat||0},productsWeight(){return this.quoteProducts.reduce((e,t)=>{var n;const s=(n=t.product)==null?void 0:n.id,r=this.productDetails[s];return r&&r.weightInGrams?e+Number(r.weightInGrams)*t.quantity:e},0)},equipmentBoxesWeight(){return this.equipmentBoxes.reduce((e,t)=>{const s=this.equipmentBoxDetails[t.equipmentBoxId];return s&&s.weightInGrams?e+Number(s.weightInGrams)*t.quantity:e},0)},totalShipmentWeight(){return this.productsWeight+this.equipmentBoxesWeight}},watch:{"quote.products":{handler(){this.checkExistingDeliveryDetails()},deep:!0},quote:{handler(){this.$nextTick(()=>{var e,t;this.checkExistingDeliveryDetails(),this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0&&(this.productsReadOnly=!0),((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status)||(this.productsReadOnly=!0),this.hydrateActionUsers(),this.hydrateCreatedByUser()})},deep:!1},equipmentBoxes:{handler(){this.$nextTick(()=>{this.checkExistingDeliveryDetails()})},deep:!0},"quote.boxType":{handler(e){e&&e!==this.selectedBoxType&&(this.selectedBoxType=e,console.log("Box type updated from quote:",e))},immediate:!0}},methods:{async hydrateActionUsers(){var e,t,s,r,n,i;try{const o=((e=this.quote)==null?void 0:e.submittedById)||((t=this.quote)==null?void 0:t.submittedBy),a=((s=this.quote)==null?void 0:s.approvedById)||((r=this.quote)==null?void 0:r.approvedBy),l=o&&!((n=this.quote)!=null&&n.submittedByName),d=a&&!((i=this.quote)!=null&&i.approvedByName);if(!l&&!d)return;const{userService:u}=await Re(async()=>{const{userService:y}=await import("./userService-Cg17cmK4.js");return{userService:y}},[]),h={},b=[];l&&b.push(u.getUser(o).then(y=>{h.submittedByName=[y.firstName,y.lastName].filter(Boolean).join(" ")||y.email||y.id}).catch(y=>console.warn("Failed to fetch submitted by user:",y))),d&&b.push(u.getUser(a).then(y=>{h.approvedByName=[y.firstName,y.lastName].filter(Boolean).join(" ")||y.email||y.id}).catch(y=>console.warn("Failed to fetch approved by user:",y))),await Promise.all(b),Object.keys(h).length&&this.$emit("quote-updated",{...this.quote,...h})}catch(o){console.warn("Failed to hydrate action user names",o)}},async hydrateCreatedByUser(){var e,t,s;try{const r=((e=this.quote)==null?void 0:e.createdById)||((t=this.quote)==null?void 0:t.createdBy);if(!r||(s=this.quote)!=null&&s.createdByName)return;const{userService:n}=await Re(async()=>{const{userService:a}=await import("./userService-Cg17cmK4.js");return{userService:a}},[]),i=await n.getUser(r),o=[i.firstName,i.lastName].filter(Boolean).join(" ")||i.email||i.id;this.$emit("quote-updated",{...this.quote,createdByName:o})}catch(r){console.warn("Failed to hydrate createdBy user name",r)}},openNameDialog(){var e,t;(((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status))&&(this.editName=this.quote.name||"",this.showNameDialog=!0)},closeNameDialog(){this.showNameDialog=!1},async saveName(){try{if(!this.editName||!this.editName.trim())return;this.savingName=!0,await fe.updateQuoteName(this.quote.id,this.editName.trim());const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),this.showNameDialog=!1}catch(e){console.error("Failed to update quote name:",e),alert("Failed to update name: "+(e.message||"Unknown error"))}finally{this.savingName=!1}},openDeliveryInfoDialog(){this.showDeliveryInfoDialog=!0},closeDeliveryInfoDialog(){this.showDeliveryInfoDialog=!1},openAddressDialog(){this.productsReadOnly||(this.showAddressDialog=!0)},closeAddressDialog(){this.showAddressDialog=!1},selectAddress(e){this.productsReadOnly||(this.selectedAddressId=e,this.onAddressChange(),this.closeAddressDialog())},async loadDeliveryAddresses(){try{if(!this.customerId)return;this.loadingAddresses=!0;const{deliveryAddressService:e}=await Re(async()=>{const{deliveryAddressService:r}=await Promise.resolve().then(()=>i0);return{deliveryAddressService:r}},void 0),t=await e.listDeliveryAddresses(this.customerId),s=Array.isArray(t)?t:t.results||[];if(this.quote.deliveryAddressId)try{const r=await e.getDeliveryAddress(this.quote.deliveryAddressId);!s.some(i=>i.id===r.id)&&r&&s.push(r)}catch(r){console.warn("Could not hydrate selected delivery address:",r)}this.deliveryAddresses=s}catch(e){console.error("Failed to load delivery addresses",e),this.deliveryAddresses=[]}finally{this.loadingAddresses=!1}},async onAddressChange(){try{await fe.updateQuoteDeliveryAddress(this.quote.id,this.selectedAddressId);const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e)}catch(e){console.error("Failed to update quote delivery address",e),alert("Failed to update delivery address: "+(e.message||"Unknown error"))}},selectBoxType(e){this.selectedBoxType!==e&&(this.selectedBoxType=e,this.onBoxTypeChange())},async toggleProductsReadOnly(){var e,t;(((e=this.quote)==null?void 0:e.status)==="Draft"||!((t=this.quote)!=null&&t.status))&&(!this.productsReadOnly&&(this.addressSubmitAttempted=!0,!this.selectedAddressId)||(this.productsReadOnly=!this.productsReadOnly,this.productsReadOnly&&this.selectedBoxType?(await this.calculateEquipmentBoxes(),this.equipmentBoxes.length>0&&await this.calculateDeliveryRates()):this.productsReadOnly||(this.addressSubmitAttempted=!1,await this.resetDeliveryInfo())))},async loadCustomerPriceList(){try{const{priceListService:e}=await Re(async()=>{const{priceListService:t}=await Promise.resolve().then(()=>ci);return{priceListService:t}},void 0);if(this.customerId){const s=(await e.getCustomerPriceLists(this.customerId)).find(r=>r.id===this.quote.customerPriceListId);s?this.customerPriceList=s:(console.warn("Customer price list not found for quote. Falling back to empty priceListId"),this.customerPriceList={priceListId:""})}else console.warn("No customerId provided to QuoteDetail; cannot resolve priceListId"),this.customerPriceList={priceListId:""}}catch(e){console.error("Failed to load customer price list:",e),this.customerPriceList={priceListId:""}}},async loadQuoteProducts(){try{this.loadingProducts=!0,this.quoteProducts=await fe.getQuoteProducts(this.quote.id)}catch(e){console.error("Failed to load quote products:",e)}finally{this.loadingProducts=!1}try{this.priceListId&&(this.productPrices=await yr.getProductPricesByPriceList(this.priceListId))}catch(e){console.error("Failed to load product prices:",e)}},async loadProductDetails(){var e;try{for(const t of this.quoteProducts)if(t.product){const s=t.product,r=s.id;this.productDetails[r]||((e=s.image)!=null&&e.url&&(s.image.url=await Cn.get(r,s.image.url)),this.productDetails[r]=s)}}catch(t){console.error("Failed to load product details:",t)}},async updateProductQuantity(e,t){try{await fe.updateQuoteProduct(e,parseFloat(t)),await this.loadQuoteProducts();const s=await fe.getQuote(this.quote.id);this.$emit("quote-updated",s)}catch(s){console.error("Failed to update product quantity:",s)}},async removeProduct(e){if(confirm("Are you sure you want to remove this product from the quote?"))try{await fe.deleteQuoteProduct(e),await this.loadQuoteProducts();const t=await fe.getQuote(this.quote.id);this.$emit("quote-updated",t)}catch(t){console.error("Failed to remove product:",t)}},async deleteQuote(){if(confirm("Are you sure you want to delete this quote? This action cannot be undone."))try{await fe.deleteQuote(this.quote.id),this.$emit("quote-deleted")}catch(e){console.error("Failed to delete quote:",e)}},async handleProductAdded(){this.showAddProductModal=!1,await this.loadQuoteProducts(),await this.loadProductDetails();const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e)},async loadEquipmentBoxes(){var e;try{this.loadingEquipmentBoxes=!0;const{equipmentBoxService:t}=await Re(async()=>{const{equipmentBoxService:r}=await import("./equipmentBoxService-xUIRvHmQ.js");return{equipmentBoxService:r}},[]),s=await t.listQuoteEquipmentBoxes(this.quote.id);this.equipmentBoxes=s.results||[];for(const r of this.equipmentBoxes)if(r.equipmentBox&&!this.equipmentBoxDetails[r.equipmentBoxId]){const n=r.equipmentBox;(e=n.image)!=null&&e.url&&(n.image.url=await Cn.get(r.equipmentBoxId,n.image.url)),this.equipmentBoxDetails[r.equipmentBoxId]=n}}catch(t){console.error("Failed to load equipment boxes:",t),this.equipmentBoxes=[]}finally{this.loadingEquipmentBoxes=!1}},async onBoxTypeChange(){this.selectedBoxType?(await this.calculateEquipmentBoxes(),this.equipmentBoxes.length>0&&await this.calculateDeliveryRates()):await this.resetDeliveryInfo()},async resetDeliveryInfo(){try{this.loading=!0;const{equipmentBoxService:e}=await Re(async()=>{const{equipmentBoxService:t}=await import("./equipmentBoxService-xUIRvHmQ.js");return{equipmentBoxService:t}},[]);await e.resetDeliveryInfo(this.quote.id),this.equipmentBoxes=[],this.deliveryRates=null,this.deliveryRatesError=null,await this.refreshQuoteData()}catch(e){console.error("Failed to reset delivery info:",e),alert("Failed to reset delivery info: "+e.message)}finally{this.loading=!1}},async calculateEquipmentBoxes(){if(this.selectedBoxType)try{this.loading=!0;const{equipmentBoxService:e}=await Re(async()=>{const{equipmentBoxService:t}=await import("./equipmentBoxService-xUIRvHmQ.js");return{equipmentBoxService:t}},[]);await e.calculateEquipmentBoxes(this.quote.id,this.selectedBoxType),await this.loadEquipmentBoxes(),await this.refreshQuoteData()}catch(e){console.error("Failed to calculate equipment boxes:",e),alert("Failed to calculate equipment boxes: "+e.message)}finally{this.loading=!1}},formatDate(e){if(!e)return"";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear(),i=String(t.getHours()).padStart(2,"0"),o=String(t.getMinutes()).padStart(2,"0");return`${s} ${r} ${n} ${i}:${o}`},formatCurrency(e){return parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2})},formatVolume(e){return e?`${parseFloat(e).toFixed(0)} cm`:"N/A"},formatDimensions(e){if(!e)return"N/A";const{lengthInCm:t,widthInCm:s,heightInCm:r}=e;return!t||!s||!r?"N/A":`${parseFloat(t).toFixed(0)}  ${parseFloat(s).toFixed(0)}  ${parseFloat(r).toFixed(0)} cm`},formatWeight(e){if(!e||e===0)return"0 kg";const t=e/1e3;return t>=1?`${t.toFixed(2)} kg`:`${e.toFixed(0)} g`},showImagePreview(e,t){var r;const s=this.productDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let l=t.clientX+10,d=t.clientY+10;l+250>window.innerWidth&&(l=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Product",x:l,y:d}}},updateImagePreviewPosition(e){if(this.imagePreview.show){let i=e.clientX+10,o=e.clientY+10;i+250>window.innerWidth&&(i=e.clientX-250-10),o+250>window.innerHeight&&(o=e.clientY-250-10),this.imagePreview.x=i,this.imagePreview.y=o}},hideImagePreview(){this.imagePreview.show=!1},showBoxImagePreview(e,t){var r;const s=this.equipmentBoxDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let l=t.clientX+10,d=t.clientY+10;l+250>window.innerWidth&&(l=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Equipment Box",x:l,y:d}}},resetDeliveryRates(){this.deliveryRates=null,this.deliveryRatesError=null,this.loadingDeliveryRates=!1},async calculateDeliveryRates(){if(!this.selectedBoxType||this.equipmentBoxes.length===0){this.deliveryRatesError="Please calculate equipment boxes first before calculating delivery rates.";return}this.loadingDeliveryRates=!0,this.deliveryRatesError=null,this.deliveryRates=null;try{const e=await uf.calculateDelivery(this.quote.id),t=e.availableRates&&e.availableRates.length>0?e.availableRates[0].weights.chargedWeight:null;this.deliveryRates={...e,chargedWeight:t},await this.refreshQuoteData()}catch(e){console.error("Failed to calculate delivery rates:",e),this.deliveryRatesError=e.message||"Failed to calculate delivery rates"}finally{this.loadingDeliveryRates=!1}},formatDeliveryDate(e){if(!e)return"N/A";try{const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`}catch(t){return console.error("Error formatting delivery date:",t),"Invalid date"}},formatQuoteStatus(e){return e?e==="Submitted"?"Submitted":e==="Approved"?"Approved":"Draft":"Draft"},async refreshQuoteData(){try{const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),await this.$nextTick(),console.log("Quote data refreshed successfully")}catch(e){console.error("Failed to refresh quote data:",e)}},initializeBoxType(){this.quote.boxType&&(this.selectedBoxType=this.quote.boxType,console.log("Initialized box type from quote:",this.quote.boxType))},checkExistingDeliveryDetails(){this.quote.deliveryService&&this.quote.totalDeliveryFees&&this.quote.totalDeliveryFees>0?(this.deliveryRates={selectedDeliveryService:this.quote.deliveryService,selectedDeliveryFees:this.quote.totalDeliveryFees,totalParcels:this.equipmentBoxes.length>0?this.equipmentBoxes.reduce((e,t)=>e+t.quantity,0):0,totalWeightKg:this.totalShipmentWeight/1e3,totalVolumeCm3:this.equipmentBoxes.length>0?this.equipmentBoxes.reduce((e,t)=>{const s=this.equipmentBoxDetails[t.equipmentBoxId];if(s){const r=s.lengthInCm*s.widthInCm*s.heightInCm*t.quantity;return e+r}return e},0):0},console.log("Hydrated existing delivery details:",this.deliveryRates)):console.log("No existing delivery details found")},async submitQuote(){try{this.submittingQuote=!0,await fe.submitQuote(this.quote.id);const e=await fe.getQuote(this.quote.id);this.$emit("quote-updated",e),this.productsReadOnly=!0,this.showAddProductModal=!1}catch(e){console.error("Failed to submit quote:",e),alert("Failed to submit quote: "+(e.message||"Unknown error"))}finally{this.submittingQuote=!1}}}},hf={class:"space-y-6"},pf={class:"flex justify-between items-center"},mf={class:"flex items-center space-x-4"},gf={class:"flex items-center gap-2"},yf={class:"text-2xl font-semibold text-gray-900"},_f={class:"flex space-x-2"},bf=["disabled"],vf={key:0,class:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"},xf={class:"card"},wf={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},Sf={class:"text-lg font-semibold text-gray-900"},Ef={class:"flex items-center"},kf={class:"text-gray-900"},Pf={class:"text-gray-900"},Cf={class:"text-gray-900"},If={class:"text-gray-900"},Af={class:"text-gray-900"},Tf={class:"text-gray-900"},Df={class:"card"},Rf={class:"flex items-center justify-between mb-2"},Lf={class:"block text-sm font-medium text-gray-700"},Nf={key:0,class:"text-red-600"},Of={key:0,class:"text-xs text-red-600"},Ff={class:"flex items-start gap-4"},qf={class:"w-full"},Mf={key:0,class:"rounded-lg border border-gray-200 p-4 text-sm text-gray-500 bg-gray-50"},Bf={class:"md:grid md:grid-cols-2 md:gap-6"},jf={class:"space-y-1"},Uf={class:"text-base font-semibold text-gray-900"},Hf={key:0,class:"text-sm text-gray-700"},Vf={key:1,class:"space-y-0.5"},$f={key:0,class:"text-sm text-gray-700"},Wf={key:1,class:"text-sm text-gray-700"},Qf={key:2,class:"text-sm text-gray-700"},Kf={class:"space-y-1 mt-3 md:mt-6"},zf={class:"text-sm text-gray-700"},Gf={key:0,class:"text-sm text-gray-700"},Yf={class:"text-sm text-gray-700"},Jf={key:1,class:"text-sm text-gray-700"},Xf={key:0,class:"fixed inset-0 z-50 flex items-center justify-center"},Zf={class:"relative bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4 max-h-[90vh] overflow-hidden"},eh={class:"flex items-center justify-between p-4 border-b border-gray-200"},th={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},sh={key:0,class:"text-center text-sm text-gray-600 py-8"},rh={key:1,class:"space-y-4"},nh=["onClick"],ih={class:"md:grid md:grid-cols-2 md:gap-6"},oh={class:"space-y-1"},ah={class:"text-base font-semibold text-gray-900"},lh={key:0,class:"text-sm text-gray-700"},ch={key:1,class:"space-y-0.5"},uh={key:0,class:"text-sm text-gray-700"},dh={key:1,class:"text-sm text-gray-700"},fh={key:2,class:"text-sm text-gray-700"},hh={class:"space-y-1 mt-3 md:mt-6"},ph={class:"text-sm text-gray-700"},mh={key:0,class:"text-sm text-gray-700"},gh={class:"text-sm text-gray-700"},yh={key:1,class:"text-sm text-gray-700"},_h={class:"p-4 border-t border-gray-200 flex justify-end"},bh={class:"card"},vh={key:0,class:"flex justify-center items-center py-8"},xh={key:1,class:"text-center py-8"},wh={key:2,class:"space-y-4"},Sh={class:"flex justify-between items-center"},Eh={class:"flex items-center space-x-4"},kh={class:"relative w-12 h-12"},Ph=["src","alt","onMouseenter"],Ch={key:1,class:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center"},Ih={class:"min-h-[2rem] flex flex-col justify-center"},Ah={class:"font-medium text-gray-900"},Th={class:"text-sm text-gray-600"},Dh={class:"flex items-center space-x-4"},Rh={class:"w-12 text-center"},Lh=["onClick"],Nh={class:"w-20 text-right"},Oh=["value","onChange"],Fh={key:1,class:"text-sm font-medium text-gray-900 text-center"},qh={class:"w-20 text-right"},Mh={class:"text-sm font-medium text-gray-900"},Bh={class:"w-20 text-right"},jh={class:"text-sm font-bold text-gray-900"},Uh={key:3,class:"flex justify-end items-center space-x-3 mt-6 pt-4 border-t border-gray-200"},Hh=["disabled"],Vh=["disabled"],$h={key:0,class:"card"},Wh={key:0,class:"mb-4"},Qh={class:"flex gap-3"},Kh=["disabled"],zh=["disabled"],Gh={key:1,class:"flex justify-center items-center py-8"},Yh={key:2,class:"text-center py-8"},Jh={key:3,class:"text-center py-8"},Xh={key:4,class:"space-y-3"},Zh={class:"flex justify-between items-center"},ep={class:"flex items-center space-x-4"},tp={class:"relative w-12 h-12"},sp=["src","alt","onMouseenter"],rp={key:1,class:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center"},np={class:"min-h-[2rem] flex flex-col justify-center"},ip={class:"font-medium text-gray-900"},op={class:"text-xs text-gray-500"},ap={class:"flex items-center space-x-4"},lp={class:"w-20 text-right"},cp={class:"text-sm font-medium text-gray-900"},up={class:"w-20 text-right"},dp={class:"text-sm font-medium text-gray-900"},fp={class:"w-20 text-right"},hp={class:"text-sm font-bold text-gray-900"},pp={key:1,class:"card"},mp={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},gp={class:"text-2xl font-bold text-gray-900"},yp={class:"space-y-2"},_p={class:"flex justify-between text-sm"},bp={class:"font-medium"},vp={key:0,class:"flex justify-between text-sm"},xp={class:"font-medium"},wp={class:"mt-6 border-t pt-6"},Sp={key:0},Ep={class:"bg-green-50 border border-green-200 rounded-lg p-4"},kp={class:"flex items-start justify-between"},Pp={class:"ml-3 flex-1"},Cp={class:"mt-2 text-sm text-green-700"},Ip={class:"mt-1 text-xs"},Ap={key:0},Tp={class:"ml-3"},Dp={key:0,class:"mt-6 border-t pt-6"},Rp={class:"bg-red-50 border border-red-200 rounded-lg p-4"},Lp={class:"flex"},Np={class:"ml-3 flex-1"},Op={class:"mt-2 text-sm text-red-700"},Fp={class:"mt-3"},qp=["disabled"],Mp={key:0,class:"animate-spin -ml-1 mr-2 h-4 w-4 text-red-700",fill:"none",viewBox:"0 0 24 24"},Bp={class:"card"},jp={class:"flex justify-end"},Up={class:"w-80 space-y-2"},Hp={class:"flex justify-between"},Vp={class:"font-medium"},$p={class:"flex justify-between"},Wp={class:"font-medium"},Qp={class:"flex justify-between"},Kp={class:"font-medium"},zp={class:"border-t pt-2"},Gp={class:"flex justify-between"},Yp={class:"text-sm font-medium text-gray-900"},Jp={class:"flex justify-between"},Xp={class:"text-lg font-bold text-gray-900"},Zp={key:2,class:"fixed inset-0 z-50 flex items-center justify-center"},em={class:"relative bg-white rounded-lg shadow-xl w-full max-w-4xl mx-4 max-h-[90vh] overflow-hidden"},tm={class:"flex items-center justify-between p-4 border-b border-gray-200"},sm={class:"p-4 overflow-auto max-h-[calc(90vh-160px)] space-y-6"},rm={class:"border border-gray-200 rounded-lg p-4"},nm={class:"flex items-start justify-between"},im={class:"text-base font-semibold text-gray-900"},om={class:"text-sm text-gray-700 mt-1"},am={class:"text-sm text-gray-700 mt-1 flex flex-wrap gap-4"},lm={key:0},cm={key:1},um={key:2},dm={key:0,class:"text-xs text-gray-600 mt-1"},fm={key:0},hm={key:1},pm={class:"text-right text-sm text-gray-700"},mm={key:0},gm={key:1},ym={key:2},_m={key:0,class:"border border-gray-200 rounded-lg p-4"},bm={class:"overflow-x-auto"},vm={class:"min-w-full text-sm"},xm={class:"py-2 pr-4 text-gray-800"},wm={class:"py-2 pr-4 text-gray-800"},Sm={class:"py-2 pr-4 text-gray-800"},Em={class:"py-2 pr-4 text-gray-800"},km={class:"py-2 pr-4 text-gray-800"},Pm={key:0,class:"mt-2"},Cm={class:"text-xs text-gray-800 whitespace-pre-wrap break-words"},Im={class:"p-4 border-t border-gray-200 flex justify-end"},Am={key:3,class:"fixed inset-0 z-50 flex items-center justify-center"},Tm={class:"relative bg-white rounded-lg shadow-xl w-full max-w-md mx-4"},Dm={class:"flex items-center justify-between p-4 border-b border-gray-200"},Rm={class:"p-4 space-y-3"},Lm={class:"p-4 border-t border-gray-200 flex justify-end gap-2"},Nm=["disabled"],Om=["src","alt"];function Fm(e,t,s,r,n,i){var a,l,d,u,h,b,y,D,L,V,U,W,z,q,ne,He,Ie,Ve,At,ze;const o=Ot("AddProductModal");return m(),g("div",hf,[c("div",pf,[c("div",mf,[c("button",{onClick:t[0]||(t[0]=x=>e.$emit("back")),class:"btn btn-secondary"}," Back to Quotes "),c("div",gf,[c("h2",yf,_(s.quote.name||"Quote #"+(s.quote.number||"")),1),i.isDraft?(m(),g("button",{key:0,onClick:t[1]||(t[1]=(...x)=>i.openNameDialog&&i.openNameDialog(...x)),class:"text-gray-500 hover:text-gray-700",title:"Edit quote name"},t[31]||(t[31]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5M18.5 2.5a2.121 2.121 0 113 3L12 15l-4 1 1-4 9.5-9.5z"})],-1)]))):P("",!0)])]),c("div",_f,[s.quote.status==="Draft"||!s.quote.status?(m(),g("button",{key:0,onClick:t[2]||(t[2]=(...x)=>i.submitQuote&&i.submitQuote(...x)),class:ae(["btn bg-green-600 hover:bg-green-700 text-white",{"opacity-50 cursor-not-allowed":i.isSubmitDisabled}]),disabled:i.isSubmitDisabled},[n.submittingQuote?(m(),g("span",vf)):P("",!0),he(" "+_(n.submittingQuote?"Submitting...":"Submit Quote"),1)],10,bf)):P("",!0),i.isDraft?(m(),g("button",{key:1,onClick:t[3]||(t[3]=(...x)=>i.deleteQuote&&i.deleteQuote(...x)),class:"btn btn-danger"}," Delete Quote ")):P("",!0)])]),c("div",xf,[c("div",wf,[c("div",null,[t[32]||(t[32]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Quote Number",-1)),c("p",Sf,_(s.quote.number),1)]),c("div",null,[t[33]||(t[33]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Status",-1)),c("div",Ef,[c("span",{class:ae(["inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium",s.quote.status==="Submitted"?"bg-green-100 text-green-800":s.quote.status==="Approved"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},_(i.formatQuoteStatus(s.quote.status)),3)])]),c("div",null,[t[34]||(t[34]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Created By",-1)),c("p",kf,_(s.quote.createdByName||""),1)]),c("div",null,[t[35]||(t[35]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Last Updated",-1)),c("p",Pf,_(i.formatDate(s.quote.updatedAt)),1)]),i.isSubmitted||i.isApproved?(m(),g(ie,{key:0},[c("div",null,[t[36]||(t[36]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Submitted By",-1)),c("p",Cf,_(s.quote.submittedByName||""),1)]),c("div",null,[t[37]||(t[37]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Submitted At",-1)),c("p",If,_(s.quote.submittedAt?i.formatDate(s.quote.submittedAt):""),1)]),c("div",null,[t[38]||(t[38]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved By",-1)),c("p",Af,_(s.quote.approvedByName||""),1)]),c("div",null,[t[39]||(t[39]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Approved At",-1)),c("p",Tf,_(s.quote.approvedAt?i.formatDate(s.quote.approvedAt):""),1)])],64)):P("",!0)])]),c("div",Df,[c("div",Rf,[c("label",Lf,[t[40]||(t[40]=he("Delivery Address ",-1)),n.productsReadOnly?P("",!0):(m(),g("span",Nf,"*"))]),!n.productsReadOnly&&n.addressSubmitAttempted&&!n.selectedAddressId?(m(),g("span",Of,"Address is required")):P("",!0)]),c("div",Ff,[c("div",qf,[n.loadingAddresses?(m(),g("div",Mf,"Loading addresses...")):n.selectedAddressId?(m(),g("div",{key:2,class:ae(["rounded-lg border border-gray-200 p-4 bg-white transition w-full",{"cursor-pointer hover:border-blue-400":!n.productsReadOnly&&!n.loadingAddresses,"cursor-not-allowed":n.productsReadOnly||n.loadingAddresses}]),role:"button",tabindex:"0",onClick:t[6]||(t[6]=(...x)=>i.openAddressDialog&&i.openAddressDialog(...x)),onKeydown:t[7]||(t[7]=co((...x)=>i.openAddressDialog&&i.openAddressDialog(...x),["enter"]))},[c("div",Bf,[c("div",jf,[c("div",Uf,_(i.selectedAddress.name),1),i.selectedAddress.organisation?(m(),g("div",Hf,_(i.selectedAddress.organisation),1)):P("",!0),i.selectedAddress.contactPerson||i.selectedAddress.contactPhone||i.selectedAddress.contactEmail?(m(),g("div",Vf,[i.selectedAddress.contactPerson?(m(),g("p",$f,"Contact: "+_(i.selectedAddress.contactPerson),1)):P("",!0),i.selectedAddress.contactPhone?(m(),g("p",Wf,"Phone: "+_(i.selectedAddress.contactPhone),1)):P("",!0),i.selectedAddress.contactEmail?(m(),g("p",Qf,"Email: "+_(i.selectedAddress.contactEmail),1)):P("",!0)])):P("",!0)]),c("div",Kf,[c("div",zf,_(i.selectedAddress.addressLine1),1),i.selectedAddress.addressLine2?(m(),g("div",Gf,_(i.selectedAddress.addressLine2),1)):P("",!0),c("div",Yf,_(i.selectedAddress.suburb)+", "+_(i.selectedAddress.city)+", "+_(i.selectedAddress.province)+" "+_(i.selectedAddress.postalCode),1),i.selectedAddress.deliveryNotes?(m(),g("div",Jf,_(i.selectedAddress.deliveryNotes),1)):P("",!0)])])],34)):(m(),g("div",{key:1,class:ae(["rounded-lg border border-dashed border-gray-300 p-4 text-sm text-gray-600 transition",{"cursor-pointer hover:border-blue-400":!n.productsReadOnly&&!n.loadingAddresses,"cursor-not-allowed":n.productsReadOnly||n.loadingAddresses}]),role:"button",tabindex:"0",onClick:t[4]||(t[4]=(...x)=>i.openAddressDialog&&i.openAddressDialog(...x)),onKeydown:t[5]||(t[5]=co((...x)=>i.openAddressDialog&&i.openAddressDialog(...x),["enter"]))}," No address selected ",34))])]),n.showAddressDialog?(m(),g("div",Xf,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[8]||(t[8]=(...x)=>i.closeAddressDialog&&i.closeAddressDialog(...x))}),c("div",Zf,[c("div",eh,[t[42]||(t[42]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Select Delivery Address",-1)),c("button",{onClick:t[9]||(t[9]=(...x)=>i.closeAddressDialog&&i.closeAddressDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[41]||(t[41]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",th,[n.deliveryAddresses.length===0?(m(),g("div",sh,"No delivery addresses found.")):(m(),g("div",rh,[(m(!0),g(ie,null,qe(n.deliveryAddresses,x=>(m(),g("div",{key:x.id,class:"border rounded-lg p-4 hover:border-blue-500 hover:shadow cursor-pointer transition w-full",onClick:we=>i.selectAddress(x.id)},[c("div",ih,[c("div",oh,[c("div",ah,_(x.name),1),x.organisation?(m(),g("div",lh,_(x.organisation),1)):P("",!0),x.contactPerson||x.contactPhone||x.contactEmail?(m(),g("div",ch,[x.contactPerson?(m(),g("p",uh,"Contact: "+_(x.contactPerson),1)):P("",!0),x.contactPhone?(m(),g("p",dh,"Phone: "+_(x.contactPhone),1)):P("",!0),x.contactEmail?(m(),g("p",fh,"Email: "+_(x.contactEmail),1)):P("",!0)])):P("",!0)]),c("div",hh,[c("div",ph,_(x.addressLine1),1),x.addressLine2?(m(),g("div",mh,_(x.addressLine2),1)):P("",!0),c("div",gh,_(x.suburb)+", "+_(x.city)+", "+_(x.province)+" "+_(x.postalCode),1),x.deliveryNotes?(m(),g("div",yh,_(x.deliveryNotes),1)):P("",!0)])])],8,nh))),128))]))]),c("div",_h,[c("button",{onClick:t[10]||(t[10]=(...x)=>i.closeAddressDialog&&i.closeAddressDialog(...x)),class:"btn btn-secondary"},"Close")])])])):P("",!0)]),c("div",bh,[n.loadingProducts?(m(),g("div",vh,t[43]||(t[43]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.quoteProducts.length===0?(m(),g("div",xh,t[44]||(t[44]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 21h18"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21v-4h6"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 7l3 3-3 3-3-3 3-3z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 6l3 3"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 10h3"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products added</h4><p class="text-gray-600">Add products to this quote to get started.</p>',3)]))):(m(),g("div",wh,[t[47]||(t[47]=Pe('<div class="flex justify-between items-center px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg"><div class="flex items-center space-x-4"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Product</h4></div></div><div class="flex items-center space-x-4"><div class="w-12 text-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide"></h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Quantity</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Total</h4></div></div></div>',1)),(m(!0),g(ie,null,qe(n.quoteProducts,x=>{var we,Ge,at,yt,se,Z,Q,Ye;return m(),g("div",{key:x.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[c("div",Sh,[c("div",Eh,[c("div",kh,[(at=(Ge=n.productDetails[(we=x.product)==null?void 0:we.id])==null?void 0:Ge.image)!=null&&at.url?(m(),g("img",{key:0,src:n.productDetails[x.product.id].image.url,alt:(yt=n.productDetails[x.product.id])==null?void 0:yt.name,class:"w-12 h-12 object-contain rounded-lg cursor-pointer bg-white",onMouseenter:Ae=>i.showImagePreview(x.product.id,Ae),onMousemove:t[11]||(t[11]=Ae=>i.updateImagePreviewPosition(Ae)),onMouseleave:t[12]||(t[12]=(...Ae)=>i.hideImagePreview&&i.hideImagePreview(...Ae))},null,40,Ph)):(m(),g("div",Ch,t[45]||(t[45]=[c("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),c("div",Ih,[c("h4",Ah,_(((Z=n.productDetails[(se=x.product)==null?void 0:se.id])==null?void 0:Z.name)||"Product"),1),c("p",Th,"SKU: "+_(((Ye=n.productDetails[(Q=x.product)==null?void 0:Q.id])==null?void 0:Ye.sku)||"N/A"),1)])]),c("div",Dh,[c("div",Rh,[n.productsReadOnly?P("",!0):(m(),g("button",{key:0,onClick:Ae=>i.removeProduct(x.id),class:"text-red-600 hover:text-red-800 p-2 rounded",title:"Remove product"},t[46]||(t[46]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})],-1)]),8,Lh))]),c("div",Nh,[n.productsReadOnly?(m(),g("p",Fh,_(x.quantity),1)):(m(),g("input",{key:0,type:"number",value:x.quantity,onChange:Ae=>i.updateProductQuantity(x.id,Ae.target.value),class:"input w-16 text-sm text-center",min:"0",step:"1"},null,40,Oh))]),c("div",qh,[c("p",Mh,_(i.formatCurrency(x.price)),1)]),c("div",Bh,[c("p",jh,_(i.formatCurrency(x.total)),1)])])])])}),128))])),i.isDraft?(m(),g("div",Uh,[c("button",{onClick:t[13]||(t[13]=x=>n.showAddProductModal=!0),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.productsReadOnly}]),disabled:n.productsReadOnly}," Add Product ",10,Hh),c("button",{onClick:t[14]||(t[14]=(...x)=>i.toggleProductsReadOnly&&i.toggleProductsReadOnly(...x)),class:ae(["btn btn-secondary",{"opacity-50 cursor-not-allowed":!n.productsReadOnly&&(n.quoteProducts.length===0||!n.selectedAddressId)}]),disabled:!n.productsReadOnly&&(n.quoteProducts.length===0||!n.selectedAddressId)},_(n.productsReadOnly?"Edit Products":"Continue with Shipping"),11,Vh)])):P("",!0)]),n.productsReadOnly?(m(),g("div",$h,[i.isDraft?(m(),g("div",Wh,[c("div",Qh,[c("button",{type:"button",onClick:t[15]||(t[15]=x=>i.selectBoxType("PlasticEquipment")),disabled:n.loading,class:ae(["flex items-center gap-3 px-3 py-2 rounded-md border transition",n.selectedBoxType==="PlasticEquipment"?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"])},t[48]||(t[48]=[Pe('<svg class="w-5 h-5 text-blue-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><rect x="4" y="4" width="16" height="12" rx="2" ry="2" stroke-width="2"></rect><path d="M4 12h16" stroke-width="2"></path></svg><div class="text-left"><div class="text-sm font-medium text-gray-900">Plastic Equipment</div><div class="text-xs text-gray-500">Plastic tote box</div></div>',2)]),10,Kh),c("button",{type:"button",onClick:t[16]||(t[16]=x=>i.selectBoxType("Cardboard")),disabled:n.loading,class:ae(["flex items-center gap-3 px-3 py-2 rounded-md border transition",n.selectedBoxType==="Cardboard"?"border-blue-600 bg-blue-50":"border-gray-300 hover:border-gray-400"])},t[49]||(t[49]=[Pe('<svg class="w-5 h-5 text-yellow-600" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path d="M3 7l9-4 9 4-9 4-9-4z" stroke-width="2"></path><path d="M3 7v10l9 4 9-4V7" stroke-width="2"></path></svg><div class="text-left"><div class="text-sm font-medium text-gray-900">Cardboard</div><div class="text-xs text-gray-500">Plain cardboard box</div></div>',2)]),10,zh)])])):P("",!0),n.loadingEquipmentBoxes?(m(),g("div",Gh,t[50]||(t[50]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.selectedBoxType?n.equipmentBoxes.length===0?(m(),g("div",Jh,t[52]||(t[52]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No equipment boxes needed</h4><p class="text-gray-600">The current products don&#39;t require any equipment boxes.</p>',3)]))):(m(),g("div",Xh,[t[54]||(t[54]=Pe('<div class="flex justify-between items-center px-4 py-2 bg-gray-50 border border-gray-200 rounded-lg"><div class="flex items-center space-x-4"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Packaging</h4></div></div><div class="flex items-center space-x-4"><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Quantity</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-20 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Total</h4></div></div></div>',1)),(m(!0),g(ie,null,qe(n.equipmentBoxes,x=>{var we,Ge,at,yt;return m(),g("div",{key:x.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[c("div",Zh,[c("div",ep,[c("div",tp,[(Ge=(we=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:we.image)!=null&&Ge.url?(m(),g("img",{key:0,src:n.equipmentBoxDetails[x.equipmentBoxId].image.url,alt:((at=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:at.name)||"Equipment Box",class:"w-12 h-12 object-contain rounded-lg cursor-pointer bg-white",onMouseenter:se=>i.showBoxImagePreview(x.equipmentBoxId,se),onMousemove:t[17]||(t[17]=se=>i.updateImagePreviewPosition(se)),onMouseleave:t[18]||(t[18]=(...se)=>i.hideImagePreview&&i.hideImagePreview(...se))},null,40,sp)):(m(),g("div",rp,t[53]||(t[53]=[c("svg",{class:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})],-1)])))]),c("div",np,[c("h4",ip,_(((yt=n.equipmentBoxDetails[x.equipmentBoxId])==null?void 0:yt.name)||`Equipment Box ${x.equipmentBoxId}`),1),c("p",op," Dimensions: "+_(i.formatDimensions(n.equipmentBoxDetails[x.equipmentBoxId])),1)])]),c("div",ap,[c("div",lp,[c("p",cp,_(x.quantity),1)]),c("div",up,[c("p",dp,_(i.formatCurrency(x.price)),1)]),c("div",fp,[c("p",hp,_(i.formatCurrency(x.total)),1)])])])])}),128))])):(m(),g("div",Yh,t[51]||(t[51]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No equipment boxes selected</h4><p class="text-gray-600">Select a box type to automatically calculate packaging requirements.</p>',3)])))])):P("",!0),n.productsReadOnly?(m(),g("div",pp,[c("div",mp,[c("div",null,[t[55]||(t[55]=c("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Total Shipment Weight",-1)),c("div",gp,_(i.formatWeight(i.totalShipmentWeight)),1),t[56]||(t[56]=c("p",{class:"text-sm text-gray-600 mt-1"}," Combined weight of all products and equipment boxes ",-1))]),c("div",null,[t[59]||(t[59]=c("label",{class:"block text-sm font-medium text-gray-700 mb-2"},"Weight Breakdown",-1)),c("div",yp,[c("div",_p,[t[57]||(t[57]=c("span",{class:"text-gray-600"},"Products",-1)),c("span",bp,_(i.formatWeight(i.productsWeight)),1)]),n.selectedBoxType&&n.equipmentBoxes.length>0?(m(),g("div",vp,[t[58]||(t[58]=c("span",{class:"text-gray-600"},"Equipment Boxes",-1)),c("span",xp,_(i.formatWeight(i.equipmentBoxesWeight)),1)])):P("",!0)])])]),c("div",wp,[n.deliveryRates?(m(),g("div",Sp,[c("div",Ep,[c("div",kp,[t[61]||(t[61]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-green-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M5 13l4 4L19 7"})])],-1)),c("div",Pp,[t[60]||(t[60]=c("h3",{class:"text-sm font-medium text-green-800"},"The Courier Guy delivery quote",-1)),c("div",Cp,[c("p",null,[c("strong",null,_(n.deliveryRates.selectedDeliveryService),1),he(" - ZAR "+_(i.formatCurrency(n.deliveryRates.selectedDeliveryFees)),1)]),c("p",Ip,[he(_(n.deliveryRates.totalParcels)+" parcels  Actual Weight "+_(((a=n.deliveryRates.totalWeightKg)==null?void 0:a.toFixed(2))||"0.00")+" kg ",1),n.deliveryRates.chargedWeight?(m(),g("span",Ap,"  Charged Weight "+_(n.deliveryRates.chargedWeight.toFixed(0))+" kg ",1)):P("",!0)])])]),c("div",Tp,[i.hasDeliveryInfo?(m(),g("button",{key:0,class:"text-xs text-green-700 hover:text-green-900 underline",onClick:t[19]||(t[19]=(...x)=>i.openDeliveryInfoDialog&&i.openDeliveryInfoDialog(...x))}," View details ")):P("",!0)])])])])):P("",!0)]),n.deliveryRatesError?(m(),g("div",Dp,[c("div",Rp,[c("div",Lp,[t[64]||(t[64]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-red-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),c("div",Np,[t[63]||(t[63]=c("h3",{class:"text-sm font-medium text-red-800"},"Failed to calculate delivery rates",-1)),c("div",Op,[c("p",null,_(n.deliveryRatesError),1)]),c("div",Fp,[c("button",{onClick:t[20]||(t[20]=(...x)=>i.calculateDeliveryRates&&i.calculateDeliveryRates(...x)),disabled:n.loadingDeliveryRates,class:"inline-flex items-center px-3 py-2 border border-transparent text-sm leading-4 font-medium rounded-md text-red-700 bg-red-100 hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 disabled:opacity-50 disabled:cursor-not-allowed"},[n.loadingDeliveryRates?(m(),g("svg",Mp,t[62]||(t[62]=[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)]))):P("",!0),he(" "+_(n.loadingDeliveryRates?"Retrying...":"Retry"),1)],8,qp)])])])])])):P("",!0)])):P("",!0),c("div",Bp,[c("div",jp,[c("div",Up,[c("div",Hp,[t[65]||(t[65]=c("span",{class:"text-gray-600"},"Products",-1)),c("span",Vp,_(i.formatCurrency(s.quote.totalProductPrice||0)),1)]),c("div",$p,[t[66]||(t[66]=c("span",{class:"text-gray-600"},"Equipment Boxes",-1)),c("span",Wp,_(s.quote.totalEquipmentBoxPrice&&s.quote.totalEquipmentBoxPrice>0?i.formatCurrency(s.quote.totalEquipmentBoxPrice):"0.00"),1)]),c("div",Qp,[t[67]||(t[67]=c("span",{class:"text-gray-600"},"Delivery",-1)),c("span",Kp,_(s.quote.totalDeliveryFees&&s.quote.totalDeliveryFees>0?i.formatCurrency(s.quote.totalDeliveryFees):"0.00"),1)]),c("div",zp,[c("div",Gp,[t[68]||(t[68]=c("span",{class:"text-sm text-gray-600"},"Total excl. VAT",-1)),c("span",Yp,"ZAR "+_(i.formatCurrency(i.grandTotal)),1)]),c("div",Jp,[t[69]||(t[69]=c("span",{class:"text-lg font-semibold"},"Total incl. VAT",-1)),c("span",Xp,"ZAR "+_(i.formatCurrency(i.grandTotalInclVat)),1)])])])])]),n.showDeliveryInfoDialog?(m(),g("div",Zp,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[21]||(t[21]=(...x)=>i.closeDeliveryInfoDialog&&i.closeDeliveryInfoDialog(...x))}),c("div",em,[c("div",tm,[t[71]||(t[71]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Delivery details",-1)),c("button",{onClick:t[22]||(t[22]=(...x)=>i.closeDeliveryInfoDialog&&i.closeDeliveryInfoDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[70]||(t[70]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",sm,[c("div",rm,[c("div",nm,[c("div",null,[c("div",im,_(s.quote.deliveryService||((d=(l=i.parsedDelivery.selectedRate)==null?void 0:l.service_level)==null?void 0:d.name)||"Selected service"),1),c("div",om,"Price: ZAR "+_(i.formatCurrency(s.quote.totalDeliveryFees||((u=i.parsedDelivery.selectedRate)==null?void 0:u.rate)||0)),1),c("div",am,[s.quote.chargedWeightInGrams||(h=i.parsedDelivery.selectedRate)!=null&&h.charged_weight?(m(),g("span",lm,"Charged: "+_(i.formatChargedKg)+" kg",1)):P("",!0),(b=i.parsedDelivery.selectedRate)!=null&&b.actual_weight?(m(),g("span",cm,"Actual: "+_(i.parsedDelivery.selectedRate.actual_weight.toFixed(2))+" kg",1)):P("",!0),(y=i.parsedDelivery.selectedRate)!=null&&y.volumetric_weight?(m(),g("span",um,"Volumetric: "+_(i.parsedDelivery.selectedRate.volumetric_weight.toFixed(2))+" kg",1)):P("",!0)]),(L=(D=i.parsedDelivery.selectedRate)==null?void 0:D.service_level)!=null&&L.delivery_date_from||(U=(V=i.parsedDelivery.selectedRate)==null?void 0:V.service_level)!=null&&U.delivery_date_to?(m(),g("div",dm,[t[72]||(t[72]=he(" Delivery window: ",-1)),(z=(W=i.parsedDelivery.selectedRate)==null?void 0:W.service_level)!=null&&z.delivery_date_from?(m(),g("span",fm,_(i.formatDeliveryDate(i.parsedDelivery.selectedRate.service_level.delivery_date_from)),1)):P("",!0),(ne=(q=i.parsedDelivery.selectedRate)==null?void 0:q.service_level)!=null&&ne.delivery_date_to?(m(),g("span",hm," - "+_(i.formatDeliveryDate(i.parsedDelivery.selectedRate.service_level.delivery_date_to)),1)):P("",!0)])):P("",!0)]),c("div",pm,[(He=i.parsedDelivery.selectedRate)!=null&&He.rate_excluding_vat?(m(),g("div",mm,"Excl. VAT: ZAR "+_(i.formatCurrency(i.parsedDelivery.selectedRate.rate_excluding_vat)),1)):P("",!0),(Ve=(Ie=i.parsedDelivery.selectedRate)==null?void 0:Ie.base_rate)!=null&&Ve.vat?(m(),g("div",gm,"VAT: ZAR "+_(i.formatCurrency(i.parsedDelivery.selectedRate.base_rate.vat)),1)):P("",!0),(ze=(At=i.parsedDelivery.selectedRate)==null?void 0:At.base_rate)!=null&&ze.vat_percentage?(m(),g("div",ym,"VAT %: "+_(i.parsedDelivery.selectedRate.base_rate.vat_percentage)+"%",1)):P("",!0)])])]),i.parsedDelivery.otherRates.length?(m(),g("div",_m,[t[74]||(t[74]=c("div",{class:"text-sm font-medium text-gray-900 mb-3"},"Available services",-1)),c("div",bm,[c("table",vm,[t[73]||(t[73]=c("thead",null,[c("tr",{class:"text-left text-gray-600"},[c("th",{class:"py-2 pr-4"},"Service"),c("th",{class:"py-2 pr-4"},"Price (ZAR)"),c("th",{class:"py-2 pr-4"},"Charged (kg)"),c("th",{class:"py-2 pr-4"},"Actual (kg)"),c("th",{class:"py-2 pr-4"},"Volumetric (kg)")])],-1)),c("tbody",null,[(m(!0),g(ie,null,qe(i.parsedDelivery.otherRates,x=>{var we;return m(),g("tr",{key:x._key,class:"border-t"},[c("td",xm,_(((we=x.service_level)==null?void 0:we.name)||"-"),1),c("td",wm,_(i.formatCurrency(x.rate||0)),1),c("td",Sm,_(x.charged_weight!=null?x.charged_weight.toFixed(0):"-"),1),c("td",Em,_(x.actual_weight!=null?x.actual_weight.toFixed(2):"-"),1),c("td",km,_(x.volumetric_weight!=null?x.volumetric_weight.toFixed(2):"-"),1)])}),128))])])])])):P("",!0),c("div",null,[c("button",{class:"text-xs text-gray-600 hover:text-gray-800 underline",onClick:t[23]||(t[23]=x=>n.showRawJson=!n.showRawJson)},_(n.showRawJson?"Hide raw JSON":"Show raw JSON"),1),n.showRawJson?(m(),g("div",Pm,[c("pre",Cm,_(i.formattedDeliveryInfo),1)])):P("",!0)])]),c("div",Im,[c("button",{onClick:t[24]||(t[24]=(...x)=>i.closeDeliveryInfoDialog&&i.closeDeliveryInfoDialog(...x)),class:"btn btn-secondary"},"Close")])])])):P("",!0),n.showNameDialog?(m(),g("div",Am,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[25]||(t[25]=(...x)=>i.closeNameDialog&&i.closeNameDialog(...x))}),c("div",Tm,[c("div",Dm,[t[76]||(t[76]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Edit quote name",-1)),c("button",{onClick:t[26]||(t[26]=(...x)=>i.closeNameDialog&&i.closeNameDialog(...x)),class:"text-gray-400 hover:text-gray-600"},t[75]||(t[75]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",Rm,[t[77]||(t[77]=c("label",{class:"block text-sm font-medium text-gray-700"},"Name",-1)),ue(c("input",{"onUpdate:modelValue":t[27]||(t[27]=x=>n.editName=x),type:"text",class:"input",placeholder:"e.g. Term 3, 2025"},null,512),[[de,n.editName]])]),c("div",Lm,[c("button",{onClick:t[28]||(t[28]=(...x)=>i.closeNameDialog&&i.closeNameDialog(...x)),class:"btn btn-secondary"},"Cancel"),c("button",{onClick:t[29]||(t[29]=(...x)=>i.saveName&&i.saveName(...x)),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.savingName||!n.editName.trim()}]),disabled:n.savingName||!n.editName.trim()},_(n.savingName?"Saving...":"Save"),11,Nm)])])])):P("",!0),n.imagePreview.show?(m(),g("div",{key:4,style:qs({position:"fixed",top:n.imagePreview.y+"px",left:n.imagePreview.x+"px",zIndex:1e3,pointerEvents:"none"}),class:"bg-white border border-gray-300 rounded-lg shadow-lg p-2"},[c("img",{src:n.imagePreview.src,alt:n.imagePreview.alt,class:"w-60 h-60 object-contain rounded bg-white"},null,8,Om)],4)):P("",!0),n.showAddProductModal?(m(),ks(o,{key:5,"quote-id":s.quote.id,"price-list-id":i.priceListId,"existing-quote-products":n.quoteProducts,onClose:t[30]||(t[30]=x=>n.showAddProductModal=!1),onProductAdded:i.handleProductAdded},null,8,["quote-id","price-list-id","existing-quote-products","onProductAdded"])):P("",!0)])}const qm=Ct(ff,[["render",Fm]]),Mm={name:"PriceListView",props:{priceList:{type:Object,required:!0}},data(){return{productPrices:[],productDetails:{},loading:!0,error:null,brands:[],selectedBrandId:"ALL",showChangeLog:!1,changeLog:[],imagePreview:{show:!1,src:"",alt:"",x:0,y:0}}},async mounted(){await Promise.all([this.loadProductPrices(),this.loadBrands()]),await this.loadProductDetails()},methods:{async openChangeLog(){try{const e=this.priceList.priceListId||this.priceList.id,{priceListService:t}=await Re(async()=>{const{priceListService:n}=await Promise.resolve().then(()=>ci);return{priceListService:n}},void 0),s=await t.listPriceListChangeLog(e),r=s.filter(n=>!n.createdByName&&(n.createdById||n.createdBy));if(r.length)try{const{userService:n}=await Re(async()=>{const{userService:a}=await import("./userService-Cg17cmK4.js");return{userService:a}},[]),i=[...new Set(r.map(a=>a.createdById||a.createdBy))],o=new Map;await Promise.all(i.map(async a=>{try{const l=await n.getUser(a);o.set(a,l)}catch(l){console.warn(`Failed to fetch user ${a}:`,l)}})),r.forEach(a=>{const l=a.createdById||a.createdBy,d=o.get(l);d&&(a.createdByName=[d.firstName,d.lastName].filter(Boolean).join(" ")||d.email||d.id)})}catch(n){console.warn("Failed to hydrate creator names",n)}this.changeLog=s,this.showChangeLog=!0}catch(e){alert("Failed to load change log: "+(e.message||"Unknown error"))}},closeChangeLog(){this.showChangeLog=!1},async loadBrands(){try{const e=await yr.listBrands();this.brands=e}catch(e){console.error("Failed to load brands",e),this.brands=[]}},async loadProductPrices(){try{this.loading=!0,this.error=null;const e=this.priceList.priceListId||this.priceList.id;this.productPrices=await yr.getProductPricesByPriceList(e),console.log("Product prices loaded:",this.productPrices)}catch(e){console.error("Failed to load product prices:",e),this.error=e.message||"Failed to load product prices"}finally{this.loading=!1}},async loadProductDetails(){var e;try{for(const t of this.productPrices)if(t.product){const s=t.product,r=s.id;this.productDetails[r]||((e=s.image)!=null&&e.url&&(s.image.url=await Cn.get(r,s.image.url)),this.productDetails[r]=s)}}catch(t){console.error("Failed to load product details:",t)}},formatDate(e){if(!e)return"";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`},formatDateTime(e){if(!e)return"";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear(),i=t.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit"});return`${s} ${r} ${n} ${i}`},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},showImagePreview(e,t){var r;const s=this.productDetails[e];if((r=s==null?void 0:s.image)!=null&&r.url){let l=t.clientX+10,d=t.clientY+10;l+250>window.innerWidth&&(l=t.clientX-250-10),d+250>window.innerHeight&&(d=t.clientY-250-10),this.imagePreview={show:!0,src:s.image.url,alt:s.name||"Product",x:l,y:d}}},updateImagePreviewPosition(e){if(this.imagePreview.show){let i=e.clientX+10,o=e.clientY+10;i+250>window.innerWidth&&(i=e.clientX-250-10),o+250>window.innerHeight&&(o=e.clientY-250-10),this.imagePreview.x=i,this.imagePreview.y=o}},hideImagePreview(){this.imagePreview.show=!1}},computed:{filteredProductPrices(){return this.selectedBrandId==="ALL"?this.productPrices:this.productPrices.filter(e=>{var n;const t=(n=e.product)==null?void 0:n.id,s=this.productDetails[t];return((s==null?void 0:s.brandId)||e.brandId||e.productBrandId)===this.selectedBrandId})}}},Bm={class:"bg-white rounded-lg shadow-sm border border-gray-200 p-6"},jm={class:"flex justify-between items-start mb-6"},Um={class:"text-xl font-semibold text-gray-900 mb-1"},Hm={class:"text-sm text-gray-600"},Vm={class:"text-sm text-gray-600"},$m={class:"flex items-center gap-2"},Wm={key:0,class:"flex justify-center items-center py-8"},Qm={key:1,class:"text-center py-8"},Km={class:"text-gray-600"},zm={key:2,class:"text-center py-8"},Gm={key:3},Ym={class:"mb-4 flex flex-wrap items-center gap-2"},Jm=["onClick"],Xm={class:"space-y-2"},Zm={class:"flex justify-between items-center"},eg={class:"flex items-center space-x-4"},tg={class:"relative w-12 h-12"},sg=["src","alt","onMouseenter"],rg={key:1,class:"w-12 h-12 bg-gray-200 rounded-lg flex items-center justify-center"},ng={class:"min-h-[2rem] flex flex-col justify-center"},ig={class:"font-medium text-gray-900"},og={class:"text-sm text-gray-600"},ag={class:"flex items-center space-x-8"},lg={class:"w-24 text-right"},cg={class:"text-sm font-medium text-gray-900"},ug={class:"w-24 text-right whitespace-nowrap"},dg={class:"text-sm font-bold text-gray-900"},fg=["src","alt"],hg={key:5,class:"fixed inset-0 z-50 flex items-center justify-center"},pg={class:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden"},mg={class:"flex items-center justify-between p-4 border-b border-gray-200"},gg={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},yg={key:0,class:"text-sm text-gray-600"},_g={key:1,class:"space-y-3"},bg={class:"flex justify-between text-sm"},vg={key:0,class:"font-medium text-gray-900"},xg={class:"text-gray-600"},wg={key:0,class:"text-sm text-gray-700 mt-1"},Sg={key:1,class:"text-xs text-gray-600 mt-1 whitespace-pre-wrap"},Eg={class:"p-4 border-t border-gray-200 flex justify-end"},kg={key:6,class:"fixed inset-0 z-50 flex items-center justify-center"},Pg={class:"relative bg-white rounded-lg shadow-xl w-full max-w-2xl mx-4 max-h-[90vh] overflow-hidden"},Cg={class:"flex items-center justify-between p-4 border-b border-gray-200"},Ig={class:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]"},Ag={key:0,class:"text-sm text-gray-600"},Tg={key:1,class:"space-y-3"},Dg={class:"flex justify-between text-sm"},Rg={class:"font-medium text-gray-900"},Lg={class:"text-gray-600"},Ng={key:0,class:"text-sm text-gray-700 mt-1"},Og={key:1,class:"text-xs text-gray-600 mt-1 whitespace-pre-wrap"},Fg={class:"p-4 border-t border-gray-200 flex justify-end"};function qg(e,t,s,r,n,i){return m(),g("div",Bm,[c("div",jm,[c("div",null,[c("h3",Um,_(s.priceList.name),1),c("p",Hm," Created: "+_(i.formatDate(s.priceList.createdAt)),1),c("p",Vm,_(n.productPrices.length)+" products ",1)]),c("div",$m,[c("button",{onClick:t[0]||(t[0]=(...o)=>i.openChangeLog&&i.openChangeLog(...o)),class:"btn btn-secondary text-sm",title:"View Change Log"}," Change Log "),c("button",{onClick:t[1]||(t[1]=o=>e.$emit("close")),class:"btn btn-secondary text-sm",title:"Close"},t[11]||(t[11]=[c("svg",{class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))])]),n.loading?(m(),g("div",Wm,t[12]||(t[12]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",Qm,[t[13]||(t[13]=c("div",{class:"text-red-500 mb-4"},[c("svg",{class:"w-12 h-12 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1)),t[14]||(t[14]=c("h4",{class:"text-lg font-medium text-gray-900 mb-2"},"Error loading products",-1)),c("p",Km,_(n.error),1)])):n.productPrices.length===0?(m(),g("div",zm,t[15]||(t[15]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"></path></svg></div><h4 class="text-lg font-medium text-gray-900 mb-2">No products found</h4><p class="text-gray-600">This price list doesn&#39;t contain any products.</p>',3)]))):(m(),g("div",Gm,[c("div",Ym,[c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.selectedBrandId==="ALL"?"bg-gray-800 text-white border-gray-800":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:t[2]||(t[2]=o=>n.selectedBrandId="ALL")}," All ",2),(m(!0),g(ie,null,qe(n.brands,o=>(m(),g("button",{key:o.id,class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.selectedBrandId===o.id?"bg-brand-navy text-white border-brand-navy":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:a=>n.selectedBrandId=o.id},_(o.name),11,Jm))),128))]),t[17]||(t[17]=Pe('<div class="flex justify-between items-center mb-4 px-4 py-2 bg-gray-50 rounded-lg"><div class="min-h-[2rem] flex flex-col justify-center"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Product</h4></div><div class="flex items-center space-x-8"><div class="w-24 text-right"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price</h4></div><div class="w-24 text-right whitespace-nowrap"><h4 class="text-xs font-medium text-gray-700 uppercase tracking-wide">Price (incl. VAT)</h4></div></div></div>',1)),c("div",Xm,[(m(!0),g(ie,null,qe(i.filteredProductPrices,o=>{var a,l,d,u,h,b,y,D;return m(),g("div",{key:o.id,class:"border border-gray-200 rounded-lg p-2 hover:bg-gray-50 transition-colors"},[c("div",Zm,[c("div",eg,[c("div",tg,[(d=(l=n.productDetails[(a=o.product)==null?void 0:a.id])==null?void 0:l.image)!=null&&d.url?(m(),g("img",{key:0,src:n.productDetails[o.product.id].image.url,alt:(u=n.productDetails[o.product.id])==null?void 0:u.name,class:"w-12 h-12 object-cover rounded-lg cursor-pointer",onMouseenter:L=>i.showImagePreview(o.product.id,L),onMousemove:t[3]||(t[3]=L=>i.updateImagePreviewPosition(L)),onMouseleave:t[4]||(t[4]=(...L)=>i.hideImagePreview&&i.hideImagePreview(...L))},null,40,sg)):(m(),g("div",rg,t[16]||(t[16]=[c("svg",{class:"w-6 h-6 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})],-1)])))]),c("div",ng,[c("h4",ig,_(((b=n.productDetails[(h=o.product)==null?void 0:h.id])==null?void 0:b.name)||o.productName),1),c("p",og,"SKU: "+_(((D=n.productDetails[(y=o.product)==null?void 0:y.id])==null?void 0:D.sku)||o.productSku),1)])]),c("div",ag,[c("div",lg,[c("p",cg,"ZAR "+_(i.formatCurrency(o.price)),1)]),c("div",ug,[c("p",dg,"ZAR "+_(i.formatCurrency(o.priceInclVat)),1)])])])])}),128))])])),n.imagePreview.show?(m(),g("div",{key:4,style:qs({position:"fixed",top:n.imagePreview.y+"px",left:n.imagePreview.x+"px",zIndex:1e3,pointerEvents:"none"}),class:"bg-white border border-gray-300 rounded-lg shadow-lg p-2"},[c("img",{src:n.imagePreview.src,alt:n.imagePreview.alt,class:"w-60 h-60 object-contain rounded bg-white"},null,8,fg)],4)):P("",!0),n.showChangeLog?(m(),g("div",hg,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[5]||(t[5]=(...o)=>i.closeChangeLog&&i.closeChangeLog(...o))}),c("div",pg,[c("div",mg,[t[19]||(t[19]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Price List Change Log",-1)),c("button",{onClick:t[6]||(t[6]=(...o)=>i.closeChangeLog&&i.closeChangeLog(...o)),class:"text-gray-400 hover:text-gray-600"},t[18]||(t[18]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",gg,[n.changeLog.length?(m(),g("ul",_g,[(m(!0),g(ie,null,qe(n.changeLog,o=>(m(),g("li",{key:o.id,class:"border rounded p-3"},[c("div",bg,[o.changeType||o.type?(m(),g("span",vg,_(o.changeType||o.type),1)):P("",!0),c("span",xg,_(i.formatDateTime(o.createdAt))+"  "+_(o.createdByName||""),1)]),o.description?(m(),g("div",wg,_(o.description),1)):o.details?(m(),g("div",Sg,_(JSON.stringify(o.details,null,2)),1)):P("",!0)]))),128))])):(m(),g("div",yg,"No changes recorded."))]),c("div",Eg,[c("button",{onClick:t[7]||(t[7]=(...o)=>i.closeChangeLog&&i.closeChangeLog(...o)),class:"btn btn-secondary"},"Close")])])])):P("",!0),n.showChangeLog?(m(),g("div",kg,[c("div",{class:"absolute inset-0 bg-black bg-opacity-50",onClick:t[8]||(t[8]=(...o)=>i.closeChangeLog&&i.closeChangeLog(...o))}),c("div",Pg,[c("div",Cg,[t[21]||(t[21]=c("h3",{class:"text-lg font-semibold text-gray-900"},"Price List Change Log",-1)),c("button",{onClick:t[9]||(t[9]=(...o)=>i.closeChangeLog&&i.closeChangeLog(...o)),class:"text-gray-400 hover:text-gray-600"},t[20]||(t[20]=[c("svg",{class:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})],-1)]))]),c("div",Ig,[n.changeLog.length?(m(),g("ul",Tg,[(m(!0),g(ie,null,qe(n.changeLog,o=>(m(),g("li",{key:o.id,class:"border rounded p-3"},[c("div",Dg,[c("span",Rg,_(o.changeType||o.type||"Change"),1),c("span",Lg,_(i.formatDate(o.createdAt)),1)]),o.description?(m(),g("div",Ng,_(o.description),1)):o.details?(m(),g("div",Og,_(JSON.stringify(o.details,null,2)),1)):P("",!0)]))),128))])):(m(),g("div",Ag,"No changes recorded."))]),c("div",Fg,[c("button",{onClick:t[10]||(t[10]=(...o)=>i.closeChangeLog&&i.closeChangeLog(...o)),class:"btn btn-secondary"},"Close")])])])):P("",!0)])}const Mg=Ct(Mm,[["render",qg]]),Bg={name:"PriceListManager",components:{QuoteDetail:qm,PriceListView:Mg},props:{customerId:{type:String,required:!0}},data(){return{priceLists:[],quotes:{},loading:!1,error:null,selectedQuote:null,selectedPriceList:null,lastHiddenTime:null,statusFilters:{},searchTerms:{}}},watch:{customerId:{immediate:!0,async handler(e,t){e&&e!==t&&(console.log("Customer ID changed, reloading data:",e),this.selectedQuote=null,this.selectedPriceList=null,this.loading=!0,this.error=null,this.priceLists=[],this.quotes={},await this.loadCustomerPriceLists())}}},async mounted(){this.selectedQuote=null,this.selectedPriceList=null,this.loading=!0,this.error=null,this.priceLists=[],this.quotes={};const e=setTimeout(()=>{this.loading&&(console.error("Loading timeout - forcing loading to false"),this.loading=!1,this.error="Loading timeout - please refresh the page")},1e4);try{console.log("PriceListManager mounted - loading fresh data for customer:",this.customerId),await this.loadCustomerPriceLists()}finally{clearTimeout(e)}document.addEventListener("visibilitychange",this.handleVisibilityChange)},beforeUnmount(){document.removeEventListener("visibilitychange",this.handleVisibilityChange)},methods:{async hydrateCreatorsForList(e){try{const s=(this.quotes[e]||[]).filter(o=>(o.createdById||o.createdBy)&&!o.createdByName);if(s.length===0)return;const{userService:r}=await Re(async()=>{const{userService:o}=await import("./userService-Cg17cmK4.js");return{userService:o}},[]),n=[...new Set(s.map(o=>o.createdById||o.createdBy))],i=new Map;await Promise.all(n.map(async o=>{try{const a=await r.getUser(o);i.set(o,a)}catch(a){console.warn(`Failed to fetch user ${o}:`,a)}})),s.forEach(o=>{const a=o.createdById||o.createdBy,l=i.get(a);l&&(o.createdByName=[l.firstName,l.lastName].filter(Boolean).join(" ")||l.email||l.id)}),i.size>0&&(this.quotes={...this.quotes})}catch(t){console.warn("Failed to hydrate creator names",t)}},getStatusCounts(e){const t=this.quotes[e]||[],s={Draft:0,Submitted:0,Approved:0};for(const r of t){const n=r.status||"Draft";n in s&&s[n]++}return{...s,all:t.length}},setStatusFilter(e,t){this.$set?this.$set(this.statusFilters,e,t):this.statusFilters={...this.statusFilters,[e]:t}},getFilteredQuotes(e){const t=this.quotes[e]||[],s=this.statusFilters[e]||"All",r=(this.searchTerms[e]||"").trim().toLowerCase();let n=s==="All"?t:t.filter(i=>(i.status||"Draft")===s);return r&&(n=n.filter(i=>{const o=(i.name||"").toLowerCase(),a=(i.number||"").toString().toLowerCase();return o.includes(r)||a.includes(r)})),n},setSearchTerm(e,t){this.$set?this.$set(this.searchTerms,e,t):this.searchTerms={...this.searchTerms,[e]:t}},handleVisibilityChange(){!document.hidden&&this.lastHiddenTime&&Date.now()-this.lastHiddenTime>3e4&&(console.log("User returned to tab after being away, refreshing data"),this.refreshData()),this.lastHiddenTime=document.hidden?Date.now():null},async refreshData(){console.log("Refreshing all data..."),this.loading=!0,this.error=null;try{await this.loadCustomerPriceLists()}catch(e){console.error("Error refreshing data:",e),this.error="Failed to refresh data"}finally{this.loading=!1}},async loadCustomerPriceLists(){this.loading=!0,this.error=null;try{console.log("Loading customer price lists for customer:",this.customerId);const e=await dl.getCustomerPriceLists(this.customerId);if(console.log("Customer price lists:",e),!e||e.length===0){console.log("No customer price lists found"),this.priceLists=[],this.loading=!1;return}this.priceLists=e.map(t=>{const s=t.priceList||{};return{...s,customerPriceListId:t.id,priceListId:s.id}}),console.log("Price lists loaded:",this.priceLists),await this.loadQuotesForPriceLists()}catch(e){console.error("Error loading customer price lists:",e),this.error=e.message||"Failed to load price lists",this.priceLists=[],this.quotes={}}finally{this.loading=!1}},async loadQuotesForPriceLists(){try{console.log("Loading quotes for price lists...");const{quoteService:e}=await Re(async()=>{const{quoteService:t}=await Promise.resolve().then(()=>ho);return{quoteService:t}},void 0);for(const t of this.priceLists){console.log("Loading quotes for price list:",t.customerPriceListId);const s=await e.getQuotesByCustomerPriceList(t.customerPriceListId);this.quotes[t.customerPriceListId]=s,console.log("Quotes loaded for price list:",t.customerPriceListId,s),this.hydrateCreatorsForList(t.customerPriceListId)}console.log("All quotes loaded:",this.quotes)}catch(e){console.error("Failed to load quotes:",e),this.error="Failed to load some quotes, but price lists are available"}},viewPriceList(e){this.selectedPriceList=e},async createQuoteFromPriceList(e){try{const{quoteService:t}=await Re(async()=>{const{quoteService:r}=await Promise.resolve().then(()=>ho);return{quoteService:r}},void 0),s=await t.createQuote(e.customerPriceListId);this.quotes[e.customerPriceListId]||(this.quotes[e.customerPriceListId]=[]),this.quotes[e.customerPriceListId].unshift(s),this.selectQuote(s)}catch(t){this.error=t.message||"Failed to create quote"}},selectQuote(e){this.selectedQuote=e},handleQuoteUpdated(e){const t=e.customerPriceListId;if(this.quotes[t]){const s=this.quotes[t].findIndex(r=>r.id===e.id);s!==-1&&(this.quotes[t][s]=e)}this.selectedQuote=e},handleQuoteDeleted(){const e=this.selectedQuote.customerPriceListId;this.quotes[e]&&(this.quotes[e]=this.quotes[e].filter(t=>t.id!==this.selectedQuote.id)),this.selectedQuote=null},formatDate(e){if(!e)return"";const t=new Date(e),s=String(t.getDate()).padStart(2,"0"),r=t.toLocaleString("en-GB",{month:"short"}),n=t.getFullYear();return`${s} ${r} ${n}`},formatCurrency(e){return e?parseFloat(e).toLocaleString("en-ZA",{minimumFractionDigits:2,maximumFractionDigits:2}):"0.00"},formatQuoteStatus(e){const t=e||"Draft";return t==="Approved"?"Approved":t==="Submitted"?"Submitted":"Draft"}}},jg={key:0,class:"flex justify-center items-center py-12"},Ug={key:1,class:"card"},Hg={class:"text-center"},Vg={class:"text-gray-600 mb-4"},$g={key:2},Wg={key:3},Qg={key:4},Kg={key:0,class:"card text-center py-12"},zg={key:1,class:"space-y-8"},Gg={class:"flex justify-between items-start mb-6"},Yg={class:"text-xl font-semibold text-gray-900 mb-1"},Jg={key:0,class:"text-sm text-gray-700 mb-1"},Xg={class:"text-sm text-gray-600"},Zg={class:"flex items-center gap-2"},ey=["onClick"],ty=["onClick"],sy={class:"border-t pt-4"},ry={class:"flex justify-between items-center mb-4"},ny={class:"text-sm text-gray-600"},iy={class:"flex flex-wrap items-center gap-2 mb-4"},oy=["onClick"],ay=["onClick"],ly=["onClick"],cy=["onClick"],uy={class:"ml-auto w-full md:w-64"},dy=["value","onInput"],fy={key:0,class:"text-center py-6"},hy={key:1,class:"space-y-3"},py=["onClick"],my={class:"flex justify-between items-start"},gy={class:"flex items-center gap-2 mb-1"},yy={class:"font-medium text-gray-900"},_y={key:0,class:"text-sm text-gray-600"},by={class:"text-sm text-gray-600"},vy={class:"text-sm text-gray-600"},xy={class:"text-right"},wy={class:"text-lg font-bold text-gray-900"},Sy={class:"text-sm text-gray-600"};function Ey(e,t,s,r,n,i){const o=Ot("QuoteDetail"),a=Ot("PriceListView");return m(),g("div",null,[n.loading?(m(),g("div",jg,t[3]||(t[3]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",Ug,[c("div",Hg,[t[4]||(t[4]=c("div",{class:"text-red-600 text-lg font-medium mb-2"},"Error",-1)),c("p",Vg,_(n.error),1),c("button",{onClick:t[0]||(t[0]=(...l)=>i.loadCustomerPriceLists&&i.loadCustomerPriceLists(...l)),class:"btn btn-primary"},"Try Again")])])):n.selectedQuote?(m(),g("div",$g,[Fe(o,{quote:n.selectedQuote,"customer-id":s.customerId,onBack:t[1]||(t[1]=l=>n.selectedQuote=null),onQuoteUpdated:i.handleQuoteUpdated,onQuoteDeleted:i.handleQuoteDeleted},null,8,["quote","customer-id","onQuoteUpdated","onQuoteDeleted"])])):n.selectedPriceList?(m(),g("div",Wg,[Fe(a,{"price-list":n.selectedPriceList,onClose:t[2]||(t[2]=l=>n.selectedPriceList=null)},null,8,["price-list"])])):(m(),g("div",Qg,[t[8]||(t[8]=c("div",{class:"mb-6"},null,-1)),n.priceLists.length===0?(m(),g("div",Kg,t[5]||(t[5]=[Pe('<div class="text-gray-500 mb-4"><svg class="w-12 h-12 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v10a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"></path></svg></div><h3 class="text-lg font-medium text-gray-900 mb-2">No price lists assigned</h3><p class="text-gray-600 mb-4">You don&#39;t have any price lists assigned to your account.</p>',3)]))):(m(),g("div",zg,[(m(!0),g(ie,null,qe(n.priceLists,l=>{var d;return m(),g("div",{key:l.id,class:"card"},[c("div",Gg,[c("div",null,[c("h3",Yg,_(l.name),1),l.description?(m(),g("p",Jg,_(l.description),1)):P("",!0),c("p",Xg," Created: "+_(i.formatDate(l.createdAt)),1)]),c("div",Zg,[c("button",{onClick:u=>i.viewPriceList(l),class:"btn btn-secondary text-sm",title:"View Price List"}," View Price List ",8,ey),c("button",{onClick:u=>i.createQuoteFromPriceList(l),class:"btn btn-primary text-sm",title:"Start New Quote"}," Start New Quote ",8,ty)])]),c("div",sy,[c("div",ry,[t[6]||(t[6]=c("h4",{class:"text-lg font-medium text-gray-900"},"Quotes",-1)),c("span",ny,_(((d=n.quotes[l.customerPriceListId])==null?void 0:d.length)||0)+" quotes",1)]),c("div",iy,[c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[l.customerPriceListId]==="All"?"bg-gray-800 text-white border-gray-800":"text-gray-700 border-gray-300 hover:border-gray-400"]),onClick:u=>i.setStatusFilter(l.customerPriceListId,"All")}," All ("+_(i.getStatusCounts(l.customerPriceListId).all)+") ",11,oy),c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[l.customerPriceListId]==="Draft"?"bg-yellow-500 text-white border-yellow-500":"text-yellow-800 border-yellow-300 hover:border-yellow-400"]),onClick:u=>i.setStatusFilter(l.customerPriceListId,"Draft")}," Draft ("+_(i.getStatusCounts(l.customerPriceListId).Draft)+") ",11,ay),c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[l.customerPriceListId]==="Submitted"?"bg-blue-600 text-white border-blue-600":"text-blue-800 border-blue-300 hover:border-blue-400"]),onClick:u=>i.setStatusFilter(l.customerPriceListId,"Submitted")}," Submitted ("+_(i.getStatusCounts(l.customerPriceListId).Submitted)+") ",11,ly),c("button",{class:ae(["px-3 py-1.5 rounded-full text-xs font-medium border",n.statusFilters[l.customerPriceListId]==="Approved"?"bg-green-600 text-white border-green-600":"text-green-800 border-green-300 hover:border-green-400"]),onClick:u=>i.setStatusFilter(l.customerPriceListId,"Approved")}," Approved ("+_(i.getStatusCounts(l.customerPriceListId).Approved)+") ",11,cy),c("div",uy,[c("input",{value:n.searchTerms[l.customerPriceListId]||"",onInput:u=>i.setSearchTerm(l.customerPriceListId,u.target.value),type:"text",class:"input h-9 text-sm",placeholder:"Search quotes..."},null,40,dy)])]),i.getFilteredQuotes(l.customerPriceListId).length?(m(),g("div",hy,[(m(!0),g(ie,null,qe(i.getFilteredQuotes(l.customerPriceListId),u=>(m(),g("div",{key:u.id,class:"border border-gray-200 rounded-lg p-4 hover:bg-gray-50 transition-colors cursor-pointer",onClick:h=>i.selectQuote(u)},[c("div",my,[c("div",null,[c("div",gy,[c("h5",yy,[he(_(u.name||"Quote #"+(u.number||""))+" ",1),u.number?(m(),g("span",_y," #"+_(u.number),1)):P("",!0)]),c("span",{class:ae(["inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium",u.status==="Approved"?"bg-green-100 text-green-800":u.status==="Submitted"?"bg-blue-100 text-blue-800":"bg-yellow-100 text-yellow-800"])},_(i.formatQuoteStatus(u.status)),3)]),c("p",by," Created By: "+_(u.createdByName||""),1),c("p",vy," Last updated: "+_(i.formatDate(u.updatedAt)),1)]),c("div",xy,[c("div",wy," ZAR "+_(i.formatCurrency(u.total)),1),c("div",Sy," incl. VAT: ZAR "+_(i.formatCurrency(u.totalInclVat)),1)])])],8,py))),128))])):(m(),g("div",fy,t[7]||(t[7]=[c("div",{class:"text-gray-500 mb-2"},[c("svg",{class:"w-8 h-8 mx-auto",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[c("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})])],-1),c("p",{class:"text-sm text-gray-600"},"No quotes yet",-1)])))])])}),128))]))]))])}const ky=Ct(Bg,[["render",Ey]]),Py="/createspace-logo.png",Cy={name:"LoginForm",data(){return{email:"",password:"",loading:!1,error:"",showForgotPassword:!1,resetEmail:"",resetLoading:!1,resetError:"",resetSuccess:""}},methods:{async handleLogin(){this.loading=!0,this.error="";try{const e=await Y.login(this.email,this.password);this.$emit("login-success",e)}catch(e){this.error=e.message||"Login failed. Please check your credentials."}finally{this.loading=!1}},async handleForgotPassword(){this.resetLoading=!0,this.resetError="",this.resetSuccess="";try{const e=`${window.location.origin}/reset-password`;await Y.requestPasswordReset(this.resetEmail,e),this.resetSuccess="Password reset link has been sent to your email.",this.resetEmail=""}catch(e){this.resetError=e.message||"Failed to send reset link. Please try again."}finally{this.resetLoading=!1}},async signInWithGoogle(){try{const t=(await Y.getAuthProviders()||[]).find(r=>(r.name||"").toLowerCase().includes("google")||(r.type||"").toLowerCase().includes("google")),s=(t==null?void 0:t.authorizeUrl)||`${Y.baseUrl.replace("/api/json","")}/auth/authorize/google`;window.location.href=s}catch(e){this.error=e.message||"Google sign-in not available"}}}},Iy={class:"min-h-screen flex items-center justify-center bg-gray-50 py-0 px-4 sm:px-6 lg:px-8 overflow-hidden"},Ay={class:"max-w-md w-full space-y-8"},Ty={class:"rounded-md shadow-sm -space-y-px"},Dy={key:0,class:"rounded-md bg-red-50 p-4"},Ry={class:"flex"},Ly={class:"ml-3"},Ny={class:"text-sm font-medium text-red-800"},Oy=["disabled"],Fy={key:0,class:"absolute left-0 inset-y-0 flex items-center pl-3"},qy={class:"text-center"},My={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},By={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},jy={class:"mt-3"},Uy={class:"mb-4"},Hy={key:0,class:"mb-4 text-sm text-red-600"},Vy={key:1,class:"mb-4 text-sm text-green-600"},$y={class:"flex justify-end space-x-3"},Wy=["disabled"];function Qy(e,t,s,r,n,i){return m(),g("div",Iy,[c("div",Ay,[t[13]||(t[13]=c("div",null,[c("div",{class:"flex justify-center mb-8"},[c("img",{src:Py,alt:"CREATESPACE",class:"h-10 w-auto"})]),c("h2",{class:"mt-4 text-center text-3xl font-extrabold text-gray-900"}," Sign in to your account "),c("p",{class:"mt-2 text-center text-sm text-gray-600"}," Enter your credentials to access the order management system ")],-1)),c("form",{class:"mt-8 space-y-6",onSubmit:t[3]||(t[3]=Pn((...o)=>i.handleLogin&&i.handleLogin(...o),["prevent"]))},[c("div",Ty,[c("div",null,[t[8]||(t[8]=c("label",{for:"email",class:"sr-only"},"Email address",-1)),ue(c("input",{id:"email","onUpdate:modelValue":t[0]||(t[0]=o=>n.email=o),name:"email",type:"email",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Email address"},null,512),[[de,n.email]])]),c("div",null,[t[9]||(t[9]=c("label",{for:"password",class:"sr-only"},"Password",-1)),ue(c("input",{id:"password","onUpdate:modelValue":t[1]||(t[1]=o=>n.password=o),name:"password",type:"password",required:"",class:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Password"},null,512),[[de,n.password]])])]),n.error?(m(),g("div",Dy,[c("div",Ry,[t[10]||(t[10]=c("div",{class:"flex-shrink-0"},[c("svg",{class:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor"},[c("path",{"fill-rule":"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule":"evenodd"})])],-1)),c("div",Ly,[c("h3",Ny,_(n.error),1)])])])):P("",!0),c("div",null,[c("button",{type:"submit",disabled:n.loading,class:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed"},[n.loading?(m(),g("span",Fy,t[11]||(t[11]=[c("svg",{class:"animate-spin h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},[c("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"}),c("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})],-1)]))):P("",!0),he(" "+_(n.loading?"Signing in...":"Sign in"),1)],8,Oy)]),c("div",qy,[c("button",{type:"button",onClick:t[2]||(t[2]=o=>n.showForgotPassword=!0),class:"text-sm text-indigo-600 hover:text-indigo-500"}," Forgot your password? ")])],32),t[14]||(t[14]=Pe('<div class="relative my-6"><div class="absolute inset-0 flex items-center"><div class="w-full border-t border-gray-200"></div></div><div class="relative flex justify-center text-sm"><span class="px-2 bg-gray-50 text-gray-500">Or</span></div></div>',1)),c("button",{onClick:t[4]||(t[4]=(...o)=>i.signInWithGoogle&&i.signInWithGoogle(...o)),type:"button",class:"w-full inline-flex items-center justify-center gap-2 border border-gray-300 rounded-md px-4 py-2 hover:bg-gray-100"},t[12]||(t[12]=[Pe('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" class="w-5 h-5"><path fill="#FFC107" d="M43.611,20.083H42V20H24v8h11.303c-1.649,4.657-6.08,8-11.303,8c-6.627,0-12-5.373-12-12    s5.373-12,12-12c3.059,0,5.842,1.153,7.961,3.039l5.657-5.657C34.046,6.053,29.268,4,24,4C12.955,4,4,12.955,4,24    s8.955,20,20,20s20-8.955,20-20C44,22.659,43.862,21.35,43.611,20.083z"></path><path fill="#FF3D00" d="M6.306,14.691l6.571,4.819C14.655,16.108,18.961,13,24,13c3.059,0,5.842,1.153,7.961,3.039l5.657-5.657    C34.046,6.053,29.268,4,24,4C16.318,4,9.656,8.337,6.306,14.691z"></path><path fill="#4CAF50" d="M24,44c4.983,0,9.514-1.917,12.961-5.039l-5.981-5.064C29.047,35.091,26.715,36,24,36    c-5.202,0-9.619-3.317-11.277-7.951l-6.534,5.036C9.582,39.556,16.227,44,24,44z"></path><path fill="#1976D2" d="M43.611,20.083H42V20H24v8h11.303c-0.792,2.237-2.231,4.166-4.103,5.597c0,0,0,0,0,0l6.581,5.561    c-0.465,0.427,7.219-5.289,7.219-15.238C44,22.659,43.862,21.35,43.611,20.083z"></path></svg><span>Continue with Google</span>',2)]))]),n.showForgotPassword?(m(),g("div",My,[c("div",By,[c("div",jy,[t[16]||(t[16]=c("h3",{class:"text-lg font-medium text-gray-900 mb-4"},"Reset Password",-1)),c("form",{onSubmit:t[7]||(t[7]=Pn((...o)=>i.handleForgotPassword&&i.handleForgotPassword(...o),["prevent"]))},[c("div",Uy,[t[15]||(t[15]=c("label",{for:"reset-email",class:"block text-sm font-medium text-gray-700 mb-2"}," Email address ",-1)),ue(c("input",{id:"reset-email","onUpdate:modelValue":t[5]||(t[5]=o=>n.resetEmail=o),type:"email",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your email"},null,512),[[de,n.resetEmail]])]),n.resetError?(m(),g("div",Hy,_(n.resetError),1)):P("",!0),n.resetSuccess?(m(),g("div",Vy,_(n.resetSuccess),1)):P("",!0),c("div",$y,[c("button",{type:"button",onClick:t[6]||(t[6]=o=>n.showForgotPassword=!1),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Cancel "),c("button",{type:"submit",disabled:n.resetLoading,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50"},_(n.resetLoading?"Sending...":"Send Reset Link"),9,Wy)])],32)])])])):P("",!0)])}const Ky=Ct(Cy,[["render",Qy]]),zy={name:"UserProfileDialog",props:{show:{type:Boolean,default:!1}},data(){return{firstName:"",lastName:"",loading:!1,error:""}},computed:{isValid(){return this.firstName.trim()&&this.lastName.trim()}},methods:{async handleSubmit(){if(!this.isValid){this.error="Please enter both first and last name.";return}this.loading=!0,this.error="";try{this.$emit("profile-saved",{firstName:this.firstName.trim(),lastName:this.lastName.trim()})}catch(e){this.error=e.message||"Failed to save profile. Please try again."}finally{this.loading=!1}},handleCancel(){this.$emit("cancel")}}},Gy={key:0,class:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50"},Yy={class:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white"},Jy={class:"mt-3"},Xy={class:"space-y-4"},Zy={key:0,class:"text-sm text-red-600"},e0={class:"flex justify-end space-x-3 mt-6"},t0=["disabled"];function s0(e,t,s,r,n,i){return s.show?(m(),g("div",Gy,[c("div",Yy,[c("div",Jy,[t[6]||(t[6]=Pe('<div class="flex items-center justify-center w-12 h-12 mx-auto bg-green-100 rounded-full"><svg class="w-6 h-6 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg></div><h3 class="text-lg font-medium text-gray-900 text-center mt-4 mb-4"> Complete Your Profile </h3><p class="text-sm text-gray-600 text-center mb-6"> Please provide your first and last name to complete your account setup. </p>',3)),c("form",{onSubmit:t[3]||(t[3]=Pn((...o)=>i.handleSubmit&&i.handleSubmit(...o),["prevent"]))},[c("div",Xy,[c("div",null,[t[4]||(t[4]=c("label",{for:"firstName",class:"block text-sm font-medium text-gray-700 mb-1"}," First Name * ",-1)),ue(c("input",{id:"firstName","onUpdate:modelValue":t[0]||(t[0]=o=>n.firstName=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your first name"},null,512),[[de,n.firstName]])]),c("div",null,[t[5]||(t[5]=c("label",{for:"lastName",class:"block text-sm font-medium text-gray-700 mb-1"}," Last Name * ",-1)),ue(c("input",{id:"lastName","onUpdate:modelValue":t[1]||(t[1]=o=>n.lastName=o),type:"text",required:"",class:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your last name"},null,512),[[de,n.lastName]])]),n.error?(m(),g("div",Zy,_(n.error),1)):P("",!0)]),c("div",e0,[c("button",{type:"button",onClick:t[2]||(t[2]=(...o)=>i.handleCancel&&i.handleCancel(...o)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Cancel "),c("button",{type:"submit",disabled:n.loading||!i.isValid,class:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-md hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed"},_(n.loading?"Saving...":"Save Profile"),9,t0)])],32)])])])):P("",!0)}const r0=Ct(zy,[["render",s0]]);class n0{constructor(){this.baseUrl=Vt}async makeRequest(t,s=null){const r=`${this.baseUrl}${t}`,n={"Content-Type":"application/json"},i=Y.getToken();i&&(n.Authorization=`Bearer ${i}`);const o={method:s?"POST":"GET",headers:n};s&&(o.body=JSON.stringify(s));const a=await fetch(r,o);if(!a.ok){let l=`HTTP error! status: ${a.status}`;try{const d=await a.json();d!=null&&d.message&&(l=d.message)}catch{}throw typeof l=="string"&&l.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(l)}return a.json()}async listDeliveryAddresses(t){return this.makeRequest("/listDeliveryAddresses",{where:{customer:{id:{equals:t}}},limit:500})}async getDeliveryAddress(t){return this.makeRequest("/getDeliveryAddress",{id:t})}async createDeliveryAddress(t,s){const r={customer:{id:s},name:t.name,addressLine1:t.addressLine1,suburb:t.suburb,city:t.city,province:t.province,postalCode:t.postalCode};return t.organisation&&(r.organisation=t.organisation),t.contactPerson&&(r.contactPerson=t.contactPerson),t.contactPhone&&(r.contactPhone=t.contactPhone),t.contactEmail&&(r.contactEmail=t.contactEmail),t.addressLine2&&(r.addressLine2=t.addressLine2),t.deliveryNotes&&(r.deliveryNotes=t.deliveryNotes),this.makeRequest("/createDeliveryAddress",r)}async updateDeliveryAddress(t,s){const r={};return typeof s.organisation=="string"&&(r.organisation=s.organisation),typeof s.contactPerson=="string"&&(r.contactPerson=s.contactPerson),typeof s.contactPhone=="string"&&(r.contactPhone=s.contactPhone),typeof s.contactEmail=="string"&&(r.contactEmail=s.contactEmail),typeof s.name=="string"&&(r.name=s.name),typeof s.addressLine1=="string"&&(r.addressLine1=s.addressLine1),typeof s.addressLine2=="string"&&(r.addressLine2=s.addressLine2),typeof s.suburb=="string"&&(r.suburb=s.suburb),typeof s.deliveryNotes=="string"&&(r.deliveryNotes=s.deliveryNotes),this.makeRequest("/updateDeliveryAddress",{where:{id:t},values:r})}async deactivateDeliveryAddress(t){return this.makeRequest("/deactivateDeliveryAddress",{where:{id:t}})}}const gs=new n0,i0=Object.freeze(Object.defineProperty({__proto__:null,deliveryAddressService:gs},Symbol.toStringTag,{value:"Module"})),o0={name:"DeliveryAddresses",emits:["close"],props:{customerId:{type:String,required:!0}},data(){return{loading:!1,saving:!1,submitAttempted:!1,error:null,addresses:[],editingAddress:null,deactivatingId:null,isFormOpen:!1,form:{name:"",organisation:"",contactPerson:"",contactPhone:"",contactEmail:"",addressLine1:"",addressLine2:"",deliveryNotes:"",suburb:"",city:"",province:"",postalCode:""}}},computed:{isFormValid(){return[this.form.name,this.form.addressLine1,this.form.suburb,this.editingAddress?"ok":this.form.city,this.editingAddress?"ok":this.form.province,this.editingAddress?"ok":this.form.postalCode].every(t=>typeof t=="string"&&t.trim().length>0)}},async mounted(){await this.loadAddresses()},methods:{async loadAddresses(){try{this.loading=!0,this.error=null;const e=await gs.listDeliveryAddresses(this.customerId);this.addresses=Array.isArray(e)?e:e.results||[]}catch(e){this.error=e.message||"Failed to load delivery addresses"}finally{this.loading=!1}},resetForm(){this.editingAddress=null,this.form={name:"",organisation:"",contactPerson:"",contactPhone:"",contactEmail:"",addressLine1:"",addressLine2:"",deliveryNotes:"",suburb:"",city:"",province:"",postalCode:""}},openCreateForm(){this.resetForm(),this.isFormOpen=!0,this.submitAttempted=!1},cancelForm(){this.isFormOpen=!1,this.editingAddress=null,this.submitAttempted=!1},startEdit(e){this.editingAddress=e,this.form={name:e.name||"",organisation:e.organisation||"",contactPerson:e.contactPerson||"",contactPhone:e.contactPhone||"",contactEmail:e.contactEmail||"",addressLine1:e.addressLine1||"",addressLine2:e.addressLine2||"",deliveryNotes:e.deliveryNotes||"",suburb:e.suburb||"",city:e.city||"",province:e.province||"",postalCode:e.postalCode||""},window.scrollTo({top:0,behavior:"smooth"}),this.isFormOpen=!0},async saveAddress(){try{if(this.submitAttempted=!0,!this.isFormValid)return;if(this.saving=!0,this.error=null,this.editingAddress){const{name:e,organisation:t,contactPerson:s,contactPhone:r,contactEmail:n,addressLine1:i,addressLine2:o,suburb:a,deliveryNotes:l}=this.form;await gs.updateDeliveryAddress(this.editingAddress.id,{name:e,organisation:t,contactPerson:s,contactPhone:r,contactEmail:n,addressLine1:i,addressLine2:o,suburb:a,deliveryNotes:l})}else await gs.createDeliveryAddress({...this.form},this.customerId);await this.loadAddresses(),this.resetForm(),this.submitAttempted=!1,this.isFormOpen=!1}catch(e){this.error=e.message||"Failed to save address"}finally{this.saving=!1}},async deactivate(e){if(confirm("Deactivate this address?"))try{this.deactivatingId=e.id,await gs.deactivateDeliveryAddress(e.id),await this.loadAddresses()}catch(t){this.error=t.message||"Failed to deactivate address"}finally{this.deactivatingId=null}}}},a0={class:"card"},l0={class:"flex items-start justify-between mb-6"},c0={class:"mb-6"},u0={key:1,class:"border border-gray-200 rounded-lg p-4 bg-gray-50"},d0={class:"flex items-start justify-between mb-3"},f0={class:"text-lg font-medium text-gray-900"},h0={class:"grid grid-cols-1 md:grid-cols-2 gap-4"},p0={key:0,class:"mt-1 text-xs text-red-600"},m0={class:"md:col-span-2"},g0={class:"md:col-span-2"},y0={class:"md:col-span-2"},_0={key:0,class:"mt-1 text-xs text-red-600"},b0={class:"md:col-span-2"},v0={key:0,class:"mt-1 text-xs text-red-600"},x0={class:"block text-sm font-medium text-gray-700 mb-1"},w0={key:0,class:"text-red-600"},S0=["disabled"],E0={key:0,class:"mt-1 text-xs text-red-600"},k0={class:"block text-sm font-medium text-gray-700 mb-1"},P0={key:0,class:"text-red-600"},C0=["disabled"],I0={key:0,class:"mt-1 text-xs text-red-600"},A0={class:"block text-sm font-medium text-gray-700 mb-1"},T0={key:0,class:"text-red-600"},D0=["disabled"],R0={key:0,class:"mt-1 text-xs text-red-600"},L0={class:"md:col-span-2"},N0={class:"mt-4 flex items-center gap-3"},O0=["disabled"],F0={class:"flex items-center justify-between mb-3"},q0={class:"text-sm text-gray-600"},M0={key:0,class:"flex justify-center items-center py-8"},B0={key:1,class:"bg-red-50 border border-red-200 text-red-800 rounded p-3"},j0={key:2,class:"text-center text-gray-600 py-10"},U0={key:3,class:"space-y-3"},H0={class:"flex items-start justify-between mb-3"},V0={class:"flex items-center gap-2"},$0={class:"text-base font-semibold text-gray-900"},W0={key:0,class:"text-xs px-2 py-0.5 rounded-full bg-gray-200 text-gray-700"},Q0={class:"flex items-center gap-2"},K0=["onClick"],z0=["onClick","disabled"],G0={class:"md:grid md:grid-cols-2 md:gap-6"},Y0={class:"space-y-1"},J0={key:0,class:"text-sm text-gray-700"},X0={key:1,class:"space-y-0.5"},Z0={key:0,class:"text-sm text-gray-700"},e_={key:1,class:"text-sm text-gray-700"},t_={key:2,class:"text-sm text-gray-700"},s_={class:"space-y-1 mt-3 md:mt-6"},r_={class:"text-sm text-gray-700"},n_={key:0,class:"text-sm text-gray-700"},i_={class:"text-sm text-gray-700"},o_={key:1,class:"text-sm text-gray-700"};function a_(e,t,s,r,n,i){return m(),g("div",a0,[c("div",l0,[t[17]||(t[17]=c("div",null,[c("h2",{class:"text-2xl font-semibold text-gray-900"},"Delivery Addresses"),c("p",{class:"text-gray-600"},"Manage your saved delivery addresses")],-1)),c("button",{onClick:t[0]||(t[0]=o=>e.$emit("close")),class:"btn btn-secondary",title:"Close"}," Close ")]),c("div",c0,[n.isFormOpen?(m(),g("div",u0,[c("div",d0,[c("h3",f0,_(n.editingAddress?"Edit Address":"Add New Address"),1),c("button",{onClick:t[2]||(t[2]=(...o)=>i.cancelForm&&i.cancelForm(...o)),class:"btn btn-secondary btn-sm"},"Cancel")]),t[30]||(t[30]=c("p",{class:"text-xs text-gray-600 mb-3"},[he("Fields marked with "),c("span",{class:"text-red-600"},"*"),he(" are required.")],-1)),c("div",h0,[c("div",null,[t[18]||(t[18]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Name "),c("span",{class:"text-red-600"},"*")],-1)),ue(c("input",{"onUpdate:modelValue":t[3]||(t[3]=o=>n.form.name=o),type:"text",class:"input w-full",placeholder:"e.g., Warehouse, Office",required:""},null,512),[[de,n.form.name]]),n.submitAttempted&&!n.form.name?(m(),g("p",p0,"Name is required")):P("",!0)]),c("div",m0,[t[19]||(t[19]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Organisation",-1)),ue(c("input",{"onUpdate:modelValue":t[4]||(t[4]=o=>n.form.organisation=o),type:"text",class:"input w-full",placeholder:"e.g., Acme Ltd"},null,512),[[de,n.form.organisation]])]),c("div",null,[t[20]||(t[20]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Person",-1)),ue(c("input",{"onUpdate:modelValue":t[5]||(t[5]=o=>n.form.contactPerson=o),type:"text",class:"input w-full",placeholder:"e.g., Jane Doe"},null,512),[[de,n.form.contactPerson]])]),c("div",null,[t[21]||(t[21]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Phone",-1)),ue(c("input",{"onUpdate:modelValue":t[6]||(t[6]=o=>n.form.contactPhone=o),type:"tel",class:"input w-full",placeholder:"e.g., 082 123 4567"},null,512),[[de,n.form.contactPhone]])]),c("div",g0,[t[22]||(t[22]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Contact Email",-1)),ue(c("input",{"onUpdate:modelValue":t[7]||(t[7]=o=>n.form.contactEmail=o),type:"email",class:"input w-full",placeholder:"e.g., jane@example.com"},null,512),[[de,n.form.contactEmail]])]),c("div",y0,[t[23]||(t[23]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Address Line 1 "),c("span",{class:"text-red-600"},"*")],-1)),ue(c("input",{"onUpdate:modelValue":t[8]||(t[8]=o=>n.form.addressLine1=o),type:"text",class:"input w-full",required:""},null,512),[[de,n.form.addressLine1]]),n.submitAttempted&&!n.form.addressLine1?(m(),g("p",_0,"Address Line 1 is required")):P("",!0)]),c("div",b0,[t[24]||(t[24]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Address Line 2",-1)),ue(c("input",{"onUpdate:modelValue":t[9]||(t[9]=o=>n.form.addressLine2=o),type:"text",class:"input w-full"},null,512),[[de,n.form.addressLine2]])]),c("div",null,[t[25]||(t[25]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},[he("Suburb "),c("span",{class:"text-red-600"},"*")],-1)),ue(c("input",{"onUpdate:modelValue":t[10]||(t[10]=o=>n.form.suburb=o),type:"text",class:"input w-full",required:""},null,512),[[de,n.form.suburb]]),n.submitAttempted&&!n.form.suburb?(m(),g("p",v0,"Suburb is required")):P("",!0)]),c("div",null,[c("label",x0,[t[26]||(t[26]=he("City ",-1)),n.editingAddress?P("",!0):(m(),g("span",w0,"*"))]),ue(c("input",{"onUpdate:modelValue":t[11]||(t[11]=o=>n.form.city=o),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,S0),[[de,n.form.city]]),n.submitAttempted&&!n.form.city?(m(),g("p",E0,"City is required")):P("",!0)]),c("div",null,[c("label",k0,[t[27]||(t[27]=he("Province ",-1)),n.editingAddress?P("",!0):(m(),g("span",P0,"*"))]),ue(c("input",{"onUpdate:modelValue":t[12]||(t[12]=o=>n.form.province=o),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,C0),[[de,n.form.province]]),n.submitAttempted&&!n.form.province?(m(),g("p",I0,"Province is required")):P("",!0)]),c("div",null,[c("label",A0,[t[28]||(t[28]=he("Postal Code ",-1)),n.editingAddress?P("",!0):(m(),g("span",T0,"*"))]),ue(c("input",{"onUpdate:modelValue":t[13]||(t[13]=o=>n.form.postalCode=o),type:"text",class:"input w-full",disabled:!!n.editingAddress},null,8,D0),[[de,n.form.postalCode]]),n.submitAttempted&&!n.form.postalCode?(m(),g("p",R0,"Postal Code is required")):P("",!0)]),c("div",L0,[t[29]||(t[29]=c("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Delivery Notes",-1)),ue(c("input",{"onUpdate:modelValue":t[14]||(t[14]=o=>n.form.deliveryNotes=o),type:"text",class:"input w-full"},null,512),[[de,n.form.deliveryNotes]])])]),c("div",N0,[c("button",{onClick:t[15]||(t[15]=(...o)=>i.saveAddress&&i.saveAddress(...o)),class:ae(["btn btn-primary",{"opacity-50 cursor-not-allowed":n.saving||!i.isFormValid}]),disabled:n.saving||!i.isFormValid},_(n.saving?n.editingAddress?"Saving...":"Creating...":n.editingAddress?"Save Changes":"Create Address"),11,O0),c("button",{onClick:t[16]||(t[16]=(...o)=>i.cancelForm&&i.cancelForm(...o)),class:"btn btn-secondary"},"Cancel")])])):(m(),g("button",{key:0,onClick:t[1]||(t[1]=(...o)=>i.openCreateForm&&i.openCreateForm(...o)),class:"btn btn-primary"}," Add New Address "))]),c("div",null,[c("div",F0,[t[31]||(t[31]=c("h3",{class:"text-lg font-medium text-gray-900"},"Saved Addresses",-1)),c("span",q0,_(n.addresses.length)+" total",1)]),n.loading?(m(),g("div",M0,t[32]||(t[32]=[c("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"},null,-1)]))):n.error?(m(),g("div",B0,_(n.error),1)):n.addresses.length===0?(m(),g("div",j0,"No active addresses.")):(m(),g("div",U0,[(m(!0),g(ie,null,qe(n.addresses,o=>(m(),g("div",{key:o.id,class:"border border-gray-200 rounded-lg p-4"},[c("div",H0,[c("div",V0,[c("h4",$0,_(o.name||"Address"),1),o.isActive===!1?(m(),g("span",W0,"Inactive")):P("",!0)]),c("div",Q0,[c("button",{onClick:a=>i.startEdit(o),class:"btn btn-secondary btn-sm"},"Edit",8,K0),c("button",{onClick:a=>i.deactivate(o),class:"btn btn-danger btn-sm",disabled:n.deactivatingId===o.id},_(n.deactivatingId===o.id?"Deactivating...":"Deactivate"),9,z0)])]),c("div",G0,[c("div",Y0,[o.organisation?(m(),g("p",J0,_(o.organisation),1)):P("",!0),o.contactPerson||o.contactPhone||o.contactEmail?(m(),g("div",X0,[o.contactPerson?(m(),g("p",Z0,"Contact: "+_(o.contactPerson),1)):P("",!0),o.contactPhone?(m(),g("p",e_,"Phone: "+_(o.contactPhone),1)):P("",!0),o.contactEmail?(m(),g("p",t_,"Email: "+_(o.contactEmail),1)):P("",!0)])):P("",!0)]),c("div",s_,[c("p",r_,_(o.addressLine1),1),o.addressLine2?(m(),g("p",n_,_(o.addressLine2),1)):P("",!0),c("p",i_,_(o.suburb)+", "+_(o.city)+", "+_(o.province)+" "+_(o.postalCode),1),o.deliveryNotes?(m(),g("p",o_,_(o.deliveryNotes),1)):P("",!0)])])]))),128))]))])])}const l_=Ct(o0,[["render",a_]]);class c_{async makeRequest(t,s=null){const r={"Content-Type":"application/json"},n=Y.getToken();n&&(r.Authorization=`Bearer ${n}`);const i=await fetch(`${Vt}${t}`,{method:"POST",headers:r,body:s?JSON.stringify(s):void 0});if(!i.ok){const a=(await i.json().catch(()=>({}))).message||`HTTP error! status: ${i.status}`;throw typeof a=="string"&&a.toLowerCase().includes("token has expired")&&(Y.logout(),window.location.reload()),new Error(a)}return i.json()}async getCustomer(t){return await this.makeRequest("/getCustomer",{id:t})}}const u_=new c_,d_={name:"App",components:{PriceListManager:ky,LoginForm:Ky,UserProfileDialog:r0,DeliveryAddresses:l_},data(){return{isAuthenticated:!1,currentUser:null,showProfileDialog:!1,loginData:null,customerId:null,showAddresses:!1,logoOk:!0,logoSrc:"/createspace-logo.png",customerName:""}},computed:{hasCustomerId(){return!!this.customerId},welcomeText(){var t,s;const e=((t=this.currentUser)==null?void 0:t.firstName)||((s=this.currentUser)==null?void 0:s.id)||"User";return this.customerName?`${e} (${this.customerName})`:e}},async mounted(){try{const t=new URLSearchParams(window.location.search).get("code");if(t&&!Y.isAuthenticated()){await Y.exchangeAuthorizationCode(t);const s=new URL(window.location.href);s.searchParams.delete("code"),window.history.replaceState({},"",s.toString())}}catch(e){console.error("SSO exchange failed:",e)}if(this.isAuthenticated=Y.isAuthenticated(),this.isAuthenticated)try{this.currentUser=await Y.getCurrentUser(),this.customerId=Y.getCustomerId(this.currentUser),await this.loadCustomerName(),console.log("User data refreshed on page load:",this.currentUser),console.log("Customer ID refreshed on page load:",this.customerId)}catch(e){console.error("Failed to refresh user data on page load:",e),this.currentUser=await Y.getCurrentUserCached(),this.customerId=Y.getCustomerId(this.currentUser),await this.loadCustomerName()}},methods:{async handleLoginSuccess(e){console.log("Login successful:",e),this.isAuthenticated=!0,this.loginData=e,e.identity_created?(console.log("New user detected, showing profile dialog"),this.showProfileDialog=!0):(console.log("Existing user, retrieving profile"),this.currentUser=await Y.getCurrentUser(),this.customerId=Y.getCustomerId(this.currentUser),await this.loadCustomerName())},async handleProfileSaved(e){console.log("Profile data received:",e);try{this.currentUser=await Y.createUserWithProfile(e.firstName,e.lastName),console.log("User created with profile:",this.currentUser),this.customerId=Y.getCustomerId(this.currentUser),await this.loadCustomerName(),this.showProfileDialog=!1}catch(t){console.error("Failed to save profile:",t)}},handleProfileCancel(){this.handleLogout()},handleLogout(){Y.logout(),this.isAuthenticated=!1,this.currentUser=null,this.showProfileDialog=!1,this.loginData=null,this.customerId=null,this.customerName=""},async loadCustomerName(){try{if(!this.customerId)return;const e=await u_.getCustomer(this.customerId);this.customerName=(e==null?void 0:e.name)||(e==null?void 0:e.companyName)||""}catch(e){console.warn("Failed to load customer name",e),this.customerName=""}}}},f_={id:"app",class:"min-h-screen bg-gray-50"},h_={key:0,class:"min-h-screen"},p_={class:"max-w-6xl mx-auto px-4 py-0"},m_={key:2,class:"max-w-6xl mx-auto px-4 py-8"},g_={class:"mb-8"},y_={class:"flex justify-between items-center"},__={class:"flex items-center gap-3 mb-1"},b_=["src"],v_={key:1,class:"text-3xl font-bold text-gray-900"},x_={class:"flex items-center space-x-4"},w_={class:"text-sm text-gray-600"},S_={key:0,class:"card text-center py-12"};function E_(e,t,s,r,n,i){const o=Ot("LoginForm"),a=Ot("UserProfileDialog"),l=Ot("PriceListManager"),d=Ot("DeliveryAddresses");return m(),g("div",f_,[n.isAuthenticated?P("",!0):(m(),g("div",h_,[c("div",p_,[Fe(o,{onLoginSuccess:i.handleLoginSuccess},null,8,["onLoginSuccess"])])])),n.showProfileDialog?(m(),ks(a,{key:1,show:n.showProfileDialog,onProfileSaved:i.handleProfileSaved,onCancel:i.handleProfileCancel},null,8,["show","onProfileSaved","onCancel"])):n.isAuthenticated&&!n.showProfileDialog?(m(),g("div",m_,[c("header",g_,[c("div",y_,[c("div",null,[c("div",__,[n.logoOk?(m(),g("img",{key:0,src:n.logoSrc,alt:"CREATESPACE",class:"h-10 md:h-7 w-auto",onError:t[0]||(t[0]=u=>n.logoOk=!1)},null,40,b_)):(m(),g("h1",v_,"CREATESPACE"))])]),c("div",x_,[c("span",w_," Welcome, "+_(i.welcomeText),1),i.hasCustomerId?(m(),g("button",{key:0,onClick:t[1]||(t[1]=u=>n.showAddresses=!0),class:"px-4 py-2 text-sm font-medium text-blue-700 bg-blue-50 rounded-md hover:bg-blue-100 border border-blue-200"}," Manage Delivery Addresses ")):P("",!0),c("button",{onClick:t[2]||(t[2]=(...u)=>i.handleLogout&&i.handleLogout(...u)),class:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200"}," Logout ")])])]),i.hasCustomerId?i.hasCustomerId&&!n.showAddresses?(m(),ks(l,{"customer-id":n.customerId,key:`price-list-manager-${n.customerId}`},null,8,["customer-id"])):i.hasCustomerId&&n.showAddresses?(m(),ks(d,{key:2,"customer-id":n.customerId,onClose:t[3]||(t[3]=u=>n.showAddresses=!1)},null,8,["customer-id"])):P("",!0):(m(),g("div",S_,t[4]||(t[4]=[c("div",{class:"text-yellow-600 text-lg font-medium mb-2"},"No Customer Assigned",-1),c("p",{class:"text-gray-600 mb-4"},"No customer has been assigned to you yet. Please contact your administrator.",-1)])))])):P("",!0)])}const k_=Ct(d_,[["render",E_]]),F=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,J=globalThis,Mt="10.3.0";function os(){return qr(J),J}function qr(e){const t=e.__SENTRY__=e.__SENTRY__||{};return t.version=t.version||Mt,t[Mt]=t[Mt]||{}}function js(e,t,s=J){const r=s.__SENTRY__=s.__SENTRY__||{},n=r[Mt]=r[Mt]||{};return n[e]||(n[e]=t())}const P_=["debug","info","warn","error","log","assert","trace"],C_="Sentry Logger ",_r={};function It(e){if(!("console"in J))return e();const t=J.console,s={},r=Object.keys(_r);r.forEach(n=>{const i=_r[n];s[n]=t[n],t[n]=i});try{return e()}finally{r.forEach(n=>{t[n]=s[n]})}}function I_(){di().enabled=!0}function A_(){di().enabled=!1}function fl(){return di().enabled}function T_(...e){ui("log",...e)}function D_(...e){ui("warn",...e)}function R_(...e){ui("error",...e)}function ui(e,...t){F&&fl()&&It(()=>{J.console[e](`${C_}[${e}]:`,...t)})}function di(){return F?js("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const R={enable:I_,disable:A_,isEnabled:fl,log:T_,warn:D_,error:R_},hl=50,jt="?",po=/\(error: (.*)\)/,mo=/captureMessage|captureException/;function pl(...e){const t=e.sort((s,r)=>s[0]-r[0]).map(s=>s[1]);return(s,r=0,n=0)=>{const i=[],o=s.split(`
`);for(let a=r;a<o.length;a++){let l=o[a];l.length>1024&&(l=l.slice(0,1024));const d=po.test(l)?l.replace(po,"$1"):l;if(!d.match(/\S*Error: /)){for(const u of t){const h=u(d);if(h){i.push(h);break}}if(i.length>=hl+n)break}}return N_(i.slice(n))}}function L_(e){return Array.isArray(e)?pl(...e):e}function N_(e){if(!e.length)return[];const t=Array.from(e);return/sentryWrapped/.test(Ys(t).function||"")&&t.pop(),t.reverse(),mo.test(Ys(t).function||"")&&(t.pop(),mo.test(Ys(t).function||"")&&t.pop()),t.slice(0,hl).map(s=>({...s,filename:s.filename||Ys(t).filename,function:s.function||jt}))}function Ys(e){return e[e.length-1]||{}}const sn="<anonymous>";function wt(e){try{return!e||typeof e!="function"?sn:e.name||sn}catch{return sn}}function go(e){const t=e.exception;if(t){const s=[];try{return t.values.forEach(r=>{r.stacktrace.frames&&s.push(...r.stacktrace.frames)}),s}catch{return}}}const ar={},yo={};function $t(e,t){ar[e]=ar[e]||[],ar[e].push(t)}function Wt(e,t){if(!yo[e]){yo[e]=!0;try{t()}catch(s){F&&R.error(`Error while instrumenting ${e}`,s)}}}function Qe(e,t){const s=e&&ar[e];if(s)for(const r of s)try{r(t)}catch(n){F&&R.error(`Error while triggering instrumentation handler.
Type: ${e}
Name: ${wt(r)}
Error:`,n)}}let rn=null;function O_(e){const t="error";$t(t,e),Wt(t,F_)}function F_(){rn=J.onerror,J.onerror=function(e,t,s,r,n){return Qe("error",{column:r,error:n,line:s,msg:e,url:t}),rn?rn.apply(this,arguments):!1},J.onerror.__SENTRY_INSTRUMENTED__=!0}let nn=null;function q_(e){const t="unhandledrejection";$t(t,e),Wt(t,M_)}function M_(){nn=J.onunhandledrejection,J.onunhandledrejection=function(e){return Qe("unhandledrejection",e),nn?nn.apply(this,arguments):!0},J.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const ml=Object.prototype.toString;function fi(e){switch(ml.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return St(e,Error)}}function as(e,t){return ml.call(e)===`[object ${t}]`}function gl(e){return as(e,"ErrorEvent")}function _o(e){return as(e,"DOMError")}function B_(e){return as(e,"DOMException")}function ht(e){return as(e,"String")}function hi(e){return typeof e=="object"&&e!==null&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function pi(e){return e===null||hi(e)||typeof e!="object"&&typeof e!="function"}function Ls(e){return as(e,"Object")}function Mr(e){return typeof Event<"u"&&St(e,Event)}function j_(e){return typeof Element<"u"&&St(e,Element)}function U_(e){return as(e,"RegExp")}function Br(e){return!!(e!=null&&e.then&&typeof e.then=="function")}function H_(e){return Ls(e)&&"nativeEvent"in e&&"preventDefault"in e&&"stopPropagation"in e}function St(e,t){try{return e instanceof t}catch{return!1}}function yl(e){return!!(typeof e=="object"&&e!==null&&(e.__isVue||e._isVue))}function V_(e){return typeof Request<"u"&&St(e,Request)}const mi=J,$_=80;function _l(e,t={}){if(!e)return"<unknown>";try{let s=e;const r=5,n=[];let i=0,o=0;const a=" > ",l=a.length;let d;const u=Array.isArray(t)?t:t.keyAttrs,h=!Array.isArray(t)&&t.maxStringLength||$_;for(;s&&i++<r&&(d=W_(s,u),!(d==="html"||i>1&&o+n.length*l+d.length>=h));)n.push(d),o+=d.length,s=s.parentNode;return n.reverse().join(a)}catch{return"<unknown>"}}function W_(e,t){const s=e,r=[];if(!(s!=null&&s.tagName))return"";if(mi.HTMLElement&&s instanceof HTMLElement&&s.dataset){if(s.dataset.sentryComponent)return s.dataset.sentryComponent;if(s.dataset.sentryElement)return s.dataset.sentryElement}r.push(s.tagName.toLowerCase());const n=t!=null&&t.length?t.filter(o=>s.getAttribute(o)).map(o=>[o,s.getAttribute(o)]):null;if(n!=null&&n.length)n.forEach(o=>{r.push(`[${o[0]}="${o[1]}"]`)});else{s.id&&r.push(`#${s.id}`);const o=s.className;if(o&&ht(o)){const a=o.split(/\s+/);for(const l of a)r.push(`.${l}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=s.getAttribute(o);a&&r.push(`[${o}="${a}"]`)}return r.join("")}function gi(){try{return mi.document.location.href}catch{return""}}function Q_(e){if(!mi.HTMLElement)return null;let t=e;const s=5;for(let r=0;r<s;r++){if(!t)return null;if(t instanceof HTMLElement){if(t.dataset.sentryComponent)return t.dataset.sentryComponent;if(t.dataset.sentryElement)return t.dataset.sentryElement}t=t.parentNode}return null}function br(e,t=0){return typeof e!="string"||t===0||e.length<=t?e:`${e.slice(0,t)}...`}function bo(e,t){if(!Array.isArray(e))return"";const s=[];for(let r=0;r<e.length;r++){const n=e[r];try{yl(n)?s.push("[VueViewModel]"):s.push(String(n))}catch{s.push("[value cannot be serialized]")}}return s.join(t)}function lr(e,t,s=!1){return ht(e)?U_(t)?t.test(e):ht(t)?s?e===t:e.includes(t):!1:!1}function jr(e,t=[],s=!1){return t.some(r=>lr(e,r,s))}function Oe(e,t,s){if(!(t in e))return;const r=e[t];if(typeof r!="function")return;const n=s(r);typeof n=="function"&&bl(n,r);try{e[t]=n}catch{F&&R.log(`Failed to replace method "${t}" in object`,e)}}function Ue(e,t,s){try{Object.defineProperty(e,t,{value:s,writable:!0,configurable:!0})}catch{F&&R.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function bl(e,t){try{const s=t.prototype||{};e.prototype=t.prototype=s,Ue(e,"__sentry_original__",t)}catch{}}function yi(e){return e.__sentry_original__}function vl(e){if(fi(e))return{message:e.message,name:e.name,stack:e.stack,...xo(e)};if(Mr(e)){const t={type:e.type,target:vo(e.target),currentTarget:vo(e.currentTarget),...xo(e)};return typeof CustomEvent<"u"&&St(e,CustomEvent)&&(t.detail=e.detail),t}else return e}function vo(e){try{return j_(e)?_l(e):Object.prototype.toString.call(e)}catch{return"<unknown>"}}function xo(e){if(typeof e=="object"&&e!==null){const t={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t}else return{}}function K_(e,t=40){const s=Object.keys(vl(e));s.sort();const r=s[0];if(!r)return"[object has no keys]";if(r.length>=t)return br(r,t);for(let n=s.length;n>0;n--){const i=s.slice(0,n).join(", ");if(!(i.length>t))return n===s.length?i:br(i,t)}return""}function z_(){const e=J;return e.crypto||e.msCrypto}function Me(e=z_()){let t=()=>Math.random()*16;try{if(e!=null&&e.randomUUID)return e.randomUUID().replace(/-/g,"");e!=null&&e.getRandomValues&&(t=()=>{const s=new Uint8Array(1);return e.getRandomValues(s),s[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,s=>(s^(t()&15)>>s/4).toString(16))}function xl(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)==null?void 0:s[0]}function Nt(e){const{message:t,event_id:s}=e;if(t)return t;const r=xl(e);return r?r.type&&r.value?`${r.type}: ${r.value}`:r.type||r.value||s||"<unknown>":s||"<unknown>"}function In(e,t,s){const r=e.exception=e.exception||{},n=r.values=r.values||[],i=n[0]=n[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function ss(e,t){const s=xl(e);if(!s)return;const r={type:"generic",handled:!0},n=s.mechanism;if(s.mechanism={...r,...n,...t},t&&"data"in t){const i={...n==null?void 0:n.data,...t.data};s.mechanism.data=i}}function wo(e){if(G_(e))return!0;try{Ue(e,"__sentry_captured__",!0)}catch{}return!1}function G_(e){try{return e.__sentry_captured__}catch{}}const wl=1e3;function Us(){return Date.now()/wl}function Y_(){const{performance:e}=J;if(!(e!=null&&e.now)||!e.timeOrigin)return Us;const t=e.timeOrigin;return()=>(t+e.now())/wl}let So;function Ce(){return(So??(So=Y_()))()}function J_(e){const t=Ce(),s={sid:Me(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>Z_(s)};return e&&rs(s,e),s}function rs(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),!e.did&&!t.did&&(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Ce(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=t.sid.length===32?t.sid:Me()),t.init!==void 0&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),typeof t.started=="number"&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if(typeof t.duration=="number")e.duration=t.duration;else{const s=e.timestamp-e.started;e.duration=s>=0?s:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),typeof t.errors=="number"&&(e.errors=t.errors),t.status&&(e.status=t.status)}function X_(e,t){let s={};e.status==="ok"&&(s={status:"exited"}),rs(e,s)}function Z_(e){return{sid:`${e.sid}`,init:e.init,started:new Date(e.started*1e3).toISOString(),timestamp:new Date(e.timestamp*1e3).toISOString(),status:e.status,errors:e.errors,did:typeof e.did=="number"||typeof e.did=="string"?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}}}function Hs(e,t,s=2){if(!t||typeof t!="object"||s<=0)return t;if(e&&Object.keys(t).length===0)return e;const r={...e};for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=Hs(r[n],t[n],s-1));return r}function vr(){return Me()}function Ur(){return Me().substring(16)}const An="_sentrySpan";function Tn(e,t){t?Ue(e,An,t):delete e[An]}function xr(e){return e[An]}const eb=100;class ot{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:vr(),sampleRand:Math.random()}}clone(){const t=new ot;return t._breadcrumbs=[...this._breadcrumbs],t._tags={...this._tags},t._extra={...this._extra},t._contexts={...this._contexts},this._contexts.flags&&(t._contexts.flags={values:[...this._contexts.flags.values]}),t._user=this._user,t._level=this._level,t._session=this._session,t._transactionName=this._transactionName,t._fingerprint=this._fingerprint,t._eventProcessors=[...this._eventProcessors],t._attachments=[...this._attachments],t._sdkProcessingMetadata={...this._sdkProcessingMetadata},t._propagationContext={...this._propagationContext},t._client=this._client,t._lastEventId=this._lastEventId,Tn(t,xr(this)),t}setClient(t){this._client=t}setLastEventId(t){this._lastEventId=t}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(t){this._scopeListeners.push(t)}addEventProcessor(t){return this._eventProcessors.push(t),this}setUser(t){return this._user=t||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&rs(this._session,{user:t}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(t){return this._tags={...this._tags,...t},this._notifyScopeListeners(),this}setTag(t,s){return this._tags={...this._tags,[t]:s},this._notifyScopeListeners(),this}setExtras(t){return this._extra={...this._extra,...t},this._notifyScopeListeners(),this}setExtra(t,s){return this._extra={...this._extra,[t]:s},this._notifyScopeListeners(),this}setFingerprint(t){return this._fingerprint=t,this._notifyScopeListeners(),this}setLevel(t){return this._level=t,this._notifyScopeListeners(),this}setTransactionName(t){return this._transactionName=t,this._notifyScopeListeners(),this}setContext(t,s){return s===null?delete this._contexts[t]:this._contexts[t]=s,this._notifyScopeListeners(),this}setSession(t){return t?this._session=t:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(t){if(!t)return this;const s=typeof t=="function"?t(this):t,r=s instanceof ot?s.getScopeData():Ls(s)?t:void 0,{tags:n,extra:i,user:o,contexts:a,level:l,fingerprint:d=[],propagationContext:u}=r||{};return this._tags={...this._tags,...n},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),l&&(this._level=l),d.length&&(this._fingerprint=d),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Tn(this,void 0),this._attachments=[],this.setPropagationContext({traceId:vr(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(t,s){var i;const r=typeof s=="number"?s:eb;if(r<=0)return this;const n={timestamp:Us(),...t,message:t.message?br(t.message,2048):t.message};return this._breadcrumbs.push(n),this._breadcrumbs.length>r&&(this._breadcrumbs=this._breadcrumbs.slice(-r),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(t){return this._attachments.push(t),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:xr(this)}}setSDKProcessingMetadata(t){return this._sdkProcessingMetadata=Hs(this._sdkProcessingMetadata,t,2),this}setPropagationContext(t){return this._propagationContext=t,this}getPropagationContext(){return this._propagationContext}captureException(t,s){const r=(s==null?void 0:s.event_id)||Me();if(!this._client)return F&&R.warn("No client configured on scope - will not capture exception!"),r;const n=new Error("Sentry syntheticException");return this._client.captureException(t,{originalException:t,syntheticException:n,...s,event_id:r},this),r}captureMessage(t,s,r){const n=(r==null?void 0:r.event_id)||Me();if(!this._client)return F&&R.warn("No client configured on scope - will not capture message!"),n;const i=new Error(t);return this._client.captureMessage(t,s,{originalException:t,syntheticException:i,...r,event_id:n},this),n}captureEvent(t,s){const r=(s==null?void 0:s.event_id)||Me();return this._client?(this._client.captureEvent(t,{...s,event_id:r},this),r):(F&&R.warn("No client configured on scope - will not capture event!"),r)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(t=>{t(this)}),this._notifyingListeners=!1)}}function tb(){return js("defaultCurrentScope",()=>new ot)}function sb(){return js("defaultIsolationScope",()=>new ot)}class rb{constructor(t,s){let r;t?r=t:r=new ot;let n;s?n=s:n=new ot,this._stack=[{scope:r}],this._isolationScope=n}withScope(t){const s=this._pushScope();let r;try{r=t(s)}catch(n){throw this._popScope(),n}return Br(r)?r.then(n=>(this._popScope(),n),n=>{throw this._popScope(),n}):(this._popScope(),r)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const t=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:t}),t}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function ns(){const e=os(),t=qr(e);return t.stack=t.stack||new rb(tb(),sb())}function nb(e){return ns().withScope(e)}function ib(e,t){const s=ns();return s.withScope(()=>(s.getStackTop().scope=e,t(e)))}function Eo(e){return ns().withScope(()=>e(ns().getIsolationScope()))}function ob(){return{withIsolationScope:Eo,withScope:nb,withSetScope:ib,withSetIsolationScope:(e,t)=>Eo(t),getCurrentScope:()=>ns().getScope(),getIsolationScope:()=>ns().getIsolationScope()}}function Vs(e){const t=qr(e);return t.acs?t.acs:ob()}function Ke(){const e=os();return Vs(e).getCurrentScope()}function ls(){const e=os();return Vs(e).getIsolationScope()}function ab(){return js("globalScope",()=>new ot)}function _i(...e){const t=os(),s=Vs(t);if(e.length===2){const[r,n]=e;return r?s.withSetScope(r,n):s.withScope(n)}return s.withScope(e[0])}function ce(){return Ke().getClient()}function lb(e){const t=e.getPropagationContext(),{traceId:s,parentSpanId:r,propagationSpanId:n}=t,i={trace_id:s,span_id:n||Ur()};return r&&(i.parent_span_id=r),i}const wr="sentry.source",Sl="sentry.sample_rate",cb="sentry.previous_trace_sample_rate",Dn="sentry.op",Ns="sentry.origin",ub="sentry.measurement_unit",db="sentry.measurement_value",ko="sentry.custom_span_name",bi="sentry.profile_id",vi="sentry.exclusive_time",fb=0,hb=1,El="_sentryScope",kl="_sentryIsolationScope";function pb(e,t,s){e&&(Ue(e,kl,s),Ue(e,El,t))}function Sr(e){return{scope:e[El],isolationScope:e[kl]}}const mb="sentry-",gb=/^sentry-/;function yb(e){const t=_b(e);if(!t)return;const s=Object.entries(t).reduce((r,[n,i])=>{if(n.match(gb)){const o=n.slice(mb.length);r[o]=i}return r},{});if(Object.keys(s).length>0)return s}function _b(e){if(!(!e||!ht(e)&&!Array.isArray(e)))return Array.isArray(e)?e.reduce((t,s)=>{const r=Po(s);return Object.entries(r).forEach(([n,i])=>{t[n]=i}),t},{}):Po(e)}function Po(e){return e.split(",").map(t=>t.split("=").map(s=>{try{return decodeURIComponent(s.trim())}catch{return}})).reduce((t,[s,r])=>(s&&r&&(t[s]=r),t),{})}const bb=/^o(\d+)\./,vb=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function xb(e){return e==="http"||e==="https"}function $s(e,t=!1){const{host:s,path:r,pass:n,port:i,projectId:o,protocol:a,publicKey:l}=e;return`${a}://${l}${t&&n?`:${n}`:""}@${s}${i?`:${i}`:""}/${r&&`${r}/`}${o}`}function wb(e){const t=vb.exec(e);if(!t){It(()=>{console.error(`Invalid Sentry Dsn: ${e}`)});return}const[s,r,n="",i="",o="",a=""]=t.slice(1);let l="",d=a;const u=d.split("/");if(u.length>1&&(l=u.slice(0,-1).join("/"),d=u.pop()),d){const h=d.match(/^\d+/);h&&(d=h[0])}return Pl({host:i,pass:n,path:l,projectId:d,port:o,protocol:s,publicKey:r})}function Pl(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function Sb(e){if(!F)return!0;const{port:t,projectId:s,protocol:r}=e;return["protocol","publicKey","host","projectId"].find(o=>e[o]?!1:(R.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:s.match(/^\d+$/)?xb(r)?t&&isNaN(parseInt(t,10))?(R.error(`Invalid Sentry Dsn: Invalid port ${t}`),!1):!0:(R.error(`Invalid Sentry Dsn: Invalid protocol ${r}`),!1):(R.error(`Invalid Sentry Dsn: Invalid projectId ${s}`),!1)}function Eb(e){const t=e.match(bb);return t==null?void 0:t[1]}function kb(e){const t=e.getOptions(),{host:s}=e.getDsn()||{};let r;return t.orgId?r=String(t.orgId):s&&(r=Eb(s)),r}function Pb(e){const t=typeof e=="string"?wb(e):Pl(e);if(!(!t||!Sb(t)))return t}function xi(e){if(typeof e=="boolean")return Number(e);const t=typeof e=="string"?parseFloat(e):e;if(!(typeof t!="number"||isNaN(t)||t<0||t>1))return t}const Cl=0,wi=1;let Co=!1;function Cb(e){const{spanId:t,traceId:s}=e.spanContext(),{data:r,op:n,parent_span_id:i,status:o,origin:a,links:l}=Be(e);return{parent_span_id:i,span_id:t,trace_id:s,data:r,op:n,status:o,origin:a,links:l}}function Ib(e){const{spanId:t,traceId:s,isRemote:r}=e.spanContext(),n=r?t:Be(e).parent_span_id,i=Sr(e).scope,o=r?(i==null?void 0:i.getPropagationContext().propagationSpanId)||Ur():t;return{parent_span_id:n,span_id:o,trace_id:s}}function Il(e){if(e&&e.length>0)return e.map(({context:{spanId:t,traceId:s,traceFlags:r,...n},attributes:i})=>({span_id:t,trace_id:s,sampled:r===wi,attributes:i,...n}))}function es(e){return typeof e=="number"?Io(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?Io(e.getTime()):Ce()}function Io(e){return e>9999999999?e/1e3:e}function Be(e){var r;if(Tb(e))return e.getSpanJSON();const{spanId:t,traceId:s}=e.spanContext();if(Ab(e)){const{attributes:n,startTime:i,name:o,endTime:a,status:l,links:d}=e,u="parentSpanId"in e?e.parentSpanId:"parentSpanContext"in e?(r=e.parentSpanContext)==null?void 0:r.spanId:void 0;return{span_id:t,trace_id:s,data:n,description:o,parent_span_id:u,start_timestamp:es(i),timestamp:es(a)||void 0,status:Al(l),op:n[Dn],origin:n[Ns],links:Il(d)}}return{span_id:t,trace_id:s,start_timestamp:0,data:{}}}function Ab(e){const t=e;return!!t.attributes&&!!t.startTime&&!!t.name&&!!t.endTime&&!!t.status}function Tb(e){return typeof e.getSpanJSON=="function"}function Ws(e){const{traceFlags:t}=e.spanContext();return t===wi}function Al(e){if(!(!e||e.code===fb))return e.code===hb?"ok":e.message||"unknown_error"}const Ps="_sentryChildSpans",Rn="_sentryRootSpan";function Tl(e,t){const s=e[Rn]||e;Ue(t,Rn,s),e[Ps]?e[Ps].add(t):Ue(e,Ps,new Set([t]))}function Db(e){const t=new Set;function s(r){if(!t.has(r)&&Ws(r)){t.add(r);const n=r[Ps]?Array.from(r[Ps]):[];for(const i of n)s(i)}}return s(e),Array.from(t)}function vt(e){return e[Rn]||e}function Rb(){const e=os(),t=Vs(e);return t.getActiveSpan?t.getActiveSpan():xr(Ke())}function Ln(){Co||(It(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),Co=!0)}function Hr(e){var s;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const t=e||((s=ce())==null?void 0:s.getOptions());return!!t&&(t.tracesSampleRate!=null||!!t.tracesSampler)}const Si="production",Dl="_frozenDsc";function on(e,t){Ue(e,Dl,t)}function Rl(e,t){const s=t.getOptions(),{publicKey:r}=t.getDsn()||{},n={environment:s.environment||Si,release:s.release,public_key:r,trace_id:e,org_id:kb(t)};return t.emit("createDsc",n),n}function Lb(e,t){const s=t.getPropagationContext();return s.dsc||Rl(s.traceId,e)}function Os(e){var D;const t=ce();if(!t)return{};const s=vt(e),r=Be(s),n=r.data,i=s.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??n[Sl]??n[cb];function a(L){return(typeof o=="number"||typeof o=="string")&&(L.sample_rate=`${o}`),L}const l=s[Dl];if(l)return a(l);const d=i==null?void 0:i.get("sentry.dsc"),u=d&&yb(d);if(u)return a(u);const h=Rl(e.spanContext().traceId,t),b=n[wr],y=r.description;return b!=="url"&&y&&(h.transaction=y),Hr()&&(h.sampled=String(Ws(s)),h.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((D=Sr(s).scope)==null?void 0:D.getPropagationContext().sampleRand.toString())),a(h),t.emit("createDsc",h,s),h}class Ei{constructor(t={}){this._traceId=t.traceId||vr(),this._spanId=t.spanId||Ur()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:Cl}}end(t){}setAttribute(t,s){return this}setAttributes(t){return this}setStatus(t){return this}updateName(t){return this}isRecording(){return!1}addEvent(t,s,r){return this}addLink(t){return this}addLinks(t){return this}recordException(t,s){}}function ut(e,t=100,s=1/0){try{return Nn("",e,t,s)}catch(r){return{ERROR:`**non-serializable** (${r})`}}}function Ll(e,t=3,s=100*1024){const r=ut(e,t);return qb(r)>s?Ll(e,t-1,s):r}function Nn(e,t,s=1/0,r=1/0,n=Mb()){const[i,o]=n;if(t==null||["boolean","string"].includes(typeof t)||typeof t=="number"&&Number.isFinite(t))return t;const a=Nb(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const l=typeof t.__sentry_override_normalization_depth__=="number"?t.__sentry_override_normalization_depth__:s;if(l===0)return a.replace("object ","");if(i(t))return"[Circular ~]";const d=t;if(d&&typeof d.toJSON=="function")try{const y=d.toJSON();return Nn("",y,l-1,r,n)}catch{}const u=Array.isArray(t)?[]:{};let h=0;const b=vl(t);for(const y in b){if(!Object.prototype.hasOwnProperty.call(b,y))continue;if(h>=r){u[y]="[MaxProperties ~]";break}const D=b[y];u[y]=Nn(y,D,l-1,r,n),h++}return o(t),u}function Nb(e,t){try{if(e==="domain"&&t&&typeof t=="object"&&t._events)return"[Domain]";if(e==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&t===global)return"[Global]";if(typeof window<"u"&&t===window)return"[Window]";if(typeof document<"u"&&t===document)return"[Document]";if(yl(t))return"[VueViewModel]";if(H_(t))return"[SyntheticEvent]";if(typeof t=="number"&&!Number.isFinite(t))return`[${t}]`;if(typeof t=="function")return`[Function: ${wt(t)}]`;if(typeof t=="symbol")return`[${String(t)}]`;if(typeof t=="bigint")return`[BigInt: ${String(t)}]`;const s=Ob(t);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(s){return`**non-serializable** (${s})`}}function Ob(e){const t=Object.getPrototypeOf(e);return t!=null&&t.constructor?t.constructor.name:"null prototype"}function Fb(e){return~-encodeURI(e).split(/%..|./).length}function qb(e){return Fb(JSON.stringify(e))}function Mb(){const e=new WeakSet;function t(r){return e.has(r)?!0:(e.add(r),!1)}function s(r){e.delete(r)}return[t,s]}function cs(e,t=[]){return[e,t]}function Bb(e,t){const[s,r]=e;return[s,[...r,t]]}function Ao(e,t){const s=e[1];for(const r of s){const n=r[0].type;if(t(r,n))return!0}return!1}function On(e){const t=qr(J);return t.encodePolyfill?t.encodePolyfill(e):new TextEncoder().encode(e)}function jb(e){const[t,s]=e;let r=JSON.stringify(t);function n(i){typeof r=="string"?r=typeof i=="string"?r+i:[On(r),i]:r.push(typeof i=="string"?On(i):i)}for(const i of s){const[o,a]=i;if(n(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)n(a);else{let l;try{l=JSON.stringify(a)}catch{l=JSON.stringify(ut(a))}n(l)}}return typeof r=="string"?r:Ub(r)}function Ub(e){const t=e.reduce((n,i)=>n+i.length,0),s=new Uint8Array(t);let r=0;for(const n of e)s.set(n,r),r+=n.length;return s}function Hb(e){return[{type:"span"},e]}function Vb(e){const t=typeof e.data=="string"?On(e.data):e.data;return[{type:"attachment",length:t.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType},t]}const $b={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function To(e){return $b[e]}function Nl(e){if(!(e!=null&&e.sdk))return;const{name:t,version:s}=e.sdk;return{name:t,version:s}}function Wb(e,t,s,r){var i;const n=(i=e.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:e.event_id,sent_at:new Date().toISOString(),...t&&{sdk:t},...!!s&&r&&{dsn:$s(r)},...n&&{trace:n}}}function Fn(e,t){if(!(t!=null&&t.length)||!e.description)return!1;for(const s of t){if(Kb(s)){if(lr(e.description,s))return!0;continue}if(!s.name&&!s.op)continue;const r=s.name?lr(e.description,s.name):!0,n=s.op?e.op&&lr(e.op,s.op):!0;if(r&&n)return!0}return!1}function Qb(e,t){const s=t.parent_span_id,r=t.span_id;if(s)for(const n of e)n.parent_span_id===r&&(n.parent_span_id=s)}function Kb(e){return typeof e=="string"||e instanceof RegExp}function zb(e,t){return t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]]),e}function Gb(e,t,s,r){const n=Nl(s),i={sent_at:new Date().toISOString(),...n&&{sdk:n},...!!r&&t&&{dsn:$s(t)}},o="aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()];return cs(i,[o])}function Yb(e,t,s,r){const n=Nl(s),i=e.type&&e.type!=="replay_event"?e.type:"event";zb(e,s==null?void 0:s.sdk);const o=Wb(e,n,r,t);return delete e.sdkProcessingMetadata,cs(o,[[{type:i},e]])}function Jb(e,t){function s(y){return!!y.trace_id&&!!y.public_key}const r=Os(e[0]),n=t==null?void 0:t.getDsn(),i=t==null?void 0:t.getOptions().tunnel,o={sent_at:new Date().toISOString(),...s(r)&&{trace:r},...!!i&&n&&{dsn:$s(n)}},{beforeSendSpan:a,ignoreSpans:l}=(t==null?void 0:t.getOptions())||{},d=l!=null&&l.length?e.filter(y=>!Fn(Be(y),l)):e,u=e.length-d.length;u&&(t==null||t.recordDroppedEvent("before_send","span",u));const h=a?y=>{const D=Be(y),L=a(D);return L||(Ln(),D)}:Be,b=[];for(const y of d){const D=h(y);D&&b.push(Hb(D))}return cs(o,b)}function Xb(e){if(!F)return;const{description:t="< unknown name >",op:s="< unknown op >",parent_span_id:r}=Be(e),{spanId:n}=e.spanContext(),i=Ws(e),o=vt(e),a=o===e,l=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,d=[`op: ${s}`,`name: ${t}`,`ID: ${n}`];if(r&&d.push(`parent ID: ${r}`),!a){const{op:u,description:h}=Be(o);d.push(`root ID: ${o.spanContext().spanId}`),u&&d.push(`root op: ${u}`),h&&d.push(`root description: ${h}`)}R.log(`${l}
  ${d.join(`
  `)}`)}function Zb(e){if(!F)return;const{description:t="< unknown name >",op:s="< unknown op >"}=Be(e),{spanId:r}=e.spanContext(),i=vt(e)===e,o=`[Tracing] Finishing "${s}" ${i?"root ":""}span "${t}" with ID ${r}`;R.log(o)}function Do(e){if(!e||e.length===0)return;const t={};return e.forEach(s=>{const r=s.attributes||{},n=r[ub],i=r[db];typeof n=="string"&&typeof i=="number"&&(t[s.name]={value:i,unit:n})}),t}const Ro=1e3;class ki{constructor(t={}){this._traceId=t.traceId||vr(),this._spanId=t.spanId||Ur(),this._startTime=t.startTimestamp||Ce(),this._links=t.links,this._attributes={},this.setAttributes({[Ns]:"manual",[Dn]:t.op,...t.attributes}),this._name=t.name,t.parentSpanId&&(this._parentSpanId=t.parentSpanId),"sampled"in t&&(this._sampled=t.sampled),t.endTimestamp&&(this._endTime=t.endTimestamp),this._events=[],this._isStandaloneSpan=t.isStandalone,this._endTime&&this._onSpanEnded()}addLink(t){return this._links?this._links.push(t):this._links=[t],this}addLinks(t){return this._links?this._links.push(...t):this._links=t,this}recordException(t,s){}spanContext(){const{_spanId:t,_traceId:s,_sampled:r}=this;return{spanId:t,traceId:s,traceFlags:r?wi:Cl}}setAttribute(t,s){return s===void 0?delete this._attributes[t]:this._attributes[t]=s,this}setAttributes(t){return Object.keys(t).forEach(s=>this.setAttribute(s,t[s])),this}updateStartTime(t){this._startTime=es(t)}setStatus(t){return this._status=t,this}updateName(t){return this._name=t,this.setAttribute(wr,"custom"),this}end(t){this._endTime||(this._endTime=es(t),Zb(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[Dn],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:Al(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Ns],profile_id:this._attributes[bi],exclusive_time:this._attributes[vi],measurements:Do(this._events),is_segment:this._isStandaloneSpan&&vt(this)===this||void 0,segment_id:this._isStandaloneSpan?vt(this).spanContext().spanId:void 0,links:Il(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(t,s,r){F&&R.log("[Tracing] Adding an event to span:",t);const n=Lo(s)?s:r||Ce(),i=Lo(s)?{}:s||{},o={name:t,time:es(n),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const t=ce();if(t&&t.emit("spanEnd",this),!(this._isStandaloneSpan||this===vt(this)))return;if(this._isStandaloneSpan){this._sampled?tv(Jb([this],t)):(F&&R.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),t&&t.recordDroppedEvent("sample_rate","span"));return}const r=this._convertSpanToTransaction();r&&(Sr(this).scope||Ke()).captureEvent(r)}_convertSpanToTransaction(){var u;if(!No(Be(this)))return;this._name||(F&&R.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:t,isolationScope:s}=Sr(this),r=(u=t==null?void 0:t.getScopeData().sdkProcessingMetadata)==null?void 0:u.normalizedRequest;if(this._sampled!==!0)return;const i=Db(this).filter(h=>h!==this&&!ev(h)).map(h=>Be(h)).filter(No),o=this._attributes[wr];delete this._attributes[ko],i.forEach(h=>{delete h.data[ko]});const a={contexts:{trace:Cb(this)},spans:i.length>Ro?i.sort((h,b)=>h.start_timestamp-b.start_timestamp).slice(0,Ro):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:t,capturedSpanIsolationScope:s,dynamicSamplingContext:Os(this)},request:r,...o&&{transaction_info:{source:o}}},l=Do(this._events);return l&&Object.keys(l).length&&(F&&R.log("[Measurements] Adding measurements to transaction event",JSON.stringify(l,void 0,2)),a.measurements=l),a}}function Lo(e){return e&&typeof e=="number"||e instanceof Date||Array.isArray(e)}function No(e){return!!e.start_timestamp&&!!e.timestamp&&!!e.span_id&&!!e.trace_id}function ev(e){return e instanceof ki&&e.isStandaloneSpan()}function tv(e){const t=ce();if(!t)return;const s=e[1];if(!s||s.length===0){t.recordDroppedEvent("before_send","span");return}t.sendEnvelope(e)}function sv(e,t,s){if(!Hr(e))return[!1];let r,n;typeof e.tracesSampler=="function"?(n=e.tracesSampler({...t,inheritOrSampleWith:a=>typeof t.parentSampleRate=="number"?t.parentSampleRate:typeof t.parentSampled=="boolean"?Number(t.parentSampled):a}),r=!0):t.parentSampled!==void 0?n=t.parentSampled:typeof e.tracesSampleRate<"u"&&(n=e.tracesSampleRate,r=!0);const i=xi(n);if(i===void 0)return F&&R.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(n)} of type ${JSON.stringify(typeof n)}.`),[!1];if(!i)return F&&R.log(`[Tracing] Discarding transaction because ${typeof e.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,r];const o=s<i;return o||F&&R.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(n)})`),[o,i,r]}const Ol="__SENTRY_SUPPRESS_TRACING__";function Oo(e){const t=Fl();if(t.startInactiveSpan)return t.startInactiveSpan(e);const s=iv(e),{forceTransaction:r,parentSpan:n}=e;return(e.scope?o=>_i(e.scope,o):n!==void 0?o=>rv(n,o):o=>o())(()=>{const o=Ke(),a=av(o,n);return e.onlyIfParent&&!a?new Ei:nv({parentSpan:a,spanArguments:s,forceTransaction:r,scope:o})})}function rv(e,t){const s=Fl();return s.withActiveSpan?s.withActiveSpan(e,t):_i(r=>(Tn(r,e||void 0),t(r)))}function nv({parentSpan:e,spanArguments:t,forceTransaction:s,scope:r}){if(!Hr()){const o=new Ei;if(s||!e){const a={sampled:"false",sample_rate:"0",transaction:t.name,...Os(o)};on(o,a)}return o}const n=ls();let i;if(e&&!s)i=ov(e,r,t),Tl(e,i);else if(e){const o=Os(e),{traceId:a,spanId:l}=e.spanContext(),d=Ws(e);i=Fo({traceId:a,parentSpanId:l,...t},r,d),on(i,o)}else{const{traceId:o,dsc:a,parentSpanId:l,sampled:d}={...n.getPropagationContext(),...r.getPropagationContext()};i=Fo({traceId:o,parentSpanId:l,...t},r,d),a&&on(i,a)}return Xb(i),pb(i,r,n),i}function iv(e){const s={isStandalone:(e.experimental||{}).standalone,...e};if(e.startTime){const r={...s};return r.startTimestamp=es(e.startTime),delete r.startTime,r}return s}function Fl(){const e=os();return Vs(e)}function Fo(e,t,s){var D;const r=ce(),n=(r==null?void 0:r.getOptions())||{},{name:i=""}=e,o={spanAttributes:{...e.attributes},spanName:i,parentSampled:s};r==null||r.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??s,l=o.spanAttributes,d=t.getPropagationContext(),[u,h,b]=t.getScopeData().sdkProcessingMetadata[Ol]?[!1]:sv(n,{name:i,parentSampled:a,attributes:l,parentSampleRate:xi((D=d.dsc)==null?void 0:D.sample_rate)},d.sampleRand),y=new ki({...e,attributes:{[wr]:"custom",[Sl]:h!==void 0&&b?h:void 0,...l},sampled:u});return!u&&r&&(F&&R.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),r.recordDroppedEvent("sample_rate","transaction")),r&&r.emit("spanStart",y),y}function ov(e,t,s){const{spanId:r,traceId:n}=e.spanContext(),i=t.getScopeData().sdkProcessingMetadata[Ol]?!1:Ws(e),o=i?new ki({...s,parentSpanId:r,traceId:n,sampled:i}):new Ei({traceId:n});Tl(e,o);const a=ce();return a&&(a.emit("spanStart",o),s.endTimestamp&&a.emit("spanEnd",o)),o}function av(e,t){if(t)return t;if(t===null)return;const s=xr(e);if(!s)return;const r=ce();return(r?r.getOptions():{}).parentSpanIsAlwaysRootSpan?vt(s):s}const an=0,qo=1,Mo=2;function Ut(e){return new Et(t=>{t(e)})}function Er(e){return new Et((t,s)=>{s(e)})}class Et{constructor(t){this._state=an,this._handlers=[],this._runExecutor(t)}then(t,s){return new Et((r,n)=>{this._handlers.push([!1,i=>{if(!t)r(i);else try{r(t(i))}catch(o){n(o)}},i=>{if(!s)n(i);else try{r(s(i))}catch(o){n(o)}}]),this._executeHandlers()})}catch(t){return this.then(s=>s,t)}finally(t){return new Et((s,r)=>{let n,i;return this.then(o=>{i=!1,n=o,t&&t()},o=>{i=!0,n=o,t&&t()}).then(()=>{if(i){r(n);return}s(n)})})}_executeHandlers(){if(this._state===an)return;const t=this._handlers.slice();this._handlers=[],t.forEach(s=>{s[0]||(this._state===qo&&s[1](this._value),this._state===Mo&&s[2](this._value),s[0]=!0)})}_runExecutor(t){const s=(i,o)=>{if(this._state===an){if(Br(o)){o.then(r,n);return}this._state=i,this._value=o,this._executeHandlers()}},r=i=>{s(qo,i)},n=i=>{s(Mo,i)};try{t(r,n)}catch(i){n(i)}}}function qn(e,t,s,r=0){return new Et((n,i)=>{const o=e[r];if(t===null||typeof o!="function")n(t);else{const a=o({...t},s);F&&o.id&&a===null&&R.log(`Event processor "${o.id}" dropped event`),Br(a)?a.then(l=>qn(e,l,s,r+1).then(n)).then(null,i):qn(e,a,s,r+1).then(n).then(null,i)}})}function lv(e,t){const{fingerprint:s,span:r,breadcrumbs:n,sdkProcessingMetadata:i}=t;cv(e,t),r&&fv(e,r),hv(e,s),uv(e,n),dv(e,i)}function Bo(e,t){const{extra:s,tags:r,user:n,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:l,fingerprint:d,eventProcessors:u,attachments:h,propagationContext:b,transactionName:y,span:D}=t;Js(e,"extra",s),Js(e,"tags",r),Js(e,"user",n),Js(e,"contexts",i),e.sdkProcessingMetadata=Hs(e.sdkProcessingMetadata,a,2),o&&(e.level=o),y&&(e.transactionName=y),D&&(e.span=D),l.length&&(e.breadcrumbs=[...e.breadcrumbs,...l]),d.length&&(e.fingerprint=[...e.fingerprint,...d]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),h.length&&(e.attachments=[...e.attachments,...h]),e.propagationContext={...e.propagationContext,...b}}function Js(e,t,s){e[t]=Hs(e[t],s,1)}function cv(e,t){const{extra:s,tags:r,user:n,contexts:i,level:o,transactionName:a}=t;Object.keys(s).length&&(e.extra={...s,...e.extra}),Object.keys(r).length&&(e.tags={...r,...e.tags}),Object.keys(n).length&&(e.user={...n,...e.user}),Object.keys(i).length&&(e.contexts={...i,...e.contexts}),o&&(e.level=o),a&&e.type!=="transaction"&&(e.transaction=a)}function uv(e,t){const s=[...e.breadcrumbs||[],...t];e.breadcrumbs=s.length?s:void 0}function dv(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}function fv(e,t){e.contexts={trace:Ib(t),...e.contexts},e.sdkProcessingMetadata={dynamicSamplingContext:Os(t),...e.sdkProcessingMetadata};const s=vt(t),r=Be(s).description;r&&!e.transaction&&e.type==="transaction"&&(e.transaction=r)}function hv(e,t){e.fingerprint=e.fingerprint?Array.isArray(e.fingerprint)?e.fingerprint:[e.fingerprint]:[],t&&(e.fingerprint=e.fingerprint.concat(t)),e.fingerprint.length||delete e.fingerprint}let Xs,jo,Zs;function pv(e){const t=J._sentryDebugIds;if(!t)return{};const s=Object.keys(t);return Zs&&s.length===jo||(jo=s.length,Zs=s.reduce((r,n)=>{Xs||(Xs={});const i=Xs[n];if(i)r[i[0]]=i[1];else{const o=e(n);for(let a=o.length-1;a>=0;a--){const l=o[a],d=l==null?void 0:l.filename,u=t[n];if(d&&u){r[d]=u,Xs[n]=[d,u];break}}}return r},{})),Zs}function mv(e,t,s,r,n,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,l={...t,event_id:t.event_id||s.event_id||Me(),timestamp:t.timestamp||Us()},d=s.integrations||e.integrations.map(V=>V.name);gv(l,e),bv(l,d),n&&n.emit("applyFrameMetadata",t),t.type===void 0&&yv(l,e.stackParser);const u=xv(r,s.captureContext);s.mechanism&&ss(l,s.mechanism);const h=n?n.getEventProcessors():[],b=ab().getScopeData();if(i){const V=i.getScopeData();Bo(b,V)}if(u){const V=u.getScopeData();Bo(b,V)}const y=[...s.attachments||[],...b.attachments];y.length&&(s.attachments=y),lv(l,b);const D=[...h,...b.eventProcessors];return qn(D,l,s).then(V=>(V&&_v(V),typeof o=="number"&&o>0?vv(V,o,a):V))}function gv(e,t){const{environment:s,release:r,dist:n,maxValueLength:i=250}=t;e.environment=e.environment||s||Si,!e.release&&r&&(e.release=r),!e.dist&&n&&(e.dist=n);const o=e.request;o!=null&&o.url&&(o.url=br(o.url,i))}function yv(e,t){var r,n;const s=pv(t);(n=(r=e.exception)==null?void 0:r.values)==null||n.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.filename&&(l.debug_id=s[l.filename])})})}function _v(e){var r,n;const t={};if((n=(r=e.exception)==null?void 0:r.values)==null||n.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(l=>{l.debug_id&&(l.abs_path?t[l.abs_path]=l.debug_id:l.filename&&(t[l.filename]=l.debug_id),delete l.debug_id)})}),Object.keys(t).length===0)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const s=e.debug_meta.images;Object.entries(t).forEach(([i,o])=>{s.push({type:"sourcemap",code_file:i,debug_id:o})})}function bv(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}function vv(e,t,s){var n,i;if(!e)return null;const r={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(o=>({...o,...o.data&&{data:ut(o.data,t,s)}}))},...e.user&&{user:ut(e.user,t,s)},...e.contexts&&{contexts:ut(e.contexts,t,s)},...e.extra&&{extra:ut(e.extra,t,s)}};return(n=e.contexts)!=null&&n.trace&&r.contexts&&(r.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(r.contexts.trace.data=ut(e.contexts.trace.data,t,s))),e.spans&&(r.spans=e.spans.map(o=>({...o,...o.data&&{data:ut(o.data,t,s)}}))),(i=e.contexts)!=null&&i.flags&&r.contexts&&(r.contexts.flags=ut(e.contexts.flags,3,s)),r}function xv(e,t){if(!t)return e;const s=e?e.clone():new ot;return s.update(t),s}function wv(e){if(e)return Sv(e)?{captureContext:e}:kv(e)?{captureContext:e}:e}function Sv(e){return e instanceof ot||typeof e=="function"}const Ev=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function kv(e){return Object.keys(e).some(t=>Ev.includes(t))}function ql(e,t){return Ke().captureException(e,wv(t))}function Ml(e,t){return Ke().captureEvent(e,t)}function Uo(e){const t=ls(),s=Ke(),{userAgent:r}=J.navigator||{},n=J_({user:s.getUser()||t.getUser(),...r&&{userAgent:r},...e}),i=t.getSession();return(i==null?void 0:i.status)==="ok"&&rs(i,{status:"exited"}),Bl(),t.setSession(n),n}function Bl(){const e=ls(),s=Ke().getSession()||e.getSession();s&&X_(s),jl(),e.setSession()}function jl(){const e=ls(),t=ce(),s=e.getSession();s&&t&&t.captureSession(s)}function Ho(e=!1){if(e){Bl();return}jl()}const Pv="7";function Cv(e){const t=e.protocol?`${e.protocol}:`:"",s=e.port?`:${e.port}`:"";return`${t}//${e.host}${s}${e.path?`/${e.path}`:""}/api/`}function Iv(e){return`${Cv(e)}${e.projectId}/envelope/`}function Av(e,t){const s={sentry_version:Pv};return e.publicKey&&(s.sentry_key=e.publicKey),t&&(s.sentry_client=`${t.name}/${t.version}`),new URLSearchParams(s).toString()}function Tv(e,t,s){return t||`${Iv(e)}?${Av(e,s)}`}const Vo=[];function Dv(e){const t={};return e.forEach(s=>{const{name:r}=s,n=t[r];n&&!n.isDefaultInstance&&s.isDefaultInstance||(t[r]=s)}),Object.values(t)}function Rv(e){const t=e.defaultIntegrations||[],s=e.integrations;t.forEach(n=>{n.isDefaultInstance=!0});let r;if(Array.isArray(s))r=[...t,...s];else if(typeof s=="function"){const n=s(t);r=Array.isArray(n)?n:[n]}else r=t;return Dv(r)}function Lv(e,t){const s={};return t.forEach(r=>{r&&Ul(e,r,s)}),s}function $o(e,t){for(const s of t)s!=null&&s.afterAllSetup&&s.afterAllSetup(e)}function Ul(e,t,s){if(s[t.name]){F&&R.log(`Integration skipped because it was already installed: ${t.name}`);return}if(s[t.name]=t,Vo.indexOf(t.name)===-1&&typeof t.setupOnce=="function"&&(t.setupOnce(),Vo.push(t.name)),t.setup&&typeof t.setup=="function"&&t.setup(e),typeof t.preprocessEvent=="function"){const r=t.preprocessEvent.bind(t);e.on("preprocessEvent",(n,i)=>r(n,i,e))}if(typeof t.processEvent=="function"){const r=t.processEvent.bind(t),n=Object.assign((i,o)=>r(i,o,e),{id:t.name});e.addEventProcessor(n)}F&&R.log(`Integration installed: ${t.name}`)}function Nv(e,t,s){const r=[{type:"client_report"},{timestamp:Us(),discarded_events:e}];return cs(t?{dsn:t}:{},[r])}function Hl(e){const t=[];e.message&&t.push(e.message);try{const s=e.exception.values[e.exception.values.length-1];s!=null&&s.value&&(t.push(s.value),s.type&&t.push(`${s.type}: ${s.value}`))}catch{}return t}function Ov(e){var l;const{trace_id:t,parent_span_id:s,span_id:r,status:n,origin:i,data:o,op:a}=((l=e.contexts)==null?void 0:l.trace)??{};return{data:o??{},description:e.transaction,op:a,parent_span_id:s,span_id:r??"",start_timestamp:e.start_timestamp??0,status:n,timestamp:e.timestamp,trace_id:t??"",origin:i,profile_id:o==null?void 0:o[bi],exclusive_time:o==null?void 0:o[vi],measurements:e.measurements,is_segment:!0}}function Fv(e){return{type:"transaction",timestamp:e.timestamp,start_timestamp:e.start_timestamp,transaction:e.description,contexts:{trace:{trace_id:e.trace_id,span_id:e.span_id,parent_span_id:e.parent_span_id,op:e.op,status:e.status,origin:e.origin,data:{...e.data,...e.profile_id&&{[bi]:e.profile_id},...e.exclusive_time&&{[vi]:e.exclusive_time}}}},measurements:e.measurements}}const Wo="Not capturing exception because it's already been captured.",Qo="Discarded session because of missing or non-string release",Vl=Symbol.for("SentryInternalError"),$l=Symbol.for("SentryDoNotSendEventError");function cr(e){return{message:e,[Vl]:!0}}function ln(e){return{message:e,[$l]:!0}}function Ko(e){return!!e&&typeof e=="object"&&Vl in e}function zo(e){return!!e&&typeof e=="object"&&$l in e}class qv{constructor(t){if(this._options=t,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],t.dsn?this._dsn=Pb(t.dsn):F&&R.warn("No DSN provided, client will not send events."),this._dsn){const s=Tv(this._dsn,t.tunnel,t._metadata?t._metadata.sdk:void 0);this._transport=t.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...t.transportOptions,url:s})}}captureException(t,s,r){const n=Me();if(wo(t))return F&&R.log(Wo),n;const i={event_id:n,...s};return this._process(this.eventFromException(t,i).then(o=>this._captureEvent(o,i,r))),i.event_id}captureMessage(t,s,r,n){const i={event_id:Me(),...r},o=hi(t)?t:String(t),a=pi(t)?this.eventFromMessage(o,s,i):this.eventFromException(t,i);return this._process(a.then(l=>this._captureEvent(l,i,n))),i.event_id}captureEvent(t,s,r){const n=Me();if(s!=null&&s.originalException&&wo(s.originalException))return F&&R.log(Wo),n;const i={event_id:n,...s},o=t.sdkProcessingMetadata||{},a=o.capturedSpanScope,l=o.capturedSpanIsolationScope;return this._process(this._captureEvent(t,i,a||r,l)),i.event_id}captureSession(t){this.sendSession(t),rs(t,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(t){const s=this._transport;return s?(this.emit("flush"),this._isClientDoneProcessing(t).then(r=>s.flush(t).then(n=>r&&n))):Ut(!0)}close(t){return this.flush(t).then(s=>(this.getOptions().enabled=!1,this.emit("close"),s))}getEventProcessors(){return this._eventProcessors}addEventProcessor(t){this._eventProcessors.push(t)}init(){(this._isEnabled()||this._options.integrations.some(({name:t})=>t.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(t){return this._integrations[t]}addIntegration(t){const s=this._integrations[t.name];Ul(this,t,this._integrations),s||$o(this,[t])}sendEvent(t,s={}){this.emit("beforeSendEvent",t,s);let r=Yb(t,this._dsn,this._options._metadata,this._options.tunnel);for(const i of s.attachments||[])r=Bb(r,Vb(i));const n=this.sendEnvelope(r);n&&n.then(i=>this.emit("afterSendEvent",t,i),null)}sendSession(t){const{release:s,environment:r=Si}=this._options;if("aggregates"in t){const i=t.attrs||{};if(!i.release&&!s){F&&R.warn(Qo);return}i.release=i.release||s,i.environment=i.environment||r,t.attrs=i}else{if(!t.release&&!s){F&&R.warn(Qo);return}t.release=t.release||s,t.environment=t.environment||r}this.emit("beforeSendSession",t);const n=Gb(t,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(n)}recordDroppedEvent(t,s,r=1){if(this._options.sendClientReports){const n=`${t}:${s}`;F&&R.log(`Recording outcome: "${n}"${r>1?` (${r} times)`:""}`),this._outcomes[n]=(this._outcomes[n]||0)+r}}on(t,s){const r=this._hooks[t]=this._hooks[t]||[];return r.push(s),()=>{const n=r.indexOf(s);n>-1&&r.splice(n,1)}}emit(t,...s){const r=this._hooks[t];r&&r.forEach(n=>n(...s))}sendEnvelope(t){return this.emit("beforeEnvelope",t),this._isEnabled()&&this._transport?this._transport.send(t).then(null,s=>(F&&R.error("Error while sending envelope:",s),s)):(F&&R.error("Transport disabled"),Ut({}))}_setupIntegrations(){const{integrations:t}=this._options;this._integrations=Lv(this,t),$o(this,t)}_updateSessionFromEvent(t,s){var l;let r=s.level==="fatal",n=!1;const i=(l=s.exception)==null?void 0:l.values;if(i){n=!0;for(const d of i){const u=d.mechanism;if((u==null?void 0:u.handled)===!1){r=!0;break}}}const o=t.status==="ok";(o&&t.errors===0||o&&r)&&(rs(t,{...r&&{status:"crashed"},errors:t.errors||Number(n||r)}),this.captureSession(t))}_isClientDoneProcessing(t){return new Et(s=>{let r=0;const n=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),s(!0)):(r+=n,t&&r>=t&&(clearInterval(i),s(!1)))},n)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(t,s,r,n){const i=this.getOptions(),o=Object.keys(this._integrations);return!s.integrations&&(o!=null&&o.length)&&(s.integrations=o),this.emit("preprocessEvent",t,s),t.type||n.setLastEventId(t.event_id||s.event_id),mv(i,t,s,r,this,n).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,s),a.contexts={trace:lb(r),...a.contexts};const l=Lb(this,r);return a.sdkProcessingMetadata={dynamicSamplingContext:l,...a.sdkProcessingMetadata},a})}_captureEvent(t,s={},r=Ke(),n=ls()){return F&&Mn(t)&&R.log(`Captured error event \`${Hl(t)[0]||"<unknown>"}\``),this._processEvent(t,s,r,n).then(i=>i.event_id,i=>{F&&(zo(i)?R.log(i.message):Ko(i)?R.warn(i.message):R.warn(i))})}_processEvent(t,s,r,n){const i=this.getOptions(),{sampleRate:o}=i,a=Wl(t),l=Mn(t),d=t.type||"error",u=`before send for type \`${d}\``,h=typeof o>"u"?void 0:xi(o);if(l&&typeof h=="number"&&Math.random()>h)return this.recordDroppedEvent("sample_rate","error"),Er(ln(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const b=d==="replay_event"?"replay":d;return this._prepareEvent(t,s,r,n).then(y=>{if(y===null)throw this.recordDroppedEvent("event_processor",b),ln("An event processor returned `null`, will not send event.");if(s.data&&s.data.__sentry__===!0)return y;const L=Bv(this,i,y,s);return Mv(L,u)}).then(y=>{var V;if(y===null){if(this.recordDroppedEvent("before_send",b),a){const W=1+(t.spans||[]).length;this.recordDroppedEvent("before_send","span",W)}throw ln(`${u} returned \`null\`, will not send event.`)}const D=r.getSession()||n.getSession();if(l&&D&&this._updateSessionFromEvent(D,y),a){const U=((V=y.sdkProcessingMetadata)==null?void 0:V.spanCountBeforeProcessing)||0,W=y.spans?y.spans.length:0,z=U-W;z>0&&this.recordDroppedEvent("before_send","span",z)}const L=y.transaction_info;if(a&&L&&y.transaction!==t.transaction){const U="custom";y.transaction_info={...L,source:U}}return this.sendEvent(y,s),y}).then(null,y=>{throw zo(y)||Ko(y)?y:(this.captureException(y,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:y}),cr(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${y}`))})}_process(t){this._numProcessing++,t.then(s=>(this._numProcessing--,s),s=>(this._numProcessing--,s))}_clearOutcomes(){const t=this._outcomes;return this._outcomes={},Object.entries(t).map(([s,r])=>{const[n,i]=s.split(":");return{reason:n,category:i,quantity:r}})}_flushOutcomes(){F&&R.log("Flushing outcomes...");const t=this._clearOutcomes();if(t.length===0){F&&R.log("No outcomes to send");return}if(!this._dsn){F&&R.log("No dsn provided, will not send outcomes");return}F&&R.log("Sending outcomes:",t);const s=Nv(t,this._options.tunnel&&$s(this._dsn));this.sendEnvelope(s)}}function Mv(e,t){const s=`${t} must return \`null\` or a valid event.`;if(Br(e))return e.then(r=>{if(!Ls(r)&&r!==null)throw cr(s);return r},r=>{throw cr(`${t} rejected with ${r}`)});if(!Ls(e)&&e!==null)throw cr(s);return e}function Bv(e,t,s,r){const{beforeSend:n,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:a}=t;let l=s;if(Mn(l)&&n)return n(l,r);if(Wl(l)){if(o||a){const d=Ov(l);if(a!=null&&a.length&&Fn(d,a))return null;if(o){const u=o(d);u?l=Hs(s,Fv(u)):Ln()}if(l.spans){const u=[],h=l.spans;for(const y of h){if(a!=null&&a.length&&Fn(y,a)){Qb(h,y);continue}if(o){const D=o(y);D?u.push(D):(Ln(),u.push(y))}else u.push(y)}const b=l.spans.length-u.length;b&&e.recordDroppedEvent("before_send","span",b),l.spans=u}}if(i){if(l.spans){const d=l.spans.length;l.sdkProcessingMetadata={...s.sdkProcessingMetadata,spanCountBeforeProcessing:d}}return i(l,r)}}return l}function Mn(e){return e.type===void 0}function Wl(e){return e.type==="transaction"}function jv(e){return[{type:"log",item_count:e.length,content_type:"application/vnd.sentry.items.log+json"},{items:e}]}function Uv(e,t,s,r){const n={};return t!=null&&t.sdk&&(n.sdk={name:t.sdk.name,version:t.sdk.version}),s&&r&&(n.dsn=$s(r)),cs(n,[jv(e)])}function cn(e,t){const s=Hv(e)??[];if(s.length===0)return;const r=e.getOptions(),n=Uv(s,r._metadata,r.tunnel,e.getDsn());Ql().set(e,[]),e.emit("flushLogs"),e.sendEnvelope(n)}function Hv(e){return Ql().get(e)}function Ql(){return js("clientToLogBufferMap",()=>new WeakMap)}function Vv(e,t){t.debug===!0&&(F?R.enable():It(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),Ke().update(t.initialScope);const r=new e(t);return $v(r),r.init(),r}function $v(e){Ke().setClient(e)}const Kl=Symbol.for("SentryBufferFullError");function Wv(e){const t=[];function s(){return e===void 0||t.length<e}function r(o){return t.splice(t.indexOf(o),1)[0]||Promise.resolve(void 0)}function n(o){if(!s())return Er(Kl);const a=o();return t.indexOf(a)===-1&&t.push(a),a.then(()=>r(a)).then(null,()=>r(a).then(null,()=>{})),a}function i(o){return new Et((a,l)=>{let d=t.length;if(!d)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);t.forEach(h=>{Ut(h).then(()=>{--d||(clearTimeout(u),a(!0))},l)})})}return{$:t,add:n,drain:i}}const Qv=60*1e3;function Kv(e,t=Date.now()){const s=parseInt(`${e}`,10);if(!isNaN(s))return s*1e3;const r=Date.parse(`${e}`);return isNaN(r)?Qv:r-t}function zv(e,t){return e[t]||e.all||0}function Gv(e,t,s=Date.now()){return zv(e,t)>s}function Yv(e,{statusCode:t,headers:s},r=Date.now()){const n={...e},i=s==null?void 0:s["x-sentry-rate-limits"],o=s==null?void 0:s["retry-after"];if(i)for(const a of i.trim().split(",")){const[l,d,,,u]=a.split(":",5),h=parseInt(l,10),b=(isNaN(h)?60:h)*1e3;if(!d)n.all=r+b;else for(const y of d.split(";"))y==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(n[y]=r+b):n[y]=r+b}else o?n.all=r+Kv(o,r):t===429&&(n.all=r+60*1e3);return n}const Jv=64;function Xv(e,t,s=Wv(e.bufferSize||Jv)){let r={};const n=o=>s.drain(o);function i(o){const a=[];if(Ao(o,(h,b)=>{const y=To(b);Gv(r,y)?e.recordDroppedEvent("ratelimit_backoff",y):a.push(h)}),a.length===0)return Ut({});const l=cs(o[0],a),d=h=>{Ao(l,(b,y)=>{e.recordDroppedEvent(h,To(y))})},u=()=>t({body:jb(l)}).then(h=>(h.statusCode!==void 0&&(h.statusCode<200||h.statusCode>=300)&&F&&R.warn(`Sentry responded with status code ${h.statusCode} to sent event.`),r=Yv(r,h),h),h=>{throw d("network_error"),F&&R.error("Encountered error running transport request:",h),h});return s.add(u).then(h=>h,h=>{if(h===Kl)return F&&R.error("Skipped sending event because buffer is full."),d("queue_overflow"),Ut({});throw h})}return{send:i,flush:n}}function Zv(e){var t;((t=e.user)==null?void 0:t.ip_address)===void 0&&(e.user={...e.user,ip_address:"{{auto}}"})}function ex(e){var t;"aggregates"in e?((t=e.attrs)==null?void 0:t.ip_address)===void 0&&(e.attrs={...e.attrs,ip_address:"{{auto}}"}):e.ipAddress===void 0&&(e.ipAddress="{{auto}}")}function zl(e,t,s=[t],r="npm"){const n=e._metadata||{};n.sdk||(n.sdk={name:`sentry.javascript.${t}`,packages:s.map(i=>({name:`${r}:@sentry/${i}`,version:Mt})),version:Mt}),e._metadata=n}const tx=100;function Ht(e,t){const s=ce(),r=ls();if(!s)return;const{beforeBreadcrumb:n=null,maxBreadcrumbs:i=tx}=s.getOptions();if(i<=0)return;const a={timestamp:Us(),...e},l=n?It(()=>n(a,t)):a;l!==null&&(s.emit&&s.emit("beforeAddBreadcrumb",l,t),r.addBreadcrumb(l,i))}let Go;const sx="FunctionToString",Yo=new WeakMap,rx=()=>({name:sx,setupOnce(){Go=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=yi(this),s=Yo.has(ce())&&t!==void 0?t:this;return Go.apply(s,e)}}catch{}},setup(e){Yo.set(e,!0)}}),nx=rx,ix=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],ox="EventFilters",ax=(e={})=>{let t;return{name:ox,setup(s){const r=s.getOptions();t=Jo(e,r)},processEvent(s,r,n){if(!t){const i=n.getOptions();t=Jo(e,i)}return cx(s,t)?null:s}}},lx=(e={})=>({...ax(e),name:"InboundFilters"});function Jo(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:ix],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[]]}}function cx(e,t){if(e.type){if(e.type==="transaction"&&dx(e,t.ignoreTransactions))return F&&R.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${Nt(e)}`),!0}else{if(ux(e,t.ignoreErrors))return F&&R.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${Nt(e)}`),!0;if(mx(e))return F&&R.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${Nt(e)}`),!0;if(fx(e,t.denyUrls))return F&&R.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${Nt(e)}.
Url: ${kr(e)}`),!0;if(!hx(e,t.allowUrls))return F&&R.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${Nt(e)}.
Url: ${kr(e)}`),!0}return!1}function ux(e,t){return t!=null&&t.length?Hl(e).some(s=>jr(s,t)):!1}function dx(e,t){if(!(t!=null&&t.length))return!1;const s=e.transaction;return s?jr(s,t):!1}function fx(e,t){if(!(t!=null&&t.length))return!1;const s=kr(e);return s?jr(s,t):!1}function hx(e,t){if(!(t!=null&&t.length))return!0;const s=kr(e);return s?jr(s,t):!0}function px(e=[]){for(let t=e.length-1;t>=0;t--){const s=e[t];if(s&&s.filename!=="<anonymous>"&&s.filename!=="[native code]")return s.filename||null}return null}function kr(e){var t,s;try{const r=[...((t=e.exception)==null?void 0:t.values)??[]].reverse().find(i=>{var o,a,l;return((o=i.mechanism)==null?void 0:o.parent_id)===void 0&&((l=(a=i.stacktrace)==null?void 0:a.frames)==null?void 0:l.length)}),n=(s=r==null?void 0:r.stacktrace)==null?void 0:s.frames;return n?px(n):null}catch{return F&&R.error(`Cannot extract url for event ${Nt(e)}`),null}}function mx(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)!=null&&s.length?!e.message&&!e.exception.values.some(r=>r.stacktrace||r.type&&r.type!=="Error"||r.value):!1}function gx(e,t,s,r,n,i){var a;if(!((a=n.exception)!=null&&a.values)||!i||!St(i.originalException,Error))return;const o=n.exception.values.length>0?n.exception.values[n.exception.values.length-1]:void 0;o&&(n.exception.values=Bn(e,t,r,i.originalException,s,n.exception.values,o,0))}function Bn(e,t,s,r,n,i,o,a){if(i.length>=s+1)return i;let l=[...i];if(St(r[n],Error)){Xo(o,a);const d=e(t,r[n]),u=l.length;Zo(d,n,u,a),l=Bn(e,t,s,r[n],n,[d,...l],d,u)}return Array.isArray(r.errors)&&r.errors.forEach((d,u)=>{if(St(d,Error)){Xo(o,a);const h=e(t,d),b=l.length;Zo(h,`errors[${u}]`,b,a),l=Bn(e,t,s,d,n,[h,...l],h,b)}}),l}function Xo(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,...e.type==="AggregateError"&&{is_exception_group:!0},exception_id:t}}function Zo(e,t,s,r){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:s,parent_id:r}}function yx(e){const t="console";$t(t,e),Wt(t,_x)}function _x(){"console"in J&&P_.forEach(function(e){e in J.console&&Oe(J.console,e,function(t){return _r[e]=t,function(...s){Qe("console",{args:s,level:e});const n=_r[e];n==null||n.apply(J.console,s)}})})}function bx(e){return e==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(e)?e:"log"}const vx="Dedupe",xx=()=>{let e;return{name:vx,processEvent(t){if(t.type)return t;try{if(Sx(t,e))return F&&R.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return e=t}}},wx=xx;function Sx(e,t){return t?!!(Ex(e,t)||kx(e,t)):!1}function Ex(e,t){const s=e.message,r=t.message;return!(!s&&!r||s&&!r||!s&&r||s!==r||!Yl(e,t)||!Gl(e,t))}function kx(e,t){const s=ea(t),r=ea(e);return!(!s||!r||s.type!==r.type||s.value!==r.value||!Yl(e,t)||!Gl(e,t))}function Gl(e,t){let s=go(e),r=go(t);if(!s&&!r)return!0;if(s&&!r||!s&&r||(s=s,r=r,r.length!==s.length))return!1;for(let n=0;n<r.length;n++){const i=r[n],o=s[n];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function Yl(e,t){let s=e.fingerprint,r=t.fingerprint;if(!s&&!r)return!0;if(s&&!r||!s&&r)return!1;s=s,r=r;try{return s.join("")===r.join("")}catch{return!1}}function ea(e){var t,s;return(s=(t=e.exception)==null?void 0:t.values)==null?void 0:s[0]}function un(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const s=t[6]||"",r=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:s,hash:r,relative:t[5]+s+r}}function Jl(e){if(e!==void 0)return e>=400&&e<500?"warning":e>=500?"error":void 0}const Fs=J;function Px(){return"history"in Fs&&!!Fs.history}function Cx(){if(!("fetch"in Fs))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function jn(e){return e&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function Ix(){var s;if(typeof EdgeRuntime=="string")return!0;if(!Cx())return!1;if(jn(Fs.fetch))return!0;let e=!1;const t=Fs.document;if(t&&typeof t.createElement=="function")try{const r=t.createElement("iframe");r.hidden=!0,t.head.appendChild(r),(s=r.contentWindow)!=null&&s.fetch&&(e=jn(r.contentWindow.fetch)),t.head.removeChild(r)}catch(r){F&&R.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",r)}return e}function Ax(e,t){const s="fetch";$t(s,e),Wt(s,()=>Tx(void 0,t))}function Tx(e,t=!1){t&&!Ix()||Oe(J,"fetch",function(s){return function(...r){const n=new Error,{method:i,url:o}=Dx(r),a={args:r,fetchData:{method:i,url:o},startTimestamp:Ce()*1e3,virtualError:n,headers:Rx(r)};return Qe("fetch",{...a}),s.apply(J,r).then(async l=>(Qe("fetch",{...a,endTimestamp:Ce()*1e3,response:l}),l),l=>{if(Qe("fetch",{...a,endTimestamp:Ce()*1e3,error:l}),fi(l)&&l.stack===void 0&&(l.stack=n.stack,Ue(l,"framesToPop",1)),l instanceof TypeError&&(l.message==="Failed to fetch"||l.message==="Load failed"||l.message==="NetworkError when attempting to fetch resource."))try{const d=new URL(a.fetchData.url);l.message=`${l.message} (${d.host})`}catch{}throw l})}})}function Un(e,t){return!!e&&typeof e=="object"&&!!e[t]}function ta(e){return typeof e=="string"?e:e?Un(e,"url")?e.url:e.toString?e.toString():"":""}function Dx(e){if(e.length===0)return{method:"GET",url:""};if(e.length===2){const[s,r]=e;return{url:ta(s),method:Un(r,"method")?String(r.method).toUpperCase():"GET"}}const t=e[0];return{url:ta(t),method:Un(t,"method")?String(t.method).toUpperCase():"GET"}}function Rx(e){const[t,s]=e;try{if(typeof s=="object"&&s!==null&&"headers"in s&&s.headers)return new Headers(s.headers);if(V_(t))return new Headers(t.headers)}catch{}}function Lx(){return"npm"}const oe=J;let Hn=0;function Xl(){return Hn>0}function Nx(){Hn++,setTimeout(()=>{Hn--})}function is(e,t={}){function s(n){return typeof n=="function"}if(!s(e))return e;try{const n=e.__sentry_wrapped__;if(n)return typeof n=="function"?n:e;if(yi(e))return e}catch{return e}const r=function(...n){try{const i=n.map(o=>is(o,t));return e.apply(this,i)}catch(i){throw Nx(),_i(o=>{o.addEventProcessor(a=>(t.mechanism&&(In(a,void 0),ss(a,t.mechanism)),a.extra={...a.extra,arguments:n},a)),ql(i)}),i}};try{for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n])}catch{}bl(r,e),Ue(e,"__sentry_wrapped__",r);try{Object.getOwnPropertyDescriptor(r,"name").configurable&&Object.defineProperty(r,"name",{get(){return e.name}})}catch{}return r}function Ox(){const e=gi(),{referrer:t}=oe.document||{},{userAgent:s}=oe.navigator||{},r={...t&&{Referer:t},...s&&{"User-Agent":s}};return{url:e,headers:r}}function Pi(e,t){const s=Ci(e,t),r={type:jx(t),value:Ux(t)};return s.length&&(r.stacktrace={frames:s}),r.type===void 0&&r.value===""&&(r.value="Unrecoverable error caught"),r}function Fx(e,t,s,r){const n=ce(),i=n==null?void 0:n.getOptions().normalizeDepth,o=Qx(t),a={__serialized__:Ll(t,i)};if(o)return{exception:{values:[Pi(e,o)]},extra:a};const l={exception:{values:[{type:Mr(t)?t.constructor.name:r?"UnhandledRejection":"Error",value:$x(t,{isUnhandledRejection:r})}]},extra:a};if(s){const d=Ci(e,s);d.length&&(l.exception.values[0].stacktrace={frames:d})}return l}function dn(e,t){return{exception:{values:[Pi(e,t)]}}}function Ci(e,t){const s=t.stacktrace||t.stack||"",r=Mx(t),n=Bx(t);try{return e(s,r,n)}catch{}return[]}const qx=/Minified React error #\d+;/i;function Mx(e){return e&&qx.test(e.message)?1:0}function Bx(e){return typeof e.framesToPop=="number"?e.framesToPop:0}function Zl(e){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?e instanceof WebAssembly.Exception:!1}function jx(e){const t=e==null?void 0:e.name;return!t&&Zl(e)?e.message&&Array.isArray(e.message)&&e.message.length==2?e.message[0]:"WebAssembly.Exception":t}function Ux(e){const t=e==null?void 0:e.message;return Zl(e)?Array.isArray(e.message)&&e.message.length==2?e.message[1]:"wasm exception":t?t.error&&typeof t.error.message=="string"?t.error.message:t:"No error message"}function Hx(e,t,s,r){const n=(s==null?void 0:s.syntheticException)||void 0,i=Ii(e,t,n,r);return ss(i),i.level="error",s!=null&&s.event_id&&(i.event_id=s.event_id),Ut(i)}function Vx(e,t,s="info",r,n){const i=(r==null?void 0:r.syntheticException)||void 0,o=Vn(e,t,i,n);return o.level=s,r!=null&&r.event_id&&(o.event_id=r.event_id),Ut(o)}function Ii(e,t,s,r,n){let i;if(gl(t)&&t.error)return dn(e,t.error);if(_o(t)||B_(t)){const o=t;if("stack"in t)i=dn(e,t);else{const a=o.name||(_o(o)?"DOMError":"DOMException"),l=o.message?`${a}: ${o.message}`:a;i=Vn(e,l,s,r),In(i,l)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return fi(t)?dn(e,t):Ls(t)||Mr(t)?(i=Fx(e,t,s,n),ss(i,{synthetic:!0}),i):(i=Vn(e,t,s,r),In(i,`${t}`),ss(i,{synthetic:!0}),i)}function Vn(e,t,s,r){const n={};if(r&&s){const i=Ci(e,s);i.length&&(n.exception={values:[{value:t,stacktrace:{frames:i}}]}),ss(n,{synthetic:!0})}if(hi(t)){const{__sentry_template_string__:i,__sentry_template_values__:o}=t;return n.logentry={message:i,params:o},n}return n.message=t,n}function $x(e,{isUnhandledRejection:t}){const s=K_(e),r=t?"promise rejection":"exception";return gl(e)?`Event \`ErrorEvent\` captured as ${r} with message \`${e.message}\``:Mr(e)?`Event \`${Wx(e)}\` (type=${e.type}) captured as ${r}`:`Object captured as ${r} with keys: ${s}`}function Wx(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch{}}function Qx(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t)){const s=e[t];if(s instanceof Error)return s}}const Kx=5e3;class zx extends qv{constructor(t){const s=Gx(t),r=oe.SENTRY_SDK_SOURCE||Lx();zl(s,"browser",["browser"],r),super(s);const{sendDefaultPii:n,sendClientReports:i,enableLogs:o}=this._options;oe.document&&(i||o)&&oe.document.addEventListener("visibilitychange",()=>{oe.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&cn(this))}),o&&(this.on("flush",()=>{cn(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{cn(this)},Kx)})),n&&(this.on("postprocessEvent",Zv),this.on("beforeSendSession",ex))}eventFromException(t,s){return Hx(this._options.stackParser,t,s,this._options.attachStacktrace)}eventFromMessage(t,s="info",r){return Vx(this._options.stackParser,t,s,r,this._options.attachStacktrace)}_prepareEvent(t,s,r,n){return t.platform=t.platform||"javascript",super._prepareEvent(t,s,r,n)}}function Gx(e){var t;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(t=oe.SENTRY_RELEASE)==null?void 0:t.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...e}}const Yx=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,be=J,Jx=1e3;let sa,$n,Wn;function Xx(e){const t="dom";$t(t,e),Wt(t,Zx)}function Zx(){if(!be.document)return;const e=Qe.bind(null,"dom"),t=ra(e,!0);be.document.addEventListener("click",t,!1),be.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(s=>{var i,o;const n=(i=be[s])==null?void 0:i.prototype;(o=n==null?void 0:n.hasOwnProperty)!=null&&o.call(n,"addEventListener")&&(Oe(n,"addEventListener",function(a){return function(l,d,u){if(l==="click"||l=="keypress")try{const h=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},b=h[l]=h[l]||{refCount:0};if(!b.handler){const y=ra(e);b.handler=y,a.call(this,l,y,u)}b.refCount++}catch{}return a.call(this,l,d,u)}}),Oe(n,"removeEventListener",function(a){return function(l,d,u){if(l==="click"||l=="keypress")try{const h=this.__sentry_instrumentation_handlers__||{},b=h[l];b&&(b.refCount--,b.refCount<=0&&(a.call(this,l,b.handler,u),b.handler=void 0,delete h[l]),Object.keys(h).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,l,d,u)}}))})}function e1(e){if(e.type!==$n)return!1;try{if(!e.target||e.target._sentryId!==Wn)return!1}catch{}return!0}function t1(e,t){return e!=="keypress"?!1:t!=null&&t.tagName?!(t.tagName==="INPUT"||t.tagName==="TEXTAREA"||t.isContentEditable):!0}function ra(e,t=!1){return s=>{if(!s||s._sentryCaptured)return;const r=s1(s);if(t1(s.type,r))return;Ue(s,"_sentryCaptured",!0),r&&!r._sentryId&&Ue(r,"_sentryId",Me());const n=s.type==="keypress"?"input":s.type;e1(s)||(e({event:s,name:n,global:t}),$n=s.type,Wn=r?r._sentryId:void 0),clearTimeout(sa),sa=be.setTimeout(()=>{Wn=void 0,$n=void 0},Jx)}}function s1(e){try{return e.target}catch{return null}}let er;function ec(e){const t="history";$t(t,e),Wt(t,r1)}function r1(){if(be.addEventListener("popstate",()=>{const t=be.location.href,s=er;if(er=t,s===t)return;Qe("history",{from:s,to:t})}),!Px())return;function e(t){return function(...s){const r=s.length>2?s[2]:void 0;if(r){const n=er,i=n1(String(r));if(er=i,n===i)return t.apply(this,s);Qe("history",{from:n,to:i})}return t.apply(this,s)}}Oe(be.history,"pushState",e),Oe(be.history,"replaceState",e)}function n1(e){try{return new URL(e,be.location.origin).toString()}catch{return e}}const ur={};function i1(e){const t=ur[e];if(t)return t;let s=be[e];if(jn(s))return ur[e]=s.bind(be);const r=be.document;if(r&&typeof r.createElement=="function")try{const n=r.createElement("iframe");n.hidden=!0,r.head.appendChild(n);const i=n.contentWindow;i!=null&&i[e]&&(s=i[e]),r.head.removeChild(n)}catch(n){Yx&&R.warn(`Could not create sandbox iframe for ${e} check, bailing to window.${e}: `,n)}return s&&(ur[e]=s.bind(be))}function na(e){ur[e]=void 0}const ys="__sentry_xhr_v3__";function o1(e){const t="xhr";$t(t,e),Wt(t,a1)}function a1(){if(!be.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;e.open=new Proxy(e.open,{apply(t,s,r){const n=new Error,i=Ce()*1e3,o=ht(r[0])?r[0].toUpperCase():void 0,a=l1(r[1]);if(!o||!a)return t.apply(s,r);s[ys]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(s.__sentry_own_request__=!0);const l=()=>{const d=s[ys];if(d&&s.readyState===4){try{d.status_code=s.status}catch{}const u={endTimestamp:Ce()*1e3,startTimestamp:i,xhr:s,virtualError:n};Qe("xhr",u)}};return"onreadystatechange"in s&&typeof s.onreadystatechange=="function"?s.onreadystatechange=new Proxy(s.onreadystatechange,{apply(d,u,h){return l(),d.apply(u,h)}}):s.addEventListener("readystatechange",l),s.setRequestHeader=new Proxy(s.setRequestHeader,{apply(d,u,h){const[b,y]=h,D=u[ys];return D&&ht(b)&&ht(y)&&(D.request_headers[b.toLowerCase()]=y),d.apply(u,h)}}),t.apply(s,r)}}),e.send=new Proxy(e.send,{apply(t,s,r){const n=s[ys];if(!n)return t.apply(s,r);r[0]!==void 0&&(n.body=r[0]);const i={startTimestamp:Ce()*1e3,xhr:s};return Qe("xhr",i),t.apply(s,r)}})}function l1(e){if(ht(e))return e;try{return e.toString()}catch{}}function c1(e,t=i1("fetch")){let s=0,r=0;function n(i){const o=i.body.length;s+=o,r++;const a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:e.headers,keepalive:s<=6e4&&r<15,...e.fetchOptions};if(!t)return na("fetch"),Er("No fetch implementation available");try{return t(e.url,a).then(l=>(s-=o,r--,{statusCode:l.status,headers:{"x-sentry-rate-limits":l.headers.get("X-Sentry-Rate-Limits"),"retry-after":l.headers.get("Retry-After")}}))}catch(l){return na("fetch"),s-=o,r--,Er(l)}}return Xv(e,n)}const u1=30,d1=50;function Qn(e,t,s,r){const n={filename:e,function:t==="<anonymous>"?jt:t,in_app:!0};return s!==void 0&&(n.lineno=s),r!==void 0&&(n.colno=r),n}const f1=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,h1=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,p1=/\((\S*)(?::(\d+))(?::(\d+))\)/,m1=/at (.+?) ?\(data:(.+?),/,g1=e=>{const t=e.match(m1);if(t)return{filename:`<data:${t[2]}>`,function:t[1]};const s=f1.exec(e);if(s){const[,n,i,o]=s;return Qn(n,jt,+i,+o)}const r=h1.exec(e);if(r){if(r[2]&&r[2].indexOf("eval")===0){const a=p1.exec(r[2]);a&&(r[2]=a[1],r[3]=a[2],r[4]=a[3])}const[i,o]=tc(r[1]||jt,r[2]);return Qn(o,i,r[3]?+r[3]:void 0,r[4]?+r[4]:void 0)}},y1=[u1,g1],_1=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,b1=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,v1=e=>{const t=_1.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const i=b1.exec(t[3]);i&&(t[1]=t[1]||"eval",t[3]=i[1],t[4]=i[2],t[5]="")}let r=t[3],n=t[1]||jt;return[n,r]=tc(n,r),Qn(r,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}},x1=[d1,v1],w1=[y1,x1],S1=pl(...w1),tc=(e,t)=>{const s=e.indexOf("safari-extension")!==-1,r=e.indexOf("safari-web-extension")!==-1;return s||r?[e.indexOf("@")!==-1?e.split("@")[0]:jt,s?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},Vr=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,tr=1024,E1="Breadcrumbs",k1=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:E1,setup(s){t.console&&yx(A1(s)),t.dom&&Xx(I1(s,t.dom)),t.xhr&&o1(T1(s)),t.fetch&&Ax(D1(s)),t.history&&ec(R1(s)),t.sentry&&s.on("beforeSendEvent",C1(s))}}},P1=k1;function C1(e){return function(s){ce()===e&&Ht({category:`sentry.${s.type==="transaction"?"transaction":"event"}`,event_id:s.event_id,level:s.level,message:Nt(s)},{event:s})}}function I1(e,t){return function(r){if(ce()!==e)return;let n,i,o=typeof t=="object"?t.serializeAttribute:void 0,a=typeof t=="object"&&typeof t.maxStringLength=="number"?t.maxStringLength:void 0;a&&a>tr&&(Vr&&R.warn(`\`dom.maxStringLength\` cannot exceed ${tr}, but a value of ${a} was configured. Sentry will use ${tr} instead.`),a=tr),typeof o=="string"&&(o=[o]);try{const d=r.event,u=L1(d)?d.target:d;n=_l(u,{keyAttrs:o,maxStringLength:a}),i=Q_(u)}catch{n="<unknown>"}if(n.length===0)return;const l={category:`ui.${r.name}`,message:n};i&&(l.data={"ui.component_name":i}),Ht(l,{event:r.event,name:r.name,global:r.global})}}function A1(e){return function(s){if(ce()!==e)return;const r={category:"console",data:{arguments:s.args,logger:"console"},level:bx(s.level),message:bo(s.args," ")};if(s.level==="assert")if(s.args[0]===!1)r.message=`Assertion failed: ${bo(s.args.slice(1)," ")||"console.assert"}`,r.data.arguments=s.args.slice(1);else return;Ht(r,{input:s.args,level:s.level})}}function T1(e){return function(s){if(ce()!==e)return;const{startTimestamp:r,endTimestamp:n}=s,i=s.xhr[ys];if(!r||!n||!i)return;const{method:o,url:a,status_code:l,body:d}=i,u={method:o,url:a,status_code:l},h={xhr:s.xhr,input:d,startTimestamp:r,endTimestamp:n},b={category:"xhr",data:u,type:"http",level:Jl(l)};e.emit("beforeOutgoingRequestBreadcrumb",b,h),Ht(b,h)}}function D1(e){return function(s){if(ce()!==e)return;const{startTimestamp:r,endTimestamp:n}=s;if(n&&!(s.fetchData.url.match(/sentry_key/)&&s.fetchData.method==="POST"))if(s.fetchData.method,s.fetchData.url,s.error){const i=s.fetchData,o={data:s.error,input:s.args,startTimestamp:r,endTimestamp:n},a={category:"fetch",data:i,level:"error",type:"http"};e.emit("beforeOutgoingRequestBreadcrumb",a,o),Ht(a,o)}else{const i=s.response,o={...s.fetchData,status_code:i==null?void 0:i.status};s.fetchData.request_body_size,s.fetchData.response_body_size,i==null||i.status;const a={input:s.args,response:i,startTimestamp:r,endTimestamp:n},l={category:"fetch",data:o,type:"http",level:Jl(o.status_code)};e.emit("beforeOutgoingRequestBreadcrumb",l,a),Ht(l,a)}}}function R1(e){return function(s){if(ce()!==e)return;let r=s.from,n=s.to;const i=un(oe.location.href);let o=r?un(r):void 0;const a=un(n);o!=null&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(n=a.relative),i.protocol===o.protocol&&i.host===o.host&&(r=o.relative),Ht({category:"navigation",data:{from:r,to:n}})}}function L1(e){return!!e&&!!e.target}const N1=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],O1="BrowserApiErrors",F1=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...e};return{name:O1,setupOnce(){t.setTimeout&&Oe(oe,"setTimeout",ia),t.setInterval&&Oe(oe,"setInterval",ia),t.requestAnimationFrame&&Oe(oe,"requestAnimationFrame",M1),t.XMLHttpRequest&&"XMLHttpRequest"in oe&&Oe(XMLHttpRequest.prototype,"send",B1);const s=t.eventTarget;s&&(Array.isArray(s)?s:N1).forEach(n=>j1(n,t))}}},q1=F1;function ia(e){return function(...t){const s=t[0];return t[0]=is(s,{mechanism:{data:{function:wt(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function M1(e){return function(t){return e.apply(this,[is(t,{mechanism:{data:{function:"requestAnimationFrame",handler:wt(e)},handled:!1,type:"instrument"}})])}}function B1(e){return function(...t){const s=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(n=>{n in s&&typeof s[n]=="function"&&Oe(s,n,function(i){const o={mechanism:{data:{function:n,handler:wt(i)},handled:!1,type:"instrument"}},a=yi(i);return a&&(o.mechanism.data.handler=wt(a)),is(i,o)})}),e.apply(this,t)}}function j1(e,t){var n,i;const r=(n=oe[e])==null?void 0:n.prototype;(i=r==null?void 0:r.hasOwnProperty)!=null&&i.call(r,"addEventListener")&&(Oe(r,"addEventListener",function(o){return function(a,l,d){try{U1(l)&&(l.handleEvent=is(l.handleEvent,{mechanism:{data:{function:"handleEvent",handler:wt(l),target:e},handled:!1,type:"instrument"}}))}catch{}return t.unregisterOriginalCallbacks&&H1(this,a,l),o.apply(this,[a,is(l,{mechanism:{data:{function:"addEventListener",handler:wt(l),target:e},handled:!1,type:"instrument"}}),d])}}),Oe(r,"removeEventListener",function(o){return function(a,l,d){try{const u=l.__sentry_wrapped__;u&&o.call(this,a,u,d)}catch{}return o.call(this,a,l,d)}}))}function U1(e){return typeof e.handleEvent=="function"}function H1(e,t,s){e&&typeof e=="object"&&"removeEventListener"in e&&typeof e.removeEventListener=="function"&&e.removeEventListener(t,s)}const V1=()=>({name:"BrowserSession",setupOnce(){if(typeof oe.document>"u"){Vr&&R.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}Uo({ignoreDuration:!0}),Ho(),ec(({from:e,to:t})=>{e!==void 0&&e!==t&&(Uo({ignoreDuration:!0}),Ho())})}}),$1="GlobalHandlers",W1=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:$1,setupOnce(){Error.stackTraceLimit=50},setup(s){t.onerror&&(K1(s),oa("onerror")),t.onunhandledrejection&&(z1(s),oa("onunhandledrejection"))}}},Q1=W1;function K1(e){O_(t=>{const{stackParser:s,attachStacktrace:r}=sc();if(ce()!==e||Xl())return;const{msg:n,url:i,line:o,column:a,error:l}=t,d=J1(Ii(s,l||n,void 0,r,!1),i,o,a);d.level="error",Ml(d,{originalException:l,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function z1(e){q_(t=>{const{stackParser:s,attachStacktrace:r}=sc();if(ce()!==e||Xl())return;const n=G1(t),i=pi(n)?Y1(n):Ii(s,n,void 0,r,!0);i.level="error",Ml(i,{originalException:n,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function G1(e){if(pi(e))return e;try{if("reason"in e)return e.reason;if("detail"in e&&"reason"in e.detail)return e.detail.reason}catch{}return e}function Y1(e){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(e)}`}]}}}function J1(e,t,s,r){const n=e.exception=e.exception||{},i=n.values=n.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},l=a.frames=a.frames||[],d=r,u=s,h=X1(t)??gi();return l.length===0&&l.push({colno:d,filename:h,function:jt,in_app:!0,lineno:u}),e}function oa(e){Vr&&R.log(`Global Handler attached: ${e}`)}function sc(){const e=ce();return(e==null?void 0:e.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function X1(e){if(!(!ht(e)||e.length===0)){if(e.startsWith("data:")){const t=e.match(/^data:([^;]+)/),s=t?t[1]:"text/javascript",r=e.includes("base64,");return`<data:${s}${r?",base64":""}>`}return e.slice(0,1024)}}const Z1=()=>({name:"HttpContext",preprocessEvent(e){var r;if(!oe.navigator&&!oe.location&&!oe.document)return;const t=Ox(),s={...t.headers,...(r=e.request)==null?void 0:r.headers};e.request={...t,...e.request,headers:s}}}),ew="cause",tw=5,sw="LinkedErrors",rw=(e={})=>{const t=e.limit||tw,s=e.key||ew;return{name:sw,preprocessEvent(r,n,i){const o=i.getOptions();gx(Pi,o.stackParser,s,t,r,n)}}},nw=rw;function iw(){return ow()?(Vr&&It(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function ow(){var i;if(typeof oe.window>"u")return!1;const e=oe;if(e.nw)return!1;const t=e.chrome||e.browser;if(!((i=t==null?void 0:t.runtime)!=null&&i.id))return!1;const s=gi(),r=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(oe===oe.top&&r.some(o=>s.startsWith(`${o}://`)))}function rc(e){return[lx(),nx(),q1(),P1(),Q1(),nw(),wx(),Z1(),V1()]}function aw(e={}){const t=!e.skipBrowserExtensionCheck&&iw(),s={...e,enabled:t?!1:e.enabled,stackParser:L_(e.stackParser||S1),integrations:Rv({integrations:e.integrations,defaultIntegrations:e.defaultIntegrations==null?rc():e.defaultIntegrations}),transport:e.transport||c1};return Vv(zx,s)}const nc=["activate","mount"],ic=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,lw=/(?:^|[-_])(\w)/g,cw=e=>e.replace(lw,t=>t.toUpperCase()).replace(/[-_]/g,""),uw="<Root>",fn="<Anonymous>",dw=(e,t)=>e.repeat(t),Cs=(e,t)=>{if(!e)return fn;if(e.$root===e)return uw;if(!e.$options)return fn;const s=e.$options;let r=s.name||s._componentTag||s.__name;const n=s.__file;if(!r&&n){const i=n.match(/([^/\\]+)\.vue$/);i&&(r=i[1])}return(r?`<${cw(r)}>`:fn)+(n&&t!==!1?` at ${n}`:"")},fw=e=>{if(e&&(e._isVue||e.__isVue)&&e.$parent){const t=[];let s=0;for(;e;){if(t.length>0){const n=t[t.length-1];if(n.constructor===e.constructor){s++,e=e.$parent;continue}else s>0&&(t[t.length-1]=[n,s],s=0)}t.push(e),e=e.$parent}return`

found in

${t.map((n,i)=>`${(i===0?"---> ":dw(" ",5+i*2))+(Array.isArray(n)?`${Cs(n[0])}... (${n[1]} recursive calls)`:Cs(n))}`).join(`
`)}`}return`

(found in ${Cs(e)})`},hw=(e,t)=>{const{errorHandler:s}=e.config;e.config.errorHandler=(r,n,i)=>{var d;const o=Cs(n,!1),a=n?fw(n):"",l={componentName:o,lifecycleHook:i,trace:a};if(t.attachProps&&n&&((d=n.$options)!=null&&d.propsData?l.propsData=n.$options.propsData:n.$props&&(l.propsData=n.$props)),setTimeout(()=>{ql(r,{captureContext:{contexts:{vue:l}},mechanism:{handled:!!s,type:"vue"}})}),typeof s=="function"&&e.config.errorHandler)s.call(e,r,n,i);else throw r}},aa="ui.vue",pw={activate:["activated","deactivated"],create:["beforeCreate","created"],unmount:["beforeUnmount","unmounted"],destroy:["beforeDestroy","destroyed"],mount:["beforeMount","mounted"],update:["beforeUpdate","updated"]};function hn(e,t,s){e.$_sentryRootComponentSpanTimer&&clearTimeout(e.$_sentryRootComponentSpanTimer),e.$_sentryRootComponentSpanTimer=setTimeout(()=>{var r;(r=e.$root)!=null&&r.$_sentryRootComponentSpan&&(e.$root.$_sentryRootComponentSpan.end(t),e.$root.$_sentryRootComponentSpan=void 0)},s)}function mw(e,t){function s(n){return n.replace(/^<([^\s]*)>(?: at [^\s]*)?$/,"$1")}return e.some(n=>s(t)===s(n))}const gw=(e={})=>{const t=(e.hooks||[]).concat(nc).filter((n,i,o)=>o.indexOf(n)===i),s={},r=e.timeout||2e3;for(const n of t){const i=pw[n];if(!i){ic&&R.warn(`Unknown hook: ${n}`);continue}for(const o of i)s[o]=function(){var b;const a=this.$root===this;a&&(this.$_sentryRootComponentSpan=this.$_sentryRootComponentSpan||Oo({name:"Application Render",op:`${aa}.render`,attributes:{[Ns]:"auto.ui.vue"},onlyIfParent:!0}),hn(this,Ce(),r));const l=Cs(this,!1);if(!(a||(Array.isArray(e.trackComponents)?mw(e.trackComponents,l):e.trackComponents))){hn(this,Ce(),r);return}this.$_sentryComponentSpans=this.$_sentryComponentSpans||{};const u=o===i[0],h=((b=this.$root)==null?void 0:b.$_sentryRootComponentSpan)||Rb();if(u){if(h){const y=this.$_sentryComponentSpans[n];y&&y.end(),this.$_sentryComponentSpans[n]=Oo({name:`Vue ${l}`,op:`${aa}.${n}`,attributes:{[Ns]:"auto.ui.vue"},onlyIfParent:!0})}}else{const y=this.$_sentryComponentSpans[n];if(!y)return;y.end(),hn(this,Ce(),r)}}}return s},yw=J,_w={Vue:yw.Vue,attachProps:!0,attachErrorHandler:!0,tracingOptions:{hooks:nc,timeout:2e3,trackComponents:!1}},bw="Vue",vw=(e={})=>({name:bw,setup(t){const s={..._w,...t.getOptions(),...e};if(!s.Vue&&!s.app){It(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue specific errors will not be captured. Update your `Sentry.init` call with an appropriate config option: `app` (Application Instance - Vue 3) or `Vue` (Vue Constructor - Vue 2).")});return}s.app?(Array.isArray(s.app)?s.app:[s.app]).forEach(n=>la(n,s)):s.Vue&&la(s.Vue,s)}}),la=(e,t)=>{var s;ic&&((s=e._instance)==null?void 0:s.isMounted)===!0&&It(()=>{console.warn("[@sentry/vue]: Misconfigured SDK. Vue app is already mounted. Make sure to call `app.mount()` after `Sentry.init()`.")}),t.attachErrorHandler&&hw(e,t),Hr(t)&&e.mixin(gw(t.tracingOptions))};function xw(e={}){const t={defaultIntegrations:[...rc(),vw()],...e};return zl(t,"vue"),aw(t)}const oc=Rd(k_);xw({app:oc,dsn:"https://3115bfd7236aa90bd81024a1fdb8c823@o4509821219700736.ingest.de.sentry.io/4509821222518864",sendDefaultPii:!0});oc.mount("#app");export{Vt as A,Y as a};
